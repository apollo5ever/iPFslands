/*! For license information please see main.88793f33.js.LICENSE.txt */
(function(){var __webpack_modules__={9361:function(e,t,r){"use strict";var n=r(7061).default,a=r(8416).default,i=r(7156).default,s="undefined"!==typeof BigUint64Array,o=Symbol(),u=1024;function c(e,t){var r=new Uint32Array(e),n=new Uint16Array(e),a=r[t+-4>>>2]>>>1,i=t>>>1;if(a<=u)return String.fromCharCode.apply(String,n.subarray(i,i+a));var s=[];do{var o=n[i+u-1],c=o>=55296&&o<56320?1023:u;s.push(String.fromCharCode.apply(String,n.subarray(i,i+=c))),a-=c}while(a>u);return s.join("")+String.fromCharCode.apply(String,n.subarray(i,i+a))}function l(e){var t={};function r(e,t){return e?c(e.buffer,t):"<yet unknown>"}var n=e.env=e.env||{};return n.abort=n.abort||function(e,a,i,s){var o=t.memory||n.memory;throw Error("abort: "+r(o,e)+" at "+r(o,a)+":"+i+":"+s)},n.trace=n.trace||function(e,a){var i=t.memory||n.memory;console.log("trace: "+r(i,e)+(a?" ":"")+Array.prototype.slice.call(arguments,2,2+a).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function f(e,t){var r=t.exports,n=r.memory,a=r.table,i=r.__alloc,o=r.__retain,u=r.__rtti_base||-1;function l(e){var t=new Uint32Array(n.buffer);if((e>>>=0)>=t[u>>>2])throw Error("invalid id: "+e);return t[(u+4>>>2)+2*e]}function f(e){var t=new Uint32Array(n.buffer);if((e>>>=0)>=t[u>>>2])throw Error("invalid id: "+e);return t[(u+4>>>2)+2*e+1]}function p(e){return 31-Math.clz32(e>>>5&31)}function h(e,t,r){var a=n.buffer;if(r)switch(e){case 2:return new Float32Array(a);case 3:return new Float64Array(a)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(a);case 1:return new(t?Int16Array:Uint16Array)(a);case 2:return new(t?Int32Array:Uint32Array)(a);case 3:return new(t?BigInt64Array:BigUint64Array)(a)}throw Error("unsupported align: "+e)}function d(e){var t=new Uint32Array(n.buffer),r=t[e+-8>>>2],a=l(r);if(!(1&a))throw Error("not an array: "+r);var i=p(a),s=t[e+4>>>2],o=2&a?t[e+12>>>2]:t[s+-4>>>2]>>>i;return h(i,1024&a,2048&a).subarray(s>>>=i,s+o)}function v(e,t,r){return new e(y(e,t,r))}function y(e,t,r){var a=n.buffer,i=new Uint32Array(a),s=i[r+4>>>2];return new e(a,s,i[s+-4>>>2]>>>t)}return e.__allocString=function(e){for(var t=e.length,r=i(t<<1,1),a=new Uint16Array(n.buffer),s=0,o=r>>>1;s<t;++s)a[o+s]=e.charCodeAt(s);return r},e.__getString=function(e){var t=n.buffer;if(1!==new Uint32Array(t)[e+-8>>>2])throw Error("not a string: "+e);return c(t,e)},e.__allocArray=function(e,t){var r=l(e);if(!(3&r))throw Error("not an array: "+e+" @ "+r);var a=p(r),s=t.length,u=i(s<<a,0),c=i(2&r?16:12,e),f=new Uint32Array(n.buffer);f[c+0>>>2]=o(u),f[c+4>>>2]=u,f[c+8>>>2]=s<<a,2&r&&(f[c+12>>>2]=s);var d=h(a,1024&r,2048&r);if(8192&r)for(var v=0;v<s;++v)d[(u>>>a)+v]=o(t[v]);else d.set(t,u>>>a);return c},e.__getArrayView=d,e.__getArray=function(e){for(var t=d(e),r=t.length,n=new Array(r),a=0;a<r;a++)n[a]=t[a];return n},e.__getArrayBuffer=function(e){var t=n.buffer,r=new Uint32Array(t)[e+-4>>>2];return t.slice(e,e+r)},e.__getInt8Array=v.bind(null,Int8Array,0),e.__getInt8ArrayView=y.bind(null,Int8Array,0),e.__getUint8Array=v.bind(null,Uint8Array,0),e.__getUint8ArrayView=y.bind(null,Uint8Array,0),e.__getUint8ClampedArray=v.bind(null,Uint8ClampedArray,0),e.__getUint8ClampedArrayView=y.bind(null,Uint8ClampedArray,0),e.__getInt16Array=v.bind(null,Int16Array,1),e.__getInt16ArrayView=y.bind(null,Int16Array,1),e.__getUint16Array=v.bind(null,Uint16Array,1),e.__getUint16ArrayView=y.bind(null,Uint16Array,1),e.__getInt32Array=v.bind(null,Int32Array,2),e.__getInt32ArrayView=y.bind(null,Int32Array,2),e.__getUint32Array=v.bind(null,Uint32Array,2),e.__getUint32ArrayView=y.bind(null,Uint32Array,2),s&&(e.__getInt64Array=v.bind(null,BigInt64Array,3),e.__getInt64ArrayView=y.bind(null,BigInt64Array,3),e.__getUint64Array=v.bind(null,BigUint64Array,3),e.__getUint64ArrayView=y.bind(null,BigUint64Array,3)),e.__getFloat32Array=v.bind(null,Float32Array,2),e.__getFloat32ArrayView=y.bind(null,Float32Array,2),e.__getFloat64Array=v.bind(null,Float64Array,3),e.__getFloat64ArrayView=y.bind(null,Float64Array,3),e.__instanceof=function(e,t){var r=new Uint32Array(n.buffer),a=r[e+-8>>>2];if(a<=r[u>>>2])do{if(a==t)return!0}while(a=f(a));return!1},e.memory=e.memory||n,e.table=e.table||a,g(r,e)}function p(e){return"undefined"!==typeof Response&&e instanceof Response}function h(e,t){return d.apply(this,arguments)}function d(){return(d=i(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,t;case 3:if(e.t1=t=e.sent,!(0,e.t0)(e.t1)){e.next=6;break}return e.abrupt("return",v(t,r));case 6:if(e.t2=f,e.t3=l(r||(r={})),e.t4=WebAssembly,!(t instanceof WebAssembly.Module)){e.next=13;break}e.t5=t,e.next=16;break;case 13:return e.next=15,WebAssembly.compile(t);case 15:e.t5=e.sent;case 16:return e.t6=e.t5,e.t7=r,e.next=20,e.t4.instantiate.call(e.t4,e.t6,e.t7);case 20:return e.t8=e.sent,e.abrupt("return",(0,e.t2)(e.t3,e.t8));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return y.apply(this,arguments)}function y(){return(y=i(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(WebAssembly.instantiateStreaming){e.next=14;break}return e.t0=h,e.t1=p,e.next=5,t;case 5:if(e.t2=t=e.sent,!(0,e.t1)(e.t2)){e.next=10;break}e.t3=t.arrayBuffer(),e.next=11;break;case 10:e.t3=t;case 11:return e.t4=e.t3,e.t5=r,e.abrupt("return",(0,e.t0)(e.t4,e.t5));case 14:return e.t6=f,e.t7=l(r||(r={})),e.next=18,WebAssembly.instantiateStreaming(t,r);case 18:return e.t8=e.sent.instance,e.abrupt("return",(0,e.t6)(e.t7,e.t8));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){var r=t?Object.create(t):{},n=e.__argumentsLength?function(t){e.__argumentsLength.value=t}:e.__setArgumentsLength||e.__setargc||function(){},i=function(t){if(!Object.prototype.hasOwnProperty.call(e,t))return"continue";for(var i=e[t],s=t.split("."),u=r;s.length>1;){var c=s.shift();Object.prototype.hasOwnProperty.call(u,c)||(u[c]={}),u=u[c]}var l=s[0],f=l.indexOf("#");if(f>=0){var p=l.substring(0,f),h=u[p];if("undefined"===typeof h||!h.prototype){var d=function e(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.wrap((t=e.prototype).constructor.apply(t,[0].concat(n)))};d.prototype={valueOf:function(){return this[o]}},d.wrap=function(e){return Object.create(d.prototype,a({},o,{value:e,writable:!1}))},h&&Object.getOwnPropertyNames(h).forEach((function(e){return Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(h,e))})),u[p]=d}if(l=l.substring(f+1),u=u[p].prototype,/^(get|set):/.test(l)){if(!Object.prototype.hasOwnProperty.call(u,l=l.substring(4))){var v=e[t.replace("set:","get:")],y=e[t.replace("get:","set:")];Object.defineProperty(u,l,{get:function(){return v(this[o])},set:function(e){y(this[o],e)},enumerable:!0})}}else"constructor"===l?(u[l]=function(){return n(arguments.length),i.apply(void 0,arguments)}).original=i:(u[l]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t.length),i.apply(void 0,[this[o]].concat(t))}).original=i}else/^(get|set):/.test(l)?Object.prototype.hasOwnProperty.call(u,l=l.substring(4))||Object.defineProperty(u,l,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:!0}):"function"===typeof i&&i!==n?(u[l]=function(){return n(arguments.length),i.apply(void 0,arguments)}).original=i:u[l]=i};for(var s in e)i(s);return r}t.instantiate=h,t.instantiateSync=function(e,t){return f(l(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))},t.instantiateStreaming=v,t.demangle=g},9018:function(e,t,r){"use strict";e.exports=r(6788)},4242:function(e){"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},3613:function(e,t,r){"use strict";var n=t,a=r(386),i=r(8123);function s(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof a){e("switch(d%s){",n);for(var i=t.resolvedType.values,s=Object.keys(i),o=0;o<s.length;++o)t.repeated&&i[s[o]]===t.typeDefault&&e("default:"),e("case%j:",s[o])("case %i:",i[s[o]])("m%s=%j",n,i[s[o]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function o(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof a?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),u=i.safeProp(o.name);o.map?(r("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),s(r,o,n,u+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),s(r,o,n,u+"[i]")("}")("}")):(o.resolvedType instanceof a||r("if(d%s!=null){",u),s(r,o,n,u),o.resolvedType instanceof a||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],s=[],u=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?n:t[c].map?s:u).push(t[c]);if(n.length){for(r("if(o.arrays||o.defaults){"),c=0;c<n.length;++c)r("d%s=[]",i.safeProp(n[c].name));r("}")}if(s.length){for(r("if(o.objects||o.defaults){"),c=0;c<s.length;++c)r("d%s={}",i.safeProp(s[c].name));r("}")}if(u.length){for(r("if(o.defaults){"),c=0;c<u.length;++c){var l=u[c],f=i.safeProp(l.name);if(l.resolvedType instanceof a)r("d%s=o.enums===String?%j:%j",f,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var p="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",f,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",f,p)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",f,f)("}")}else r("d%s=%j",f,l.typeDefault)}r("}")}var h=!1;for(c=0;c<t.length;++c){l=t[c];var d=e._fieldsArray.indexOf(l);f=i.safeProp(l.name);l.map?(h||(h=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),o(r,l,d,f+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),o(r,l,d,f+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",f,l.name),o(r,l,d,f),l.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}},7998:function(e,t,r){"use strict";e.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),u=o.resolvedType instanceof n?"int32":o.type,c="m"+i.safeProp(o.name);t("case %i: {",o.id),o.map?(t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==a.defaults[o.keyType]?t("k=%j",a.defaults[o.keyType]):t("k=null"),void 0!==a.defaults[u]?t("value=%j",a.defaults[u]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===a.basic[u]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",u),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==a.long[o.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',c):t("%s[k]=value",c)):o.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==a.packed[u]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,u)("}else"),void 0===a.basic[u]?t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,r):t("%s.push(r.%s())",c,u)):void 0===a.basic[u]?t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,r):t("%s=r.%s()",c,u),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var l=e._fieldsArray[r];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",s(l))}return t("return m")};var n=r(386),a=r(7254),i=r(8123);function s(e){return"missing required '"+e.name+"'"}},4105:function(e,t,r){"use strict";e.exports=function(e){for(var t,r=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),o=e.fieldsArray.slice().sort(i.compareFieldsById),u=0;u<o.length;++u){var c=o[u].resolve(),l=e._fieldsArray.indexOf(c),f=c.resolvedType instanceof n?"int32":c.type,p=a.basic[f];t="m"+i.safeProp(c.name),c.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|a.mapKey[c.keyType],c.keyType),void 0===p?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,f,t),r("}")("}")):c.repeated?(r("if(%s!=null&&%s.length){",t,t),c.packed&&void 0!==a.packed[f]?r("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",f,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===p?s(r,c,l,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(c.id<<3|p)>>>0,f,t)),r("}")):(c.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,c.name),void 0===p?s(r,c,l,t):r("w.uint32(%i).%s(%s)",(c.id<<3|p)>>>0,f,t))}return r("return w")};var n=r(386),a=r(7254),i=r(8123);function s(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},386:function(e,t,r){"use strict";e.exports=s;var n=r(8351);((s.prototype=Object.create(n.prototype)).constructor=s).className="Enum";var a=r(9784),i=r(8123);function s(e,t,r,a,i){if(n.call(this,e,r),t&&"object"!==typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=a,this.comments=i||{},this.reserved=void 0,t)for(var s=Object.keys(t),o=0;o<s.length;++o)"number"===typeof t[s[o]]&&(this.valuesById[this.values[s[o]]=t[s[o]]]=s[o])}s.fromJSON=function(e,t){var r=new s(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,r){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},s.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return a.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return a.isReservedName(this.reserved,e)}},1189:function(e,t,r){"use strict";e.exports=c;var n=r(8351);((c.prototype=Object.create(n.prototype)).constructor=c).className="Field";var a,i=r(386),s=r(7254),o=r(8123),u=/^required|optional|repeated$/;function c(e,t,r,a,i,c,l){if(o.isObject(a)?(l=i,c=a,a=i=void 0):o.isObject(i)&&(l=c,c=i,i=void 0),n.call(this,e,c),!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(void 0!==a&&!u.test(a=a.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!o.isString(i))throw TypeError("extend must be a string");"proto3_optional"===a&&(a="optional"),this.rule=a&&"optional"!==a?a:void 0,this.type=r,this.id=t,this.extend=i||void 0,this.required="required"===a,this.optional=!this.required,this.repeated="repeated"===a,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==s.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}c.fromJSON=function(e,t){return new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),c.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},c.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof a?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"===typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"===typeof this.typeDefault){var e;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof a&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},c.d=function(e,t,r,n){return"function"===typeof t?t=o.decorateType(t).name:t&&"object"===typeof t&&(t=o.decorateEnum(t).name),function(a,i){o.decorateType(a.constructor).add(new c(i,e,t,r,{default:n}))}},c._configure=function(e){a=e}},9298:function(e,t,r){"use strict";var n=e.exports=r(9006);n.build="light",n.load=function(e,t,r){return"function"===typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=r(4105),n.decoder=r(7998),n.verifier=r(7575),n.converter=r(3613),n.ReflectionObject=r(8351),n.Namespace=r(9784),n.Root=r(4162),n.Enum=r(386),n.Type=r(4957),n.Field=r(1189),n.OneOf=r(5836),n.MapField=r(9827),n.Service=r(3548),n.Method=r(5986),n.Message=r(2380),n.wrappers=r(5939),n.types=r(7254),n.util=r(8123),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},9006:function(e,t,r){"use strict";var n=t;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(3480),n.BufferWriter=r(2685),n.Reader=r(2171),n.BufferReader=r(2552),n.util=r(9460),n.rpc=r(2910),n.roots=r(8393),n.configure=a,a()},6788:function(e,t,r){"use strict";var n=e.exports=r(9298);n.build="full",n.tokenize=r(3953),n.parse=r(2867),n.common=r(4242),n.Root._configure(n.Type,n.parse,n.common)},9827:function(e,t,r){"use strict";e.exports=s;var n=r(1189);((s.prototype=Object.create(n.prototype)).constructor=s).className="MapField";var a=r(7254),i=r(8123);function s(e,t,r,a,s,o){if(n.call(this,e,t,a,void 0,void 0,s,o),!i.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===a.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},s.d=function(e,t,r){return"function"===typeof r?r=i.decorateType(r).name:r&&"object"===typeof r&&(r=i.decorateEnum(r).name),function(n,a){i.decorateType(n.constructor).add(new s(a,e,t,r))}}},2380:function(e,t,r){"use strict";e.exports=a;var n=r(9460);function a(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}a.create=function(e){return this.$type.create(e)},a.encode=function(e,t){return this.$type.encode(e,t)},a.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},a.decode=function(e){return this.$type.decode(e)},a.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},a.verify=function(e){return this.$type.verify(e)},a.fromObject=function(e){return this.$type.fromObject(e)},a.toObject=function(e,t){return this.$type.toObject(e,t)},a.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},5986:function(e,t,r){"use strict";e.exports=i;var n=r(8351);((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var a=r(8123);function i(e,t,r,i,s,o,u,c,l){if(a.isObject(s)?(u=s,s=o=void 0):a.isObject(o)&&(u=o,o=void 0),void 0!==t&&!a.isString(t))throw TypeError("type must be a string");if(!a.isString(r))throw TypeError("requestType must be a string");if(!a.isString(i))throw TypeError("responseType must be a string");n.call(this,e,u),this.type=t||"rpc",this.requestType=r,this.requestStream=!!s||void 0,this.responseType=i,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=l}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},9784:function(e,t,r){"use strict";e.exports=l;var n=r(8351);((l.prototype=Object.create(n.prototype)).constructor=l).className="Namespace";var a,i,s,o=r(1189),u=r(8123);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function l(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function f(e){return e._nestedArray=null,e}l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=c,l.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!==typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),l.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?a.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?i.fromJSON:void 0!==t.id?o.fromJSON:l.fromJSON)(r[n],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof a||e instanceof s||e instanceof i||e instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof a||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),f(this)},l.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),f(this)},l.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof l))throw Error("path conflicts with non-namespace objects")}else r.add(r=new l(n))}return t&&r.addJSON(t),r},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,r){if("boolean"===typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof l&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var a=0;a<this.nestedArray.length;++a)if(this._nestedArray[a]instanceof l&&(n=this._nestedArray[a].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[a,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(e,t,r){a=e,i=t,s=r}},8351:function(e,t,r){"use strict";e.exports=i,i.className="ReflectionObject";var n,a=r(8123);function i(e,t){if(!a.isString(e))throw TypeError("name must be a string");if(t&&!a.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},i.prototype.getOption=function(e){if(this.options)return this.options[e]},i.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var i=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(i){var s=i[e];a.setProperty(s,r,t)}else(i={})[e]=a.setProperty({},r,t),n.push(i)}else{var o={};o[e]=t,n.push(o)}return this},i.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){n=e}},5836:function(e,t,r){"use strict";e.exports=s;var n=r(8351);((s.prototype=Object.create(n.prototype)).constructor=s).className="OneOf";var a=r(1189),i=r(8123);function s(e,t,r,a){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=a}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof a))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},s.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}o(this)},s.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new s(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},2867:function(e,t,r){"use strict";e.exports=E,E.filename=null,E.defaults={keepCase:!1};var n=r(3953),a=r(4162),i=r(4957),s=r(1189),o=r(9827),u=r(5836),c=r(386),l=r(3548),f=r(5986),p=r(7254),h=r(8123),d=/^[1-9][0-9]*$/,v=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,g=/^-?0[x][0-9a-fA-F]+$/,m=/^0[0-7]+$/,b=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,k=/^[a-zA-Z_][a-zA-Z_0-9]*$/,x=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,_=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function E(e,t,r){t instanceof a||(r=t,t=new a),r||(r=E.defaults);var S,A,I,C,Z,R=r.preferTrailingComment||!1,T=n(e,r.alternateCommentMode||!1),D=T.next,P=T.push,N=T.peek,O=T.skip,B=T.cmnt,L=!0,M=!1,U=t,j=r.keepCase?function(e){return e}:h.camelCase;function F(e,t,r){var n=E.filename;return r||(E.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+T.line+")")}function z(){var e,t=[];do{if('"'!==(e=D())&&"'"!==e)throw F(e);t.push(D()),O(e),e=N()}while('"'===e||"'"===e);return t.join("")}function V(e){var t=D();switch(t){case"'":case'"':return P(t),z();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;"-"===e.charAt(0)&&(r=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(d.test(e))return r*parseInt(e,10);if(y.test(e))return r*parseInt(e,16);if(m.test(e))return r*parseInt(e,8);if(w.test(e))return r*parseFloat(e);throw F(e,"number",t)}(t,!0)}catch(r){if(e&&x.test(t))return t;throw F(t,"value")}}function K(e,t){var r,n;do{!t||'"'!==(r=N())&&"'"!==r?e.push([n=q(D()),O("to",!0)?q(D()):n]):e.push(z())}while(O(",",!0));O(";")}function q(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw F(e,"id");if(v.test(e))return parseInt(e,10);if(g.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw F(e,"id")}function H(){if(void 0!==S)throw F("package");if(S=D(),!x.test(S))throw F(S,"name");U=U.define(S),O(";")}function W(){var e,t=N();switch(t){case"weak":e=I||(I=[]),D();break;case"public":D();default:e=A||(A=[])}t=z(),O(";"),e.push(t)}function G(){if(O("="),C=z(),!(M="proto3"===C)&&"proto2"!==C)throw F(C,"syntax");O(";")}function Y(e,t){switch(t){case"option":return X(e,t),O(";"),!0;case"message":return function(e,t){if(!k.test(t=D()))throw F(t,"type name");var r=new i(t);Q(r,(function(e){if(!Y(r,e))switch(e){case"map":!function(e){O("<");var t=D();if(void 0===p.mapKey[t])throw F(t,"type");O(",");var r=D();if(!x.test(r))throw F(r,"type");O(">");var n=D();if(!k.test(n))throw F(n,"name");O("=");var a=new o(j(n),q(D()),t,r);Q(a,(function(e){if("option"!==e)throw F(e);X(a,e),O(";")}),(function(){te(a)})),e.add(a)}(r);break;case"required":case"repeated":J(r,e);break;case"optional":J(r,M?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!k.test(t=D()))throw F(t,"name");var r=new u(j(t));Q(r,(function(e){"option"===e?(X(r,e),O(";")):(P(e),J(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":K(r.extensions||(r.extensions=[]));break;case"reserved":K(r.reserved||(r.reserved=[]),!0);break;default:if(!M||!x.test(e))throw F(e);P(e),J(r,"optional")}})),e.add(r)}(e,t),!0;case"enum":return function(e,t){if(!k.test(t=D()))throw F(t,"name");var r=new c(t);Q(r,(function(e){switch(e){case"option":X(r,e),O(";");break;case"reserved":K(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!k.test(t))throw F(t,"name");O("=");var r=q(D(),!0),n={};Q(n,(function(e){if("option"!==e)throw F(e);X(n,e),O(";")}),(function(){te(n)})),e.add(t,r,n.comment)}(r,e)}})),e.add(r)}(e,t),!0;case"service":return function(e,t){if(!k.test(t=D()))throw F(t,"service name");var r=new l(t);Q(r,(function(e){if(!Y(r,e)){if("rpc"!==e)throw F(e);!function(e,t){var r=B(),n=t;if(!k.test(t=D()))throw F(t,"name");var a,i,s,o,u=t;O("("),O("stream",!0)&&(i=!0);if(!x.test(t=D()))throw F(t);a=t,O(")"),O("returns"),O("("),O("stream",!0)&&(o=!0);if(!x.test(t=D()))throw F(t);s=t,O(")");var c=new f(u,n,a,s,i,o);c.comment=r,Q(c,(function(e){if("option"!==e)throw F(e);X(c,e),O(";")})),e.add(c)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!x.test(t=D()))throw F(t,"reference");var r=t;Q(null,(function(t){switch(t){case"required":case"repeated":J(e,t,r);break;case"optional":J(e,M?"proto3_optional":"optional",r);break;default:if(!M||!x.test(t))throw F(t);P(t),J(e,"optional",r)}}))}(e,t),!0}return!1}function Q(e,t,r){var n=T.line;if(e&&("string"!==typeof e.comment&&(e.comment=B()),e.filename=E.filename),O("{",!0)){for(var a;"}"!==(a=D());)t(a);O(";",!0)}else r&&r(),O(";"),e&&("string"!==typeof e.comment||R)&&(e.comment=B(n)||e.comment)}function J(e,t,r){var n=D();if("group"!==n){if(!x.test(n))throw F(n,"type");var a=D();if(!k.test(a))throw F(a,"name");a=j(a),O("=");var o=new s(a,q(D()),n,t,r);if(Q(o,(function(e){if("option"!==e)throw F(e);X(o,e),O(";")}),(function(){te(o)})),"proto3_optional"===t){var c=new u("_"+a);o.setOption("proto3_optional",!0),c.add(o),e.add(c)}else e.add(o);M||!o.repeated||void 0===p.packed[n]&&void 0!==p.basic[n]||o.setOption("packed",!1,!0)}else!function(e,t){var r=D();if(!k.test(r))throw F(r,"name");var n=h.lcFirst(r);r===n&&(r=h.ucFirst(r));O("=");var a=q(D()),o=new i(r);o.group=!0;var u=new s(n,a,r,t);u.filename=E.filename,Q(o,(function(e){switch(e){case"option":X(o,e),O(";");break;case"required":case"repeated":J(o,e);break;case"optional":J(o,M?"proto3_optional":"optional");break;default:throw F(e)}})),e.add(o).add(u)}(e,t)}function X(e,t){var r=O("(",!0);if(!x.test(t=D()))throw F(t,"name");var n,a=t,i=a;r&&(O(")"),i=a="("+a+")",t=N(),_.test(t)&&(n=t.slice(1),a+=t,D())),O("="),function(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}(e,i,$(e,a),n)}function $(e,t){if(O("{",!0)){for(var r={};!O("}",!0);){if(!k.test(Z=D()))throw F(Z,"name");var n,a=Z;if(O(":",!0),"{"===N())n=$(e,t+"."+Z);else if("["===N()){var i;if(n=[],O("[",!0)){do{i=V(!0),n.push(i)}while(O(",",!0));O("]"),"undefined"!==typeof i&&ee(e,t+"."+Z,i)}}else n=V(!0),ee(e,t+"."+Z,n);var s=r[a];s&&(n=[].concat(s).concat(n)),r[a]=n,O(",",!0),O(";",!0)}return r}var o=V(!0);return ee(e,t,o),o}function ee(e,t,r){e.setOption&&e.setOption(t,r)}function te(e){if(O("[",!0)){do{X(e,"option")}while(O(",",!0));O("]")}return e}for(;null!==(Z=D());)switch(Z){case"package":if(!L)throw F(Z);H();break;case"import":if(!L)throw F(Z);W();break;case"syntax":if(!L)throw F(Z);G();break;case"option":X(U,Z),O(";");break;default:if(Y(U,Z)){L=!1;continue}throw F(Z)}return E.filename=null,{package:S,imports:A,weakImports:I,syntax:C,root:t}}},2171:function(e,t,r){"use strict";e.exports=u;var n,a=r(9460),i=a.LongBits,s=a.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},l=function(){return a.Buffer?function(e){return(u.create=function(e){return a.Buffer.isBuffer(e)?new n(e):c(e)})(e)}:c};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw o(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}u.create=l(),u.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,u.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return p(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|p(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw o(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){n=e,u.create=l(),n._configure();var t=a.Long?"toLong":"toNumber";a.merge(u.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},2552:function(e,t,r){"use strict";e.exports=i;var n=r(2171);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(9460);function i(e){n.call(this,e)}i._configure=function(){a.Buffer&&(i.prototype._slice=a.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},4162:function(e,t,r){"use strict";e.exports=f;var n=r(9784);((f.prototype=Object.create(n.prototype)).constructor=f).className="Root";var a,i,s,o=r(1189),u=r(386),c=r(5836),l=r(8123);function f(e){n.call(this,"",e),this.deferred=[],this.files=[]}function p(){}f.fromJSON=function(e,t){return t||(t=new f),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},f.prototype.resolvePath=l.path.resolve,f.prototype.fetch=l.fetch,f.prototype.load=function e(t,r,n){"function"===typeof r&&(n=r,r=void 0);var a=this;if(!n)return l.asPromise(e,a,t,r);var o=n===p;function u(e,t){if(n){var r=n;if(n=null,o)throw e;r(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function f(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){i.filename=e;var n,s=i(t,a,r),f=0;if(s.imports)for(;f<s.imports.length;++f)(n=c(s.imports[f])||a.resolvePath(e,s.imports[f]))&&h(n);if(s.weakImports)for(f=0;f<s.weakImports.length;++f)(n=c(s.weakImports[f])||a.resolvePath(e,s.weakImports[f]))&&h(n,!0)}else a.setOptions(t.options).addJSON(t.nested)}catch(p){u(p)}o||d||u(null,a)}function h(e,t){if(!(a.files.indexOf(e)>-1))if(a.files.push(e),e in s)o?f(e,s[e]):(++d,setTimeout((function(){--d,f(e,s[e])})));else if(o){var r;try{r=l.fs.readFileSync(e).toString("utf8")}catch(i){return void(t||u(i))}f(e,r)}else++d,a.fetch(e,(function(r,i){--d,n&&(r?t?d||u(null,a):u(r):f(e,i))}))}var d=0;l.isString(t)&&(t=[t]);for(var v,y=0;y<t.length;++y)(v=a.resolvePath("",t[y]))&&h(v);if(o)return a;d||u(null,a)},f.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,p)},f.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function d(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new o(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}f.prototype._handleAdd=function(e){if(e instanceof o)void 0===e.extend||e.extensionField||d(0,e)||this.deferred.push(e);else if(e instanceof u)h.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof a)for(var t=0;t<this.deferred.length;)d(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);h.test(e.name)&&(e.parent[e.name]=e)}},f.prototype._handleRemove=function(e){if(e instanceof o){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof u)h.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);h.test(e.name)&&delete e.parent[e.name]}},f._configure=function(e,t,r){a=e,i=t,s=r}},8393:function(e){"use strict";e.exports={}},2910:function(e,t,r){"use strict";t.Service=r(8090)},8090:function(e,t,r){"use strict";e.exports=a;var n=r(9460);function a(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a,a.prototype.rpcCall=function e(t,r,a,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return n.asPromise(e,o,t,r,a,i);if(o.rpcImpl)try{return o.rpcImpl(t,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return o.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof a))try{r=a[o.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return o.emit("error",e,t),s(e)}return o.emit("data",r,t),s(null,r)}o.end(!0)}))}catch(u){return o.emit("error",u,t),void setTimeout((function(){s(u)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},a.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},3548:function(e,t,r){"use strict";e.exports=o;var n=r(9784);((o.prototype=Object.create(n.prototype)).constructor=o).className="Service";var a=r(5986),i=r(8123),s=r(2910);function o(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function u(e){return e._methodsArray=null,e}o.fromJSON=function(e,t){var r=new o(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),i=0;i<n.length;++i)r.add(a.fromJSON(n[i],t.methods[n[i]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},o.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),o.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},o.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},o.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof a?(this.methods[e.name]=e,e.parent=this,u(this)):n.prototype.add.call(this,e)},o.prototype.remove=function(e){if(e instanceof a){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,u(this)}return n.prototype.remove.call(this,e)},o.prototype.create=function(e,t,r){for(var n,a=new s.Service(e,t,r),o=0;o<this.methodsArray.length;++o){var u=i.lcFirst((n=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");a[u]=i.codegen(["r","c"],i.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return a}},3953:function(e){"use strict";e.exports=f;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,a=/^ *[*/]+ */,i=/^\s*\*?\/*/,s=/\n/g,o=/\s/,u=/\\(.?)/g,c={0:"\0",r:"\r",n:"\n",t:"\t"};function l(e){return e.replace(u,(function(e,t){switch(t){case"\\":case"":return t;default:return c[t]||""}}))}function f(e,u){e=e.toString();var c=0,f=e.length,p=1,h=0,d={},v=[],y=null;function g(e){return Error("illegal "+e+" (line "+p+")")}function m(t){return e.charAt(t)}function b(t,r,n){var o,c={type:e.charAt(t++),lineEmpty:!1,leading:n},l=t-(u?2:3);do{if(--l<0||"\n"===(o=e.charAt(l))){c.lineEmpty=!0;break}}while(" "===o||"\t"===o);for(var f=e.substring(t,r).split(s),v=0;v<f.length;++v)f[v]=f[v].replace(u?i:a,"").trim();c.text=f.join("\n").trim(),d[p]=c,h=p}function w(t){var r=k(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function k(e){for(var t=e;t<f&&"\n"!==m(t);)t++;return t}function x(){if(v.length>0)return v.shift();if(y)return function(){var t="'"===y?n:r;t.lastIndex=c-1;var a=t.exec(e);if(!a)throw g("string");return c=t.lastIndex,_(y),y=null,l(a[1])}();var a,i,s,h,d,x=0===c;do{if(c===f)return null;for(a=!1;o.test(s=m(c));)if("\n"===s&&(x=!0,++p),++c===f)return null;if("/"===m(c)){if(++c===f)throw g("comment");if("/"===m(c))if(u){if(h=c,d=!1,w(c)){d=!0;do{if((c=k(c))===f)break;if(c++,!x)break}while(w(c))}else c=Math.min(f,k(c)+1);d&&(b(h,c,x),x=!0),p++,a=!0}else{for(d="/"===m(h=c+1);"\n"!==m(++c);)if(c===f)return null;++c,d&&(b(h,c-1,x),x=!0),++p,a=!0}else{if("*"!==(s=m(c)))return"/";h=c+1,d=u||"*"===m(h);do{if("\n"===s&&++p,++c===f)throw g("comment");i=s,s=m(c)}while("*"!==i||"/"!==s);++c,d&&(b(h,c-2,x),x=!0),a=!0}}}while(a);var E=c;if(t.lastIndex=0,!t.test(m(E++)))for(;E<f&&!t.test(m(E));)++E;var S=e.substring(c,c=E);return'"'!==S&&"'"!==S||(y=S),S}function _(e){v.push(e)}function E(){if(!v.length){var e=x();if(null===e)return null;_(e)}return v[0]}return Object.defineProperty({next:x,peek:E,push:_,skip:function(e,t){var r=E();if(r===e)return x(),!0;if(!t)throw g("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t,r=null;return void 0===e?(t=d[p-1],delete d[p-1],t&&(u||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(h<e&&E(),t=d[e],delete d[e],!t||t.lineEmpty||!u&&"/"!==t.type||(r=t.leading?null:t.text)),r}},"line",{get:function(){return p}})}f.unescape=l},4957:function(e,t,r){"use strict";e.exports=m;var n=r(9784);((m.prototype=Object.create(n.prototype)).constructor=m).className="Type";var a=r(386),i=r(5836),s=r(1189),o=r(9827),u=r(3548),c=r(2380),l=r(2171),f=r(3480),p=r(8123),h=r(4105),d=r(7998),v=r(7575),y=r(3613),g=r(5939);function m(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(m.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=m.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,p.merge(e.prototype,t)),e.$type=e.prototype.$type=this,p.merge(e,c,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:p.oneOfGetter(this._oneofsArray[r].oneof),set:p.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),m.generateConstructor=function(e){for(var t,r=p.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",p.safeProp(t.name)):t.repeated&&r("this%s=[]",p.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},m.fromJSON=function(e,t){var r=new m(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var c=Object.keys(t.fields),l=0;l<c.length;++l)r.add(("undefined"!==typeof t.fields[c[l]].keyType?o.fromJSON:s.fromJSON)(c[l],t.fields[c[l]]));if(t.oneofs)for(c=Object.keys(t.oneofs),l=0;l<c.length;++l)r.add(i.fromJSON(c[l],t.oneofs[c[l]]));if(t.nested)for(c=Object.keys(t.nested),l=0;l<c.length;++l){var f=t.nested[c[l]];r.add((void 0!==f.id?s.fromJSON:void 0!==f.fields?m.fromJSON:void 0!==f.values?a.fromJSON:void 0!==f.methods?u.fromJSON:n.fromJSON)(c[l],f))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},m.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return p.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},m.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},m.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},m.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},m.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},m.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},m.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},m.prototype.create=function(e){return new this.ctor(e)},m.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=h(this)({Writer:f,types:t,util:p}),this.decode=d(this)({Reader:l,types:t,util:p}),this.verify=v(this)({types:t,util:p}),this.fromObject=y.fromObject(this)({types:t,util:p}),this.toObject=y.toObject(this)({types:t,util:p});var n=g[e];if(n){var a=Object.create(this);a.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(a),a.toObject=this.toObject,this.toObject=n.toObject.bind(a)}return this},m.prototype.encode=function(e,t){return this.setup().encode(e,t)},m.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},m.prototype.decode=function(e,t){return this.setup().decode(e,t)},m.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},m.prototype.verify=function(e){return this.setup().verify(e)},m.prototype.fromObject=function(e){return this.setup().fromObject(e)},m.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},m.d=function(e){return function(t){p.decorateType(t,e)}}},7254:function(e,t,r){"use strict";var n=t,a=r(8123),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",a.emptyArray,null]),n.long=s([0,0,0,1,1],7),n.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},8123:function(e,t,r){"use strict";var n,a,i=e.exports=r(9460),s=r(8393);i.codegen=r(496),i.fetch=r(7635),i.path=r(7468),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],a=e[r++];void 0!==a&&(t[n]=a)}return t};var o=/\\/g,u=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(o,"\\\\").replace(u,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type;n||(n=r(4957));var a=new n(t||e.name);return i.decorateRoot.add(a),a.ctor=e,Object.defineProperty(e,"$type",{value:a,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:a,enumerable:!1}),a};var l=0;i.decorateEnum=function(e){if(e.$type)return e.$type;a||(a=r(386));var t=new a("Enum"+l++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},i.setProperty=function(e,t,r){if("object"!==typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var a=r.shift();if("__proto__"===a)return t;if(r.length>0)t[a]=e(t[a]||{},r,n);else{var i=t[a];i&&(n=[].concat(i).concat(n)),t[a]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(i,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(r(4162)))}})},3750:function(e,t,r){"use strict";e.exports=a;var n=r(9460);function a(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=a.zero=new a(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new a(r,n)},a.from=function(e){if("number"===typeof e)return a.fromNumber(e);if(n.isString(e)){if(!n.Long)return a.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new a(e.low>>>0,e.high>>>0):i},a.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},a.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;a.fromHash=function(e){return e===s?i:new a((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},a.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},a.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},9460:function(e,t,r){"use strict";var n=t;function a(e,t,r){for(var n=Object.keys(t),a=0;a<n.length;++a)void 0!==e[n[a]]&&r||(e[n[a]]=t[n[a]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&a(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(7206),n.base64=r(1),n.EventEmitter=r(7111),n.float=r(802),n.inquire=r(7172),n.utf8=r(3861),n.pool=r(8236),n.LongBits=r(3750),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=a,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},7575:function(e,t,r){"use strict";e.exports=function(e){var t=a.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var u=0;u<e.fieldsArray.length;++u){var c=e._fieldsArray[u].resolve(),l="m"+a.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",i(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),o(t,c,"k[i]"),s(t,c,u,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",i(c,"array"))("for(var i=0;i<%s.length;++i){",l),s(t,c,u,l+"[i]")("}");else{if(c.partOf){var f=a.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",f)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",f)}s(t,c,u,l)}c.optional&&t("}")}return t("return null")};var n=r(386),a=r(8123);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,r,a){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",a)("default:")("return%j",i(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),o=0;o<s.length;++o)e("case %i:",t.resolvedType.values[s[o]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,a)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",a)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",a,a,a,a)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',a)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',a)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",a)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',a,a,a)("return%j",i(t,"buffer"))}return e}function o(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",i(t,"boolean key"))}return e}},5939:function(e,t,r){"use strict";var n=t,a=r(2380);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof a){var s=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),s["@type"]=n,s}return this.toObject(e,t)}}},3480:function(e,t,r){"use strict";e.exports=f;var n,a=r(9460),i=a.LongBits,s=a.base64,o=a.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var p=function(){return a.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function h(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function v(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=p(),f.alloc=function(e){return new a.Array(e)},a.Array!==Array&&(f.alloc=a.pool(f.alloc,a.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},d.prototype=Object.create(u.prototype),d.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(v,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(v,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(v,t.length(),t)},f.prototype.bool=function(e){return this._push(h,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(a.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(a.float.writeDoubleLE,8,e)};var g=a.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(a.isString(e)){var r=f.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(g,t,e)},f.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(h,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){n=e,f.create=p(),n._configure()}},2685:function(e,t,r){"use strict";e.exports=i;var n=r(3480);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(9460);function i(){n.call(this)}function s(e,t,r){e.length<40?a.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=a._Buffer_allocUnsafe,i.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&"set"===a.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){a.isString(e)&&(e=a._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},7206:function(e){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,a=2,i=!0;for(;a<arguments.length;)r[n++]=arguments[a++];return new Promise((function(a,s){r[n]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];a.apply(null,t)}};try{e.apply(t||null,r)}catch(o){i&&(i=!1,s(o))}}))}},1:function(e,t){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),a=new Array(123),i=0;i<64;)a[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var a,i=null,s=[],o=0,u=0;t<r;){var c=e[t++];switch(u){case 0:s[o++]=n[c>>2],a=(3&c)<<4,u=1;break;case 1:s[o++]=n[a|c>>4],a=(15&c)<<2,u=2;break;case 2:s[o++]=n[a|c>>6],s[o++]=n[63&c],u=0}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return u&&(s[o++]=n[a],s[o++]=61,1===u&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var s="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,o=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&o>1)break;if(void 0===(c=a[c]))throw Error(s);switch(o){case 0:n=c,o=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,o=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,o=3;break;case 3:t[r++]=(3&n)<<6|c,o=0}}if(1===o)throw Error(s);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},496:function(e){"use strict";function t(e,r){"string"===typeof e&&(r=e,e=void 0);var n=[];function a(e){if("string"!==typeof e){var r=i();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var s=Object.keys(e),o=new Array(s.length+1),u=new Array(s.length),c=0;c<s.length;)o[c]=s[c],u[c]=e[s[c++]];return o[c]=r,Function.apply(null,o).apply(null,u)}return Function(r)()}for(var l=new Array(arguments.length-1),f=0;f<l.length;)l[f]=arguments[++f];if(f=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=l[f++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),f!==l.length)throw Error("parameter count mismatch");return n.push(e),a}function i(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return a.toString=i,a}e.exports=t,t.verbose=!1},7111:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},7635:function(e,t,r){"use strict";e.exports=i;var n=r(7206),a=r(7172)("fs");function i(e,t,r){return"function"===typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&a&&a.readFile?a.readFile(e,(function(n,a){return n&&"undefined"!==typeof XMLHttpRequest?i.xhr(e,t,r):n?r(n):r(null,t.binary?a:a.toString("utf8"))})):i.xhr(e,t,r):n(i,this,e,t)}i.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var a=0;a<n.responseText.length;++a)e.push(255&n.responseText.charCodeAt(a))}return r(null,"undefined"!==typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},802:function(e){"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function a(e,n,a){t[0]=e,n[a]=r[0],n[a+1]=r[1],n[a+2]=r[2],n[a+3]=r[3]}function i(e,n,a){t[0]=e,n[a]=r[3],n[a+1]=r[2],n[a+2]=r[1],n[a+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function o(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?a:i,e.writeFloatBE=n?i:a,e.readFloatLE=n?s:o,e.readFloatBE=n?o:s}():function(){function t(e,t,r,n){var a=t<0?1:0;if(a&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((a<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((a<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((a<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function s(e,t,r){var n=e(t,r),a=2*(n>>31)+1,i=n>>>23&255,s=8388607&n;return 255===i?s?NaN:a*(1/0):0===i?1401298464324817e-60*a*s:a*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=s.bind(null,a),e.readFloatBE=s.bind(null,i)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function a(e,n,a){t[0]=e,n[a]=r[0],n[a+1]=r[1],n[a+2]=r[2],n[a+3]=r[3],n[a+4]=r[4],n[a+5]=r[5],n[a+6]=r[6],n[a+7]=r[7]}function i(e,n,a){t[0]=e,n[a]=r[7],n[a+1]=r[6],n[a+2]=r[5],n[a+3]=r[4],n[a+4]=r[3],n[a+5]=r[2],n[a+6]=r[1],n[a+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function o(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?a:i,e.writeDoubleBE=n?i:a,e.readDoubleLE=n?s:o,e.readDoubleBE=n?o:s}():function(){function t(e,t,r,n,a,i){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,a,i+t),e(1/n>0?0:2147483648,a,i+r);else if(isNaN(n))e(0,a,i+t),e(2146959360,a,i+r);else if(n>17976931348623157e292)e(0,a,i+t),e((s<<31|2146435072)>>>0,a,i+r);else{var o;if(n<22250738585072014e-324)e((o=n/5e-324)>>>0,a,i+t),e((s<<31|o/4294967296)>>>0,a,i+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(o=n*Math.pow(2,-u))>>>0,a,i+t),e((s<<31|u+1023<<20|1048576*o&1048575)>>>0,a,i+r)}}}function s(e,t,r,n,a){var i=e(n,a+t),s=e(n,a+r),o=2*(s>>31)+1,u=s>>>20&2047,c=4294967296*(1048575&s)+i;return 2047===u?c?NaN:o*(1/0):0===u?5e-324*o*c:o*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=s.bind(null,a,0,4),e.readDoubleBE=s.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7172:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},7468:function(e,t){"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},a=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),a="";r&&(a=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):r?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return a+t.join("/")};r.resolve=function(e,t,r){return r||(t=a(t)),n(t)?t:(r||(e=a(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?a(e+"/"+t):t)}},8236:function(e){"use strict";e.exports=function(e,t,r){var n=r||8192,a=n>>>1,i=null,s=n;return function(r){if(r<1||r>a)return e(r);s+r>n&&(i=e(n),s=0);var o=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),o}}},3861:function(e,t){"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,a=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:n>191&&n<224?i[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),s=0);return a?(s&&a.push(String.fromCharCode.apply(String,i.slice(0,s))),a.join("")):String.fromCharCode.apply(String,i.slice(0,s))},r.write=function(e,t,r){for(var n,a,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296===(64512&n)&&56320===(64512&(a=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&a),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},6232:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5073);function a(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function s(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function o(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function u(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function c(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function l(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function f(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function p(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),l(e/4294967296>>>0,t,r),l(e>>>0,t,r+4),t}function h(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),f(e>>>0,t,r),f(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=a,t.writeInt16BE=a,t.writeUint16LE=i,t.writeInt16LE=i,t.readInt32BE=s,t.readUint32BE=o,t.readInt32LE=u,t.readUint32LE=c,t.writeUint32BE=l,t.writeInt32BE=l,t.writeUint32LE=f,t.writeInt32LE=f,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=s(e,t),n=s(e,t+4);return 4294967296*r+n-4294967296*(n>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*o(e,t)+o(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=u(e,t);return 4294967296*u(e,t+4)+r-4294967296*(r>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r},t.writeUint64BE=p,t.writeInt64BE=p,t.writeUint64LE=h,t.writeInt64LE=h,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,a=1,i=e/8+r-1;i>=r;i--)n+=t[i]*a,a*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,a=1,i=r;i<r+e/8;i++)n+=t[i]*a,a*=256;return n},t.writeUintBE=function(e,t,r,a){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===a&&(a=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,s=e/8+a-1;s>=a;s--)r[s]=t/i&255,i*=256;return r},t.writeUintLE=function(e,t,r,a){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===a&&(a=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,s=a;s<a+e/8;s++)r[s]=t/i&255,i*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},8284:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6232),a=r(9116);function i(e,t,r){for(var a=1634760805,i=857760878,s=2036477234,o=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],p=r[19]<<24|r[18]<<16|r[17]<<8|r[16],h=r[23]<<24|r[22]<<16|r[21]<<8|r[20],d=r[27]<<24|r[26]<<16|r[25]<<8|r[24],v=r[31]<<24|r[30]<<16|r[29]<<8|r[28],y=t[3]<<24|t[2]<<16|t[1]<<8|t[0],g=t[7]<<24|t[6]<<16|t[5]<<8|t[4],m=t[11]<<24|t[10]<<16|t[9]<<8|t[8],b=t[15]<<24|t[14]<<16|t[13]<<8|t[12],w=a,k=i,x=s,_=o,E=u,S=c,A=l,I=f,C=p,Z=h,R=d,T=v,D=y,P=g,N=m,O=b,B=0;B<20;B+=2)E=(E^=C=C+(D=(D^=w=w+E|0)>>>16|D<<16)|0)>>>20|E<<12,S=(S^=Z=Z+(P=(P^=k=k+S|0)>>>16|P<<16)|0)>>>20|S<<12,A=(A^=R=R+(N=(N^=x=x+A|0)>>>16|N<<16)|0)>>>20|A<<12,I=(I^=T=T+(O=(O^=_=_+I|0)>>>16|O<<16)|0)>>>20|I<<12,A=(A^=R=R+(N=(N^=x=x+A|0)>>>24|N<<8)|0)>>>25|A<<7,I=(I^=T=T+(O=(O^=_=_+I|0)>>>24|O<<8)|0)>>>25|I<<7,S=(S^=Z=Z+(P=(P^=k=k+S|0)>>>24|P<<8)|0)>>>25|S<<7,E=(E^=C=C+(D=(D^=w=w+E|0)>>>24|D<<8)|0)>>>25|E<<7,S=(S^=R=R+(O=(O^=w=w+S|0)>>>16|O<<16)|0)>>>20|S<<12,A=(A^=T=T+(D=(D^=k=k+A|0)>>>16|D<<16)|0)>>>20|A<<12,I=(I^=C=C+(P=(P^=x=x+I|0)>>>16|P<<16)|0)>>>20|I<<12,E=(E^=Z=Z+(N=(N^=_=_+E|0)>>>16|N<<16)|0)>>>20|E<<12,I=(I^=C=C+(P=(P^=x=x+I|0)>>>24|P<<8)|0)>>>25|I<<7,E=(E^=Z=Z+(N=(N^=_=_+E|0)>>>24|N<<8)|0)>>>25|E<<7,A=(A^=T=T+(D=(D^=k=k+A|0)>>>24|D<<8)|0)>>>25|A<<7,S=(S^=R=R+(O=(O^=w=w+S|0)>>>24|O<<8)|0)>>>25|S<<7;n.writeUint32LE(w+a|0,e,0),n.writeUint32LE(k+i|0,e,4),n.writeUint32LE(x+s|0,e,8),n.writeUint32LE(_+o|0,e,12),n.writeUint32LE(E+u|0,e,16),n.writeUint32LE(S+c|0,e,20),n.writeUint32LE(A+l|0,e,24),n.writeUint32LE(I+f|0,e,28),n.writeUint32LE(C+p|0,e,32),n.writeUint32LE(Z+h|0,e,36),n.writeUint32LE(R+d|0,e,40),n.writeUint32LE(T+v|0,e,44),n.writeUint32LE(D+y|0,e,48),n.writeUint32LE(P+g|0,e,52),n.writeUint32LE(N+m|0,e,56),n.writeUint32LE(O+b|0,e,60)}function s(e,t,r,n,s){if(void 0===s&&(s=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var u,c;if(0===s){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=(u=new Uint8Array(16)).length-t.length,u.set(t,c)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");u=t,c=s}for(var l=new Uint8Array(64),f=0;f<r.length;f+=64){i(l,u,e);for(var p=f;p<f+64&&p<r.length;p++)n[p]=r[p]^l[p-f];o(u,0,c)}return a.wipe(l),0===s&&a.wipe(u),n}function o(e,t,r){for(var n=1;r--;)n=n+(255&e[t])|0,e[t]=255&n,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=s,t.stream=function(e,t,r,n){return void 0===n&&(n=0),a.wipe(r),s(e,t,r,r,n)}},3642:function(e,t,r){"use strict";var n=r(8284),a=r(5629),i=r(9116),s=r(6232),o=r(8770);t.Cv=32,t.WH=12,t.pg=16;var u=new Uint8Array(16),c=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,a){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);n.stream(this._key,s,o,4);var u,c=t.length+this.tagLength;if(a){if(a.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=a}else u=new Uint8Array(c);return n.streamXOR(this._key,s,t,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),o,u.subarray(0,u.length-this.tagLength),r),i.wipe(s),u},e.prototype.open=function(e,t,r,a){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var u=new Uint8Array(32);n.stream(this._key,s,u,4);var c=new Uint8Array(this.tagLength);if(this._authenticate(c,u,t.subarray(0,t.length-this.tagLength),r),!o.equal(c,t.subarray(t.length-this.tagLength,t.length)))return null;var l,f=t.length-this.tagLength;if(a){if(a.length!==f)throw new Error("ChaCha20Poly1305: incorrect destination length");l=a}else l=new Uint8Array(f);return n.streamXOR(this._key,s,t.subarray(0,t.length-this.tagLength),l,4),i.wipe(s),l},e.prototype.clean=function(){return i.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,n){var o=new a.Poly1305(t);n&&(o.update(n),n.length%16>0&&o.update(u.subarray(n.length%16))),o.update(r),r.length%16>0&&o.update(u.subarray(r.length%16));var c=new Uint8Array(8);n&&s.writeUint64LE(n.length,c),o.update(c),s.writeUint64LE(r.length,c),o.update(c);for(var l=o.digest(),f=0;f<l.length;f++)e[f]=l[f];o.clean(),i.wipe(l),i.wipe(c)},e}();t.OK=c},8770:function(e,t){"use strict";function r(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,r){return~(e-1)&t|e-1&r},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=r,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==r(e,t)}},1412:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return"undefined"!==typeof e.saveState&&"undefined"!==typeof e.restoreState&&"undefined"!==typeof e.cleanSavedState}},2497:function(e,t,r){"use strict";var n=r(5499),a=r(9116),i=function(){function e(e,t,r,a){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var i=n.hmac(this._hash,r,t);this._hmac=new n.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),a.wipe(this._buffer),a.wipe(this._counter),this._bufpos=0},e}();t.t=i},5499:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1412),a=r(8770),i=r(9116),s=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var a=0;a<r.length;a++)r[a]^=54;this._inner.update(r);for(a=0;a<r.length;a++)r[a]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),i.wipe(r)}return e.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=s,t.hmac=function(e,t,r){var n=new s(e,t);n.update(r);var a=n.digest();return n.clean(),a},t.equal=a.equal},5073:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},5629:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8770),a=r(9116);t.DIGEST_LENGTH=16;var i=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=8191&r;var n=e[2]|e[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var a=e[4]|e[5]<<8;this._r[2]=7939&(n>>>10|a<<6);var i=e[6]|e[7]<<8;this._r[3]=8191&(a>>>7|i<<9);var s=e[8]|e[9]<<8;this._r[4]=255&(i>>>4|s<<12),this._r[5]=s>>>1&8190;var o=e[10]|e[11]<<8;this._r[6]=8191&(s>>>14|o<<2);var u=e[12]|e[13]<<8;this._r[7]=8065&(o>>>11|u<<5);var c=e[14]|e[15]<<8;this._r[8]=8191&(u>>>8|c<<8),this._r[9]=c>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){for(var n=this._fin?0:2048,a=this._h[0],i=this._h[1],s=this._h[2],o=this._h[3],u=this._h[4],c=this._h[5],l=this._h[6],f=this._h[7],p=this._h[8],h=this._h[9],d=this._r[0],v=this._r[1],y=this._r[2],g=this._r[3],m=this._r[4],b=this._r[5],w=this._r[6],k=this._r[7],x=this._r[8],_=this._r[9];r>=16;){var E=e[t+0]|e[t+1]<<8;a+=8191&E;var S=e[t+2]|e[t+3]<<8;i+=8191&(E>>>13|S<<3);var A=e[t+4]|e[t+5]<<8;s+=8191&(S>>>10|A<<6);var I=e[t+6]|e[t+7]<<8;o+=8191&(A>>>7|I<<9);var C=e[t+8]|e[t+9]<<8;u+=8191&(I>>>4|C<<12),c+=C>>>1&8191;var Z=e[t+10]|e[t+11]<<8;l+=8191&(C>>>14|Z<<2);var R=e[t+12]|e[t+13]<<8;f+=8191&(Z>>>11|R<<5);var T=e[t+14]|e[t+15]<<8,D=0,P=D;P+=a*d,P+=i*(5*_),P+=s*(5*x),P+=o*(5*k),D=(P+=u*(5*w))>>>13,P&=8191,P+=c*(5*b),P+=l*(5*m),P+=f*(5*g),P+=(p+=8191&(R>>>8|T<<8))*(5*y);var N=D+=(P+=(h+=T>>>5|n)*(5*v))>>>13;N+=a*v,N+=i*d,N+=s*(5*_),N+=o*(5*x),D=(N+=u*(5*k))>>>13,N&=8191,N+=c*(5*w),N+=l*(5*b),N+=f*(5*m),N+=p*(5*g),D+=(N+=h*(5*y))>>>13,N&=8191;var O=D;O+=a*y,O+=i*v,O+=s*d,O+=o*(5*_),D=(O+=u*(5*x))>>>13,O&=8191,O+=c*(5*k),O+=l*(5*w),O+=f*(5*b),O+=p*(5*m);var B=D+=(O+=h*(5*g))>>>13;B+=a*g,B+=i*y,B+=s*v,B+=o*d,D=(B+=u*(5*_))>>>13,B&=8191,B+=c*(5*x),B+=l*(5*k),B+=f*(5*w),B+=p*(5*b);var L=D+=(B+=h*(5*m))>>>13;L+=a*m,L+=i*g,L+=s*y,L+=o*v,D=(L+=u*d)>>>13,L&=8191,L+=c*(5*_),L+=l*(5*x),L+=f*(5*k),L+=p*(5*w);var M=D+=(L+=h*(5*b))>>>13;M+=a*b,M+=i*m,M+=s*g,M+=o*y,D=(M+=u*v)>>>13,M&=8191,M+=c*d,M+=l*(5*_),M+=f*(5*x),M+=p*(5*k);var U=D+=(M+=h*(5*w))>>>13;U+=a*w,U+=i*b,U+=s*m,U+=o*g,D=(U+=u*y)>>>13,U&=8191,U+=c*v,U+=l*d,U+=f*(5*_),U+=p*(5*x);var j=D+=(U+=h*(5*k))>>>13;j+=a*k,j+=i*w,j+=s*b,j+=o*m,D=(j+=u*g)>>>13,j&=8191,j+=c*y,j+=l*v,j+=f*d,j+=p*(5*_);var F=D+=(j+=h*(5*x))>>>13;F+=a*x,F+=i*k,F+=s*w,F+=o*b,D=(F+=u*m)>>>13,F&=8191,F+=c*g,F+=l*y,F+=f*v,F+=p*d;var z=D+=(F+=h*(5*_))>>>13;z+=a*_,z+=i*x,z+=s*k,z+=o*w,D=(z+=u*b)>>>13,z&=8191,z+=c*m,z+=l*g,z+=f*y,z+=p*v,a=P=8191&(D=(D=((D+=(z+=h*d)>>>13)<<2)+D|0)+(P&=8191)|0),i=N+=D>>>=13,s=O&=8191,o=B&=8191,u=L&=8191,c=M&=8191,l=U&=8191,f=j&=8191,p=F&=8191,h=z&=8191,t+=16,r-=16}this._h[0]=a,this._h[1]=i,this._h[2]=s,this._h[3]=o,this._h[4]=u,this._h[5]=c,this._h[6]=l,this._h[7]=f,this._h[8]=p,this._h[9]=h},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,n,a,i,s=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=r,r=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,s[0]=this._h[0]+5,r=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this._h[i]+r,r=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,n=(1^r)-1,i=0;i<10;i++)s[i]&=n;for(n=~n,i=0;i<10;i++)this._h[i]=this._h[i]&n|s[i];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),a=this._h[0]+this._pad[0],this._h[0]=65535&a,i=1;i<8;i++)a=(this._h[i]+this._pad[i]|0)+(a>>>16)|0,this._h[i]=65535&a;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,n=e.length;if(this._leftover){(t=16-this._leftover)>n&&(t=n);for(var a=0;a<t;a++)this._buffer[this._leftover+a]=e[r+a];if(n-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(t=n-n%16,this._blocks(e,r,t),r+=t,n-=t),n){for(a=0;a<n;a++)this._buffer[this._leftover+a]=e[r+a];this._leftover+=n}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return a.wipe(this._buffer),a.wipe(this._r),a.wipe(this._h),a.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=i,t.oneTimeAuth=function(e,t){var r=new i(e);r.update(t);var n=r.digest();return r.clean(),n},t.equal=function(e,r){return e.length===t.DIGEST_LENGTH&&r.length===t.DIGEST_LENGTH&&n.equal(e,r)}},6271:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(933),a=r(6232),i=r(9116);function s(e,r){return void 0===r&&(r=t.defaultRandomSource),r.randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=s,t.randomUint32=function(e){void 0===e&&(e=t.defaultRandomSource);var r=s(4,e),n=a.readUint32LE(r);return i.wipe(r),n};var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(e,r,n){if(void 0===r&&(r=o),void 0===n&&(n=t.defaultRandomSource),r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");for(var a="",u=r.length,c=256-256%u;e>0;){for(var l=s(Math.ceil(256*e/c),n),f=0;f<l.length&&e>0;f++){var p=l[f];p<c&&(a+=r.charAt(p%u),e--)}i.wipe(l)}return a}t.randomString=u,t.randomStringForEntropy=function(e,r,n){return void 0===r&&(r=o),void 0===n&&(n=t.defaultRandomSource),u(Math.ceil(e/(Math.log(r.length)/Math.LN2)),r,n)}},8136:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.isAvailable=!1,this.isInstantiated=!1;var e="undefined"!==typeof self?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return e.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var t=new Uint8Array(e),r=0;r<t.length;r+=65536)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,65536)));return t},e}();t.BrowserRandomSource=r},8188:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9116),a=function(){function e(){this.isAvailable=!1,this.isInstantiated=!1;var e=r(5883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return e.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var r=new Uint8Array(e),a=0;a<r.length;a++)r[a]=t[a];return n.wipe(t),r},e}();t.NodeRandomSource=a},933:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8136),a=r(8188),i=function(){function e(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new a.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}return e.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},e}();t.SystemRandomSource=i},4888:function(e,t,r){"use strict";var n=r(6232),a=r(9116);t.k=32,t.cn=64;var i=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){a.wipe(this._buffer),a.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=o(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,a=t/536870912|0,i=t<<3,s=t%64<56?64:128;this._buffer[r]=128;for(var u=r+1;u<s-8;u++)this._buffer[u]=0;n.writeUint32BE(a,this._buffer,s-8),n.writeUint32BE(i,this._buffer,s-4),o(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(u=0;u<this.digestLength/4;u++)n.writeUint32BE(this._state[u],e,4*u);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){a.wipe(e.state),e.buffer&&a.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=i;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(e,t,r,a,i){for(;i>=64;){for(var o=t[0],u=t[1],c=t[2],l=t[3],f=t[4],p=t[5],h=t[6],d=t[7],v=0;v<16;v++){var y=a+4*v;e[v]=n.readUint32BE(r,y)}for(v=16;v<64;v++){var g=e[v-2],m=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10,b=((g=e[v-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;e[v]=(m+e[v-7]|0)+(b+e[v-16]|0)}for(v=0;v<64;v++){m=(((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&p^~f&h)|0)+(d+(s[v]+e[v]|0)|0)|0,b=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&u^o&c^u&c)|0;d=h,h=p,p=f,f=l+m|0,l=c,c=u,u=o,o=m+b|0}t[0]+=o,t[1]+=u,t[2]+=c,t[3]+=l,t[4]+=f,t[5]+=p,t[6]+=h,t[7]+=d,a+=64,i-=64}return a}t.vp=function(e){var t=new i;t.update(e);var r=t.digest();return t.clean(),r}},9116:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},2029:function(e,t,r){"use strict";var n=r(6271),a=r(9116);function i(e){var t=new Float64Array(16);if(e)for(var r=0;r<e.length;r++)t[r]=e[r];return t}t.kz=32,t.KS=32;var s=new Uint8Array(32);s[0]=9;var o=i([56129,1]);function u(e){for(var t=1,r=0;r<16;r++){var n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function c(e,t,r){for(var n=~(r-1),a=0;a<16;a++){var i=n&(e[a]^t[a]);e[a]^=i,t[a]^=i}}function l(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function f(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function p(e,t,r){var n,a,i=0,s=0,o=0,u=0,c=0,l=0,f=0,p=0,h=0,d=0,v=0,y=0,g=0,m=0,b=0,w=0,k=0,x=0,_=0,E=0,S=0,A=0,I=0,C=0,Z=0,R=0,T=0,D=0,P=0,N=0,O=0,B=r[0],L=r[1],M=r[2],U=r[3],j=r[4],F=r[5],z=r[6],V=r[7],K=r[8],q=r[9],H=r[10],W=r[11],G=r[12],Y=r[13],Q=r[14],J=r[15];i+=(n=t[0])*B,s+=n*L,o+=n*M,u+=n*U,c+=n*j,l+=n*F,f+=n*z,p+=n*V,h+=n*K,d+=n*q,v+=n*H,y+=n*W,g+=n*G,m+=n*Y,b+=n*Q,w+=n*J,s+=(n=t[1])*B,o+=n*L,u+=n*M,c+=n*U,l+=n*j,f+=n*F,p+=n*z,h+=n*V,d+=n*K,v+=n*q,y+=n*H,g+=n*W,m+=n*G,b+=n*Y,w+=n*Q,k+=n*J,o+=(n=t[2])*B,u+=n*L,c+=n*M,l+=n*U,f+=n*j,p+=n*F,h+=n*z,d+=n*V,v+=n*K,y+=n*q,g+=n*H,m+=n*W,b+=n*G,w+=n*Y,k+=n*Q,x+=n*J,u+=(n=t[3])*B,c+=n*L,l+=n*M,f+=n*U,p+=n*j,h+=n*F,d+=n*z,v+=n*V,y+=n*K,g+=n*q,m+=n*H,b+=n*W,w+=n*G,k+=n*Y,x+=n*Q,_+=n*J,c+=(n=t[4])*B,l+=n*L,f+=n*M,p+=n*U,h+=n*j,d+=n*F,v+=n*z,y+=n*V,g+=n*K,m+=n*q,b+=n*H,w+=n*W,k+=n*G,x+=n*Y,_+=n*Q,E+=n*J,l+=(n=t[5])*B,f+=n*L,p+=n*M,h+=n*U,d+=n*j,v+=n*F,y+=n*z,g+=n*V,m+=n*K,b+=n*q,w+=n*H,k+=n*W,x+=n*G,_+=n*Y,E+=n*Q,S+=n*J,f+=(n=t[6])*B,p+=n*L,h+=n*M,d+=n*U,v+=n*j,y+=n*F,g+=n*z,m+=n*V,b+=n*K,w+=n*q,k+=n*H,x+=n*W,_+=n*G,E+=n*Y,S+=n*Q,A+=n*J,p+=(n=t[7])*B,h+=n*L,d+=n*M,v+=n*U,y+=n*j,g+=n*F,m+=n*z,b+=n*V,w+=n*K,k+=n*q,x+=n*H,_+=n*W,E+=n*G,S+=n*Y,A+=n*Q,I+=n*J,h+=(n=t[8])*B,d+=n*L,v+=n*M,y+=n*U,g+=n*j,m+=n*F,b+=n*z,w+=n*V,k+=n*K,x+=n*q,_+=n*H,E+=n*W,S+=n*G,A+=n*Y,I+=n*Q,C+=n*J,d+=(n=t[9])*B,v+=n*L,y+=n*M,g+=n*U,m+=n*j,b+=n*F,w+=n*z,k+=n*V,x+=n*K,_+=n*q,E+=n*H,S+=n*W,A+=n*G,I+=n*Y,C+=n*Q,Z+=n*J,v+=(n=t[10])*B,y+=n*L,g+=n*M,m+=n*U,b+=n*j,w+=n*F,k+=n*z,x+=n*V,_+=n*K,E+=n*q,S+=n*H,A+=n*W,I+=n*G,C+=n*Y,Z+=n*Q,R+=n*J,y+=(n=t[11])*B,g+=n*L,m+=n*M,b+=n*U,w+=n*j,k+=n*F,x+=n*z,_+=n*V,E+=n*K,S+=n*q,A+=n*H,I+=n*W,C+=n*G,Z+=n*Y,R+=n*Q,T+=n*J,g+=(n=t[12])*B,m+=n*L,b+=n*M,w+=n*U,k+=n*j,x+=n*F,_+=n*z,E+=n*V,S+=n*K,A+=n*q,I+=n*H,C+=n*W,Z+=n*G,R+=n*Y,T+=n*Q,D+=n*J,m+=(n=t[13])*B,b+=n*L,w+=n*M,k+=n*U,x+=n*j,_+=n*F,E+=n*z,S+=n*V,A+=n*K,I+=n*q,C+=n*H,Z+=n*W,R+=n*G,T+=n*Y,D+=n*Q,P+=n*J,b+=(n=t[14])*B,w+=n*L,k+=n*M,x+=n*U,_+=n*j,E+=n*F,S+=n*z,A+=n*V,I+=n*K,C+=n*q,Z+=n*H,R+=n*W,T+=n*G,D+=n*Y,P+=n*Q,N+=n*J,w+=(n=t[15])*B,s+=38*(x+=n*M),o+=38*(_+=n*U),u+=38*(E+=n*j),c+=38*(S+=n*F),l+=38*(A+=n*z),f+=38*(I+=n*V),p+=38*(C+=n*K),h+=38*(Z+=n*q),d+=38*(R+=n*H),v+=38*(T+=n*W),y+=38*(D+=n*G),g+=38*(P+=n*Y),m+=38*(N+=n*Q),b+=38*(O+=n*J),i=(n=(i+=38*(k+=n*L))+(a=1)+65535)-65536*(a=Math.floor(n/65536)),s=(n=s+a+65535)-65536*(a=Math.floor(n/65536)),o=(n=o+a+65535)-65536*(a=Math.floor(n/65536)),u=(n=u+a+65535)-65536*(a=Math.floor(n/65536)),c=(n=c+a+65535)-65536*(a=Math.floor(n/65536)),l=(n=l+a+65535)-65536*(a=Math.floor(n/65536)),f=(n=f+a+65535)-65536*(a=Math.floor(n/65536)),p=(n=p+a+65535)-65536*(a=Math.floor(n/65536)),h=(n=h+a+65535)-65536*(a=Math.floor(n/65536)),d=(n=d+a+65535)-65536*(a=Math.floor(n/65536)),v=(n=v+a+65535)-65536*(a=Math.floor(n/65536)),y=(n=y+a+65535)-65536*(a=Math.floor(n/65536)),g=(n=g+a+65535)-65536*(a=Math.floor(n/65536)),m=(n=m+a+65535)-65536*(a=Math.floor(n/65536)),b=(n=b+a+65535)-65536*(a=Math.floor(n/65536)),w=(n=w+a+65535)-65536*(a=Math.floor(n/65536)),i=(n=(i+=a-1+37*(a-1))+(a=1)+65535)-65536*(a=Math.floor(n/65536)),s=(n=s+a+65535)-65536*(a=Math.floor(n/65536)),o=(n=o+a+65535)-65536*(a=Math.floor(n/65536)),u=(n=u+a+65535)-65536*(a=Math.floor(n/65536)),c=(n=c+a+65535)-65536*(a=Math.floor(n/65536)),l=(n=l+a+65535)-65536*(a=Math.floor(n/65536)),f=(n=f+a+65535)-65536*(a=Math.floor(n/65536)),p=(n=p+a+65535)-65536*(a=Math.floor(n/65536)),h=(n=h+a+65535)-65536*(a=Math.floor(n/65536)),d=(n=d+a+65535)-65536*(a=Math.floor(n/65536)),v=(n=v+a+65535)-65536*(a=Math.floor(n/65536)),y=(n=y+a+65535)-65536*(a=Math.floor(n/65536)),g=(n=g+a+65535)-65536*(a=Math.floor(n/65536)),m=(n=m+a+65535)-65536*(a=Math.floor(n/65536)),b=(n=b+a+65535)-65536*(a=Math.floor(n/65536)),w=(n=w+a+65535)-65536*(a=Math.floor(n/65536)),i+=a-1+37*(a-1),e[0]=i,e[1]=s,e[2]=o,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=p,e[8]=h,e[9]=d,e[10]=v,e[11]=y,e[12]=g,e[13]=m,e[14]=b,e[15]=w}function h(e,t){p(e,t,t)}function d(e,t){for(var r=new Uint8Array(32),n=new Float64Array(80),a=i(),s=i(),d=i(),v=i(),y=i(),g=i(),m=0;m<31;m++)r[m]=e[m];r[31]=127&e[31]|64,r[0]&=248,function(e,t){for(var r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(n,t);for(m=0;m<16;m++)s[m]=n[m];a[0]=v[0]=1;for(m=254;m>=0;--m){var b=r[m>>>3]>>>(7&m)&1;c(a,s,b),c(d,v,b),l(y,a,d),f(a,a,d),l(d,s,v),f(s,s,v),h(v,y),h(g,a),p(a,d,a),p(d,s,y),l(y,a,d),f(a,a,d),h(s,a),f(d,v,g),p(a,d,o),l(a,a,v),p(d,d,a),p(a,v,g),p(v,s,n),h(s,y),c(a,s,b),c(d,v,b)}for(m=0;m<16;m++)n[m+16]=a[m],n[m+32]=d[m],n[m+48]=s[m],n[m+64]=v[m];var w=n.subarray(32),k=n.subarray(16);!function(e,t){for(var r=i(),n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)h(r,r),2!==n&&4!==n&&p(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}(w,w),p(k,k,w);var x=new Uint8Array(32);return function(e,t){for(var r=i(),n=i(),a=0;a<16;a++)n[a]=t[a];u(n),u(n),u(n);for(var s=0;s<2;s++){for(r[0]=n[0]-65517,a=1;a<15;a++)r[a]=n[a]-65535-(r[a-1]>>16&1),r[a-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);var o=r[15]>>16&1;r[14]&=65535,c(n,r,1-o)}for(a=0;a<16;a++)e[2*a]=255&n[a],e[2*a+1]=n[a]>>8}(x,k),x}function v(e){return d(e,s)}function y(e){if(e.length!==t.KS)throw new Error("x25519: seed must be "+t.KS+" bytes");var r=new Uint8Array(e);return{publicKey:v(r),secretKey:r}}t._w=y,t.Au=function(e){var t=n.randomBytes(32,e),r=y(t);return a.wipe(t),r},t.gi=function(e,r,n){if(void 0===n&&(n=!1),e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==t.kz)throw new Error("X25519: incorrect public key length");var a=d(e,r);if(n){for(var i=0,s=0;s<a.length;s++)i|=a[s];if(0===i)throw new Error("X25519: invalid shared key")}return a}},6755:function(e,t){"use strict";var r=Math.exp;e.exports=function(e){if("number"!==typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");var t,n,a=0,i=0,s=0,o={};return o.push=function(o,u){if(n){var c=1-r(-(o-n)/e),l=u-t;t=c*u+(1-c)*t,a=(1-c)*(a+l*(c*l)),i=Math.sqrt(a),s=t+c*l}else t=u;n=o},o.movingAverage=function(){return t},o.variance=function(){return a},o.deviation=function(){return i},o.forecast=function(){return s},o}},7186:function(e,t,r){"use strict";var n=r(2122).default,a=Object.freeze({});function i(e){if("object"!==typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}i.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},i.prototype.put=function(e,t,r){this._checkWritten();var n=this.db._checkKey(e)||this.db._checkValue(t);if(n)throw n;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t,null!=r?r:a),this},i.prototype._put=function(e,t,r){this._operations.push(n(n({},r),{},{type:"put",key:e,value:t}))},i.prototype.del=function(e,t){this._checkWritten();var r=this.db._checkKey(e);if(r)throw r;return e=this.db._serializeKey(e),this._del(e,null!=t?t:a),this},i.prototype._del=function(e,t){this._operations.push(n(n({},t),{},{type:"del",key:e}))},i.prototype.clear=function(){return this._checkWritten(),this._clear(),this},i.prototype._clear=function(){this._operations=[]},i.prototype.write=function(e,t){if(this._checkWritten(),"function"===typeof e&&(t=e),"function"!==typeof t)throw new Error("write() requires a callback argument");"object"===typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},i.prototype._write=function(e,t){this.db._batch(this._operations,e,t)},i.prototype._nextTick=r(7873),e.exports=i},5400:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default;function s(e){if("object"!==typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}s.prototype.next=function(e){var t=this,r=this;if(void 0===e)r=new Promise((function(t,r){e=function(e,n,a){e?r(e):void 0===n&&void 0===a?t():t([n,a])}}));else if("function"!==typeof e)throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(e,new Error("cannot call next() after end()")),r):this._nexting?(this._nextTick(e,new Error("cannot call next() before previous next() has completed")),r):(this._nexting=!0,this._next((function(r){t._nexting=!1;for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];e.apply(void 0,[r].concat(a))})),r)},s.prototype._next=function(e){this._nextTick(e)},s.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},s.prototype._seek=function(e){},s.prototype.end=function(e){var t;if(void 0===e)t=new Promise((function(t,r){e=function(e){e?r(e):t()}}));else if("function"!==typeof e)throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(e,new Error("end() already called on iterator")),t):(this._ended=!0,this._end(e),t)},s.prototype._end=function(e){this._nextTick(e)},s.prototype[Symbol.asyncIterator]=i(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.next=3,a(this.next());case 3:if(e.t0=t=e.sent,e.t1=void 0,e.t0===e.t1){e.next=10;break}return e.next=8,t;case 8:e.next=1;break;case 10:if(e.prev=10,this._ended){e.next=14;break}return e.next=14,a(this.end());case 14:return e.finish(10);case 15:case"end":return e.stop()}}),e,this,[[0,,10,15]])}))),s.prototype._nextTick=r(7873),e.exports=s},7025:function(e,t,r){"use strict";var n=r(2122).default,a=r(7987),i=r(5586),s=r(5240),o=r(5400),u=r(7186),c=r(9375).R,l=r(9375).F,f=Object.prototype.hasOwnProperty,p=["lt","lte","gt","gte"];function h(e){this.status="new",this.supports=a(e,{status:!0})}function d(e,t){var r={};for(var n in t)if(f.call(t,n)){if("start"===n||"end"===n)throw new Error('Legacy range options ("start" and "end") have been removed');var a=t[n];v(n)&&(a=e._serializeKey(a)),r[n]=a}return r}function v(e){return-1!==p.indexOf(e)}h.prototype.open=function(e,t){var r=this,n=this.status;if("function"===typeof e&&(t=e),"function"!==typeof t)throw new Error("open() requires a callback argument");"object"===typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,(function(e){if(e)return r.status=n,t(e);r.status="open",t()}))},h.prototype._open=function(e,t){this._nextTick(t)},h.prototype.close=function(e){var t=this,r=this.status;if("function"!==typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close((function(n){if(n)return t.status=r,e(n);t.status="closed",e()}))},h.prototype._close=function(e){this._nextTick(e)},h.prototype.get=function(e,t,r){if("function"===typeof t&&(r=t),"function"!==typeof r)throw new Error("get() requires a callback argument");var n=this._checkKey(e);if(n)return this._nextTick(r,n);e=this._serializeKey(e),"object"===typeof t&&null!==t||(t={}),t.asBuffer=!1!==t.asBuffer,this._get(e,t,r)},h.prototype._get=function(e,t,r){this._nextTick((function(){r(new Error("NotFound"))}))},h.prototype.getMany=function(e,t,r){if(r=c(t,r),r=s.fromCallback(r),t=l(t),function(e,t){if(!e.isOperational())return e._nextTick(t,new Error("Database is not open")),!0;return!1}(this,r))return r.promise;if(!Array.isArray(e))return this._nextTick(r,new Error("getMany() requires an array argument")),r.promise;if(0===e.length)return this._nextTick(r,null,[]),r.promise;"boolean"!==typeof t.asBuffer&&(t=n(n({},t),{},{asBuffer:!0}));for(var a=new Array(e.length),i=0;i<e.length;i++){var o=e[i],u=this._checkKey(o);if(u)return this._nextTick(r,u),r.promise;a[i]=this._serializeKey(o)}return this._getMany(a,t,r),r.promise},h.prototype._getMany=function(e,t,r){this._nextTick(r,null,new Array(e.length).fill(void 0))},h.prototype.put=function(e,t,r,n){if("function"===typeof r&&(n=r),"function"!==typeof n)throw new Error("put() requires a callback argument");var a=this._checkKey(e)||this._checkValue(t);if(a)return this._nextTick(n,a);e=this._serializeKey(e),t=this._serializeValue(t),"object"===typeof r&&null!==r||(r={}),this._put(e,t,r,n)},h.prototype._put=function(e,t,r,n){this._nextTick(n)},h.prototype.del=function(e,t,r){if("function"===typeof t&&(r=t),"function"!==typeof r)throw new Error("del() requires a callback argument");var n=this._checkKey(e);if(n)return this._nextTick(r,n);e=this._serializeKey(e),"object"===typeof t&&null!==t||(t={}),this._del(e,t,r)},h.prototype._del=function(e,t,r){this._nextTick(r)},h.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"===typeof t&&(r=t),"function"===typeof e&&(r=e),"function"!==typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return this._nextTick(r,new Error("batch(array) requires an array argument"));if(0===e.length)return this._nextTick(r);"object"===typeof t&&null!==t||(t={});for(var n=new Array(e.length),a=0;a<e.length;a++){if("object"!==typeof e[a]||null===e[a])return this._nextTick(r,new Error("batch(array) element must be an object and not `null`"));var i=Object.assign({},e[a]);if("put"!==i.type&&"del"!==i.type)return this._nextTick(r,new Error("`type` must be 'put' or 'del'"));var s=this._checkKey(i.key);if(s)return this._nextTick(r,s);if(i.key=this._serializeKey(i.key),"put"===i.type){var o=this._checkValue(i.value);if(o)return this._nextTick(r,o);i.value=this._serializeValue(i.value)}n[a]=i}this._batch(n,t,r)},h.prototype._batch=function(e,t,r){this._nextTick(r)},h.prototype.clear=function(e,t){if("function"===typeof e)t=e;else if("function"!==typeof t)throw new Error("clear() requires a callback argument");(e=d(this,e)).reverse=!!e.reverse,e.limit="limit"in e?e.limit:-1,this._clear(e,t)},h.prototype._clear=function(e,t){var r=this;e.keys=!0,e.values=!1,e.keyAsBuffer=!0,e.valueAsBuffer=!0;var n=this._iterator(e),a={};!function e(i){if(i)return n.end((function(){t(i)}));n.next((function(i,s){return i?e(i):void 0===s?n.end(t):void r._del(s,a,e)}))}()},h.prototype._setupIteratorOptions=function(e){return(e=d(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},h.prototype.iterator=function(e){return"object"===typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},h.prototype._iterator=function(e){return new o(this)},h.prototype._chainedBatch=function(){return new u(this)},h.prototype._serializeKey=function(e){return e},h.prototype._serializeValue=function(e){return e},h.prototype._checkKey=function(e){return null===e||void 0===e?new Error("key cannot be `null` or `undefined`"):i(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},h.prototype._checkValue=function(e){if(null===e||void 0===e)return new Error("value cannot be `null` or `undefined`")},h.prototype.isOperational=function(){return"open"===this.status||this._isOperational()},h.prototype._isOperational=function(){return!1},h.prototype._nextTick=r(7873),e.exports=h},6701:function(e,t,r){"use strict";t.AbstractLevelDOWN=r(7025),t.AbstractIterator=r(5400),t.AbstractChainedBatch=r(7186)},9375:function(e,t){"use strict";t.R=function(e,t){return"function"===typeof e?e:t},t.F=function(e){return"object"===typeof e&&null!==e?e:{}}},7873:function(e,t,r){"use strict";var n=r(4183);e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];0===r.length?n(e):n((function(){return e.apply(void 0,r)}))}},6622:function(e,t,r){var n=r(4704).default;function a(e){var t=new globalThis.AbortController;function r(){t.abort();var a,i=n(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;s&&s.removeEventListener&&s.removeEventListener("abort",r)}}catch(o){i.e(o)}finally{i.f()}}var a,i=n(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(s&&s.addEventListener){if(s.aborted){r();break}s.addEventListener("abort",r)}}}catch(o){i.e(o)}finally{i.f()}return t.signal}e.exports=a,e.exports.anySignal=a},2009:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=u(e),s=i[0],o=i[1],c=new a(function(e,t,r){return 3*(t+r)/4-r}(0,s,o)),l=0,f=o>0?s-4:s;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],s=16383,o=0,u=n-a;o<u;o+=s)i.push(c(e,o,o+s>u?u:o+s));1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],n=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=i.length;s<o;++s)r[s]=i[s],n[i.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var a,i,s=[],o=t;o<n;o+=3)a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1976:function(e,t,r){"use strict";var n=r(9778).Buffer,a=Symbol.for("BufferList");function i(e){if(!(this instanceof i))return new i(e);i._init.call(this,e)}i._init=function(e){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},i.prototype._new=function(e){return new i(e)},i.prototype._offset=function(e){if(0===e)return[0,0];for(var t=0,r=0;r<this._bufs.length;r++){var n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},i.prototype._reverseOffset=function(e){for(var t=e[0],r=e[1],n=0;n<t;n++)r+=this._bufs[n].length;return r},i.prototype.get=function(e){if(!(e>this.length||e<0)){var t=this._offset(e);return this._bufs[t[0]][t[1]]}},i.prototype.slice=function(e,t){return"number"===typeof e&&e<0&&(e+=this.length),"number"===typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(e,t,r,a){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof a||a>this.length)&&(a=this.length),r>=this.length)return e||n.alloc(0);if(a<=0)return e||n.alloc(0);var i=!!e,s=this._offset(r),o=a-r,u=o,c=i&&t||0,l=s[1];if(0===r&&a===this.length){if(!i)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(var f=0;f<this._bufs.length;f++)this._bufs[f].copy(e,c),c+=this._bufs[f].length;return e}if(u<=this._bufs[s[0]].length-l)return i?this._bufs[s[0]].copy(e,t,l,l+u):this._bufs[s[0]].slice(l,l+u);i||(e=n.allocUnsafe(o));for(var p=s[0];p<this._bufs.length;p++){var h=this._bufs[p].length-l;if(!(u>h)){this._bufs[p].copy(e,c,l,l+u),c+=h;break}this._bufs[p].copy(e,c,l),c+=h,u-=h,l&&(l=0)}return e.length>c?e.slice(0,c):e},i.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!==typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();var r=this._offset(e),n=this._offset(t),a=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?a.pop():a[a.length-1]=a[a.length-1].slice(0,n[1]),0!==r[1]&&(a[0]=a[0].slice(r[1])),this._new(a)},i.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},i.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){for(var e=this._new(),t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},i.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(var t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(var r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else"number"===typeof e&&(e=e.toString()),this._appendBuffer(n.from(e));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"===typeof t&&(r=t,t=void 0),"function"===typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof e?e=n.from([e]):"string"===typeof e?e=n.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=n.from(e.buffer,e.byteOffset,e.byteLength):n.isBuffer(e)||(e=n.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;for(var a=this._offset(t),i=a[0],s=a[1];i<this._bufs.length;i++){for(var o=this._bufs[i];s<o.length;){if(o.length-s>=e.length){var u=o.indexOf(e,s);if(-1!==u)return this._reverseOffset([i,u]);s=o.length-e.length+1}else{var c=this._reverseOffset([i,s]);if(this._match(c,e))return c;s++}}s=0}return-1},i.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)!function(t){i.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.slice(r,r+e[t])[t](0)}}(t)}(),i.prototype._isBufferList=function(e){return e instanceof i||i.isBufferList(e)},i.isBufferList=function(e){return null!=e&&e[a]},e.exports=i},2017:function(e,t,r){"use strict";var n=r(6314);e.exports=function(e){return"function"===typeof e.stream?n(e.stream()):n(new Response(e).body)}},3844:function(e,t,r){var n=r(8416).default,a=r(5125);e.exports=function(e){var t,r,i;"function"===typeof(e=e||{})?(i=e,e={}):i=e.onEnd;var s,o,u,c=new a,l=function(e){return o?o(e):(c.push(e),s)},f=function(e){return u?s:l({done:!1,value:e})},p=function(e){return u?s:(u=!0,e?function(e){return c=new a,o?o({error:e}):(c.push({error:e}),s)}(e):l({done:!0}))};if(n(t={},Symbol.asyncIterator,(function(){return this})),n(t,"next",(function(){if(!c.isEmpty()){if(e.writev){for(var t,r=[];!c.isEmpty();){if((t=c.shift()).error)throw t.error;r.push(t.value)}return{done:t.done,value:r}}var n=c.shift();if(n.error)throw n.error;return n}return u?{done:!0}:new Promise((function(t,r){o=function(n){return o=null,n.error?r(n.error):e.writev&&!n.done?t({done:n.done,value:[n.value]}):t(n),s}}))})),n(t,"return",(function(){return c=new a,p(),{done:!0}})),n(t,"throw",(function(e){return p(e),{done:!0}})),n(t,"push",f),n(t,"end",p),s=t,!i)return s;var h=s;return n(r={},Symbol.asyncIterator,(function(){return this})),n(r,"next",(function(){return h.next()})),n(r,"throw",(function(e){return h.throw(e),i&&(i(e),i=null),{done:!0}})),n(r,"return",(function(){return h.return(),i&&(i(),i=null),{done:!0}})),n(r,"push",f),n(r,"end",(function(e){return h.end(e),i&&(i(e),i=null),s})),s=r}},6314:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default;function s(){return s=i(n().mark((function e(t){var r,i,s,o=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>1&&void 0!==o[1]?o[1]:{},i=t.getReader(),e.prev=2;case 3:return e.next=6,a(i.read());case 6:if(!(s=e.sent).done){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,s.value;case 11:e.next=3;break;case 13:return e.prev=13,!0!==r.preventCancel&&i.cancel(),i.releaseLock(),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[2,,13,17]])}))),s.apply(this,arguments)}e.exports=function(e){return s.apply(this,arguments)}},9778:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6115).default,s=r(1655).default,o=r(6389).default,u=r(2009),c=r(4038),l="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},t.INSPECT_MAX_BYTES=50;var f=2147483647;function p(e){if(e>f)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,h.prototype),t}function h(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return y(e)}return d(e,t,r)}function d(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|w(e,t),n=p(r),a=n.write(e,t);a!==r&&(n=n.slice(0,a));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return m(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return h.from(n,t,r);var a=function(e){if(h.isBuffer(e)){var t=0|b(e.length),r=p(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?p(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(a)return a;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function v(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function y(e){return v(e),p(e<0?0:0|b(e))}function g(e){for(var t=e.length<0?0:0|b(e.length),r=p(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function m(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,h.prototype),n}function b(e){if(e>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|e}function w(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return J(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(a)return n?-1:J(e).length;t=(""+t).toLowerCase(),a=!0}}function k(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function x(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,a){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),te(r=+r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"===typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,a);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,a){var i,s=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(a){var l=-1;for(i=r;i<o;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(r+u>o&&(r=o-u),i=r;i>=0;i--){for(var f=!0,p=0;p<u;p++)if(c(e,i+p)!==c(t,p)){f=!1;break}if(f)return i}return-1}function S(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i,s=t.length;for(n>s/2&&(n=s/2),i=0;i<n;++i){var o=parseInt(t.substr(2*i,2),16);if(te(o))return i;e[r+i]=o}return i}function A(e,t,r,n){return $(J(t,e.length-r),e,r,n)}function I(e,t,r,n){return $(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function C(e,t,r,n){return $(X(t),e,r,n)}function Z(e,t,r,n){return $(function(e,t){for(var r,n,a,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,a=r%256,i.push(a),i.push(n);return i}(t,e.length-r),e,r,n)}function R(e,t,r){return 0===t&&r===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i=e[a],s=null,o=i>239?4:i>223?3:i>191?2:1;if(a+o<=r){var u=void 0,c=void 0,l=void 0,f=void 0;switch(o){case 1:i<128&&(s=i);break;case 2:128===(192&(u=e[a+1]))&&(f=(31&i)<<6|63&u)>127&&(s=f);break;case 3:u=e[a+1],c=e[a+2],128===(192&u)&&128===(192&c)&&(f=(15&i)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=e[a+1],c=e[a+2],l=e[a+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),a+=o}return function(e){var t=e.length;if(t<=D)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=D));return r}(n)}t.kMaxLength=f,h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(r){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(e,t,r){return d(e,t,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,r){return function(e,t,r){return v(e),e<=0?p(e):void 0!==t?"string"===typeof r?p(e).fill(t,r):p(e).fill(t):p(e)}(e,t,r)},h.allocUnsafe=function(e){return y(e)},h.allocUnsafeSlow=function(e){return y(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=h.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var i=e[r];if(ee(i,Uint8Array))a+i.length>n.length?(h.isBuffer(i)||(i=h.from(i)),i.copy(n,a)):Uint8Array.prototype.set.call(n,i,a);else{if(!h.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a)}a+=i.length}return n},h.byteLength=w,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)x(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):k.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},l&&(h.prototype[l]=h.prototype.inspect),h.prototype.compare=function(e,t,r,n,a){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(i,s),u=this.slice(n,a),c=e.slice(t,r),l=0;l<o;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return A(this,e,t,r);case"ascii":case"latin1":case"binary":return I(this,e,t,r);case"base64":return C(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function P(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=re[e[i]];return a}function B(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length-1;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function L(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,a,i){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n,a){W(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;var s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function j(e,t,r,n,a){W(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;var s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function F(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,a){return t=+t,r>>>=0,a||F(e,0,r,4),c.write(e,t,r,n,23,4),r+4}function V(e,t,r,n,a){return t=+t,r>>>=0,a||F(e,0,r,8),c.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readBigUInt64LE=ne((function(e){G(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),a=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+r*Math.pow(2,24);return BigInt(n)+(BigInt(a)<<BigInt(32))})),h.prototype.readBigUInt64BE=ne((function(e){G(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],a=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r;return(BigInt(n)<<BigInt(32))+BigInt(a)})),h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},h.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readBigInt64LE=ne((function(e){G(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),h.prototype.readBigInt64BE=ne((function(e){G(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r)})),h.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),c.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),c.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),c.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),c.read(this,e,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigUInt64LE=ne((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ne((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigInt64LE=ne((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ne((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return V(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return V(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),a},h.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var a=e.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(e=a)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=h.isBuffer(e)?e:h.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};var K={};function q(e,t,r){K[e]=function(r){s(c,r);var u=o(c);function c(){var r;return n(this,c),r=u.call(this),Object.defineProperty(i(r),"message",{value:t.apply(i(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(e,"]"),r.stack,delete r.name,r}return a(c,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),c}(r)}function H(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function W(e,t,r,n,a,i){if(e>r||e<t){var s,o="bigint"===typeof t?"n":"";throw s=i>3?0===t||t===BigInt(0)?">= 0".concat(o," and < 2").concat(o," ** ").concat(8*(i+1)).concat(o):">= -(2".concat(o," ** ").concat(8*(i+1)-1).concat(o,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(o):">= ".concat(t).concat(o," and <= ").concat(r).concat(o),new K.ERR_OUT_OF_RANGE("value",s,e)}!function(e,t,r){G(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||Y(t,e.length-(r+1))}(n,a,i)}function G(e,t){if("number"!==typeof e)throw new K.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,r){if(Math.floor(e)!==e)throw G(e,r),new K.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new K.ERR_BUFFER_OUT_OF_BOUNDS;throw new K.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,r){var n='The value of "'.concat(e,'" is out of range.'),a=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?a=H(String(r)):"bigint"===typeof r&&(a=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(a=H(a)),a+="n"),n+=" It must be ".concat(t,". Received ").concat(a)}),RangeError);var Q=/[^+/0-9A-Za-z-_]/g;function J(e,t){var r;t=t||1/0;for(var n=e.length,a=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function $(e,t,r,n){var a;for(a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var re=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,a=0;a<16;++a)t[n+a]=e[r]+e[a];return t}();function ne(e){return"undefined"===typeof BigInt?ae:e}function ae(){throw new Error("BigInt not supported")}},1438:function(e){"use strict";e.exports=function(e,t){if("string"===typeof e)return s(e);if("number"===typeof e)return i(e,t);return null},e.exports.format=i,e.exports.parse=s;var t=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},a=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function i(e,a){if(!Number.isFinite(e))return null;var i=Math.abs(e),s=a&&a.thousandsSeparator||"",o=a&&a.unitSeparator||"",u=a&&void 0!==a.decimalPlaces?a.decimalPlaces:2,c=Boolean(a&&a.fixedDecimals),l=a&&a.unit||"";l&&n[l.toLowerCase()]||(l=i>=n.pb?"PB":i>=n.tb?"TB":i>=n.gb?"GB":i>=n.mb?"MB":i>=n.kb?"KB":"B");var f=(e/n[l.toLowerCase()]).toFixed(u);return c||(f=f.replace(r,"$1")),s&&(f=f.split(".").map((function(e,r){return 0===r?e.replace(t,s):e})).join(".")),f+o+l}function s(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,r=a.exec(e),i="b";return r?(t=parseFloat(r[1]),i=r[4].toLowerCase()):(t=parseInt(e,10),i="b"),isNaN(t)?null:Math.floor(n[i]*t)}},4037:function(e,t,r){"use strict";var n=r(2506),a=r(9722),i=a(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"===typeof r&&i(e,".prototype.")>-1?a(r):r}},9722:function(e,t,r){"use strict";var n=r(3350),a=r(2506),i=a("%Function.prototype.apply%"),s=a("%Function.prototype.call%"),o=a("%Reflect.apply%",!0)||n.call(s,i),u=a("%Object.getOwnPropertyDescriptor%",!0),c=a("%Object.defineProperty%",!0),l=a("%Math.max%");if(c)try{c({},"a",{value:1})}catch(p){c=null}e.exports=function(e){var t=o(n,s,arguments);if(u&&c){var r=u(t,"length");r.configurable&&c(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var f=function(){return o(n,i,arguments)};c?c(e.exports,"apply",{value:f}):e.exports.apply=f},5240:function(e,t,r){"use strict";var n=r(9650);t.fromCallback=function(e,t){if(void 0===e){var r=new Promise((function(t,r){e=function(e,n){e?r(e):t(n)}}));e[void 0!==t?t:"promise"]=r}else if("function"!==typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){n((function(){return t(null,e)}))})).catch((function(e){n((function(){return t(e)}))}))}},9650:function(e){e.exports="function"===typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)}},8926:function(e,t,r){e.exports=function(){var e=e||function(e,t){var n;if("undefined"!==typeof window&&window.crypto&&(n=window.crypto),"undefined"!==typeof self&&self.crypto&&(n=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!==typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&"undefined"!==typeof r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(2480)}catch(y){}var a=function(){if(n){if("function"===typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(y){}if("function"===typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(y){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),s={},o=s.lib={},u=o.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=u.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,a=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<a;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=s<<24-(n+i)%4*8}else for(var o=0;o<a;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(a());return new c.init(t,e)}}),l=s.enc={},f=l.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;a<r;a++){var i=t[a>>>2]>>>24-a%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(r,t/2)}},p=l.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;a<r;a++){var i=t[a>>>2]>>>24-a%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(r,t)}},h=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,a=n.words,i=n.sigBytes,s=this.blockSize,o=i/(4*s),u=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*s,l=e.min(4*u,i);if(u){for(var f=0;f<u;f+=s)this._doProcessBlock(a,f);r=a.splice(0,u),n.sigBytes-=l}return new c.init(r,l)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),v=(o.Hasher=d.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new v.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math);return e}()},9517:function(e,t,r){!function(t,n){var a;e.exports=(a=r(8926),function(e){var t=a,r=t.lib,n=r.WordArray,i=r.Hasher,s=t.algo,o=[],u=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,a=0;a<64;)t(n)&&(a<8&&(o[a]=r(e.pow(n,.5))),u[a]=r(e.pow(n,1/3)),a++),n++}();var c=[],l=s.SHA256=i.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],s=r[3],o=r[4],l=r[5],f=r[6],p=r[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var d=c[h-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=c[h-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[h]=v+c[h-7]+g+c[h-16]}var m=n&a^n&i^a&i,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=p+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&l^~o&f)+u[h]+c[h];p=f,f=l,l=o,o=s+w|0,s=i,i=a,a=n,n=w+(b+m)|0}r[0]=r[0]+n|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+o|0,r[5]=r[5]+l|0,r[6]=r[6]+f|0,r[7]=r[7]+p|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;return r[a>>>5]|=128<<24-a%32,r[14+(a+64>>>9<<4)]=e.floor(n/4294967296),r[15+(a+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),a.SHA256)}()},8296:function(e,t,r){"use strict";var n=r(7424).default;Object.defineProperty(t,"__esModule",{value:!0});var a=r(229);function i(e){var t={};return e.encrypted_key&&(t.encrypted_key=a.fromBase64url(e.encrypted_key)),e.header&&(t.header=e.header),t}function s(e){var t={};return e.encrypted_key&&(t.encrypted_key=a.toBase64url(e.encrypted_key)),e.header&&(t.header=e.header),t}t.default={fromSplit:function(e){var t=n(e,5),r=t[0],a=t[1],i=t[2],s={ciphertext:t[3],iv:i,protected:r,tag:t[4]};return a&&(s.recipients=[{encrypted_key:a}]),s},decode:function(e){var t={ciphertext:a.toBase64url(e.ciphertext),protected:a.toBase64url(e.protected),iv:a.toBase64url(e.iv),tag:a.toBase64url(e.tag)};return e.aad&&(t.aad=a.toBase64url(e.aad)),e.recipients&&(t.recipients=e.recipients.map(s)),e.unprotected&&(t.unprotected=e.unprotected),t},encode:function(e){var t={ciphertext:a.fromBase64url(e.ciphertext),protected:a.fromBase64url(e.protected),iv:a.fromBase64url(e.iv),tag:a.fromBase64url(e.tag)};return e.aad&&(t.aad=a.fromBase64url(e.aad)),e.recipients&&(t.recipients=e.recipients.map(i)),e.unprotected&&(t.unprotected=e.unprotected),t}}},8990:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.toGeneral=t.code=t.name=void 0;var o=s(r(3744)),u=s(r(8296)),c=i(r(8204));function l(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function f(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function p(e){if("string"===typeof e){var t=e.split(".");if(3===t.length)return o.default.fromSplit(t);if(5===t.length)return u.default.fromSplit(t);throw new Error("Not a valid JOSE string")}if(l(e)||f(e))return e;throw new Error("Not a valid unencoded JOSE object")}t.name="dag-jose",t.code=133,t.toGeneral=p,t.encode=function(e){var t;if("string"===typeof e&&(e=p(e)),l(e))t=o.default.encode(e);else{if(!f(e))throw new Error("Not a valid JOSE object");t=u.default.encode(e)}return new Uint8Array(c.encode(t))},t.decode=function(e){var t,r;try{t=c.decode(e)}catch(n){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(r=t)&&r.payload instanceof Uint8Array&&"signatures"in r&&Array.isArray(r.signatures))return o.default.decode(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return u.default.decode(t);throw new Error("Not a valid DAG-JOSE object")}},3744:function(e,t,r){"use strict";var n=r(7424).default;Object.defineProperty(t,"__esModule",{value:!0});var a=r(229),i=r(6629);function s(e){var t={signature:a.fromBase64url(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=a.fromBase64url(e.protected)),t}function o(e){var t={signature:a.toBase64url(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=a.toBase64url(e.protected)),t}t.default={fromSplit:function(e){var t=n(e,3),r=t[0],s=t[1];return{payload:s,signatures:[{protected:r,signature:t[2]}],link:i.CID.decode(a.fromBase64url(s))}},encode:function(e){var t=a.fromBase64url(e.payload);try{i.CID.decode(t)}catch(r){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(s)}},decode:function(e){var t={payload:a.toBase64url(e.payload),signatures:e.signatures.map(o)};return t.link=i.CID.decode(new Uint8Array(e.payload)),t}}},229:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase64url=t.toBase64url=void 0;var n=r(4426);t.toBase64url=function(e){return n.base64url.encode(e).slice(1)},t.fromBase64url=function(e){return n.base64url.decode("u".concat(e))}},7241:function(e){var t=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length;)e=r.shift()(e);return e},r=function(e){return e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next)},n=function(e){return e&&"function"===typeof e.sink&&r(e.source)},a=function(e){return function(t){return e.sink(t),e.source}},i=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];if(n(i[0])){var o=i[0];i[0]=function(){return o.source}}else if(r(i[0])){var u=i[0];i[0]=function(){return u}}if(i.length>1&&n(i[i.length-1])&&(i[i.length-1]=i[i.length-1].sink),i.length>2)for(var c=1;c<i.length-1;c++)n(i[c])&&(i[c]=a(i[c]));return t.apply(void 0,i)};e.exports=i,e.exports.pipe=i,e.exports.rawPipe=t,e.exports.isIterable=r,e.exports.isDuplex=n},7067:function(e,t,r){var n=r(8416).default,a=r(5125);e.exports=function(e){var t,r,i;"function"===typeof(e=e||{})?(i=e,e={}):i=e.onEnd;var s,o,u,c=new a,l=function(e){return o?o(e):(c.push(e),s)},f=function(e){return u?s:l({done:!1,value:e})},p=function(e){return u?s:(u=!0,e?function(e){return c=new a,o?o({error:e}):(c.push({error:e}),s)}(e):l({done:!0}))};if(n(t={},Symbol.asyncIterator,(function(){return this})),n(t,"next",(function(){if(!c.isEmpty()){if(e.writev){for(var t,r=[];!c.isEmpty();){if((t=c.shift()).error)throw t.error;r.push(t.value)}return{done:t.done,value:r}}var n=c.shift();if(n.error)throw n.error;return n}return u?{done:!0}:new Promise((function(t,r){o=function(n){return o=null,n.error?r(n.error):e.writev&&!n.done?t({done:n.done,value:[n.value]}):t(n),s}}))})),n(t,"return",(function(){return c=new a,p(),{done:!0}})),n(t,"throw",(function(e){return p(e),{done:!0}})),n(t,"push",f),n(t,"end",p),s=t,!i)return s;var h=s;return n(r={},Symbol.asyncIterator,(function(){return this})),n(r,"next",(function(){return h.next()})),n(r,"throw",(function(e){return h.throw(e),i&&(i(e),i=null),{done:!0}})),n(r,"return",(function(){return h.return(),i&&(i(),i=null),{done:!0}})),n(r,"push",f),n(r,"end",(function(e){return h.end(e),i&&(i(e),i=null),s})),s=r}},312:function(e){var t=1e3,r=60*t,n=60*r,a=24*n,i=7*a,s=365.25*a;function o(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,u){u=u||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!o)return;var u=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*i;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&isFinite(e))return u.long?function(e){var i=Math.abs(e);if(i>=a)return o(e,i,a,"day");if(i>=n)return o(e,i,n,"hour");if(i>=r)return o(e,i,r,"minute");if(i>=t)return o(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=a)return Math.round(e/a)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8392:function(e,t,r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=r(8472)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},8472:function(e,t,r){var n=r(861).default;e.exports=function(e){function t(e){var r,n,i,s=null;function o(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(o.enabled){var i=o,s=Number(new Date),u=s-(r||s);i.diff=u,i.prev=r,i.curr=s,r=s,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";c++;var a=t.formatters[r];if("function"===typeof a){var s=n[c];e=a.call(i,s),n.splice(c,1),c--}return e})),t.formatArgs.call(i,n);var l=i.log||t.log;l.apply(i,n)}}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=a,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==s?s:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i)},set:function(e){s=e}}),"function"===typeof t.init&&t.init(o),o}function a(e,r){var n=t(this.namespace+("undefined"===typeof r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(n(t.names.map(i)),n(t.skips.map(i).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(312),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},1022:function(e,t,r){"use strict";var n=r(2122).default,a=r(6690).default,i=r(9728).default,s=r(1655).default,o=r(6389).default,u=r(6701).AbstractChainedBatch,c=Symbol("operations");e.exports=function(e){s(r,e);var t=o(r);function r(e){var n;return a(this,r),(n=t.call(this,e))[c]=[],n}return i(r,[{key:"_put",value:function(e,t,r){this[c].push(n(n({},r),{},{type:"put",key:e,value:t}))}},{key:"_del",value:function(e,t){this[c].push(n(n({},t),{},{type:"del",key:e}))}},{key:"_clear",value:function(){this[c]=[]}},{key:"_write",value:function(e,t){this.db.batch(this[c],e,t)}}]),r}(u)},7318:function(e,t,r){"use strict";var n=r(861).default,a=r(4704).default,i=r(6701).AbstractIterator,s=r(2534),o=r(5023).R,u=Symbol("options"),c=Symbol("iterator"),l=Symbol("operations"),f=Symbol("promise");function p(e,t){i.call(this,e),this[u]=t,this[c]=null,this[l]=[]}s(p,i),p.prototype.setDb=function(e){this[c]=e.iterator(this[u]);var t,r=a(this[l].splice(0,this[l].length));try{for(r.s();!(t=r.n()).done;){var i,s=t.value;(i=this[c])[s.method].apply(i,n(s.args))}}catch(o){r.e(o)}finally{r.f()}},p.prototype.next=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;if("open"===this.db.status)return(n=this[c]).next.apply(n,t);var a=o(t,f,(function(e,t){return void 0===e&&void 0===t?void 0:[e,t]}));return"opening"===this.db.status?this[l].push({method:"next",args:t}):this._nextTick(a,new Error("Database is not open")),a[f]||this},p.prototype.seek=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("open"===this.db.status){var n;(n=this[c]).seek.apply(n,t)}else{if("opening"!==this.db.status)throw new Error("Database is not open");this[l].push({method:"seek",args:t})}},p.prototype.end=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;if("open"===this.db.status)return(n=this[c]).end.apply(n,t);var a=o(t,f);return"opening"===this.db.status?this[l].push({method:"end",args:t}):this._nextTick(a,new Error("Database is not open")),a[f]||this};for(var h=function(){var e=v[d];p.prototype["_"+e]=function(){throw new Error("Did not expect private method to be called: "+e)}},d=0,v=["next","seek","end"];d<v.length;d++)h();e.exports=p},5479:function(e,t,r){"use strict";var n=r(861).default,a=r(4704).default,i=r(6701).AbstractLevelDOWN,s=r(2534),o=r(7318),u=r(1022),c=r(5023).R,l=["put","get","getMany","del","batch","clear"],f=["approximateSize","compactRange"],p=Symbol("innerDb"),h=Symbol("operations"),d=Symbol("promise");function v(e){i.call(this,e.supports||{});var t,r=a(f);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"!==typeof e[n]||this.supports.additionalMethods[n]||(this.supports.additionalMethods[n]=!0)}}catch(s){r.e(s)}finally{r.f()}this[p]=e,this[h]=[],function(e){var t,r=Object.keys(e.supports.additionalMethods),n=a(l.concat(r));try{var i=function(){var r=t.value;e[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("batch"===r&&0===t.length)return new u(this);var a;if("open"===this.status)return(a=this[p])[r].apply(a,t);var i=c(t,d);return"opening"===this.status?this[h].push({method:r,args:t}):this._nextTick(i,new Error("Database is not open")),i[d]}};for(n.s();!(t=n.n()).done;)i()}catch(s){n.e(s)}finally{n.f()}e.iterator=function(e){if("open"===this.status)return this[p].iterator(e);if("opening"===this.status){var t=new o(this,e);return this[h].push({iterator:t}),t}throw new Error("Database is not open")};var f,v=a(l.concat(["iterator"]));try{var y=function(){var t=f.value;e["_"+t]=function(){throw new Error("Did not expect private method to be called: "+t)}};for(v.s();!(f=v.n()).done;)y()}catch(s){v.e(s)}finally{v.f()}}(this)}s(v,i),v.prototype.type="deferred-leveldown",Object.defineProperty(v.prototype,"_db",{enumerable:!0,get:function(){return this[p]}}),v.prototype._open=function(e,t){var r=this,i=function(e){if(e||"open"!==r[p].status)return t(e||new Error("Database is not open"));var i=r[h];r[h]=[];var s,o=a(i);try{for(o.s();!(s=o.n()).done;){var u,c=s.value;if(c.iterator)c.iterator.setDb(r[p]);else(u=r[p])[c.method].apply(u,n(c.args))}}catch(e){o.e(e)}finally{o.f()}if(r[h].length>0)throw new Error("Did not expect further operations");t()};"new"===this[p].status||"closed"===this[p].status?this[p].open(e,i):this._nextTick(i)},v.prototype._close=function(e){this[p].close(e)},v.prototype._isOperational=function(){return"opening"===this.status},e.exports=v,e.exports.DeferredIterator=o},5023:function(e,t){"use strict";t.R=function(e,t,r){var n=e[e.length-1];if("function"!==typeof n){var a=new Promise((function(t,a){e.push(n=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e?a(e):t(r?r.apply(void 0,i):i[0])})}));n[t]=a}return n}},2096:function(e,t,r){"use strict";var n=r(2122).default,a=function(){var e=new Error("Delay aborted");return e.name="AbortError",e},i=function(e){var t=e.clearTimeout,r=e.setTimeout,n=e.willResolve;return function(e){var i,s,o,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.value,l=u.signal;if(l&&l.aborted)return Promise.reject(a());var f=t||clearTimeout,p=function(){f(i),o(a())},h=function(){l&&l.removeEventListener("abort",p)},d=new Promise((function(t,a){s=function(){h(),n?t(c):a(c)},o=a,i=(r||setTimeout)(s,e)}));return l&&l.addEventListener("abort",p,{once:!0}),d.clear=function(){f(i),i=null,s()},d}},s=function(e){var t=i(n(n({},e),{},{willResolve:!0}));return t.reject=i(n(n({},e),{},{willResolve:!1})),t.range=function(e,r,n){return t(function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(e,r),n)},t},o=s();o.createWithTimers=s,e.exports=o,e.exports.default=o},8718:function(e){"use strict";function t(e,t){t=t||{};this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r||t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(void 0===e)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(void 0===e)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},t.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(t>=r||t<-r)){t<0&&(t+=r),t=this._head+t&this._capacityMask;var a,i=this._list[t];if(e<r/2){for(a=e;a>0;a--)this._list[t]=this._list[t=t-1+n&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=r-1-e;a>0;a--)this._list[t]=this._list[t=t+1+n&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+n&this._capacityMask}return i}}},t.prototype.remove=function(e,t){var r,n=e,a=t;if(n===(0|n)&&this._head!==this._tail){var i=this.size(),s=this._list.length;if(!(n>=i||n<-i||t<1)){if(n<0&&(n+=i),1===t||!t)return(r=new Array(1))[0]=this.removeOne(n),r;if(0===n&&n+t>=i)return r=this.toArray(),this.clear(),r;var o;for(n+t>i&&(t=i-n),r=new Array(t),o=0;o<t;o++)r[o]=this._list[this._head+n+o&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===i){for(this._tail=this._tail-t+s&this._capacityMask,o=t;o>0;o--)this._list[n=n+1+s&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+s&this._capacityMask,o=t-1;o>0;o--)this._list[n=n+1+s&this._capacityMask]=void 0;return r}if(n<i/2){for(this._head=this._head+e+t+s&this._capacityMask,o=e;o>0;o--)this.unshift(this._list[n=n-1+s&this._capacityMask]);for(n=this._head-1+s&this._capacityMask;a>0;)this._list[n=n-1+s&this._capacityMask]=void 0,a--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+s&this._capacityMask,o=i-(t+e);o>0;o--)this.push(this._list[n++]);for(n=this._tail;a>0;)this._list[n=n+1+s&this._capacityMask]=void 0,a--}return this._head<2&&this._tail>1e4&&this._tail<=s>>>2&&this._shrinkArray(),r}}},t.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var a,i,s,o=arguments.length,u=this._list.length,c=2;if(!n||r<n/2){for(i=new Array(r),a=0;a<r;a++)i[a]=this._list[this._head+a&this._capacityMask];for(0===t?(s=[],r>0&&(this._head=this._head+r+u&this._capacityMask)):(s=this.remove(r,t),this._head=this._head+r+u&this._capacityMask);o>c;)this.unshift(arguments[--o]);for(a=r;a>0;a--)this.unshift(i[a-1])}else{var l=(i=new Array(n-(r+t))).length;for(a=0;a<l;a++)i[a]=this._list[this._head+r+t+a&this._capacityMask];for(0===t?(s=[],r!=n&&(this._tail=this._head+r+u&this._capacityMask)):(s=this.remove(r,t),this._tail=this._tail-l+u&this._capacityMask);c<o;)this.push(arguments[c++]);for(a=0;a<l;a++)this.push(i[a])}return s}return this.remove(r,t)}}},t.prototype.clear=function(){this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])},t.prototype._copyArray=function(e){var t,r=[],n=this._list,a=n.length;if(e||this._head>this._tail){for(t=this._head;t<a;t++)r.push(n[t]);for(t=0;t<this._tail;t++)r.push(n[t])}else for(t=this._head;t<this._tail;t++)r.push(n[t]);return r},t.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=t},5157:function(e){e.exports=function(e,t,r,n,a){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:a;return e===a?r:e}},5711:function(e,t,r){"use strict";var n=r(6701).AbstractLevelDOWN,a=r(6701).AbstractChainedBatch,i=r(6701).AbstractIterator,s=r(2534),o=r(2957),u=r(8520).EncodingError,c=["approximateSize","compactRange"];function l(e,t){if(!(this instanceof l))return new l(e,t);var r=e.supports||{},a=r.additionalMethods||{};n.call(this,r),this.supports.encodings=!0,this.supports.additionalMethods={},c.forEach((function(t){var r="function"===typeof e[t];(a[t]||r)&&(this.supports.additionalMethods[t]=!0,this[t]=function(e,r,n,a){return e=this.codec.encodeKey(e,n),r=this.codec.encodeKey(r,n),this.db[t](e,r,n,a)})}),this),"undefined"===typeof(t=t||{}).keyEncoding&&(t.keyEncoding="utf8"),"undefined"===typeof t.valueEncoding&&(t.valueEncoding="utf8"),this.db=e,this.codec=new o(t)}function f(e,t){i.call(this,e),this.codec=e.codec,this.keys=t.keys,this.values=t.values,this.opts=this.codec.encodeLtgt(t),this.it=e.db.iterator(this.opts)}function p(e,t){a.call(this,e),this.codec=e.codec,this.batch=e.db.batch()}e.exports=l,s(l,n),l.prototype.type="encoding-down",l.prototype._serializeKey=l.prototype._serializeValue=function(e){return e},l.prototype._open=function(e,t){this.db.open(e,t)},l.prototype._close=function(e){this.db.close(e)},l.prototype._put=function(e,t,r,n){e=this.codec.encodeKey(e,r),t=this.codec.encodeValue(t,r),this.db.put(e,t,r,n)},l.prototype._get=function(e,t,r){var n=this;e=this.codec.encodeKey(e,t),t.asBuffer=this.codec.valueAsBuffer(t),this.db.get(e,t,(function(e,a){if(e)return r(e);try{a=n.codec.decodeValue(a,t)}catch(e){return r(new u(e))}r(null,a)}))},l.prototype._getMany=function(e,t,r){var n=this;e=e.map((function(e){return n.codec.encodeKey(e,t)})),t.asBuffer=this.codec.valueAsBuffer(t),this.db.getMany(e,t,(function(e,a){if(e)return r(e);for(var i=new Array(a.length),s=0;s<a.length;s++)if(void 0!==a[s])try{i[s]=n.codec.decodeValue(a[s],t)}catch(e){return r(new u(e))}else i[s]=void 0;r(null,i)}))},l.prototype._del=function(e,t,r){e=this.codec.encodeKey(e,t),this.db.del(e,t,r)},l.prototype._chainedBatch=function(){return new p(this)},l.prototype._batch=function(e,t,r){e=this.codec.encodeBatch(e,t),this.db.batch(e,t,r)},l.prototype._iterator=function(e){return e.keyAsBuffer=this.codec.keyAsBuffer(e),e.valueAsBuffer=this.codec.valueAsBuffer(e),new f(this,e)},l.prototype._clear=function(e,t){e=this.codec.encodeLtgt(e),this.db.clear(e,t)},s(f,i),f.prototype._next=function(e){var t=this;this.it.next((function(r,n,a){if(r)return e(r);try{n=t.keys&&"undefined"!==typeof n?t.codec.decodeKey(n,t.opts):void 0,a=t.values&&"undefined"!==typeof a?t.codec.decodeValue(a,t.opts):void 0}catch(r){return e(new u(r))}e(null,n,a)}))},f.prototype._seek=function(e){e=this.codec.encodeKey(e,this.opts),this.it.seek(e)},f.prototype._end=function(e){this.it.end(e)},s(p,a),p.prototype._put=function(e,t,r){e=this.codec.encodeKey(e,r),t=this.codec.encodeValue(t,r),this.batch.put(e,t)},p.prototype._del=function(e,t){e=this.codec.encodeKey(e,t),this.batch.del(e)},p.prototype._clear=function(){this.batch.clear()},p.prototype._write=function(e,t){this.batch.write(e,t)}},7963:function(e){"use strict";function t(e,t){for(var r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"===typeof r&&(n=r,r=""),r&&(n.code=r);try{return t(e,n)}catch(i){n.message=e.message,n.stack=e.stack;var a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(e)),t(new a,n)}}},3634:function(e,t,r){"use strict";var n=r(5413);t.zN=n.EventIterator,n.EventIterator},5413:function(e,t,r){"use strict";var n=r(4704).default,a=r(6690).default,i=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){a(this,t),this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}return i(t,[{key:"push",value:function(e){if(!this.isStopped){var t={value:e,done:!1};if(this.pullQueue.length){var r=this.pullQueue.shift();r&&r.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn("EventIterator queue reached ".concat(this.pushQueue.length," items")))}}},{key:"stop",value:function(){if(!this.isStopped){this.isStopped=!0,this.remove();var e,t=n(this.pullQueue);try{for(t.s();!(e=t.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(r){t.e(r)}finally{t.f()}this.pullQueue.length=0}}},{key:"fail",value:function(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){var t,r=n(this.pullQueue);try{for(r.s();!(t=r.n()).done;){t.value.reject(e)}}catch(i){r.e(i)}finally{r.f()}this.pullQueue.length=0}else{var a=Promise.reject(e);a.catch((function(){})),this.pushQueue.push(a)}}},{key:"remove",value:function(){var e=this;Promise.resolve().then((function(){e.removeCallback&&e.removeCallback()}))}},{key:e,value:function(){var e=this;return{next:function(t){var r=e.pushQueue.shift();return r?(void 0!==e.lowWaterMark&&e.pushQueue.length<=e.lowWaterMark&&e.isPaused&&(e.isPaused=!1,e.eventHandlers.lowWater&&e.eventHandlers.lowWater()),r):e.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((function(t,r){e.pullQueue.push({resolve:t,reject:r})}))},return:function(){return e.isStopped=!0,e.pushQueue.length=0,e.remove(),Promise.resolve({value:void 0,done:!0})}}}}]),t}(Symbol.asyncIterator),o=i((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.highWaterMark,i=void 0===n?100:n,o=r.lowWaterMark,u=void 0===o?1:o;a(this,e);var c=new s;c.highWaterMark=i,c.lowWaterMark=u,c.removeCallback=t({push:function(e){return c.push(e)},stop:function(){return c.stop()},fail:function(e){return c.fail(e)},on:function(e,t){c.eventHandlers[e]=t}})||function(){},this[Symbol.asyncIterator]=function(){return c[Symbol.asyncIterator]()},Object.freeze(this)}));t.EventIterator=o,t.default=o},7143:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new a(n,i||e,s),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],o]:e._events[u].push(o):(e._events[u]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,s=new Array(i);a<i;a++)s[a]=n[a].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,i,s){var o=r?r+e:e;if(!this._events[o])return!1;var u,c,l=this._events[o],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,a),!0;case 5:return l.fn.call(l.context,t,n,a,i),!0;case 6:return l.fn.call(l.context,t,n,a,i,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,a);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||s(this,i);else{for(var u=0,c=[],l=o.length;u<l;u++)(o[u].fn!==t||a&&!o[u].once||n&&o[u].context!==n)&&c.push(o[u]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},7465:function(e){"use strict";var t,r="object"===typeof Reflect?Reflect:null,n=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i),n(r)}function i(){"function"===typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}v(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&v(e,"error",t,r)}(e,a,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var a,i,s,c;if(o(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"===typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(a=u(e))>0&&s.length>a&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=l.bind(n);return a.listener=r,n.wrapFn=a,a}function p(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"===typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):d(a,a.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function v(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){n.once&&e.removeEventListener(t,a),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)n(u,this,t);else{var c=u.length,l=d(u,c);for(r=0;r<c;++r)n(l[r],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return o(t),this.on(e,f(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,f(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,a,i,s;if(o(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1167:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(t){if(n(this,e),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}return a(e,[{key:"push",value:function(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}},{key:"shift",value:function(){var e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}},{key:"peek",value:function(){return this.buffer[this.btm]}},{key:"isEmpty",value:function(){return void 0===this.buffer[this.btm]}}]),e}()},5125:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1167);e.exports=function(){"use strict";function e(t){n(this,e),this.hwm=t||16,this.head=new i(this.hwm),this.tail=this.head}return a(e,[{key:"push",value:function(e){if(!this.head.push(e)){var t=this.head;this.head=t.next=new i(2*this.head.buffer.length),this.head.push(e)}}},{key:"shift",value:function(){var e=this.tail.shift();if(void 0===e&&this.tail.next){var t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}},{key:"peek",value:function(){return this.tail.peek()}},{key:"isEmpty",value:function(){return this.head.isEmpty()}}]),e}()},5187:function(e,t){"use strict";function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.BASE,n=e.length,a=0;a<n;a++)t^=e.charCodeAt(a),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}Object.defineProperty(t,"__esModule",{value:!0}),r.BASE=2166136261,t.default=r,e.exports=r},5369:function(e,t,r){"use strict";var n=r(460),a=Object.prototype.toString,i=Object.prototype.hasOwnProperty,s=function(e,t,r){for(var n=0,a=e.length;n<a;n++)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},o=function(e,t,r){for(var n=0,a=e.length;n<a;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},u=function(e,t,r){for(var n in e)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))};e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),"[object Array]"===a.call(e)?s(e,t,i):"string"===typeof e?o(e,t,i):u(e,t,i)}},222:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,a="[object Function]";e.exports=function(e){var i=this;if("function"!==typeof i||n.call(i)!==a)throw new TypeError(t+i);for(var s,o=r.call(arguments,1),u=function(){if(this instanceof s){var t=i.apply(this,o.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,o.concat(r.call(arguments)))},c=Math.max(0,i.length-o.length),l=[],f=0;f<c;f++)l.push("$"+f);if(s=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(u),i.prototype){var p=function(){};p.prototype=i.prototype,s.prototype=new p,p.prototype=null}return s}},3350:function(e,t,r){"use strict";var n=r(222);e.exports=Function.prototype.bind||n},2506:function(e,t,r){"use strict";var n,a=SyntaxError,i=Function,s=TypeError,o=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(Z){u=null}var c=function(){throw new s},l=u?function(){try{return c}catch(e){try{return u(arguments,"callee").get}catch(t){return c}}}():c,f=r(697)(),p=Object.getPrototypeOf||function(e){return e.__proto__},h={},d="undefined"===typeof Uint8Array?n:p(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?p(p([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&f?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&f?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?p(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":l,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet},y=function e(t){var r;if("%AsyncFunction%"===t)r=o("async function () {}");else if("%GeneratorFunction%"===t)r=o("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=o("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(r=p(a.prototype))}return v[t]=r,r},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=r(3350),b=r(8316),w=m.call(Function.call,Array.prototype.concat),k=m.call(Function.apply,Array.prototype.splice),x=m.call(Function.call,String.prototype.replace),_=m.call(Function.call,String.prototype.slice),E=m.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,I=function(e){var t=_(e,0,1),r=_(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return x(e,S,(function(e,t,r,a){n[n.length]=r?x(a,A,"$1"):t||e})),n},C=function(e,t){var r,n=e;if(b(g,n)&&(n="%"+(r=g[n])[0]+"%"),b(v,n)){var i=v[n];if(i===h&&(i=y(n)),"undefined"===typeof i&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/g,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=I(e),n=r.length>0?r[0]:"",i=C("%"+n+"%",t),o=i.name,c=i.value,l=!1,f=i.alias;f&&(n=f[0],k(r,w([0,1],f)));for(var p=1,h=!0;p<r.length;p+=1){var d=r[p],y=_(d,0,1),g=_(d,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new a("property names with quotes must have matching quotes");if("constructor"!==d&&h||(l=!0),b(v,o="%"+(n+="."+d)+"%"))c=v[o];else if(null!=c){if(!(d in c)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&p+1>=r.length){var m=u(c,d);c=(h=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:c[d]}else h=b(c,d),c=c[d];h&&!l&&(v[o]=c)}}return c}},4430:function(e,t,r){"use strict";var n=r(4704).default,a=r(7061).default,i=r(7156).default,s=r(6690).default,o=r(9728).default,u=r(1620),c=r(6765).fromString,l=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;s(this,e),this._options=t,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new u,this.key=null}return o(e,[{key:"put",value:function(){var e=i(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findNewBucketAndPos(t);case 2:return n=e.sent,e.next=5,n.bucket._putAt(n,t,r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=i(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findChild(t);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r.value);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"del",value:function(){var e=i(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findPlace(t);case 2:r=e.sent,(n=r.bucket._at(r.pos))&&n.key===t&&r.bucket._delAt(r.pos);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"leafCount",value:function(){return this._children.compactArray().reduce((function(t,r){return r instanceof e?t+r.leafCount():t+1}),0)}},{key:"childrenCount",value:function(){return this._children.length}},{key:"onlyChild",value:function(){return this._children.get(0)}},{key:"eachLeafSeries",value:a().mark((function t(){var r,i,s,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this._children.compactArray(),i=n(r),t.prev=2,i.s();case 4:if((s=i.n()).done){t.next=14;break}if(!((o=s.value)instanceof e)){t.next=10;break}return t.delegateYield(o.eachLeafSeries(),"t0",8);case 8:t.next=12;break;case 10:return t.next=12,o;case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(2),i.e(t.t1);case 19:return t.prev=19,i.f(),t.finish(19);case 22:return t.abrupt("return",[]);case 23:case"end":return t.stop()}}),t,this,[[2,16,19,22]])}))},{key:"serialize",value:function(t,r){return r(this._children.reduce((function(n,a,i){return a&&(a instanceof e?n.push(a.serialize(t,r)):n.push(t(a,i))),n}),[]))}},{key:"asyncTransform",value:function(e,t){return d(this,e,t)}},{key:"toJSON",value:function(){return this.serialize(p,h)}},{key:"prettyPrint",value:function(){return JSON.stringify(this.toJSON(),null,"  ")}},{key:"tableSize",value:function(){return Math.pow(2,this._options.bits)}},{key:"_findChild",value:function(){var t=i(a().mark((function t(r){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._findPlace(r);case 2:if(n=t.sent,!((i=n.bucket._at(n.pos))instanceof e)){t.next=6;break}return t.abrupt("return",void 0);case 6:if(!i||i.key!==r){t.next=8;break}return t.abrupt("return",i);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_findPlace",value:function(){var t=i(a().mark((function t(r){var n,i,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._options.hash("string"===typeof r?c(r):r),t.next=3,n.take(this._options.bits);case 3:if(i=t.sent,!((s=this._children.get(i))instanceof e)){t.next=7;break}return t.abrupt("return",s._findPlace(n));case 7:return t.abrupt("return",{bucket:this,pos:i,hash:n,existingChild:s});case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_findNewBucketAndPos",value:function(){var t=i(a().mark((function t(r){var n,i,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._findPlace(r);case 2:if(!(n=t.sent).existingChild||n.existingChild.key===r){t.next=11;break}return i=new e(this._options,n.bucket,n.pos),n.bucket._putObjectAt(n.pos,i),t.next=8,i._findPlace(n.existingChild.hash);case 8:return(s=t.sent).bucket._putAt(s,n.existingChild.key,n.existingChild.value),t.abrupt("return",i._findNewBucketAndPos(n.hash));case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_putAt",value:function(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}},{key:"_putObjectAt",value:function(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}},{key:"_delAt",value:function(e){if(-1===e)throw new Error("Invalid position");this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}},{key:"_level",value:function(){if(this._parent&&this._popCount<=1)if(1===this._popCount){var t=this._children.find(f);if(t&&!(t instanceof e)){var r=t.hash;r.untake(this._options.bits);var n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,t.key,t.value)}}else this._parent._delAt(this._posAtParent)}},{key:"_at",value:function(e){return this._children.get(e)}}]),e}();function f(e){return Boolean(e)}function p(e,t){return e.key}function h(e){return e}function d(e,t,r){return v.apply(this,arguments)}function v(){return(v=i(a().mark((function e(t,r,i){var s,o,u,c,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],o=n(t._children.compactArray()),e.prev=2,o.s();case 4:if((u=o.n()).done){e.next=17;break}if(!((c=u.value)instanceof l)){e.next=11;break}return e.next=9,d(c,r,i);case 9:e.next=15;break;case 11:return e.next=13,r(c);case 13:f=e.sent,s.push({bitField:t._children.bitField(),children:f});case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:return e.abrupt("return",i(s));case 26:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})))).apply(this,arguments)}e.exports=l},7633:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=[255,254,252,248,240,224,192,128],s=[1,3,7,15,31,63,127,255];function o(e,t,r){var n=function(e,t){return i[e]&s[Math.min(t+e-1,7)]}(t,r);return(e&n)>>>t}e.exports=function(){function e(t){n(this,e),this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}return a(e,[{key:"availableBits",value:function(){return this._currentBitPos+1+8*this._currentBytePos}},{key:"totalBits",value:function(){return 8*this._value.length}},{key:"take",value:function(e){for(var t=e,r=0;t&&this._haveBits();){var n=this._value[this._currentBytePos],a=this._currentBitPos+1,i=Math.min(a,t);r=(r<<i)+o(n,a-i,i),t-=i,this._currentBitPos-=i,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}},{key:"untake",value:function(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}},{key:"_haveBits",value:function(){return this._currentBytePos>=0}}]),e}()},8329:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(6690).default,s=r(9728).default,o=r(7633),u=r(2110).concat;var c=function(){function e(t,r){if(i(this,e),!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}return s(e,[{key:"take",value:function(){var e=a(n().mark((function e(t){var r,a,i,s,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t;case 1:if(!(this._availableBits<r)){e.next=6;break}return e.next=4,this._produceMoreBits();case 4:e.next=1;break;case 6:for(a=0;r>0;)i=this._buffers[this._currentBufferIndex],s=Math.min(i.availableBits(),r),o=i.take(s),a=(a<<s)+o,r-=s,this._availableBits-=s,0===i.availableBits()&&this._currentBufferIndex++;return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"untake",value:function(e){for(var t=e;t>0;){var r=this._buffers[this._currentBufferIndex],n=Math.min(r.totalBits()-r.availableBits(),t);r.untake(n),t-=n,this._availableBits+=n,this._currentBufferIndex>0&&r.totalBits()===r.availableBits()&&(this._depth--,this._currentBufferIndex--)}}},{key:"_produceMoreBits",value:function(){var e=a(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._depth++,t=this._depth?u([this._value,Uint8Array.from([this._depth])]):this._value,e.next=4,this._hashFn(t);case 4:r=e.sent,a=new o(r),this._buffers.push(a),this._availableBits+=a.availableBits();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();e.exports=function(e){return function(t){return t instanceof c?t:new c(t,e)}},e.exports.InfiniteHash=c},7431:function(e,t,r){"use strict";var n=r(4430),a=r(8329);e.exports={createHAMT:function(e){if(!e||!e.hashFn)throw new Error("please define an options.hashFn");var t={bits:e.bits||8,hash:a(e.hashFn)};return new n(t)},Bucket:n}},697:function(e,t,r){"use strict";var n="undefined"!==typeof Symbol&&Symbol,a=r(3297);e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&a())))}},3297:function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},4707:function(e,t,r){"use strict";var n=r(3297);e.exports=function(){return n()&&!!Symbol.toStringTag}},8316:function(e,t,r){"use strict";var n=r(3350);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},4737:function(e){e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function a(a,i){r[a]=i,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(a(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:a(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},4038:function(e,t){t.read=function(e,t,r,n,a){var i,s,o=8*a-n-1,u=(1<<o)-1,c=u>>1,l=-7,f=r?a-1:0,p=r?-1:1,h=e[t+f];for(f+=p,i=h&(1<<-l)-1,h>>=-l,l+=o;l>0;i=256*i+e[t+f],f+=p,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=c}return(h?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,a,i){var s,o,u,c=8*i-a-1,l=(1<<c)-1,f=l>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(o=0,s=l):s+f>=1?(o=(t*u-1)*Math.pow(2,a),s+=f):(o=t*Math.pow(2,f-1)*Math.pow(2,a),s=0));a>=8;e[r+h]=255&o,h+=d,o/=256,a-=8);for(s=s<<a|o,c+=a;c>0;e[r+h]=255&s,h+=d,s/=256,c-=8);e[r+h-d]|=128*v}},2534:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},8974:function(e){"use strict";var t="[a-fA-F\\d:]",r=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",i="\n(?:\n(?:".concat(a,":){7}(?:").concat(a,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(a,":){6}(?:").concat(n,"|:").concat(a,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(a,":){5}(?::").concat(n,"|(?::").concat(a,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(a,":){4}(?:(?::").concat(a,"){0,1}:").concat(n,"|(?::").concat(a,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(a,":){3}(?:(?::").concat(a,"){0,2}:").concat(n,"|(?::").concat(a,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(a,":){2}(?:(?::").concat(a,"){0,3}:").concat(n,"|(?::").concat(a,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(a,":){1}(?:(?::").concat(a,"){0,4}:").concat(n,"|(?::").concat(a,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(a,"){0,5}:").concat(n,"|(?::").concat(a,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^".concat(n,"$)|(?:^").concat(i,"$)")),o=new RegExp("^".concat(n,"$")),u=new RegExp("^".concat(i,"$")),c=function(e){return e&&e.exact?s:new RegExp("(?:".concat(r(e)).concat(n).concat(r(e),")|(?:").concat(r(e)).concat(i).concat(r(e),")"),"g")};c.v4=function(e){return e&&e.exact?o:new RegExp("".concat(r(e)).concat(n).concat(r(e)),"g")},c.v6=function(e){return e&&e.exact?u:new RegExp("".concat(r(e)).concat(i).concat(r(e)),"g")},e.exports=c},7201:function(e){!function(t){"use strict";var r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),threeOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),twoOctet:new RegExp("^".concat(r,"\\.").concat(r,"$"),"i"),longValue:new RegExp("^".concat(r,"$"),"i")},a=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp(s,"i"),native:new RegExp("^(::)?(".concat(o,")?([0-9a-f]+)?(::)?(").concat(s,")?$"),"i"),deprecatedTransitional:new RegExp("^(?:::)(".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(s,")?)$"),"i"),transitional:new RegExp("^((?:".concat(o,")|(?:::)(?:").concat(o,")?)").concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(s,")?$"),"i")};function c(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;var r,n,a=0,i=-1,s=(e.match(u.zoneIndex)||[])[0];for(s&&(s=s.substring(1),e=e.replace(/%.+$/,""));(i=e.indexOf(":",i+1))>=0;)a++;if("::"===e.substr(0,2)&&a--,"::"===e.substr(-2,2)&&a--,a>t)return null;for(n=t-a,r=":";n--;)r+="0:";return":"===(e=e.replace("::",r))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){for(var t=e.split(":"),r=[],n=0;n<t.length;n++)r.push(parseInt(t[n],16));return r}(),zoneId:s}}function l(e,t,r,n){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(var a,i=0;n>0;){if((a=r-n)<0&&(a=0),e[i]>>a!==t[i]>>a)return!1;n-=r,i+=1}return!0}function f(e){if(i.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(a.test(e))return parseInt(e,8);throw new Error("ipaddr: cannot parse ".concat(e," as octal"))}return parseInt(e,10)}function p(e,t){for(;e.length<t;)e="0".concat(e);return e}var h={};h.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");var t,r;for(t=0;t<e.length;t++)if(!(0<=(r=e[t])&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){var r;if(void 0===t&&(e=(r=e)[0],t=r[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,r,n=0,a=!1,i={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};for(e=3;e>=0;e-=1){if(!((t=this.octets[e])in i))return null;if(r=i[t],a&&0!==r)return null;8!==r&&(a=!0),n+=r}return 32-n},e.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return h.IPv6.parse("::ffff:".concat(this.toString()))},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),h.IPv4.broadcastAddressFromCIDR=function(e){try{for(var t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],i=0;i<4;)a.push(parseInt(r[i],10)|255^parseInt(n[i],10)),i++;return new this(a)}catch(s){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.isIPv4=function(e){return null!==this.parser(e)},h.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(t){return!1}},h.IPv4.isValidFourPartDecimal=function(e){return!(!h.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},h.IPv4.networkAddressFromCIDR=function(e){var t,r,n,a,i;try{for(n=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],r=0;r<4;)a.push(parseInt(n[r],10)&parseInt(i[r],10)),r++;return new this(a)}catch(s){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.parse=function(e){var t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},h.IPv4.parseCIDR=function(e){var t;if(t=e.match(/^(.+)\/(\d+)$/)){var r=parseInt(t[2]);if(r>=0&&r<=32){var n=[this.parse(t[1]),r];return Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},h.IPv4.parser=function(e){var t,r,a;if(t=e.match(n.fourOctet))return function(){for(var e=t.slice(1,6),n=[],a=0;a<e.length;a++)r=e[a],n.push(f(r));return n}();if(t=e.match(n.longValue)){if((a=f(t[1]))>4294967295||a<0)throw new Error("ipaddr: address outside defined range");return function(){var e,t=[];for(e=0;e<=24;e+=8)t.push(a>>e&255);return t}().reverse()}return(t=e.match(n.twoOctet))?function(){var e=t.slice(1,4),r=[];if((a=f(e[1]))>16777215||a<0)throw new Error("ipaddr: address outside defined range");return r.push(f(e[0])),r.push(a>>16&255),r.push(a>>8&255),r.push(255&a),r}():(t=e.match(n.threeOctet))?function(){var e=t.slice(1,5),r=[];if((a=f(e[2]))>65535||a<0)throw new Error("ipaddr: address outside defined range");return r.push(f(e[0])),r.push(f(e[1])),r.push(a>>8&255),r.push(255&a),r}():null},h.IPv4.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(var t=[0,0,0,0],r=0,n=Math.floor(e/8);r<n;)t[r]=255,r++;return n<4&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},h.IPv6=function(){function e(e,t){var r,n;if(16===e.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(e[r]<<8|e[r+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(r=0;r<this.parts.length;r++)if(!(0<=(n=this.parts[r])&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){var r;if(void 0===t&&(e=(r=e)[0],t=r[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){for(var e,t,r=0,n=!1,a={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},i=7;i>=0;i-=1){if(!((e=this.parts[i])in a))return null;if(t=a[e],n&&0!==t)return null;16!==t&&(n=!0),r+=t}return 128-r},e.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){for(var e,t=[],r=this.parts,n=0;n<r.length;n++)e=r[n],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){var e=function(){for(var e=[],t=0;t<this.parts.length;t++)e.push(p(this.parts[t].toString(16),4));return e}.call(this).join(":"),t="";return this.zoneId&&(t="%".concat(this.zoneId)),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");var e=this.parts.slice(-2),t=e[0],r=e[1];return new h.IPv4([t>>8,255&t,r>>8,255&r])},e.prototype.toNormalizedString=function(){var e=function(){for(var e=[],t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":"),t="";return this.zoneId&&(t="%".concat(this.zoneId)),e+t},e.prototype.toRFC5952String=function(){for(var e,t=/((^|:)(0(:|$)){2,})/g,r=this.toNormalizedString(),n=0,a=-1;e=t.exec(r);)e[0].length>a&&(n=e.index,a=e[0].length);return a<0?r:"".concat(r.substring(0,n),"::").concat(r.substring(n+a))},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e}(),h.IPv6.broadcastAddressFromCIDR=function(e){try{for(var t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],i=0;i<16;)a.push(parseInt(r[i],10)|255^parseInt(n[i],10)),i++;return new this(a)}catch(s){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(s,")"))}},h.IPv6.isIPv6=function(e){return null!==this.parser(e)},h.IPv6.isValid=function(e){if("string"===typeof e&&-1===e.indexOf(":"))return!1;try{var t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(r){return!1}},h.IPv6.networkAddressFromCIDR=function(e){var t,r,n,a,i;try{for(n=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],r=0;r<16;)a.push(parseInt(n[r],10)&parseInt(i[r],10)),r++;return new this(a)}catch(s){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(s,")"))}},h.IPv6.parse=function(e){var t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},h.IPv6.parseCIDR=function(e){var t,r,n;if((r=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(r[2]))>=0&&t<=128)return n=[this.parse(r[1]),t],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},h.IPv6.parser=function(e){var t,r,n,a,i,s;if(n=e.match(u.deprecatedTransitional))return this.parser("::ffff:".concat(n[1]));if(u.native.test(e))return c(e,8);if((n=e.match(u.transitional))&&(s=n[6]||"",(t=c(n[1].slice(0,-1)+s,6)).parts)){for(i=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<i.length;r++)if(!(0<=(a=i[r])&&a<=255))return null;return t.parts.push(i[0]<<8|i[1]),t.parts.push(i[2]<<8|i[3]),{parts:t.parts,zoneId:t.zoneId}}return null},h.IPv6.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>128)throw new Error("ipaddr: invalid IPv6 prefix length");for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0,n=Math.floor(e/8);r<n;)t[r]=255,r++;return n<16&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},h.fromByteArray=function(e){var t=e.length;if(4===t)return new h.IPv4(e);if(16===t)return new h.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},h.isValid=function(e){return h.IPv6.isValid(e)||h.IPv4.isValid(e)},h.parse=function(e){if(h.IPv6.isValid(e))return h.IPv6.parse(e);if(h.IPv4.isValid(e))return h.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},h.parseCIDR=function(e){try{return h.IPv6.parseCIDR(e)}catch(t){try{return h.IPv4.parseCIDR(e)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},h.process=function(e){var t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},h.subnetMatch=function(e,t,r){var n,a,i,s;for(a in void 0!==r&&null!==r||(r="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,a))for(!(i=t[a])[0]||i[0]instanceof Array||(i=[i]),n=0;n<i.length;n++)if(s=i[n],e.kind()===s[0].kind()&&e.match.apply(e,s))return a;return r},e.exports?e.exports=h:t.ipaddr=h}(this)},7220:function(e){var t=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length;)e=r.shift()(e);return e},r=function(e){return e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next)},n=function(e){return e&&"function"===typeof e.sink&&r(e.source)},a=function(e){return function(t){return e.sink(t),e.source}},i=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];if(n(i[0])){var o=i[0];i[0]=function(){return o.source}}else if(r(i[0])){var u=i[0];i[0]=function(){return u}}if(i.length>1&&n(i[i.length-1])&&(i[i.length-1]=i[i.length-1].sink),i.length>2)for(var c=1;c<i.length-1;c++)n(i[c])&&(i[c]=a(i[c]));return t.apply(void 0,i)};e.exports=i,e.exports.pipe=i,e.exports.rawPipe=t,e.exports.isIterable=r,e.exports.isDuplex=n},8914:function(e,t,r){var n=r(8416).default,a=r(5125);e.exports=function(e){var t,r,i;"function"===typeof(e=e||{})?(i=e,e={}):i=e.onEnd;var s,o,u,c=new a,l=function(e){return o?o(e):(c.push(e),s)},f=function(e){return u?s:l({done:!1,value:e})},p=function(e){return u?s:(u=!0,e?function(e){return c=new a,o?o({error:e}):(c.push({error:e}),s)}(e):l({done:!0}))};if(n(t={},Symbol.asyncIterator,(function(){return this})),n(t,"next",(function(){if(!c.isEmpty()){if(e.writev){for(var t,r=[];!c.isEmpty();){if((t=c.shift()).error)throw t.error;r.push(t.value)}return{done:t.done,value:r}}var n=c.shift();if(n.error)throw n.error;return n}return u?{done:!0}:new Promise((function(t,r){o=function(n){return o=null,n.error?r(n.error):e.writev&&!n.done?t({done:n.done,value:[n.value]}):t(n),s}}))})),n(t,"return",(function(){return c=new a,p(),{done:!0}})),n(t,"throw",(function(e){return p(e),{done:!0}})),n(t,"push",f),n(t,"end",p),s=t,!i)return s;var h=s;return n(r={},Symbol.asyncIterator,(function(){return this})),n(r,"next",(function(){return h.next()})),n(r,"throw",(function(e){return h.throw(e),i&&(i(e),i=null),{done:!0}})),n(r,"return",(function(){return h.return(),i&&(i(),i=null),{done:!0}})),n(r,"push",f),n(r,"end",(function(e){return h.end(e),i&&(i(e),i=null),s})),s=r}},8860:function(e){function t(e){if("__proto__"===e||"constructor"===e||"prototype"===e)throw new Error("setting of prototype values not supported")}e.exports=function(e,r,n){var a,i,s;Array.isArray(r)&&(a=r.slice(0));"string"==typeof r&&(a=r.split("."));"symbol"==typeof r&&(a=[r]);if(!Array.isArray(a))throw new Error("props arg must be an array, a string or a symbol");if(!(i=a.pop()))return!1;t(i);for(;s=a.shift();)if(t(s),"undefined"==typeof e[s]&&(e[s]={}),!(e=e[s])||"object"!=typeof e)return!1;return e[i]=n,!0}},9125:function(e,t,r){var n=r(7465).EventEmitter,a=r(422).nanoid,i=r(7334),s=i.WORKER_REQUEST_READ_LOCK,o=i.WORKER_RELEASE_READ_LOCK,u=i.MASTER_GRANT_READ_LOCK,c=i.WORKER_REQUEST_WRITE_LOCK,l=i.WORKER_RELEASE_WRITE_LOCK,f=i.MASTER_GRANT_WRITE_LOCK,p=r(6885),h=function(e,t,r,n,a){return function(i,s){if(s&&s.data&&s.data.type===r){var o={type:s.data.type,name:s.data.name,identifier:s.data.identifier};e.emit(t,o.name,(function(){return i.postMessage({type:a,name:o.name,identifier:o.identifier}),new Promise((function(e){i.addEventListener("message",(function t(r){if(r&&r.data){var a={type:r.data.type,name:r.data.name,identifier:r.data.identifier};a&&a.type===n&&a.identifier===o.identifier&&(i.removeEventListener("message",t),e())}}))}))}))}}},d=function(e,t,r,n){return function(){var i=a();return globalThis.postMessage({type:t,identifier:i,name:e}),new Promise((function(t){globalThis.addEventListener("message",(function a(s){if(s&&s.data){var o={type:s.data.type,identifier:s.data.identifier};o&&o.type===r&&o.identifier===i&&(globalThis.removeEventListener("message",a),t((function(){globalThis.postMessage({type:n,identifier:i,name:e})})))}}))}))}},v={singleProcess:!1};e.exports=function(e){if(e=Object.assign({},v,e),!!globalThis.document||e.singleProcess){var t=new n;return p.addEventListener("message",h(t,"requestReadLock",s,o,u)),p.addEventListener("message",h(t,"requestWriteLock",c,l,f)),t}return{isWorker:!0,readLock:function(e){return d(e,s,u,o)},writeLock:function(e){return d(e,c,f,l)}}}},7334:function(e){e.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}},3214:function(e,t,r){var n,a=r(7061).default,i=r(7156).default,s=r(9956),o=r(9125),u=r(6662).default,c=r(8541).timeout,l=r(6885),f={};function p(e,t){var r,n=new Promise((function(e){r=e}));return e.add((function(){return c(new Promise((function(e){r((function(){e()}))})),t.timeout)})),n}var h={concurrency:1/0,timeout:846e5,global:r.g,singleProcess:!1};e.exports=function(e,t){return t||(t={}),"object"===typeof e&&(t=e,e="lock"),e||(e="lock"),t=Object.assign({},h,t),n||(n=s(t)||o(t)).isWorker||(n.on("requestReadLock",(function(e,t){f[e]&&f[e].readLock().then((function(e){return t().finally((function(){return e()}))}))})),n.on("requestWriteLock",function(){var e=i(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f[t]){e.next=2;break}return e.abrupt("return");case 2:f[t].writeLock().then((function(e){return r().finally((function(){return e()}))}));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),f[e]||(f[e]=function(e,t){if(n.isWorker)return{readLock:n.readLock(e,t),writeLock:n.writeLock(e,t)};var r=new u({concurrency:1}),a=null;return{readLock:function(){if(a)return p(a,t);var e=a=new u({concurrency:t.concurrency,autoStart:!1}),n=p(a,t);return r.add((function(){return e.start(),e.onIdle().then((function(){a===e&&(a=null)}))})),n},writeLock:function(){return a=null,p(r,t)}}}(e,t)),f[e]},e.exports.Worker=function(e,t){var n;t=t||r.g.Worker;try{n=new t(e)}catch(a){a.message.includes("not a constructor")&&(n=t(e))}if(!n)throw new Error("Could not create Worker from",t);return l(n),n}},9956:function(e,t,r){var n,a=r(7465).EventEmitter,i=r(422).nanoid,s=r(7334),o=s.WORKER_REQUEST_READ_LOCK,u=s.WORKER_RELEASE_READ_LOCK,c=s.MASTER_GRANT_READ_LOCK,l=s.WORKER_REQUEST_WRITE_LOCK,f=s.WORKER_RELEASE_WRITE_LOCK,p=s.MASTER_GRANT_WRITE_LOCK,h=function(e,t,r,n,a){return function(i,s){s&&s.type===r&&e.emit(t,s.name,(function(){return i.send({type:a,name:s.name,identifier:s.identifier}),new Promise((function(e){i.on("message",(function t(r){r&&r.type===n&&r.identifier===s.identifier&&(i.removeListener("message",t),e())}))}))}))}},d=function(e,t,r,n){return function(){var a=i();return process.send({type:t,identifier:a,name:e}),new Promise((function(t){process.on("message",(function i(s){s&&s.type===r&&s.identifier===a&&(process.removeListener("message",i),t((function(){process.send({type:n,identifier:a,name:e})})))}))}))}};e.exports=function(e){try{if(n=r(9156),!Object.keys(n).length)return}catch(i){return}if(n.isMaster||e.singleProcess){var t=new a;return n.on("message",h(t,"requestReadLock",o,u,c)),n.on("message",h(t,"requestWriteLock",l,f,p)),t}return{isWorker:!0,readLock:function(e){return d(e,o,c,u)},writeLock:function(e){return d(e,l,p,f)}}}},6885:function(e){var t={},r=function e(t){t.addEventListener("message",(function(r){e.dispatchEvent("message",t,r)})),t.port&&t.port.addEventListener("message",(function(r){e.dispatchEvent("message",t,r)}))};r.addEventListener=function(e,r){t[e]||(t[e]=[]),t[e].push(r)},r.removeEventListener=function(e,r){t[e]&&(t[e]=t[e].filter((function(e){return e===r})))},r.dispatchEvent=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();t[r]&&t[r].forEach((function(t){return t.apply(null,e)}))},e.exports=r},6662:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(6690).default,s=r(9728).default,o=r(1655).default,u=r(6389).default;Object.defineProperty(t,"__esModule",{value:!0});var c=r(7143),l=r(4890),f=r(1922),p=function(){},h=new l.TimeoutError,d=function(e){o(r,e);var t=u(r);function r(e){var n,a,s,o,u;if(i(this,r),(n=t.call(this))._intervalCount=0,n._intervalEnd=0,n._pendingCount=0,n._resolveEmpty=p,n._resolveIdle=p,!("number"===typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:f.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(s=null===(a=e.intervalCap)||void 0===a?void 0:a.toString())&&void 0!==s?s:"","` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(u=null===(o=e.interval)||void 0===o?void 0:o.toString())&&void 0!==u?u:"","` (").concat(typeof e.interval,")"));return n._carryoverConcurrencyCount=e.carryoverConcurrencyCount,n._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,n._intervalCap=e.intervalCap,n._interval=e.interval,n._queue=new e.queueClass,n._queueClass=e.queueClass,n.concurrency=e.concurrency,n._timeout=e.timeout,n._throwOnTimeout=!0===e.throwOnTimeout,n._isPaused=!1===e.autoStart,n}return s(r,[{key:"_doesIntervalAllowAnother",get:function(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}},{key:"_doesConcurrentAllowAnother",get:function(){return this._pendingCount<this._concurrency}},{key:"_next",value:function(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}},{key:"_resolvePromises",value:function(){this._resolveEmpty(),this._resolveEmpty=p,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=p,this.emit("idle"))}},{key:"_onResumeInterval",value:function(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}},{key:"_isIntervalPaused",value:function(){var e=this,t=Date.now();if(void 0===this._intervalId){var r=this._intervalEnd-t;if(!(r<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((function(){e._onResumeInterval()}),r)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}},{key:"_tryToStartAnother",value:function(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){var e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){var t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}},{key:"_initializeIntervalIfNeeded",value:function(){var e=this;this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((function(){e._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}},{key:"_onInterval",value:function(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}},{key:"_processQueue",value:function(){for(;this._tryToStartAnother(););}},{key:"concurrency",get:function(){return this._concurrency},set:function(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));this._concurrency=e,this._processQueue()}},{key:"add",value:function(){var e=a(n().mark((function e(t){var r,i=this,s=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.abrupt("return",new Promise((function(e,s){var o=function(){var o=a(n().mark((function a(){var o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i._pendingCount++,i._intervalCount++,n.prev=2,o=void 0===i._timeout&&void 0===r.timeout?t():l.default(Promise.resolve(t()),void 0===r.timeout?i._timeout:r.timeout,(function(){(void 0===r.throwOnTimeout?i._throwOnTimeout:r.throwOnTimeout)&&s(h)})),n.t0=e,n.next=7,o;case 7:n.t1=n.sent,(0,n.t0)(n.t1),n.next=14;break;case 11:n.prev=11,n.t2=n.catch(2),s(n.t2);case 14:i._next();case 15:case"end":return n.stop()}}),a,null,[[2,11]])})));return function(){return o.apply(this,arguments)}}();i._queue.enqueue(o,r),i._tryToStartAnother(),i.emit("add")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAll",value:function(){var e=a(n().mark((function e(t,r){var i=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.add(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"start",value:function(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}},{key:"pause",value:function(){this._isPaused=!0}},{key:"clear",value:function(){this._queue=new this._queueClass}},{key:"onEmpty",value:function(){var e=a(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._queue.size){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e){var r=t._resolveEmpty;t._resolveEmpty=function(){r(),e()}})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onIdle",value:function(){var e=a(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._pendingCount||0!==this._queue.size){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e){var r=t._resolveIdle;t._resolveIdle=function(){r(),e()}})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"size",get:function(){return this._queue.size}},{key:"sizeBy",value:function(e){return this._queue.filter(e).length}},{key:"pending",get:function(){return this._pendingCount}},{key:"isPaused",get:function(){return this._isPaused}},{key:"timeout",get:function(){return this._timeout},set:function(e){this._timeout=e}}]),r}(c);t.default=d},5199:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){for(var n=0,a=e.length;a>0;){var i=a/2|0,s=n+i;r(e[s],t)<=0?(n=++s,a-=i+1):a=i}return n}},1922:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var i=r(5199),s=function(){function e(){n(this,e),this._queue=[]}return a(e,[{key:"enqueue",value:function(e,t){var r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)this._queue.push(r);else{var n=i.default(this._queue,r,(function(e,t){return t.priority-e.priority}));this._queue.splice(n,0,r)}}},{key:"dequeue",value:function(){var e=this._queue.shift();return null===e||void 0===e?void 0:e.run}},{key:"filter",value:function(e){return this._queue.filter((function(t){return t.priority===e.priority})).map((function(e){return e.run}))}},{key:"size",get:function(){return this._queue.length}}]),e}();t.default=s},4890:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(1655).default,s=r(6389).default,o=r(3496).default,u=r(9674),c=function(e){i(r,e);var t=s(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).name="TimeoutError",n}return n(r)}(o(Error)),l=function(e,t,r){return new Promise((function(n,a){if("number"!==typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t!==1/0){var i=setTimeout((function(){if("function"!==typeof r){var i="string"===typeof r?r:"Promise timed out after ".concat(t," milliseconds"),s=r instanceof Error?r:new c(i);"function"===typeof e.cancel&&e.cancel(),a(s)}else try{n(r())}catch(o){a(o)}}),t);u(e.then(n,a),(function(){clearTimeout(i)}))}else n(e)}))};e.exports=l,e.exports.default=l,e.exports.TimeoutError=c},6927:function(e,t,r){"use strict";var n=r(2193),a="object"===typeof window&&"object"===typeof document&&9===document.nodeType,i=n(),s=a&&!i,o=i&&!a,u=i&&a,c="undefined"!==typeof process&&"undefined"!==typeof process.release&&"node"===process.release.name&&!i,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,f="undefined"!==typeof process&&!1,p="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:f,isElectron:i,isElectronMain:o,isElectronRenderer:u,isNode:c,isBrowser:s,isWebWorker:l,isEnvWithDom:a,isReactNative:p}},5213:function(e,t,r){"use strict";e.exports=r(1900)},5014:function(e,t,r){"use strict";var n=r(7061).default,a=r(8186).default,i=r(6737).default,s=r(8237).default,o=r(8131).default,u=r(8257);function c(e,t){return l.apply(this,arguments)}function l(){return(l=a(n().mark((function e(t,r){var a,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new u,e.next=3,i(a.get(t,r));case 3:return c=e.sent,e.delegateYield(o(s(c.iterator()),i),"t0",5);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports=function(e,t){return{path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:c(e,t)}}},8257:function(e,t,r){"use strict";var n=r(8416).default,a=r(7061).default,i=r(2122).default,s=r(7156).default,o=r(6690).default,u=r(9728).default,c=r(8186).default,l=r(6737).default,f=r(8237).default,p=r(8131).default,h=r(2020),d=h.fetch,v=h.Request,y=h.Headers,g=r(8407),m=g.TimeoutError,b=g.HTTPError,w=r(9842).bind({ignoreUndefined:!0}),k=r(6791),x=k.URL,_=k.URLSearchParams,E=r(6622),S=function(e,t,r){if(void 0===t)return e;var n=Date.now(),a=function(){return Date.now()-n>=t};return new Promise((function(n,i){var s=setTimeout((function(){a()&&(i(new m),r.abort())}),t),o=function(e){return function(t){clearTimeout(s),a()?i(new m):e(t)}};e.then(o(n),o(i))}))},A={throwHttpErrors:!0,credentials:"same-origin"},I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.opts=w(A,t)}return u(e,[{key:"fetch",value:function(){var e=s(a().mark((function e(t){var r,n,s,o,u,h,g,m,k,A,I=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=I.length>1&&void 0!==I[1]?I[1]:{},n=w(this.opts,r),s=new y(n.headers),"string"===typeof t||(t instanceof x||t instanceof v)){e.next=5;break}throw new TypeError("`resource` must be a string, URL, or Request");case 5:return o=new x(t.toString(),n.base),u=n.searchParams,h=n.transformSearchParams,g=n.json,u&&(o.search="function"===typeof h?h(new _(n.searchParams)):new _(n.searchParams)),g&&(n.body=JSON.stringify(n.json),s.set("content-type","application/json")),m=new AbortController,k=E([m.signal,n.signal]),e.next=13,S(d(o.toString(),i(i({},n),{},{signal:k,timeout:void 0,headers:s})),n.timeout,m);case 13:if((A=e.sent).ok||!n.throwHttpErrors){e.next=19;break}if(!n.handleError){e.next=18;break}return e.next=18,n.handleError(A);case 18:throw new b(A);case 19:return A.iterator=c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(p(f(Z(A.body)),l),"t0",1);case 1:case"end":return e.stop()}}),e)}))),A.ndjson=c(a().mark((function e(){var t,n,i,s,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,n=!1,e.prev=2,s=f(C(A.iterator()));case 4:return e.next=6,l(s.next());case 6:if(!(t=!(o=e.sent).done)){e.next=18;break}if(u=o.value,!r.transform){e.next=13;break}return e.next=11,r.transform(u);case 11:e.next=15;break;case 13:return e.next=15,u;case 15:t=!1,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),n=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,!t||null==s.return){e.next=29;break}return e.next=29,l(s.return());case 29:if(e.prev=29,!n){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])}))),e.abrupt("return",A);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"POST"}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"GET"}))}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"PUT"}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"DELETE"}))}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"OPTIONS"}))}}]),e}(),C=function(){var e=c(a().mark((function e(t){var r,n,i,s,o,u,c,p,h,d,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new TextDecoder,n="",i=!1,s=!1,e.prev=4,u=f(t);case 6:return e.next=8,l(u.next());case 8:if(!(i=!(c=e.sent).done)){e.next=25;break}p=c.value,n+=r.decode(p,{stream:!0}),h=n.split(/\r?\n/),d=0;case 13:if(!(d<h.length-1)){e.next=21;break}if(!((v=h[d].trim()).length>0)){e.next=18;break}return e.next=18,JSON.parse(v);case 18:d++,e.next=13;break;case 21:n=h[h.length-1];case 22:i=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),s=!0,o=e.t0;case 31:if(e.prev=31,e.prev=32,!i||null==u.return){e.next=36;break}return e.next=36,l(u.return());case 36:if(e.prev=36,!s){e.next=39;break}throw o;case 39:return e.finish(36);case 40:return e.finish(31);case 41:if(0===(n=(n+=r.decode()).trim()).length){e.next=46;break}return e.next=46,JSON.parse(n);case 46:case"end":return e.stop()}}),e,null,[[4,27,31,41],[32,,36,40]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){if(D(e)){var t=e[Symbol.asyncIterator]();return n({},Symbol.asyncIterator,(function(){return{next:t.next.bind(t),return:function(r){return e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:r})}}}))}if(T(e)){var r=e.getReader();return c(a().mark((function e(){var t,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.next=4,l(r.read());case 4:if(t=e.sent,n=t.done,i=t.value,!n){e.next=9;break}return e.abrupt("return");case 9:if(!i){e.next=12;break}return e.next=12,i;case 12:e.next=1;break;case 14:return e.prev=14,r.releaseLock(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,,14,17]])})))()}if(R(e))return e;throw new TypeError("Body can't be converted to AsyncIterable")},R=function(e){return"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator]},T=function(e){return e&&"function"===typeof e.getReader},D=function(e){return Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable")};I.HTTPError=b,I.TimeoutError=m,I.streamToAsyncIterator=Z,I.post=function(e,t){return new I(t).post(e,t)},I.get=function(e,t){return new I(t).get(e,t)},I.put=function(e,t){return new I(t).put(e,t)},I.delete=function(e,t){return new I(t).delete(e,t)},I.options=function(e,t){return new I(t).options(e,t)},e.exports=I},8407:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(1655).default,s=r(6389).default,o=r(3496).default,u=function(e){i(r,e);var t=s(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out";return a(this,r),(e=t.call(this,n)).name="TimeoutError",e}return n(r)}(o(Error));t.TimeoutError=u;var c=function(e){i(r,e);var t=s(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted.";return a(this,r),(e=t.call(this,n)).name="AbortError",e}return n(r)}(o(Error));t.AbortError=c;var l=function(e){i(r,e);var t=s(r);function r(e){var n;return a(this,r),(n=t.call(this,e.statusText)).name="HTTPError",n.response=e,n}return n(r)}(o(Error));t.HTTPError=l},2020:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(6115).default,s=r(1655).default,o=r(6389).default,u=r(7424).default,c=r(4704).default,l=r(8407),f=l.TimeoutError,p=l.AbortError,h=r(5213),d=h.Response,v=h.Request,y=h.Headers,g=h.default,m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new XMLHttpRequest;r.open(t.method||"GET",e.toString(),!0);var n=t.timeout,a=t.headers;if(n&&n>0&&n<1/0&&(r.timeout=n),null!=t.overrideMimeType&&r.overrideMimeType(t.overrideMimeType),a){var i,s=c(new y(a));try{for(s.s();!(i=s.n()).done;){var o=u(i.value,2),l=o[0],h=o[1];r.setRequestHeader(l,h)}}catch(v){s.e(v)}finally{s.f()}}return t.signal&&(t.signal.onabort=function(){return r.abort()}),t.onUploadProgress&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((function(e,n){var a=function(t){switch(t.type){case"error":e(d.error());break;case"load":e(new k(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:w(r.getAllResponseHeaders())}));break;case"timeout":n(new f);break;case"abort":n(new p)}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(t.body)}))},b=g,w=function(e){var t,r=new y,n=c(e.trim().split(/[\r\n]+/));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.indexOf(": ");i>0&&r.set(a.slice(0,i),a.slice(i+1))}}catch(s){n.e(s)}finally{n.f()}return r},k=function(e){s(r,e);var t=o(r);function r(e,n,s){var o;return a(this,r),o=t.call(this,n,s),Object.defineProperty(i(o),"url",{value:e}),o}return n(r)}(d);e.exports={fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t.onUploadProgress?m(e,t):b(e,t)},Request:v,Headers:y}},5450:function(e,t,r){"use strict";var n=r(4707)(),a=r(4037)("Object.prototype.toString"),i=function(e){return!(n&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===a(e)},s=function(e){return!!i(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==a(e)&&"[object Function]"===a(e.callee)},o=function(){return i(arguments)}();i.isLegacyArguments=s,e.exports=o?i:s},5586:function(e){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},460:function(e){"use strict";var t,r,n=Function.prototype.toString,a="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof a&&"function"===typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},a((function(){throw 42}),null,t)}catch(l){l!==r&&(a=null)}else a=null;var i=/^\s*class\b/,s=function(e){try{var t=n.call(e);return i.test(t)}catch(r){return!1}},o=Object.prototype.toString,u="function"===typeof Symbol&&!!Symbol.toStringTag,c="object"===typeof document&&"undefined"===typeof document.all&&void 0!==document.all?document.all:{};e.exports=a?function(e){if(e===c)return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;try{a(e,null,t)}catch(n){if(n!==r)return!1}return!s(e)}:function(e){if(e===c)return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;if(u)return function(e){try{return!s(e)&&(n.call(e),!0)}catch(t){return!1}}(e);if(s(e))return!1;var t=o.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},819:function(e){"use strict";var t=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;e.exports=function(e,r){if(null==r&&(r=!1),e.length<2)return!1;if(e.length>255)return!1;var n=e[e.length-1];if(r){if("."!==n)return!1}else if("."===n)return!1;return t.test(e)}},2193:function(e){e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},5718:function(e,t,r){"use strict";var n,a=Object.prototype.toString,i=Function.prototype.toString,s=/^\s*(?:function)?\*/,o=r(4707)(),u=Object.getPrototypeOf;e.exports=function(e){if("function"!==typeof e)return!1;if(s.test(i.call(e)))return!0;if(!o)return"[object GeneratorFunction]"===a.call(e);if(!u)return!1;if("undefined"===typeof n){var t=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&u(t)}return u(e)===n}},2795:function(e,t,r){"use strict";var n=r(8974),a=function(e){return n({exact:!0}).test(e)};a.v4=function(e){return n.v4({exact:!0}).test(e)},a.v6=function(e){return n.v6({exact:!0}).test(e)},a.version=function(e){return a(e)?a.v4(e)?4:6:void 0},e.exports=a},2262:function(e,t,r){"use strict";var n=r(6898).base58btc,a=r(1128).base32,i=r(8315),s=r(8719).Multiaddr,o=r(8322),u=r(6629).CID,c=r(6791).URL,l=r(2051).toString,f=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,p=/^\/(ip[fn]s)\/([^/?#]+)/,h=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,d=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function v(e){try{return"string"===typeof e?Boolean(u.parse(e)):e instanceof Uint8Array?Boolean(u.decode(e)):Boolean(u.asCID(e))}catch(t){return!1}}function y(e){if(!e)return!1;if(s.isMultiaddr(e))return!0;try{return new s(e),!0}catch(t){return!1}}function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=w(e);if(!a)return!1;var i=a.match(t);if(!i)return!1;if("ipfs"!==i[r])return!1;var s=i[n];return s&&t===h&&(s=s.toLowerCase()),v(s)}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=w(e);if(!a)return!1;var i=a.match(t);if(!i)return!1;if("ipns"!==i[r])return!1;var s=i[n];if(s&&t===h){if(v(s=s.toLowerCase()))return!0;try{!s.includes(".")&&s.includes("-")&&(s=s.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));var o=new c("http://".concat(s)),u=o.hostname;return d.test(u)}catch(l){return!1}}return!0}function b(e){return"string"===typeof e}function w(e){return e instanceof Uint8Array?l(e,"base58btc"):!!b(e)&&e}var k=function(e){return g(e,h,2,1)},x=function(e){return m(e,h,2,1)},_=function(e){return k(e)||x(e)},E=function(e){return g(e,f)||k(e)},S=function(e){return m(e,f)||x(e)},A=function(e){return E(e)||S(e)||_(e)},I=function(e){return g(e,p)||m(e,p)};e.exports={multihash:function(e){var t=w(e);try{i.decode(n.decode("z"+t))}catch(r){return!1}return!0},multiaddr:y,peerMultiaddr:function(e){return y(e)&&o.P2P.matches(e)},cid:v,base32cid:function(e){return function(e){try{a.decode(e)}catch(t){return!1}return!0}(e)&&v(e)},ipfsSubdomain:k,ipnsSubdomain:x,subdomain:_,subdomainGatewayPattern:h,ipfsUrl:E,ipnsUrl:S,url:A,pathGatewayPattern:f,ipfsPath:function(e){return g(e,p)},ipnsPath:function(e){return m(e,p)},path:I,pathPattern:p,urlOrPath:function(e){return A(e)||I(e)},cidPath:function(e){return b(e)&&!v(e)&&g("/ipfs/".concat(e),p)}}},887:function(e){"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},6218:function(e,t,r){"use strict";var n=r(5369),a=r(306),i=r(4037),s=i("Object.prototype.toString"),o=r(4707)(),u="undefined"===typeof globalThis?r.g:globalThis,c=a(),l=i("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},f=i("String.prototype.slice"),p={},h=r(636),d=Object.getPrototypeOf;o&&h&&d&&n(c,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var r=d(t),n=h(r,Symbol.toStringTag);if(!n){var a=d(r);n=h(a,Symbol.toStringTag)}p[e]=n.get}}));e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!o||!(Symbol.toStringTag in e)){var t=f(s(e),8,-1);return l(c,t)>-1}return!!h&&function(e){var t=!1;return n(p,(function(r,n){if(!t)try{t=r.call(e)===n}catch(a){}})),t}(e)}},1926:function(e){"use strict";e.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:256,RTLD_LOCAL:0,RTLD_DEEPBIND:8,E2BIG:7,EACCES:13,EADDRINUSE:98,EADDRNOTAVAIL:99,EAFNOSUPPORT:97,EAGAIN:11,EALREADY:114,EBADF:9,EBADMSG:74,EBUSY:16,ECANCELED:125,ECHILD:10,ECONNABORTED:103,ECONNREFUSED:111,ECONNRESET:104,EDEADLK:35,EDESTADDRREQ:89,EDOM:33,EDQUOT:122,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:113,EIDRM:43,EILSEQ:84,EINPROGRESS:115,EINTR:4,EINVAL:22,EIO:5,EISCONN:106,EISDIR:21,ELOOP:40,EMFILE:24,EMLINK:31,EMSGSIZE:90,EMULTIHOP:72,ENAMETOOLONG:36,ENETDOWN:100,ENETRESET:102,ENETUNREACH:101,ENFILE:23,ENOBUFS:105,ENODATA:61,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:37,ENOLINK:67,ENOMEM:12,ENOMSG:42,ENOPROTOOPT:92,ENOSPC:28,ENOSR:63,ENOSTR:60,ENOSYS:38,ENOTCONN:107,ENOTDIR:20,ENOTEMPTY:39,ENOTSOCK:88,ENOTSUP:95,ENOTTY:25,ENXIO:6,EOPNOTSUPP:95,EOVERFLOW:75,EPERM:1,EPIPE:32,EPROTO:71,EPROTONOSUPPORT:93,EPROTOTYPE:91,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:116,ETIME:62,ETIMEDOUT:110,ETXTBSY:26,EWOULDBLOCK:11,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:17,SIGSTKFLT:16,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGSYS:31,SIGUNUSED:31,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488335,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},9070:function(e,t,r){"use strict";var n=r(723).Readable,a=r(5410);e.exports={randomStream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,t=0;return new n({read:function(r){if(t>=e)return this.push(null);t+r>=e&&(r=e-t),t+=r,this.push(a(r))}})},randomBytes:a}},5410:function(e){"use strict";var t=65536;e.exports=function(e){var r=new Uint8Array(e),n=0;if(e>0)if(e>t)for(;n<e;)n+t>e?(crypto.getRandomValues(r.subarray(n,n+(e-n))),n+=e-n):(crypto.getRandomValues(r.subarray(n,n+t)),n+=t);else crypto.getRandomValues(r);return r}},6791:function(e,t,r){"use strict";var n=r(5732),a=n.URLWithLegacySupport,i=n.format,s=n.URLSearchParams,o=n.defaultBase,u=r(9640);e.exports={URL:a,URLSearchParams:s,format:i,relative:u,defaultBase:o}},9640:function(e,t,r){"use strict";var n=r(5732),a=n.URLWithLegacySupport,i=n.format;e.exports=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0,o=r.protocol?r.protocol.replace(":",""):"http";o=(n[o]||s||o)+":";try{t=new a(e)}catch(c){t={}}var u=Object.assign({},r,{protocol:o||t.protocol,host:r.host||t.host});return new a(e,i(u)).toString()}},5732:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i="undefined"!==typeof navigator&&"ReactNative"===navigator.product;var s=self.URL,o=i?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"",u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;n(this,e),this.super=new s(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}return a(e,[{key:"hash",get:function(){return this.super.hash},set:function(e){this.super.hash=e}},{key:"host",get:function(){return this.super.host},set:function(e){this.super.host=e}},{key:"hostname",get:function(){return this.super.hostname},set:function(e){this.super.hostname=e}},{key:"href",get:function(){return this.super.href},set:function(e){this.super.href=e}},{key:"origin",get:function(){return this.super.origin}},{key:"password",get:function(){return this.super.password},set:function(e){this.super.password=e}},{key:"pathname",get:function(){return this.super.pathname},set:function(e){this.super.pathname=e}},{key:"port",get:function(){return this.super.port},set:function(e){this.super.port=e}},{key:"protocol",get:function(){return this.super.protocol},set:function(e){this.super.protocol=e}},{key:"search",get:function(){return this.super.search},set:function(e){this.super.search=e}},{key:"searchParams",get:function(){return this.super.searchParams}},{key:"username",get:function(){return this.super.username},set:function(e){this.super.username=e}},{key:"toJSON",value:function(){return this.super.toJSON()}},{key:"toString",value:function(){return this.super.toString()}},{key:"format",value:function(){return this.toString()}}],[{key:"createObjectURL",value:function(e){return s.createObjectURL(e)}},{key:"revokeObjectURL",value:function(e){s.revokeObjectURL(e)}}]),e}();e.exports={URLWithLegacySupport:u,URLSearchParams:self.URLSearchParams,defaultBase:o,format:function(e){if("string"===typeof e)return new s(e).toString();if(!(e instanceof s)){var t=e.username&&e.password?"".concat(e.username,":").concat(e.password,"@"):"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",a=e.protocol?e.protocol+"//":"",i=e.host||"",o=e.hostname||"",u=e.search||(e.query?"?"+e.query:""),c=e.hash||"",l=e.pathname||"",f=e.path||l+u;return"".concat(a).concat(t||r).concat(i||o+n).concat(f).concat(c)}}}},464:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,s=function(){var e=a(n().mark((function e(t){var r,a,s,o,u,c,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=!1,s=!1,e.prev=3,u=i(t);case 5:return e.next=7,u.next();case 7:if(!(a=!(c=e.sent).done)){e.next=13;break}l=c.value,r.push(l);case 10:a=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),s=!0,o=e.t0;case 19:if(e.prev=19,e.prev=20,!a||null==u.return){e.next=24;break}return e.next=24,u.return();case 24:if(e.prev=24,!s){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}();e.exports=s},817:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,s=r(8237).default;function o(){return o=i(n().mark((function e(t){var r,i,o,u,c,l,f,p,h=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>1&&void 0!==h[1]?h[1]:1,i=[],r<1&&(r=1),o=!1,u=!1,e.prev=5,l=s(t);case 7:return e.next=9,a(l.next());case 9:if(!(o=!(f=e.sent).done)){e.next=21;break}p=f.value,i.push(p);case 12:if(!(i.length>=r)){e.next=18;break}return e.next=15,i.slice(0,r);case 15:i=i.slice(r),e.next=12;break;case 18:o=!1,e.next=7;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),u=!0,c=e.t0;case 27:if(e.prev=27,e.prev=28,!o||null==l.return){e.next=32;break}return e.next=32,a(l.return());case 32:if(e.prev=32,!u){e.next=35;break}throw c;case 35:return e.finish(32);case 36:return e.finish(27);case 37:if(!i.length){e.next=43;break}return e.next=40,i.slice(0,r);case 40:i=i.slice(r),e.next=37;break;case 43:case"end":return e.stop()}}),e,null,[[5,23,27,37],[28,,32,36]])}))),o.apply(this,arguments)}e.exports=function(e){return o.apply(this,arguments)}},9272:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,s=function(){var e=a(n().mark((function e(t){var r,a,s,o,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,o=i(t);case 4:return e.next=6,o.next();case 6:if(!(r=!(u=e.sent).done)){e.next=11;break}u.value;case 8:r=!1,e.next=4;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),a=!0,s=e.t0;case 17:if(e.prev=17,e.prev=18,!r||null==o.return){e.next=22;break}return e.next=22,o.return();case 22:if(e.prev=22,!a){e.next=25;break}throw s;case 25:return e.finish(22);case 26:return e.finish(17);case 27:case"end":return e.stop()}}),e,null,[[2,13,17,27],[18,,22,26]])})));return function(t){return e.apply(this,arguments)}}();e.exports=s},2393:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,s=r(8237).default,o=function(){var e=i(n().mark((function e(t,r){var i,o,u,c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,o=!1,e.prev=2,c=s(t);case 4:return e.next=6,a(c.next());case 6:if(!(i=!(l=e.sent).done)){e.next=16;break}return f=l.value,e.next=10,a(r(f));case 10:if(!e.sent){e.next=13;break}return e.next=13,f;case 13:i=!1,e.next=4;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),o=!0,u=e.t0;case 22:if(e.prev=22,e.prev=23,!i||null==c.return){e.next=27;break}return e.next=27,a(c.return());case 27:if(e.prev=27,!o){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,null,[[2,18,22,32],[23,,27,31]])})));return function(t,r){return e.apply(this,arguments)}}();e.exports=o},4744:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,s=function(){var e=a(n().mark((function e(t){var r,a,s,o,u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,o=i(t);case 4:return e.next=6,o.next();case 6:if(!(r=!(u=e.sent).done)){e.next=12;break}return c=u.value,e.abrupt("return",c);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),a=!0,s=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!a){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}();e.exports=s},1309:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,s=r(8237).default,o=function(){var e=i(n().mark((function e(t,r){var i,o,u,c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,o=!1,e.prev=2,c=s(t);case 4:return e.next=6,a(c.next());case 6:if(!(i=!(l=e.sent).done)){e.next=15;break}return f=l.value,e.next=10,a(r(f));case 10:return e.next=12,f;case 12:i=!1,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),o=!0,u=e.t0;case 21:if(e.prev=21,e.prev=22,!i||null==c.return){e.next=26;break}return e.next=26,a(c.return());case 26:if(e.prev=26,!o){e.next=29;break}throw u;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])})));return function(t,r){return e.apply(this,arguments)}}();e.exports=o},6723:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,s=function(){var e=a(n().mark((function e(t){var r,a,s,o,u,c,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,s=!1,e.prev=2,u=i(t);case 4:return e.next=6,u.next();case 6:if(!(a=!(c=e.sent).done)){e.next=12;break}l=c.value,r=l;case 9:a=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),s=!0,o=e.t0;case 18:if(e.prev=18,e.prev=19,!a||null==u.return){e.next=23;break}return e.next=23,u.return();case 23:if(e.prev=23,!s){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}();e.exports=s},1463:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,s=function(){var e=a(n().mark((function e(t){var r,a,s,o,u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,a=!1,s=!1,e.prev=3,u=i(t);case 5:return e.next=7,u.next();case 7:if(!(a=!(c=e.sent).done)){e.next=13;break}c.value,r++;case 10:a=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),s=!0,o=e.t0;case 19:if(e.prev=19,e.prev=20,!a||null==u.return){e.next=24;break}return e.next=24,u.return();case 24:if(e.prev=24,!s){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}();e.exports=s},7889:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,s=r(8237).default,o=function(){var e=i(n().mark((function e(t,r){var i,o,u,c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,o=!1,e.prev=2,c=s(t);case 4:return e.next=6,a(c.next());case 6:if(!(i=!(l=e.sent).done)){e.next=13;break}return f=l.value,e.next=10,r(f);case 10:i=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),o=!0,u=e.t0;case 19:if(e.prev=19,e.prev=20,!i||null==c.return){e.next=24;break}return e.next=24,a(c.return());case 24:if(e.prev=24,!o){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])})));return function(t,r){return e.apply(this,arguments)}}();e.exports=o},6155:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8186).default,s=r(6737).default,o=r(8237).default,u=r(8131).default,c=r(9202),l=function(){var e=i(n().mark((function e(){var t,r,i,l,f=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=f.length,r=new Array(t),i=0;i<t;i++)r[i]=f[i];return l=c(),setTimeout(a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(r.map(function(){var e=a(n().mark((function e(t){var r,a,i,s,u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,s=o(t);case 4:return e.next=6,s.next();case 6:if(!(r=!(u=e.sent).done)){e.next=12;break}c=u.value,l.push(c);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),a=!0,i=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==s.return){e.next=23;break}return e.next=23,s.return();case 23:if(e.prev=23,!a){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()));case 3:l.end(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l.end(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),0),e.delegateYield(u(o(l),s),"t0",4);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.exports=l},9202:function(e,t,r){var n=r(8416).default,a=r(5125);e.exports=function(e){var t,r,i;"function"===typeof(e=e||{})?(i=e,e={}):i=e.onEnd;var s,o,u,c=new a,l=function(e){return o?o(e):(c.push(e),s)},f=function(e){return u?s:l({done:!1,value:e})},p=function(e){return u?s:(u=!0,e?function(e){return c=new a,o?o({error:e}):(c.push({error:e}),s)}(e):l({done:!0}))};if(n(t={},Symbol.asyncIterator,(function(){return this})),n(t,"next",(function(){if(!c.isEmpty()){if(e.writev){for(var t,r=[];!c.isEmpty();){if((t=c.shift()).error)throw t.error;r.push(t.value)}return{done:t.done,value:r}}var n=c.shift();if(n.error)throw n.error;return n}return u?{done:!0}:new Promise((function(t,r){o=function(n){return o=null,n.error?r(n.error):e.writev&&!n.done?t({done:n.done,value:[n.value]}):t(n),s}}))})),n(t,"return",(function(){return c=new a,p(),{done:!0}})),n(t,"throw",(function(e){return p(e),{done:!0}})),n(t,"push",f),n(t,"end",p),s=t,!i)return s;var h=s;return n(r={},Symbol.asyncIterator,(function(){return this})),n(r,"next",(function(){return h.next()})),n(r,"throw",(function(e){return h.throw(e),i&&(i(e),i=null),{done:!0}})),n(r,"return",(function(){return h.return(),i&&(i(),i=null),{done:!0}})),n(r,"push",f),n(r,"end",(function(e){return h.end(e),i&&(i(e),i=null),s})),s=r}},857:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,s=r(8237).default,o=r(817);function u(){return u=i(n().mark((function e(t){var r,i,u,c,l,f,p,h,d,v,y=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=y.length>1&&void 0!==y[1]?y[1]:1,i=!1,u=!1,e.prev=3,l=s(o(t,r));case 5:return e.next=7,a(l.next());case 7:if(!(i=!(f=e.sent).done)){e.next=27;break}p=f.value,h=p.map((function(e){return e().then((function(e){return{ok:!0,value:e}}),(function(e){return{ok:!1,err:e}}))})),d=0;case 11:if(!(d<h.length)){e.next=24;break}return e.next=14,a(h[d]);case 14:if(!(v=e.sent).ok){e.next=20;break}return e.next=18,v.value;case 18:e.next=21;break;case 20:throw v.err;case 21:d++,e.next=11;break;case 24:i=!1,e.next=5;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(3),u=!0,c=e.t0;case 33:if(e.prev=33,e.prev=34,!i||null==l.return){e.next=38;break}return e.next=38,a(l.return());case 38:if(e.prev=38,!u){e.next=41;break}throw c;case 41:return e.finish(38);case 42:return e.finish(33);case 43:case"end":return e.stop()}}),e,null,[[3,29,33,43],[34,,38,42]])}))),u.apply(this,arguments)}e.exports=function(e){return u.apply(this,arguments)}},1254:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8186).default,s=r(6737).default,o=r(8237).default,u=r(8131).default,c=r(1069),l=r(7465).EventEmitter;function f(){return f=i(n().mark((function e(t){var r,i,f,p,h,d,v,y,g,m,b,w,k,x,_,E=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_=function(){var e,t;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!k()){r.next=21;break}e=0;case 2:if(!(e<v.length)){r.next=19;break}if(!v[e].done){r.next=16;break}if(t=v[e],v.splice(e,1),e--,!t.ok){r.next=12;break}return r.next=10,t.value;case 10:r.next=15;break;case 12:throw w=!0,y.resolve(),t.err;case 15:y.resolve();case 16:e++,r.next=2;break;case 19:r.next=0;break;case 21:case"end":return r.stop()}}),i)},x=function(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.length||!v[0].done){t.next=14;break}if(e=v[0],v.shift(),!e.ok){t.next=8;break}return t.next=6,e.value;case 6:t.next=11;break;case 8:throw w=!0,y.resolve(),e.err;case 11:y.resolve(),t.next=0;break;case 14:case"end":return t.stop()}}),r)},k=function(){return h?Boolean(v[0]&&v[0].done):Boolean(v.find((function(e){return e.done})))},r=n().mark(x),i=n().mark(_),f=E.length>1&&void 0!==E[1]?E[1]:{},(p=f.concurrency||1/0)<1&&(p=1/0),h=null!=f.ordered&&f.ordered,d=new l,v=[],y=c(),g=c(),m=!1,w=!1,d.on("task-complete",(function(){g.resolve()})),Promise.resolve().then(a(n().mark((function e(){var r,a,i,s,u,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=!1,a=!1,e.prev=3,s=n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.value,v.length!==p){e.next=5;break}return y=c(),e.next=5,y.promise;case 5:if(!w){e.next=7;break}return e.abrupt("return","break");case 7:r={done:!1},v.push(r),t().then((function(e){r.done=!0,r.ok=!0,r.value=e,d.emit("task-complete")}),(function(e){r.done=!0,r.err=e,d.emit("task-complete")}));case 10:case"end":return e.stop()}}),e)})),u=o(t);case 6:return e.next=8,u.next();case 8:if(!(r=!(l=e.sent).done)){e.next=16;break}return e.delegateYield(s(),"t0",10);case 10:if("break"!==e.t0){e.next=13;break}return e.abrupt("break",16);case 13:r=!1,e.next=6;break;case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(3),a=!0,i=e.t1;case 22:if(e.prev=22,e.prev=23,!r||null==u.return){e.next=27;break}return e.next=27,u.return();case 27:if(e.prev=27,!a){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(22);case 32:m=!0,d.emit("task-complete"),e.next=40;break;case 36:e.prev=36,e.t2=e.catch(0),b=e.t2,d.emit("task-complete");case 40:case"end":return e.stop()}}),e,null,[[0,36],[3,18,22,32],[23,,27,31]])}))));case 16:if(k()){e.next=21;break}return g=c(),e.next=21,s(g.promise);case 21:if(!b){e.next=23;break}throw b;case 23:if(!h){e.next=27;break}return e.delegateYield(u(o(x()),s),"t0",25);case 25:e.next=28;break;case 27:return e.delegateYield(u(o(_()),s),"t1",28);case 28:if(!m||0!==v.length){e.next=30;break}return e.abrupt("break",32);case 30:e.next=16;break;case 32:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}e.exports=function(e){return f.apply(this,arguments)}},1069:function(e){"use strict";e.exports=function(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}},8217:function(e,t,r){"use strict";var n=r(8416).default,a=r(7424).default;e.exports=function(e){var t=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=a(t,2),i=r[0],s=r[1],o=[];return n({peek:function(){return i.next()},push:function(e){o.push(e)},next:function(){return o.length?{done:!1,value:o.shift()}:i.next()}},s,(function(){return this}))}},2035:function(e,t,r){"use strict";var n=r(7061).default,a=r(8186).default,i=r(6737).default,s=r(8237).default,o=r(8131).default,u=r(464),c=function(){var e=a(n().mark((function e(t,r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(u(t));case 2:return a=e.sent,e.delegateYield(o(s(a.sort(r)),i),"t0",4);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();e.exports=c},5959:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,s=r(8237).default,o=function(){var e=i(n().mark((function e(t,r){var i,o,u,c,l,f,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=0,!(r<1)){e.next=3;break}return e.abrupt("return");case 3:o=!1,u=!1,e.prev=5,l=s(t);case 7:return e.next=9,a(l.next());case 9:if(!(o=!(f=e.sent).done)){e.next=19;break}return p=f.value,e.next=13,p;case 13:if(++i!==r){e.next=16;break}return e.abrupt("return");case 16:o=!1,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),u=!0,c=e.t0;case 25:if(e.prev=25,e.prev=26,!o||null==l.return){e.next=30;break}return e.next=30,a(l.return());case 30:if(e.prev=30,!u){e.next=33;break}throw c;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[5,21,25,35],[26,,30,34]])})));return function(t,r){return e.apply(this,arguments)}}();e.exports=o},9765:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,s=r(2110).concat;function o(){return(o=a(n().mark((function e(t){var r,a,o,u,c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Uint8Array(0),a=!1,o=!1,e.prev=3,c=i(t);case 5:return e.next=7,c.next();case 7:if(!(a=!(l=e.sent).done)){e.next=13;break}f=l.value,r=s([r,f],r.length+f.length);case 10:a=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),o=!0,u=e.t0;case 19:if(e.prev=19,e.prev=20,!a||null==c.return){e.next=24;break}return e.next=24,c.return();case 24:if(e.prev=24,!o){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}e.exports=function(e){return o.apply(this,arguments)}},3003:function(e){e.exports=function(e,t,r){if(!e)return r;var n,a;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;){if(a=n.shift(),!e)return r;if(void 0===(e=e[a]))return r}return e}},3137:function(e,t,r){"use strict";var n=r(7061).default,a=r(4704).default,i=r(6690).default,s=r(9728).default,o=r(1655).default,u=r(6389).default,c=r(2525);function l(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0}function f(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}var p=function(e){o(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,r),(e=t.call(this)).localNodeId=n.localNodeId||c(20),e.numberOfNodesPerKBucket=n.numberOfNodesPerKBucket||20,e.numberOfNodesToPing=n.numberOfNodesToPing||3,e.distance=n.distance||r.distance,e.arbiter=n.arbiter||r.arbiter,e.metadata=Object.assign({},n.metadata),f("option.localNodeId as parameter 1",e.localNodeId),e.root={contacts:[],dontSplit:!1,left:null,right:null},e}return s(r,[{key:"add",value:function(e){f("contact.id",(e||{}).id);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e.id,t++);var n=this._indexOf(r,e.id);return n>=0?(this._update(r,n,e),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(e),this.emit("added",e),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(r,t),this.add(e))}},{key:"closest",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(f("id",e),!Number.isInteger(r)&&r!==1/0||r<=0)throw new TypeError("n is not positive number");for(var n=[],a=[this.root],i=0;a.length>0&&n.length<r;){var s=a.pop();if(null===s.contacts){var o=this._determineNode(s,e,i++);a.push(s.left===o?s.right:s.left),a.push(o)}else n=n.concat(s.contacts)}return n.map((function(r){return[t.distance(r.id,e),r]})).sort((function(e,t){return e[0]-t[0]})).slice(0,r).map((function(e){return e[1]}))}},{key:"count",value:function(){for(var e=0,t=[this.root];t.length>0;){var r=t.pop();null===r.contacts?t.push(r.right,r.left):e+=r.contacts.length}return e}},{key:"_determineNode",value:function(e,t,r){var n=r>>3,a=r%8;return t.length<=n&&0!==a?e.left:t[n]&1<<7-a?e.right:e.left}},{key:"get",value:function(e){f("id",e);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e,t++);var n=this._indexOf(r,e);return n>=0?r.contacts[n]:null}},{key:"_indexOf",value:function(e,t){for(var r=0;r<e.contacts.length;++r)if(l(e.contacts[r].id,t))return r;return-1}},{key:"remove",value:function(e){f("the id as parameter 1",e);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e,t++);var n=this._indexOf(r,e);if(n>=0){var a=r.contacts.splice(n,1)[0];this.emit("removed",a)}return this}},{key:"_split",value:function(e,t){e.left={contacts:[],dontSplit:!1,left:null,right:null},e.right={contacts:[],dontSplit:!1,left:null,right:null};var r,n=a(e.contacts);try{for(n.s();!(r=n.n()).done;){var i=r.value;this._determineNode(e,i.id,t).contacts.push(i)}}catch(o){n.e(o)}finally{n.f()}e.contacts=null;var s=this._determineNode(e,this.localNodeId,t);(e.left===s?e.right:e.left).dontSplit=!0}},{key:"toArray",value:function(){for(var e=[],t=[this.root];t.length>0;){var r=t.pop();null===r.contacts?t.push(r.right,r.left):e=e.concat(r.contacts)}return e}},{key:"toIterable",value:n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[this.root];case 1:if(!(t.length>0)){e.next=10;break}if(null!==(r=t.pop()).contacts){e.next=7;break}t.push(r.right,r.left),e.next=8;break;case 7:return e.delegateYield(r.contacts,"t0",8);case 8:e.next=1;break;case 10:case"end":return e.stop()}}),e,this)}))},{key:"_update",value:function(e,t,r){if(!l(e.contacts[t].id,r.id))throw new Error("wrong index for _update");var n=e.contacts[t],a=this.arbiter(n,r);a===n&&n!==r||(e.contacts.splice(t,1),e.contacts.push(a),this.emit("updated",n,a))}}],[{key:"arbiter",value:function(e,t){return e.vectorClock>t.vectorClock?e:t}},{key:"distance",value:function(e,t){for(var r=0,n=0,a=Math.min(e.length,t.length),i=Math.max(e.length,t.length);n<a;++n)r=256*r+(e[n]^t[n]);for(;n<i;++n)r=256*r+255;return r}}]),r}(r(7465).EventEmitter);e.exports=p},2957:function(e,t,r){"use strict";var n=r(8855),a=new Set(["lt","gt","lte","gte"]);function i(e){if(!(this instanceof i))return new i(e);this.opts=e||{},this.encodings=n}e.exports=i,i.prototype._encoding=function(e){return"string"===typeof e&&(e=n[e]),e||(e=n.id),e},i.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},i.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},i.prototype.encodeKey=function(e,t,r){return this._keyEncoding(t,r).encode(e)},i.prototype.encodeValue=function(e,t,r){return this._valueEncoding(t,r).encode(e)},i.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},i.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},i.prototype.encodeBatch=function(e,t){var r=this;return e.map((function(e){var n={type:e.type,key:r.encodeKey(e.key,t,e)};return r.keyAsBuffer(t,e)&&(n.keyEncoding="binary"),e.prefix&&(n.prefix=e.prefix),"value"in e&&(n.value=r.encodeValue(e.value,t,e),r.valueAsBuffer(t,e)&&(n.valueEncoding="binary")),n}))},i.prototype.encodeLtgt=function(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if("start"===i||"end"===i)throw new Error('Legacy range options ("start" and "end") have been removed');t[i]=a.has(i)?this.encodeKey(e[i],e):e[i]}return t},i.prototype.createStreamDecoder=function(e){var t=this;return e.keys&&e.values?function(r,n){return{key:t.decodeKey(r,e),value:t.decodeValue(n,e)}}:e.keys?function(r){return t.decodeKey(r,e)}:e.values?function(r,n){return t.decodeValue(n,e)}:function(){}},i.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},i.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}},8855:function(e,t,r){"use strict";var n=r(9778).Buffer;t.utf8=t["utf-8"]={encode:function(e){return u(e)?e:String(e)},decode:o,buffer:!1,type:"utf8"},t.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},t.binary={encode:function(e){return u(e)?e:n.from(e)},decode:o,buffer:!0,type:"binary"},t.none={encode:o,decode:o,buffer:!1,type:"id"},t.id=t.none;for(var a=function(){var e=s[i];t[e]={encode:function(t){return u(t)?t:n.from(t,e)},decode:function(t){return t.toString(e)},buffer:!0,type:e}},i=0,s=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];i<s.length;i++)a();function o(e){return e}function u(e){return void 0===e||null===e||n.isBuffer(e)}},8520:function(e){"use strict";function t(e,t){var r=function t(r,n){if("object"===typeof r&&null!==r&&(n=n||r,r=r.message||r.name),r=r||"","object"===typeof(n=n||void 0)&&n.type===e&&n.message===r)return n;Object.defineProperty(this,"type",{value:e,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:e,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:n,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:r,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)};return r.prototype=new t,r}var r=t("LevelUPError",Error);e.exports={LevelUPError:r,InitializationError:t("InitializationError",r),OpenError:t("OpenError",r),ReadError:t("ReadError",r),WriteError:t("WriteError",r),NotFoundError:t("NotFoundError",r),EncodingError:t("EncodingError",r)},e.exports.NotFoundError.prototype.notFound=!0,e.exports.NotFoundError.prototype.status=404},1057:function(e,t,r){"use strict";var n=r(2534),a=r(723).Readable;function i(e,t){if(!(this instanceof i))return new i(e,t);t=t||{},a.call(this,Object.assign({},t,{objectMode:!0})),this._iterator=e,this._options=t,this.on("end",this.destroy.bind(this,null,null))}e.exports=i,n(i,a),i.prototype._read=function(){var e=this;this.destroyed||this._iterator.next((function(t,r,n){if(!e.destroyed)return t?e.destroy(t):void(void 0===r&&void 0===n?e.push(null):!1!==e._options.keys&&!1===e._options.values?e.push(r):!1===e._options.keys&&!1!==e._options.values?e.push(n):e.push({key:r,value:n}))}))},i.prototype._destroy=function(e,t){this._iterator.end((function(r){t(e||r)}))}},9521:function(e,t,r){"use strict";e.exports=h;var n=r(6701).AbstractLevelDOWN,a=r(2534),i=r(8636),s=r(9718),o=r(5824),u=r(2799),c=r(1260),l=r(5746),f=r(8972),p="level-js-";function h(e,t){if(!(this instanceof h))return new h(e,t);if(n.call(this,{bufferKeys:c.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),t=t||{},"string"!==typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.prefix=null==t.prefix?p:t.prefix,this.version=parseInt(t.version||1,10)}a(h,n),h.prototype.type="level-js",h.prototype._open=function(e,t){var r=this,n=indexedDB.open(this.prefix+this.location,this.version);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=function(){r.db=n.result,t()},n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(r.location)||t.createObjectStore(r.location)}},h.prototype.store=function(e){return this.db.transaction([this.location],e).objectStore(this.location)},h.prototype.await=function(e,t){var r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}},h.prototype._get=function(e,t,r){var n,a=this.store("readonly");try{n=a.get(e)}catch(i){return this._nextTick(r,i)}this.await(n,(function(e,n){return e?r(e):void 0===n?r(new Error("NotFound")):void r(null,u(n,t.asBuffer))}))},h.prototype._getMany=function(e,t,r){var n=t.asBuffer,a=this.store("readonly"),s=e.map((function(e){return function(t){var r;try{r=a.get(e)}catch(i){return t(i)}r.onsuccess=function(){var e=r.result;t(null,void 0===e?e:u(e,n))},r.onerror=function(e){e.stopPropagation(),t(r.error)}}}));i(s,16,r)},h.prototype._del=function(e,t,r){var n,a=this.store("readwrite");try{n=a.delete(e)}catch(i){return this._nextTick(r,i)}this.await(n,r)},h.prototype._put=function(e,t,r,n){var a,i=this.store("readwrite");try{a=i.put(t,e)}catch(s){return this._nextTick(n,s)}this.await(a,n)},h.prototype._serializeKey=function(e){return o(e,this.supports.bufferKeys)},h.prototype._serializeValue=function(e){return o(e,!0)},h.prototype._iterator=function(e){return new s(this,this.location,e)},h.prototype._batch=function(e,t,r){if(0===e.length)return this._nextTick(r);var n,a=this.store("readwrite"),i=a.transaction,s=0;i.onabort=function(){r(n||i.error||new Error("aborted by user"))},i.oncomplete=function(){r()},function t(){var r,o=e[s++],u=o.key;try{r="del"===o.type?a.delete(u):a.put(o.value,u)}catch(c){return n=c,void i.abort()}s<e.length&&(r.onsuccess=t)}()},h.prototype._clear=function(e,t){var r,n;try{r=f(e)}catch(i){return this._nextTick(t)}if(e.limit>=0)return l(this,this.location,r,e,t);try{var a=this.store("readwrite");n=r?a.delete(r):a.clear()}catch(s){return this._nextTick(t,s)}this.await(n,t)},h.prototype._close=function(e){this.db.close(),this._nextTick(e)},h.prototype.upgrade=function(e){if("open"!==this.status)return this._nextTick(e,new Error("cannot upgrade() before open()"));var t=this.iterator(),r={},n=this;function a(e){if(e)return s(e);t.next(i)}function i(e,t,i){if(e||void 0===t)return s(e);var o=n._serializeKey(u(t,!0)),c=n._serializeValue(u(i,!0));n._batch([{type:"del",key:t},{type:"put",key:o,value:c}],r,a)}function s(r){t.end((function(t){e(r||t)}))}t._deserializeKey=t._deserializeValue=function(e){return e},a()},h.destroy=function(e,t,r){"function"===typeof t&&(r=t,t=p);var n=indexedDB.deleteDatabase(t+e);n.onsuccess=function(){r()},n.onerror=function(e){r(e)}}},9718:function(e,t,r){"use strict";var n=r(2534),a=r(6701).AbstractIterator,i=r(8972),s=r(2799),o=function(){};function u(e,t,r){if(a.call(this,e),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=r.keys,this._values=r.values,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,0!==this._limit){var n;try{n=i(r)}catch(s){return void(this._completed=!0)}this.createIterator(t,n,r.reverse)}else this._completed=!0}e.exports=u,n(u,a),u.prototype.createIterator=function(e,t,r){var n=this,a=this.db.db.transaction([e],"readonly");a.objectStore(e).openCursor(t,r?"prev":"next").onsuccess=function(e){var t=e.target.result;t&&n.onItem(t)},this._transaction=a,a.onabort=function(){n.onAbort(n._transaction.error||new Error("aborted by user"))},a.oncomplete=function(){n.onComplete()}},u.prototype.onItem=function(e){this._cache.push(e.key,e.value),(this._limit<=0||++this._count<this._limit)&&e.continue(),this.maybeNext()},u.prototype.onAbort=function(e){this._aborted=!0,this._error=e,this.maybeNext()},u.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},u.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},u.prototype._next=function(e){if(this._aborted){var t=this._error;this._error=null,this._nextTick(e,t)}else if(this._cache.length>0){var r=this._cache.shift(),n=this._cache.shift();r=this._keys&&void 0!==r?this._deserializeKey(r,this._keyAsBuffer):void 0,n=this._values&&void 0!==n?this._deserializeValue(n,this._valueAsBuffer):void 0,this._nextTick(e,null,r,n)}else this._completed?this._nextTick(e):this._callback=e},u.prototype._deserializeKey=s,u.prototype._deserializeValue=s,u.prototype._end=function(e){if(this._aborted||this._completed)return this._nextTick(e,this._error);this.onItem=o,this.onAbort=e,this.onComplete=e}},5746:function(e){"use strict";e.exports=function(e,t,r,n,a){if(0===n.limit)return e._nextTick(a);var i=e.db.transaction([t],"readwrite"),s=i.objectStore(t),o=0;i.oncomplete=function(){a()},i.onabort=function(){a(i.error||new Error("aborted by user"))};var u=s.openKeyCursor?"openKeyCursor":"openCursor",c=n.reverse?"prev":"next";s[u](r,c).onsuccess=function(e){var t=e.target.result;t&&(s.delete(t.key).onsuccess=function(){(n.limit<=0||++o<n.limit)&&t.continue()})}}},2799:function(e,t,r){"use strict";var n=r(9778).Buffer,a=function(){if(r.g.TextDecoder){var e=new TextDecoder("utf-8");return e.decode.bind(e)}return function(e){return s(e).toString()}}(),i=function(){if(r.g.TextDecoder){var e=new TextDecoder("utf-8");return e.decode.bind(e)}return function(e){return n.from(e).toString()}}();function s(e){var t=n.from(e.buffer);return e.byteLength===e.buffer.byteLength?t:t.slice(e.byteOffset,e.byteOffset+e.byteLength)}e.exports=function(e,t){return e instanceof Uint8Array?t?s(e):a(e):e instanceof ArrayBuffer?t?n.from(e):i(e):t?n.from(String(e)):String(e)}},8972:function(e,t,r){"use strict";var n=r(4580),a=Symbol("none");e.exports=function(e){var t=n.lowerBound(e,a),r=n.upperBound(e,a),i=n.lowerBoundExclusive(e,a),s=n.upperBoundExclusive(e,a);return t!==a&&r!==a?IDBKeyRange.bound(t,r,i,s):t!==a?IDBKeyRange.lowerBound(t,i):r!==a?IDBKeyRange.upperBound(r,s):null}},5824:function(e,t,r){"use strict";var n=r(9778).Buffer,a=function(){if(r.g.TextEncoder){var e=new TextEncoder("utf-8");return e.encode.bind(e)}return n.from}();e.exports=function(e,t){return t?n.isBuffer(e)?e:a(String(e)):String(e)}},1260:function(e,t,r){"use strict";var n=r(9778).Buffer;t.test=function(e){return function(t){try{return t.cmp(e,0),!0}catch(r){return!1}}},t.bufferKeys=t.test(n.alloc(0))},7603:function(e,t,r){"use strict";var n=r(9271),a=r(5711);e.exports=function(e){function t(t,i,s){return"function"===typeof t?s=t:"function"===typeof i&&(s=i),r(i)||(i=r(t)?t:{}),n(a(e(t,i),i),i,s)}function r(e){return"object"===typeof e&&null!==e}for(var i=function(){var r=o[s];"function"===typeof e[r]&&(t[r]=function(){e[r].apply(e,arguments)})},s=0,o=["destroy","repair"];s<o.length;s++)i();return t.errors=n.errors,t}},7987:function(e){"use strict";function t(e){return!!e&&Object.assign({},e)}e.exports=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.reduce((function(e,t){return Object.assign(e,t)}),{});return Object.assign(a,{bufferKeys:a.bufferKeys||!1,snapshots:a.snapshots||!1,permanence:a.permanence||!1,seek:a.seek||!1,clear:a.clear||!1,getMany:a.getMany||!1,keyIterator:a.keyIterator||!1,valueIterator:a.valueIterator||!1,iteratorNextv:a.iteratorNextv||!1,iteratorAll:a.iteratorAll||!1,status:a.status||!1,idempotentOpen:a.idempotentOpen||!1,passiveOpen:a.passiveOpen||!1,serialize:a.serialize||!1,createIfMissing:a.createIfMissing||!1,errorIfExists:a.errorIfExists||!1,deferredOpen:a.deferredOpen||!1,openCallback:a.openCallback||!1,promises:a.promises||!1,streams:a.streams||!1,encodings:t(a.encodings),events:t(a.events),additionalMethods:Object.assign({},a.additionalMethods)})}},2164:function(e,t,r){e.exports=r(7603)(r(9521))},3314:function(e,t,r){"use strict";var n=r(2122).default,a=r(8520).WriteError,i=r(5240),s=r(8439).R,o=r(8439).F;function u(e){this.db=e,this.batch=e.db.batch(),this.ops=[],this.length=0}u.prototype.put=function(e,t,r){try{this.batch.put(e,t,r)}catch(i){throw new a(i)}return this.ops.push(n(n({},r),{},{type:"put",key:e,value:t})),this.length++,this},u.prototype.del=function(e,t){try{this.batch.del(e,t)}catch(r){throw new a(r)}return this.ops.push(n(n({},t),{},{type:"del",key:e})),this.length++,this},u.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new a(e)}return this.ops=[],this.length=0,this},u.prototype.write=function(e,t){var r=this.db,n=this.ops;t=s(e,t),t=i.fromCallback(t),e=o(e);try{this.batch.write(e,(function(e){if(e)return t(new a(e));r.emit("batch",n),t()}))}catch(u){throw new a(u)}return t.promise},e.exports=u},8439:function(e,t){"use strict";t.R=function(e,t){return"function"===typeof e?e:t},t.F=function(e){return"object"===typeof e&&null!==e?e:{}}},9271:function(e,t,r){"use strict";var n=r(7465).EventEmitter,a=r(9639).inherits,i=r(5479),s=r(1057),o=r(3314),u=r(8520),c=r(7987),l=r(5240),f=r(8439).R,p=r(8439).F,h=r(742),d=u.WriteError,v=u.ReadError,y=u.NotFoundError,g=u.OpenError,m=u.InitializationError;function b(e,t,r){var a,i=this;if(!(this instanceof b))return new b(e,t,r);if(n.call(this),this.setMaxListeners(1/0),"function"===typeof t&&(r=t,t={}),t=t||{},!e||"object"!==typeof e){if(a=new m("First argument must be an abstract-leveldown compliant store"),"function"===typeof r)return h(r,a);throw a}if("string"!==typeof e.status)throw new Error(".status required, old abstract-leveldown");this.options=p(t),this._db=e,this.db=null,this.open(r||function(e){e&&i.emit("error",e)}),this.supports=c(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(var s=function(){var e=u[o];if(null!=i[e])return"continue";i[e]=function(){var t;return(t=this.db)[e].apply(t,arguments)}},o=0,u=Object.keys(this.supports.additionalMethods);o<u.length;o++)s()}function w(e,t){return!e.isOperational()&&(h(t,new v("Database is not open")),!0)}b.prototype.emit=n.prototype.emit,b.prototype.once=n.prototype.once,a(b,n),Object.defineProperty(b.prototype,"status",{enumerable:!0,get:function(){return this.db.status}}),b.prototype.isOperational=function(){return"open"===this.db.status||"opening"===this.db.status},b.prototype.open=function(e,t){var r=this;return"function"===typeof e&&(t=e,e=null),t=l.fromCallback(t),e||(e=this.options),this.db&&this.isOpen()?(h(t,null,this),t.promise):this.db&&this._isOpening()?(this.once("open",(function(){t(null,r)})),t.promise):(this.db=new i(this._db),this.emit("opening"),this.db.open(e,(function(e){if(e)return t(new g(e));r.db=r._db,t(null,r),r.emit("open"),r.emit("ready")})),t.promise)},b.prototype.close=function(e){var t=this;return e=l.fromCallback(e),this.isOpen()?(this.db.close((function(r){t.emit("closed");for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];e.apply(void 0,[r].concat(a))})),this.emit("closing")):this.isClosed()?h(e):"closing"===this.db.status?this.once("closed",e):this._isOpening()&&this.once("open",(function(){t.close(e)})),e.promise},b.prototype.isOpen=function(){return"open"===this.db.status},b.prototype._isOpening=function(){return"opening"===this.db.status},b.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},b.prototype.get=function(e,t,r){return r=f(t,r),w(this,r=l.fromCallback(r))||(t=p(t),this.db.get(e,t,(function(t,n){if(t)return t=/notfound/i.test(t)||t.notFound?new y("Key not found in database ["+e+"]",t):new v(t),r(t);r(null,n)}))),r.promise},b.prototype.getMany=function(e,t,r){return this.db.getMany(e,t,r)},b.prototype.put=function(e,t,r,n){var a=this;return n=f(r,n),w(this,n=l.fromCallback(n))||(r=p(r),this.db.put(e,t,r,(function(r){if(r)return n(new d(r));a.emit("put",e,t),n()}))),n.promise},b.prototype.del=function(e,t,r){var n=this;return r=f(t,r),w(this,r=l.fromCallback(r))||(t=p(t),this.db.del(e,t,(function(t){if(t)return r(new d(t));n.emit("del",e),r()}))),r.promise},b.prototype.batch=function(e,t,r){var n=this;return arguments.length?(r="function"===typeof e?e:f(t,r),w(this,r=l.fromCallback(r))||(t=p(t),this.db.batch(e,t,(function(t){if(t)return r(new d(t));n.emit("batch",e),r()}))),r.promise):new o(this)},b.prototype.iterator=function(e){return this.db.iterator(e)},b.prototype.clear=function(e,t){var r=this;return t=f(e,t),e=p(e),w(this,t=l.fromCallback(t))||this.db.clear(e,(function(n){if(n)return t(new d(n));r.emit("clear",e),t()})),t.promise},b.prototype.readStream=b.prototype.createReadStream=function(e){return"number"!==typeof(e=Object.assign({keys:!0,values:!0},e)).limit&&(e.limit=-1),new s(this.db.iterator(e),e)},b.prototype.keyStream=b.prototype.createKeyStream=function(e){return this.createReadStream(Object.assign({},e,{keys:!0,values:!1}))},b.prototype.valueStream=b.prototype.createValueStream=function(e){return this.createReadStream(Object.assign({},e,{keys:!1,values:!0}))},b.prototype.toString=function(){return"LevelUP"},b.prototype.type="levelup",b.prototype._nextTick=h,b.errors=u,e.exports=b},742:function(e,t,r){"use strict";var n=r(4183);e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];0===r.length?n(e):n((function(){return e.apply(void 0,r)}))}},4580:function(e,t){function r(e){return void 0!==e&&""!==e}function n(e,t){return Object.hasOwnProperty.call(e,t)}function a(e,t){return Object.hasOwnProperty.call(e,t)&&t}t.compare=function(e,t){if(Buffer.isBuffer(e)){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var a=e[n]-t[n];if(a)return a}return e.length-t.length}return e<t?-1:e>t?1:0};var i=t.lowerBoundKey=function(e){return a(e,"gt")||a(e,"gte")||a(e,"min")||(e.reverse?a(e,"end"):a(e,"start"))||void 0},s=t.lowerBound=function(e,t){var r=i(e);return r?e[r]:t},o=t.lowerBoundInclusive=function(e){return!n(e,"gt")},u=t.upperBoundInclusive=function(e){return!n(e,"lt")},c=t.lowerBoundExclusive=function(e){return!o(e)},l=t.upperBoundExclusive=function(e){return!u(e)},f=t.upperBoundKey=function(e){return a(e,"lt")||a(e,"lte")||a(e,"max")||(e.reverse?a(e,"start"):a(e,"end"))||void 0},p=t.upperBound=function(e,t){var r=f(e);return r?e[r]:t};function h(e){return e}t.start=function(e,t){return e.reverse?p(e,t):s(e,t)},t.end=function(e,t){return e.reverse?s(e,t):p(e,t)},t.startInclusive=function(e){return e.reverse?u(e):o(e)},t.endInclusive=function(e){return e.reverse?o(e):u(e)},t.toLtgt=function(e,r,a,i,s){r=r||{},a=a||h;var o=arguments.length>3,u=t.lowerBoundKey(e),c=t.upperBoundKey(e);return u?"gt"===u?r.gt=a(e.gt,!1):r.gte=a(e[u],!1):o&&(r.gte=a(i,!1)),c?"lt"===c?r.lt=a(e.lt,!0):r.lte=a(e[c],!0):o&&(r.lte=a(s,!0)),null!=e.reverse&&(r.reverse=!!e.reverse),n(r,"max")&&delete r.max,n(r,"min")&&delete r.min,n(r,"start")&&delete r.start,n(r,"end")&&delete r.end,r},t.contains=function(e,n,a){a=a||t.compare;var i=s(e);if(r(i)&&((o=a(n,i))<0||0===o&&c(e)))return!1;var o,u=p(e);if(r(u)&&((o=a(n,u))>0||0===o&&l(e)))return!1;return!0},t.filter=function(e,r){return function(n){return t.contains(e,n,r)}}},8322:function(e,t,r){"use strict";var n=r(8719).Multiaddr,a=Z("dns4"),i=Z("dns6"),s=Z("dnsaddr"),o=C(Z("dns"),s,a,i),u=C(Z("ip4"),Z("ip6")),c=C(I(u,Z("tcp")),I(o,Z("tcp"))),l=I(u,Z("udp")),f=I(l,Z("utp")),p=I(l,Z("quic")),h=C(I(c,Z("ws")),I(o,Z("ws"))),d=C(I(c,Z("wss")),I(o,Z("wss"))),v=C(I(c,Z("http")),I(u,Z("http")),I(o,Z("http"))),y=C(I(c,Z("https")),I(u,Z("https")),I(o,Z("https"))),g=C(I(h,Z("p2p-webrtc-star"),Z("p2p")),I(d,Z("p2p-webrtc-star"),Z("p2p")),I(h,Z("p2p-webrtc-star")),I(d,Z("p2p-webrtc-star"))),m=C(I(h,Z("p2p-websocket-star"),Z("p2p")),I(d,Z("p2p-websocket-star"),Z("p2p")),I(h,Z("p2p-websocket-star")),I(d,Z("p2p-websocket-star"))),b=C(I(v,Z("p2p-webrtc-direct"),Z("p2p")),I(y,Z("p2p-webrtc-direct"),Z("p2p")),I(v,Z("p2p-webrtc-direct")),I(y,Z("p2p-webrtc-direct"))),w=C(h,d,v,y,g,b,c,f,p,o),k=C(I(w,Z("p2p-stardust"),Z("p2p")),I(w,Z("p2p-stardust"))),x=C(I(w,Z("p2p")),g,b,Z("p2p")),_=C(I(x,Z("p2p-circuit"),x),I(x,Z("p2p-circuit")),I(Z("p2p-circuit"),x),I(w,Z("p2p-circuit")),I(Z("p2p-circuit"),w),Z("p2p-circuit")),E=function e(){return C(I(_,e),_)}(),S=C(I(E,x,E),I(x,E),I(E,x),E,x);function A(e){return function(t){if(!n.isMultiaddr(t))try{t=new n(t)}catch(a){return!1}var r=e(t.protoNames());return null!==r&&(!0===r||!1===r?r:0===r.length)}}function I(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){if(e.length<t.length)return null;var r=e;return t.some((function(t){return r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:A(n),partialMatch:n}}function C(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){var r=null;return t.some((function(t){var n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return!!n&&(r=n,!0)})),r}var a={toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:A(n),partialMatch:n};return a}function Z(e){var t=e;return{toString:function(){return t},matches:function(e){var r;if("string"===typeof e||e instanceof Uint8Array)try{r=new n(e)}catch(i){return!1}else r=e;var a=r.protoNames();return 1===a.length&&a[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}e.exports={DNS:o,DNS4:a,DNS6:i,DNSADDR:s,IP:u,TCP:c,UDP:l,QUIC:p,UTP:f,HTTP:v,HTTPS:y,WebSockets:h,WebSocketsSecure:d,WebSocketStar:m,WebRTCStar:g,WebRTCDirect:b,Reliable:w,Stardust:k,Circuit:E,P2P:S,IPFS:S}},9842:function(e,t,r){"use strict";var n=r(4704).default,a=r(887),i=Object.prototype.hasOwnProperty,s=Object.propertyIsEnumerable,o=function(e,t,r){return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})},u=this,c={concatArrays:!1,ignoreUndefined:!1},l=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){var a,o=Object.getOwnPropertySymbols(e),u=n(o);try{for(u.s();!(a=u.n()).done;){var c=a.value;s.call(e,c)&&t.push(c)}}catch(l){u.e(l)}finally{u.f()}}return t};function f(e){return Array.isArray(e)?function(e){var t=e.slice(0,0);return l(e).forEach((function(r){o(t,r,f(e[r]))})),t}(e):a(e)?function(e){var t=null===Object.getPrototypeOf(e)?Object.create(null):{};return l(e).forEach((function(r){o(t,r,f(e[r]))})),t}(e):e}var p=function(e,t,r,n){return r.forEach((function(r){"undefined"===typeof t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?o(e,r,h(e[r],t[r],n)):o(e,r,f(t[r])))})),e};function h(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?function(e,t,r){var n=e.slice(0,0),a=0;return[e,t].forEach((function(t){for(var s=[],u=0;u<t.length;u++)i.call(t,u)&&(s.push(String(u)),o(n,a++,t===e?t[u]:f(t[u])));n=p(n,t,l(t).filter((function(e){return!s.includes(e)})),r)})),n}(e,t,r):a(t)&&a(e)?p(e,t,l(t),r):f(t)}e.exports=function(){for(var e=h(f(c),this!==u&&this||{},c),t={_:{}},r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var l=o[s];if(void 0!==l){if(!a(l))throw new TypeError("`"+l+"` is not an Option Object");t=h(t,{_:l},e)}}return t._}},8193:function(e){var t=1e3,r=60*t,n=60*r,a=24*n,i=7*a,s=365.25*a;function o(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,u){u=u||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!o)return;var u=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*i;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&isFinite(e))return u.long?function(e){var i=Math.abs(e);if(i>=a)return o(e,i,a,"day");if(i>=n)return o(e,i,n,"hour");if(i>=r)return o(e,i,r,"minute");if(i>=t)return o(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=a)return Math.round(e/a)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},3058:function(e,t,r){"use strict";var n=r(3516),a=r(23),i=r(4561),s=r(2110).concat,o=r(2051).toString;function u(e){var t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(var n=0;n<r.length;n++){var i=r[n],s=a(i);if(0!==s.size){if(++n>=r.length)throw b("invalid address: "+e);if(s.path){t.push([i,m(r.slice(n).join("/"))]);break}t.push([i,r[n]])}else t.push([i])}return t}function c(e){var t=[];return e.map((function(e){var r=w(e);return t.push(r.name),e.length>1&&t.push(e[1]),null})),m(t.join("/"))}function l(e){return e.map((function(e){Array.isArray(e)||(e=[e]);var t=w(e);return e.length>1?[t.code,n.toBytes(t.code,e[1])]:[t.code]}))}function f(e){return e.map((function(e){var t=w(e);return e[1]?[t.code,n.toString(t.code,e[1])]:[t.code]}))}function p(e){return y(s(e.map((function(e){var t=w(e),r=Uint8Array.from(i.encode(t.code));return e.length>1&&(r=s([r,e[1]])),r}))))}function h(e,t){return e.size>0?e.size/8:0===e.size?0:i.decode(t)+i.decode.bytes}function d(e){for(var t=[],r=0;r<e.length;){var n=i.decode(e,r),s=i.decode.bytes,u=h(a(n),e.slice(r+s));if(0!==u){var c=e.slice(r+s,r+s+u);if((r+=u+s)>e.length)throw b("Invalid address Uint8Array: "+o(e,"base16"));t.push([n,c])}else t.push([n]),r+=s}return t}function v(e){return p(l(u(e=m(e))))}function y(e){var t=g(e);if(t)throw t;return Uint8Array.from(e)}function g(e){try{d(e)}catch(t){return t}}function m(e){return"/"+e.trim().split("/").filter((function(e){return e})).join("/")}function b(e){return new Error("Error parsing address: "+e)}function w(e){return a(e[0])}e.exports={stringToStringTuples:u,stringTuplesToString:c,tuplesToStringTuples:f,stringTuplesToTuples:l,bytesToTuples:d,tuplesToBytes:p,bytesToString:function(e){return c(f(d(e)))},stringToBytes:v,fromString:function(e){return v(e)},fromBytes:y,validateBytes:g,isValidBytes:function(e){return void 0===g(e)},cleanPath:m,ParseError:b,protoFromTuple:w,sizeForAddr:h}},3516:function(e,t,r){"use strict";var n=r(9745),a=r(23),i=r(6629).CID,s=r(1128).base32,o=r(6898).base58btc,u=r(8315),c=r(4561),l=r(2051).toString,f=r(6765).fromString,p=r(2110).concat;function h(e,t){return t instanceof Uint8Array?h.toString(e,t):h.toBytes(e,t)}function d(e){if(!n.isIP(e))throw new Error("invalid ip address");return n.toBytes(e)}function v(e){var t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function y(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function g(e){var t=e.slice(0,e.length-2),r=e.slice(e.length-2);return l(t,"base32")+":"+y(r)}e.exports=h,h.toString=function(e,t){switch(a(e).code){case 4:case 41:return function(e){var t=n.toString(e);if(!t||!n.isIP(t))throw new Error("invalid ip address");return t}(t);case 6:case 273:case 33:case 132:return y(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function(e){var t=c.decode(e);if((e=e.slice(c.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return l(e)}(t);case 421:return function(e){var t=c.decode(e),r=e.slice(c.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return l(r,"base58btc")}(t);case 444:case 445:return g(t);default:return l(t,"base16")}},h.toBytes=function(e,t){switch(a(e).code){case 4:case 41:return d(t);case 6:case 273:case 33:case 132:return v(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return function(e){var t=f(e),r=Uint8Array.from(c.encode(t.length));return p([r,t],r.length+t.length)}(t);case 421:return function(e){var t;t="Q"===e[0]||"1"===e[0]?u.decode(o.decode("z".concat(e))).bytes:i.parse(e).multihash.bytes;var r=Uint8Array.from(c.encode(t.length));return p([r,t],r.length+t.length)}(t);case 444:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(16!==t[0].length)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion address.");var r=s.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=v(n);return p([r,a],r.length+a.length)}(t);case 445:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(56!==t[0].length)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion3 address.");var r=s.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=v(n);return p([r,a],r.length+a.length)}(t);default:return f(t,"base16")}}},8719:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(6690).default,s=r(9728).default,o=r(3058),u=r(23),c=r(4561),l=r(6629).CID,f=r(6898).base58btc,p=r(7963),h=Symbol.for("nodejs.util.inspect.custom"),d=r(2051).toString,v=r(8779).equals,y=new Map,g=Symbol.for("@multiformats/js-multiaddr/multiaddr"),m=function(){function e(t){if(i(this,e),null==t&&(t=""),Object.defineProperty(this,g,{value:!0}),t instanceof Uint8Array)this.bytes=o.fromBytes(t);else if("string"===typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error('multiaddr "'.concat(t,'" must start with a "/"'));this.bytes=o.fromString(t)}else{if(!e.isMultiaddr(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=o.fromBytes(t.bytes)}}return s(e,[{key:"toString",value:function(){return o.bytesToString(this.bytes)}},{key:"toJSON",value:function(){return this.toString()}},{key:"toOptions",value:function(){var e={},t=this.toString().split("/");return e.family="ip4"===t[1]?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}},{key:"protos",value:function(){return this.protoCodes().map((function(e){return Object.assign({},u(e))}))}},{key:"protoCodes",value:function(){for(var e=[],t=this.bytes,r=0;r<t.length;){var n=c.decode(t,r),a=c.decode.bytes,i=u(n);r+=o.sizeForAddr(i,t.slice(r+a))+a,e.push(n)}return e}},{key:"protoNames",value:function(){return this.protos().map((function(e){return e.name}))}},{key:"tuples",value:function(){return o.bytesToTuples(this.bytes)}},{key:"stringTuples",value:function(){var e=o.bytesToTuples(this.bytes);return o.tuplesToStringTuples(e)}},{key:"encapsulate",value:function(t){return t=new e(t),new e(this.toString()+t.toString())}},{key:"decapsulate",value:function(t){var r=t.toString(),n=this.toString(),a=n.lastIndexOf(r);if(a<0)throw new Error("Address "+this+" does not contain subaddress: "+t);return new e(n.slice(0,a))}},{key:"decapsulateCode",value:function(t){for(var r=this.tuples(),n=r.length-1;n>=0;n--)if(r[n][0]===t)return new e(o.tuplesToBytes(r.slice(0,n)));return this}},{key:"getPeerId",value:function(){try{var e=this.stringTuples().filter((function(e){return e[0]===u.names.ipfs.code})),t=e.pop();if(t&&t[1]){var r=t[1];return"Q"===r[0]||"1"===r[0]?d(f.decode("z".concat(r)),"base58btc"):d(l.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}},{key:"getPath",value:function(){var e=null;try{(e=this.stringTuples().filter((function(e){return!!u(e[0]).path}))[0][1])||(e=null)}catch(t){e=null}return e}},{key:"equals",value:function(e){return v(this.bytes,e.bytes)}},{key:"resolve",value:function(){var t=a(n().mark((function t(){var r,a,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.protos().find((function(e){return e.resolvable}))){t.next=3;break}return t.abrupt("return",[this]);case 3:if(a=y.get(r.name)){t.next=6;break}throw p(new Error("no available resolver for ".concat(r.name)),"ERR_NO_AVAILABLE_RESOLVER");case 6:return t.next=8,a(this);case 8:return i=t.sent,t.abrupt("return",i.map((function(t){return new e(t)})));case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"nodeAddress",value:function(){var e=this.protoCodes(),t=this.protoNames(),r=this.toString().split("/").slice(1);if(r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==e[0]&&41!==e[0]&&54!==e[0]&&55!==e[0])throw new Error("no protocol with name: \"'".concat(t[0],'\'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".'));if("tcp"!==r[2]&&"udp"!==r[2])throw new Error("no protocol with name: \"'".concat(t[1],'\'". Must have a valid transport protocol: "{tcp, udp}".'));return{family:41===e[0]||55===e[0]?6:4,address:r[1],port:parseInt(r[3])}}},{key:"isThinWaistAddress",value:function(e){var t=(e||this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}},{key:h,value:function(){return"<Multiaddr "+d(this.bytes,"base16")+" - "+o.bytesToString(this.bytes)+">"}},{key:"inspect",value:function(){return"<Multiaddr "+d(this.bytes,"base16")+" - "+o.bytesToString(this.bytes)+">"}}],[{key:"fromNodeAddress",value:function(t,r){if(!t)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");var n;switch(t.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error("Invalid addr family. Got '".concat(t.family,"' instead of 4 or 6"))}return new e("/"+[n,t.address,r,t.port].join("/"))}},{key:"isName",value:function(t){return!!e.isMultiaddr(t)&&t.protos().some((function(e){return e.resolvable}))}},{key:"isMultiaddr",value:function(t){return t instanceof e||Boolean(t&&t[g])}}]),e}();m.protocols=u,m.resolvers=y,e.exports={Multiaddr:m,multiaddr:function(e){return new m(e)},protocols:u,resolvers:y}},9745:function(e,t,r){"use strict";var n=r(2795),a=r(2051).toString,i=n,s=n.v4,o=n.v6;e.exports={isIP:i,isV4:s,isV6:o,toBytes:function e(t,r,n){var i;if(n=~~n,s(t))i=r||new Uint8Array(n+4),t.split(/\./g).map((function(e){i[n++]=255&parseInt(e,10)}));else if(o(t)){var u,c=t.split(":",8);for(u=0;u<c.length;u++){var l=void 0;s(c[u])&&(l=e(c[u]),c[u]=a(l.slice(0,2),"base16")),l&&++u<8&&c.splice(u,0,a(l.slice(2,4),"base16"))}if(""===c[0])for(;c.length<8;)c.unshift("0");else if(""===c[c.length-1])for(;c.length<8;)c.push("0");else if(c.length<8){for(u=0;u<c.length&&""!==c[u];u++);var f=[u,"1"];for(u=9-c.length;u>0;u--)f.push("0");c.splice.apply(c,f)}for(i=r||new Uint8Array(n+16),u=0;u<c.length;u++){var p=parseInt(c[u],16);i[n++]=p>>8&255,i[n++]=255&p}}if(!i)throw Error("Invalid ip address: "+t);return i},toString:function(e,t,r){t=~~t,r=r||e.length-t;var n,a=[],i=new DataView(e.buffer);if(4===r){for(var s=0;s<r;s++)a.push(e[t+s]);n=a.join(".")}else if(16===r){for(var o=0;o<r;o+=2)a.push(i.getUint16(t+o).toString(16));n=(n=(n=a.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return n}}},23:function(e){"use strict";function t(e){if("number"===typeof e){if(t.codes[e])return t.codes[e];throw new Error("no protocol with code: "+e)}if("string"===typeof e){if(t.names[e])return t.names[e];throw new Error("no protocol with name: "+e)}throw new Error("invalid protocol id type: "+e)}var r=-1;function n(e,t,r,n,a){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(a)}}t.lengthPrefixedVarSize=r,t.V=r,t.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,r,"ip6zone"],[53,r,"dns","resolvable"],[54,r,"dns4","resolvable"],[55,r,"dns6","resolvable"],[56,r,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,r,"unix",!1,"path"],[421,r,"ipfs"],[421,r,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,r,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,r,"memory"]],t.names={},t.codes={},t.table.map((function(e){var r=n.apply(null,e);return t.codes[r.code]=r,t.names[r.name]=r,null})),t.object=n,e.exports=t},2165:function(e,t,r){e.exports=r(407)},407:function(e,t){!function(r,n){"use strict";var a={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function s(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function o(e,t){return e<<t|e>>>32-t}function u(e){return e=s(e^=e>>>16,2246822507),e=s(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function p(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function h(e,t){return[e[0]^t[0],e[1]^t[1]]}function d(e){return e=h(e,[0,e[0]>>>1]),e=h(e=l(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=h(e=l(e,[3301882366,444984403]),[0,e[0]>>>1])}a.x86.hash32=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%4,c=e.length-r,l=t,f=0,p=3432918353,h=461845907,d=0;d<c;d+=4)f=s(f=e[d]|e[d+1]<<8|e[d+2]<<16|e[d+3]<<24,p),f=s(f=o(f,15),h),l=s(l=o(l^=f,13),5)+3864292196;switch(f=0,r){case 3:f^=e[d+2]<<16;case 2:f^=e[d+1]<<8;case 1:f=s(f^=e[d],p),l^=f=s(f=o(f,15),h)}return(l=u(l^=e.length))>>>0},a.x86.hash128=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%16,c=e.length-r,l=t,f=t,p=t,h=t,d=0,v=0,y=0,g=0,m=597399067,b=2869860233,w=951274213,k=2716044179,x=0;x<c;x+=16)d=e[x]|e[x+1]<<8|e[x+2]<<16|e[x+3]<<24,v=e[x+4]|e[x+5]<<8|e[x+6]<<16|e[x+7]<<24,y=e[x+8]|e[x+9]<<8|e[x+10]<<16|e[x+11]<<24,g=e[x+12]|e[x+13]<<8|e[x+14]<<16|e[x+15]<<24,d=o(d=s(d,m),15),l=o(l^=d=s(d,b),19),l=s(l+=f,5)+1444728091,v=o(v=s(v,b),16),f=o(f^=v=s(v,w),17),f=s(f+=p,5)+197830471,y=o(y=s(y,w),17),p=o(p^=y=s(y,k),15),p=s(p+=h,5)+2530024501,g=o(g=s(g,k),18),h=o(h^=g=s(g,m),13),h=s(h+=l,5)+850148119;switch(d=0,v=0,y=0,g=0,r){case 15:g^=e[x+14]<<16;case 14:g^=e[x+13]<<8;case 13:g=s(g^=e[x+12],k),h^=g=s(g=o(g,18),m);case 12:y^=e[x+11]<<24;case 11:y^=e[x+10]<<16;case 10:y^=e[x+9]<<8;case 9:y=s(y^=e[x+8],w),p^=y=s(y=o(y,17),k);case 8:v^=e[x+7]<<24;case 7:v^=e[x+6]<<16;case 6:v^=e[x+5]<<8;case 5:v=s(v^=e[x+4],b),f^=v=s(v=o(v,16),w);case 4:d^=e[x+3]<<24;case 3:d^=e[x+2]<<16;case 2:d^=e[x+1]<<8;case 1:d=s(d^=e[x],m),l^=d=s(d=o(d,15),b)}return l^=e.length,l+=f^=e.length,l+=p^=e.length,f+=l+=h^=e.length,p+=l,h+=l,l=u(l),l+=f=u(f),l+=p=u(p),f+=l+=h=u(h),p+=l,h+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)},a.x64.hash128=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%16,s=e.length-r,o=[0,t],u=[0,t],v=[0,0],y=[0,0],g=[2277735313,289559509],m=[1291169091,658871167],b=0;b<s;b+=16)v=[e[b+4]|e[b+5]<<8|e[b+6]<<16|e[b+7]<<24,e[b]|e[b+1]<<8|e[b+2]<<16|e[b+3]<<24],y=[e[b+12]|e[b+13]<<8|e[b+14]<<16|e[b+15]<<24,e[b+8]|e[b+9]<<8|e[b+10]<<16|e[b+11]<<24],v=f(v=l(v,g),31),o=c(o=f(o=h(o,v=l(v,m)),27),u),o=c(l(o,[0,5]),[0,1390208809]),y=f(y=l(y,m),33),u=c(u=f(u=h(u,y=l(y,g)),31),o),u=c(l(u,[0,5]),[0,944331445]);switch(v=[0,0],y=[0,0],r){case 15:y=h(y,p([0,e[b+14]],48));case 14:y=h(y,p([0,e[b+13]],40));case 13:y=h(y,p([0,e[b+12]],32));case 12:y=h(y,p([0,e[b+11]],24));case 11:y=h(y,p([0,e[b+10]],16));case 10:y=h(y,p([0,e[b+9]],8));case 9:y=l(y=h(y,[0,e[b+8]]),m),u=h(u,y=l(y=f(y,33),g));case 8:v=h(v,p([0,e[b+7]],56));case 7:v=h(v,p([0,e[b+6]],48));case 6:v=h(v,p([0,e[b+5]],40));case 5:v=h(v,p([0,e[b+4]],32));case 4:v=h(v,p([0,e[b+3]],24));case 3:v=h(v,p([0,e[b+2]],16));case 2:v=h(v,p([0,e[b+1]],8));case 1:v=l(v=h(v,[0,e[b]]),g),o=h(o,v=l(v=f(v,31),m))}return o=c(o=h(o,[0,e.length]),u=h(u,[0,e.length])),u=c(u,o),o=c(o=d(o),u=d(u)),u=c(u,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=a),t.murmurHash3=a}()},486:function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}e.exports=function(e){var r=void 0,n=void 0;function a(e){if(!(e instanceof Object))throw new Error('Target "'+e+'" is not an object');n=e}function i(e){Object.keys(e).forEach((function(t){var r=e[t];if("function"!==typeof r)throw new Error('Trap "'+t+": "+r+'" is not a function');if(!Reflect[t])throw new Error('Trap "'+t+": "+r+'" is not a valid trap')})),r=e}a((function(){})),e&&a(e),i(Reflect);var s=new Proxy({},{get:function(e,a){return function(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return r[a].apply(null,[n].concat(t(i.slice(1))))}}});return{setTarget:a,setHandler:i,getTarget:function(){return n},getHandler:function(){return r},proxy:new Proxy(n,s)}}},1900:function(e,t,r){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:r(5359).default,Headers:r(5359).Headers,Request:r(5359).Request,Response:r(5359).Response}},7922:function(e,t){(function(){var e,r,n,a,i,s,o,u;u=function(e){return[(e&255<<24)>>>24,(e&255<<16)>>>16,(65280&e)>>>8,255&e].join(".")},o=function(e){var t,n,a,i,s,o;for(t=[],a=i=0;i<=3&&0!==e.length;a=++i){if(a>0){if("."!==e[0])throw new Error("Invalid IP");e=e.substring(1)}s=(o=r(e))[0],n=o[1],e=e.substring(n),t.push(s)}if(0!==e.length)throw new Error("Invalid IP");switch(t.length){case 1:if(t[0]>4294967295)throw new Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>16777215)throw new Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw new Error("Invalid IP")}},a=(n=function(e){return e.charCodeAt(0)})("0"),s=n("a"),i=n("A"),r=function(e){var t,r,o,u,c;for(u=0,t=10,r="9",o=0,e.length>1&&"0"===e[o]&&("x"===e[o+1]||"X"===e[o+1]?(o+=2,t=16):"0"<=e[o+1]&&e[o+1]<="9"&&(o++,t=8,r="7")),c=o;o<e.length;){if("0"<=e[o]&&e[o]<=r)u=u*t+(n(e[o])-a)>>>0;else{if(16!==t)break;if("a"<=e[o]&&e[o]<="f")u=u*t+(10+n(e[o])-s)>>>0;else{if(!("A"<=e[o]&&e[o]<="F"))break;u=u*t+(10+n(e[o])-i)>>>0}}if(u>4294967295)throw new Error("too large");o++}if(o===c)throw new Error("empty octet");return[u,o]},e=function(){function e(e,t){var r,n,a;if("string"!==typeof e)throw new Error("Missing `net' parameter");if(t||(a=e.split("/",2),e=a[0],t=a[1]),t||(t=32),"string"===typeof t&&t.indexOf(".")>-1){try{this.maskLong=o(t)}catch(i){throw i,new Error("Invalid mask: "+t)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!t&&0!==t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(o(e)&this.maskLong)>>>0}catch(i){throw i,new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=u(this.netLong),this.mask=u(this.maskLong),this.hostmask=u(~this.maskLong),this.first=this.bitmask<=30?u(this.netLong+1):this.base,this.last=this.bitmask<=30?u(this.netLong+this.size-2):u(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?u(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"===typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(o(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(u(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,r,n;for(n=o(this.first),r=o(this.last),t=0;n<=r;)e(u(n),n,t),t++,n++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=o,t.long2ip=u,t.Netmask=e}).call(this)},5359:function(e,t){"use strict";var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},8605:function(e,t,r){var n=r(392);function a(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.aes.Algorithm(e,t)}))}r(3397),r(4533),r(3877),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!1,mode:n});return a.start(t),a},n.aes.createEncryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!0,mode:n});return a.start(t),a},n.aes.createDecryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){l||f();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return h(r._w,e,t,!1)},decrypt:function(e,t){return h(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var a=0;a<t.length;++a)r.putByte(t[a])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var i=t.length();if(16===i||24===i||32===i){i>>>=2;for(a=0;a<i;++a)r.push(t.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,o=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=p(r,e.decrypt&&!o),this._init=!0}},n.aes._expandKey=function(e,t){return l||f(),p(e,t)},n.aes._updateBlock=h,a("AES-ECB",n.cipher.modes.ecb),a("AES-CBC",n.cipher.modes.cbc),a("AES-CFB",n.cipher.modes.cfb),a("AES-OFB",n.cipher.modes.ofb),a("AES-CTR",n.cipher.modes.ctr),a("AES-GCM",n.cipher.modes.gcm);var i,s,o,u,c,l=!1;function f(){l=!0,o=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;i=new Array(256),s=new Array(256),u=new Array(4),c=new Array(4);for(t=0;t<4;++t)u[t]=new Array(256),c[t]=new Array(256);var r,n,a,f,p,h,d,v=0,y=0;for(t=0;t<256;++t){f=(f=y^y<<1^y<<2^y<<3^y<<4)>>8^255&f^99,i[v]=f,s[f]=v,h=(p=e[f])<<24^f<<16^f<<8^f^p,d=((r=e[v])^(n=e[r])^(a=e[n]))<<24^(v^a)<<16^(v^n^a)<<8^v^r^a;for(var g=0;g<4;++g)u[g][v]=h,c[g][f]=d,h=h<<24|h>>>8,d=d<<24|d>>>8;0===v?v=y=1:(v=r^e[e[e[r^a]]],y^=e[e[y]])}}function p(e,t){for(var r,n=e.slice(0),a=1,s=n.length,u=4*(s+6+1),l=s;l<u;++l)r=n[l-1],l%s===0?(r=i[r>>>16&255]<<24^i[r>>>8&255]<<16^i[255&r]<<8^i[r>>>24]^o[a]<<24,a++):s>6&&l%s===4&&(r=i[r>>>24]<<24^i[r>>>16&255]<<16^i[r>>>8&255]<<8^i[255&r]),n[l]=n[l-s]^r;if(t){for(var f,p=c[0],h=c[1],d=c[2],v=c[3],y=n.slice(0),g=(l=0,(u=n.length)-4);l<u;l+=4,g-=4)if(0===l||l===u-4)y[l]=n[g],y[l+1]=n[g+3],y[l+2]=n[g+2],y[l+3]=n[g+1];else for(var m=0;m<4;++m)f=n[g+m],y[l+(3&-m)]=p[i[f>>>24]]^h[i[f>>>16&255]]^d[i[f>>>8&255]]^v[i[255&f]];n=y}return n}function h(e,t,r,n){var a,o,l,f,p,h,d,v,y,g,m,b,w=e.length/4-1;n?(a=c[0],o=c[1],l=c[2],f=c[3],p=s):(a=u[0],o=u[1],l=u[2],f=u[3],p=i),h=t[0]^e[0],d=t[n?3:1]^e[1],v=t[2]^e[2],y=t[n?1:3]^e[3];for(var k=3,x=1;x<w;++x)g=a[h>>>24]^o[d>>>16&255]^l[v>>>8&255]^f[255&y]^e[++k],m=a[d>>>24]^o[v>>>16&255]^l[y>>>8&255]^f[255&h]^e[++k],b=a[v>>>24]^o[y>>>16&255]^l[h>>>8&255]^f[255&d]^e[++k],y=a[y>>>24]^o[h>>>16&255]^l[d>>>8&255]^f[255&v]^e[++k],h=g,d=m,v=b;r[0]=p[h>>>24]<<24^p[d>>>16&255]<<16^p[v>>>8&255]<<8^p[255&y]^e[++k],r[n?3:1]=p[d>>>24]<<24^p[v>>>16&255]<<16^p[y>>>8&255]<<8^p[255&h]^e[++k],r[2]=p[v>>>24]<<24^p[y>>>16&255]<<16^p[h>>>8&255]<<8^p[255&d]^e[++k],r[n?1:3]=p[y>>>24]<<24^p[h>>>16&255]<<16^p[d>>>8&255]<<8^p[255&v]^e[++k]}function d(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),a=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,a.call(t,r)},t}},5049:function(e,t,r){var n=r(392);r(3877),r(2886);var a=e.exports=n.asn1=n.asn1||{};function i(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}a.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},a.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},a.create=function(e,t,r,i,s){if(n.util.isArray(i)){for(var o=[],u=0;u<i.length;++u)void 0!==i[u]&&o.push(i[u]);i=o}var c={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(i),value:i};return s&&"bitStringContents"in s&&(c.bitStringContents=s.bitStringContents,c.original=a.copy(c)),c},a.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var i=0;i<e.length;++i)r.push(a.copy(e[i],t));return r}return"string"===typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:a.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},a.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!a.equals(e[i],t[i]))return!1;return!0}if(typeof e!==typeof t)return!1;if("string"===typeof e)return e===t;var s=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&a.equals(e.value,t.value);return r&&r.includeBitStringContents&&(s=s&&e.bitStringContents===t.bitStringContents),s},a.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};function s(e,t,r,n){var o;i(e,t,2);var u=e.getByte();t--;var c=192&u,l=31&u;o=e.length();var f,p,h=function(e,t){var r=e.getByte();if(t--,128!==r){var n;if(128&r){var a=127&r;i(e,t,a),n=e.getInt(a<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,t);if(t-=o-e.length(),void 0!==h&&h>t){if(n.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=t,d.requested=h,d}h=t}var v=32===(32&u);if(v)if(f=[],void 0===h)for(;;){if(i(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}o=e.length(),f.push(s(e,t,r+1,n)),t-=o-e.length()}else for(;h>0;)o=e.length(),f.push(s(e,h,r+1,n)),t-=o-e.length(),h-=o-e.length();if(void 0===f&&c===a.Class.UNIVERSAL&&l===a.Type.BITSTRING&&(p=e.bytes(h)),void 0===f&&n.decodeBitStrings&&c===a.Class.UNIVERSAL&&l===a.Type.BITSTRING&&h>1){var y=e.read,g=t,m=0;if(l===a.Type.BITSTRING&&(i(e,t,1),m=e.getByte(),t--),0===m)try{o=e.length();var b=s(e,t,r+1,{strict:!0,decodeBitStrings:!0}),w=o-e.length();t-=w,l==a.Type.BITSTRING&&w++;var k=b.tagClass;w!==h||k!==a.Class.UNIVERSAL&&k!==a.Class.CONTEXT_SPECIFIC||(f=[b])}catch(_){}void 0===f&&(e.read=y,t=g)}if(void 0===f){if(void 0===h){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=t}if(l===a.Type.BMPSTRING)for(f="";h>0;h-=2)i(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(h),t-=h}var x=void 0===p?null:{bitStringContents:p};return a.create(c,l,v,f,x)}a.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.length(),a=s(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return a},a.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,i=n.util.createBuffer(),s=!1;if("bitStringContents"in e&&(s=!0,e.original&&(s=a.equals(e,e.original))),s)i.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:i.putByte(0);for(var o=0;o<e.value.length;++o)void 0!==e.value[o]&&i.putBuffer(a.toDer(e.value[o]))}else if(e.type===a.Type.BMPSTRING)for(o=0;o<e.value.length;++o)i.putInt16(e.value.charCodeAt(o));else e.type===a.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0===(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128===(128&e.value.charCodeAt(1)))?i.putBytes(e.value.substr(1)):i.putBytes(e.value);if(t.putByte(r),i.length()<=127)t.putByte(127&i.length());else{var u=i.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);t.putByte(128|c.length);for(o=c.length-1;o>=0;--o)t.putByte(c.charCodeAt(o))}return t.putBuffer(i),t},a.oidToDer=function(e){var t,r,a,i,s=e.split("."),o=n.util.createBuffer();o.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var u=2;u<s.length;++u){t=!0,r=[],a=parseInt(s[u],10);do{i=127&a,a>>>=7,t||(i|=128),r.push(i),t=!1}while(a>0);for(var c=r.length-1;c>=0;--c)o.putByte(r[c])}return o},a.derToOid=function(e){var t;"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var a=0;e.length()>0;)a<<=7,128&(r=e.getByte())?a+=127&r:(t+="."+(a+r),a=0);return t},a.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,a=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var u=e.charAt(10),c=10;"+"!==u&&"-"!==u&&(o=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,a),t.setUTCHours(i,s,o,0),c&&("+"===(u=e.charAt(c))||"-"===u)){var l=60*parseInt(e.substr(c+1,2),10)+parseInt(e.substr(c+4,2),10);l*=6e4,"+"===u?t.setTime(+t-l):t.setTime(+t+l)}return t},a.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var f=e.length-5,p=e.charAt(f);"+"!==p&&"-"!==p||(c=60*parseInt(e.substr(f+1,2),10)+parseInt(e.substr(f+4,2),10),c*=6e4,"+"===p&&(c*=-1),l=!0);return"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,a),t.setUTCHours(i,s,o,u),t.setTime(+t+c)):(t.setFullYear(r,n,a),t.setHours(i,s,o,u)),t},a.dateToUtcTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},a.dateToGeneralizedTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},a.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},a.derToInteger=function(e){"string"===typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},a.validate=function(e,t,r,i){var s=!1;if(e.tagClass!==t.tagClass&&"undefined"!==typeof t.tagClass||e.type!==t.type&&"undefined"!==typeof t.type)i&&(e.tagClass!==t.tagClass&&i.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&i.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||"undefined"===typeof t.constructed){if(s=!0,t.value&&n.util.isArray(t.value))for(var o=0,u=0;s&&u<t.value.length;++u)s=t.value[u].optional||!1,e.value[o]&&((s=a.validate(e.value[o],t.value[u],r,i))?++o:t.value[u].optional&&(s=!0)),!s&&i&&i.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(s&&r)if(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else i&&i.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return s};var o=/[^\\u0000-\\u00ff]/;a.prettyPrint=function(e,t,r){var i="";r=r||2,(t=t||0)>0&&(i+="\n");for(var s="",u=0;u<t*r;++u)s+=" ";switch(i+=s+"Tag: ",e.tagClass){case a.Class.UNIVERSAL:i+="Universal:";break;case a.Class.APPLICATION:i+="Application:";break;case a.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case a.Class.PRIVATE:i+="Private:"}if(e.tagClass===a.Class.UNIVERSAL)switch(i+=e.type,e.type){case a.Type.NONE:i+=" (None)";break;case a.Type.BOOLEAN:i+=" (Boolean)";break;case a.Type.INTEGER:i+=" (Integer)";break;case a.Type.BITSTRING:i+=" (Bit string)";break;case a.Type.OCTETSTRING:i+=" (Octet string)";break;case a.Type.NULL:i+=" (Null)";break;case a.Type.OID:i+=" (Object Identifier)";break;case a.Type.ODESC:i+=" (Object Descriptor)";break;case a.Type.EXTERNAL:i+=" (External or Instance of)";break;case a.Type.REAL:i+=" (Real)";break;case a.Type.ENUMERATED:i+=" (Enumerated)";break;case a.Type.EMBEDDED:i+=" (Embedded PDV)";break;case a.Type.UTF8:i+=" (UTF8)";break;case a.Type.ROID:i+=" (Relative Object Identifier)";break;case a.Type.SEQUENCE:i+=" (Sequence)";break;case a.Type.SET:i+=" (Set)";break;case a.Type.PRINTABLESTRING:i+=" (Printable String)";break;case a.Type.IA5String:i+=" (IA5String (ASCII))";break;case a.Type.UTCTIME:i+=" (UTC time)";break;case a.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case a.Type.BMPSTRING:i+=" (BMP String)"}else i+=e.type;if(i+="\n",i+=s+"Constructed: "+e.constructed+"\n",e.composed){var c=0,l="";for(u=0;u<e.value.length;++u)void 0!==e.value[u]&&(c+=1,l+=a.prettyPrint(e.value[u],t+1,r),u+1<e.value.length&&(l+=","));i+=s+"Sub values: "+c+l}else{if(i+=s+"Value: ",e.type===a.Type.OID){var f=a.derToOid(e.value);i+=f,n.pki&&n.pki.oids&&f in n.pki.oids&&(i+=" ("+n.pki.oids[f]+") ")}if(e.type===a.Type.INTEGER)try{i+=a.derToInteger(e.value)}catch(h){i+="0x"+n.util.bytesToHex(e.value)}else if(e.type===a.Type.BITSTRING){if(e.value.length>1?i+="0x"+n.util.bytesToHex(e.value.slice(1)):i+="(none)",e.value.length>0){var p=e.value.charCodeAt(0);1==p?i+=" (1 unused bit shown)":p>1&&(i+=" ("+p+" unused bits shown)")}}else if(e.type===a.Type.OCTETSTRING)o.test(e.value)||(i+="("+e.value+") "),i+="0x"+n.util.bytesToHex(e.value);else if(e.type===a.Type.UTF8)try{i+=n.util.decodeUtf8(e.value)}catch(d){if("URI malformed"!==d.message)throw d;i+="0x"+n.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===a.Type.PRINTABLESTRING||e.type===a.Type.IA5String?i+=e.value:o.test(e.value)?i+="0x"+n.util.bytesToHex(e.value):0===e.value.length?i+="[null]":i+=e.value}return i}},5754:function(e){var t={};e.exports=t;var r={};t.encode=function(e,t,r){if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var a=0,i=t.length,s=t.charAt(0),o=[0];for(a=0;a<e.length;++a){for(var u=0,c=e[a];u<o.length;++u)c+=o[u]<<8,o[u]=c%i,c=c/i|0;for(;c>0;)o.push(c%i),c=c/i|0}for(a=0;0===e[a]&&a<e.length-1;++a)n+=s;for(a=o.length-1;a>=0;--a)n+=t[o[a]]}else n=function(e,t){var r=0,n=t.length,a=t.charAt(0),i=[0];for(r=0;r<e.length();++r){for(var s=0,o=e.at(r);s<i.length;++s)o+=i[s]<<8,i[s]=o%n,o=o/n|0;for(;o>0;)i.push(o%n),o=o/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=a;for(r=i.length-1;r>=0;--r)u+=t[i[r]];return u}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},t.decode=function(e,t){if("string"!==typeof e)throw new TypeError('"input" must be a string.');if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');var n=r[t];if(!n){n=r[t]=[];for(var a=0;a<t.length;++a)n[t.charCodeAt(a)]=a}e=e.replace(/\s/g,"");var i=t.length,s=t.charAt(0),o=[0];for(a=0;a<e.length;a++){var u=n[e.charCodeAt(a)];if(void 0===u)return;for(var c=0,l=u;c<o.length;++c)l+=o[c]*i,o[c]=255&l,l>>=8;for(;l>0;)o.push(255&l),l>>=8}for(var f=0;e[f]===s&&f<e.length-1;++f)o.push(0);return"undefined"!==typeof Buffer?Buffer.from(o.reverse()):new Uint8Array(o.reverse())}},3397:function(e,t,r){var n=r(392);r(3877),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var a=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};a.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},a.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},a.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},4533:function(e,t,r){var n=r(392);r(3877),n.cipher=n.cipher||{};var a=e.exports=n.cipher.modes=n.cipher.modes||{};function i(e,t){if("string"===typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var a=0;a<r.length;++a)e.putByte(r[a])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var i=[],s=t/4;for(a=0;a<s;++a)i.push(e.getInt32());e=i}return e}function s(e){e[e.length-1]=e[e.length-1]+1&4294967295}function o(e){return[e/4294967296|0,4294967295&e]}a.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},a.ecb.prototype.start=function(e){},a.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},a.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},a.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},a.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},a.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},a.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},a.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},a.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},a.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},a.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},a.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.ofb.prototype.decrypt=a.ofb.prototype.encrypt,a.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},a.ctr.prototype.decrypt=a.ctr.prototype.encrypt,a.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},a.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=r.length();if(12===a)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(o(8*a)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=o(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},a.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},a.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},a.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var a=this._aDataLength.concat(o(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},a.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),a=0;a<128;++a){e[a/32|0]&1<<31-a%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},a.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},a.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,a=this._m[r][n];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t},a.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},a.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,a=16*r,i=new Array(a),s=0;s<a;++s){var o=[0,0,0,0],u=(n-1-s%n)*t;o[s/n|0]=1<<t-1<<u,i[s]=this.generateSubHashTable(this.multiply(o,e),t)}return i},a.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,a=new Array(r);a[n]=e.slice(0);for(var i=n>>>1;i>0;)this.pow(a[2*i],a[i]=[]),i>>=1;for(i=2;i<n;){for(var s=1;s<i;++s){var o=a[i],u=a[s];a[i+s]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}i*=2}for(a[0]=[0,0,0,0],i=n+1;i<r;++i){var c=a[i^n];a[i]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return a}},1400:function(e,t,r){var n=r(392);function a(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.des.Algorithm(e,t)}))}r(3397),r(4533),r(3877),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},n.des.createEncryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},n.des.createDecryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return h(r._keys,e,t,!1)},decrypt:function(e,t){return h(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],v=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=e.length()>8?3:1,g=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;w<y;w++){var k=e.getInt32(),x=e.getInt32();k^=(t=252645135&(k>>>4^x))<<4,k^=t=65535&((x^=t)>>>-16^k),k^=(t=858993459&(k>>>2^(x^=t<<-16)))<<2,k^=t=65535&((x^=t)>>>-16^k),k^=(t=1431655765&(k>>>1^(x^=t<<-16)))<<1,k^=t=16711935&((x^=t)>>>8^k),t=(k^=(t=1431655765&(k>>>1^(x^=t<<8)))<<1)<<8|(x^=t)>>>20&240,k=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=t;for(var _=0;_<m.length;++_){m[_]?(k=k<<2|k>>>26,x=x<<2|x>>>26):(k=k<<1|k>>>27,x=x<<1|x>>>27),x&=-15;var E=r[(k&=-15)>>>28]|n[k>>>24&15]|a[k>>>20&15]|i[k>>>16&15]|s[k>>>12&15]|o[k>>>8&15]|u[k>>>4&15],S=c[x>>>28]|l[x>>>24&15]|f[x>>>20&15]|p[x>>>16&15]|h[x>>>12&15]|d[x>>>8&15]|v[x>>>4&15];t=65535&(S>>>16^E),g[b++]=E^t,g[b++]=S^t<<16}}return g}(t),this._init=!0}},a("DES-ECB",n.cipher.modes.ecb),a("DES-CBC",n.cipher.modes.cbc),a("DES-CFB",n.cipher.modes.cfb),a("DES-OFB",n.cipher.modes.ofb),a("DES-CTR",n.cipher.modes.ctr),a("3DES-ECB",n.cipher.modes.ecb),a("3DES-CBC",n.cipher.modes.cbc),a("3DES-CFB",n.cipher.modes.cfb),a("3DES-OFB",n.cipher.modes.ofb),a("3DES-CTR",n.cipher.modes.ctr);var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],o=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function h(e,t,r,n){var a,h,d=32===e.length?3:9;a=3===d?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var v=t[0],y=t[1];v^=(h=252645135&(v>>>4^y))<<4,v^=(h=65535&(v>>>16^(y^=h)))<<16,v^=h=858993459&((y^=h)>>>2^v),v^=h=16711935&((y^=h<<2)>>>8^v),v=(v^=(h=1431655765&(v>>>1^(y^=h<<8)))<<1)<<1|v>>>31,y=(y^=h)<<1|y>>>31;for(var g=0;g<d;g+=3){for(var m=a[g+1],b=a[g+2],w=a[g];w!=m;w+=b){var k=y^e[w],x=(y>>>4|y<<28)^e[w+1];h=v,v=y,y=h^(s[k>>>24&63]|u[k>>>16&63]|l[k>>>8&63]|p[63&k]|i[x>>>24&63]|o[x>>>16&63]|c[x>>>8&63]|f[63&x])}h=v,v=y,y=h}y=y>>>1|y<<31,y^=h=1431655765&((v=v>>>1|v<<31)>>>1^y),y^=(h=16711935&(y>>>8^(v^=h<<1)))<<8,y^=(h=858993459&(y>>>2^(v^=h)))<<2,y^=h=65535&((v^=h)>>>16^y),y^=h=252645135&((v^=h<<16)>>>4^y),v^=h<<4,r[0]=v,r[1]=y}function d(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),a=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,a.call(t,r)},t}},392:function(e){e.exports={options:{usePureJavaScript:!1}}},878:function(e,t,r){var n=r(392);r(29),r(3877),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,a=null,i={start:function(i,s){if(null!==i)if("string"===typeof i){if(!((i=i.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=n.md.algorithms[i].create()}else t=i;if(null===s)s=e;else{if("string"===typeof s)s=n.util.createBuffer(s);else if(n.util.isArray(s)){var o=s;s=n.util.createBuffer();for(var u=0;u<o.length;++u)s.putByte(o[u])}var c=s.length();c>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=n.util.createBuffer(),a=n.util.createBuffer(),c=s.length();for(u=0;u<c;++u){o=s.at(u);r.putByte(54^o),a.putByte(92^o)}if(c<t.blockLength)for(o=t.blockLength-c,u=0;u<o;++u)r.putByte(54),a.putByte(92);e=s,r=r.bytes(),a=a.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(a),t.update(e),t.digest()}};return i.digest=i.getMac,i}},3055:function(e,t,r){var n,a=r(392);e.exports=a.jsbn=a.jsbn||{};function i(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function s(){return new i(null)}function o(e,t,r,n,a,i){for(var s=16383&t,o=t>>14;--i>=0;){var u=16383&this.data[e],c=this.data[e++]>>14,l=o*u+c*s;a=((u=s*u+((16383&l)<<14)+r.data[n]+a)>>28)+(l>>14)+o*c,r.data[n++]=268435455&u}return a}a.jsbn.BigInteger=i,"undefined"===typeof navigator?(i.prototype.am=o,n=28):"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(e,t,r,n,a,i){for(var s=32767&t,o=t>>15;--i>=0;){var u=32767&this.data[e],c=this.data[e++]>>15,l=o*u+c*s;a=((u=s*u+((32767&l)<<15)+r.data[n]+(1073741823&a))>>>30)+(l>>>15)+o*c+(a>>>30),r.data[n++]=1073741823&u}return a},n=30):"Netscape"!=navigator.appName?(i.prototype.am=function(e,t,r,n,a,i){for(;--i>=0;){var s=t*this.data[e++]+r.data[n]+a;a=Math.floor(s/67108864),r.data[n++]=67108863&s}return a},n=26):(i.prototype.am=o,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n;i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52;var u,c,l=new Array;for(u="0".charCodeAt(0),c=0;c<=9;++c)l[u++]=c;for(u="a".charCodeAt(0),c=10;c<36;++c)l[u++]=c;for(u="A".charCodeAt(0),c=10;c<36;++c)l[u++]=c;function f(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function p(e,t){var r=l[e.charCodeAt(t)];return null==r?-1:r}function h(e){var t=s();return t.fromInt(e),t}function d(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function v(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function g(e,t){return e&t}function m(e,t){return e|t}function b(e,t){return e^t}function w(e,t){return e&~t}function k(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function x(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function _(){}function E(e){return e}function S(e){this.r2=s(),this.q3=s(),i.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}v.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},v.prototype.revert=function(e){return e},v.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},v.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},v.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=s();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=s();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},i.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},i.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},i.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,a=!1,s=0;--n>=0;){var o=8==r?255&e[n]:p(e,n);o<0?"-"==e.charAt(n)&&(a=!0):(a=!1,0==s?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),a&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},i.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},i.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},i.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,a=this.DB-n,i=(1<<a)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+s+1]=this.data[r]>>a|o,o=(this.data[r]&i)<<n;for(r=s-1;r>=0;--r)t.data[r]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()},i.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,a=this.DB-n,i=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&i)<<a,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&i)<<a),t.t=this.t-r,t.clamp()}},i.prototype.subTo=function(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},i.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),a=r.t;for(t.t=a+n.t;--a>=0;)t.data[a]=0;for(a=0;a<n.t;++a)t.data[a+r.t]=r.am(0,n.data[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&i.ZERO.subTo(t,t)},i.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},i.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var a=this.abs();if(a.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=s());var o=s(),u=this.s,c=e.s,l=this.DB-d(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),a.lShiftTo(l,r)):(n.copyTo(o),a.copyTo(r));var f=o.t,p=o.data[f-1];if(0!=p){var h=p*(1<<this.F1)+(f>1?o.data[f-2]>>this.F2:0),v=this.FV/h,y=(1<<this.F1)/h,g=1<<this.F2,m=r.t,b=m-f,w=null==t?s():t;for(o.dlShiftTo(b,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),i.ONE.dlShiftTo(f,w),w.subTo(o,o);o.t<f;)o.data[o.t++]=0;for(;--b>=0;){var k=r.data[--m]==p?this.DM:Math.floor(r.data[m]*v+(r.data[m-1]+g)*y);if((r.data[m]+=o.am(0,k,r,b,0,f))<k)for(o.dlShiftTo(b,w),r.subTo(w,r);r.data[m]<--k;)r.subTo(w,r)}null!=t&&(r.drShiftTo(f,t),u!=c&&i.ZERO.subTo(t,t)),r.t=f,r.clamp(),l>0&&r.rShiftTo(l,r),u<0&&i.ZERO.subTo(r,r)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},i.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},i.prototype.exp=function(e,t){if(e>4294967295||e<1)return i.ONE;var r=s(),n=s(),a=t.convert(this),o=d(e)-1;for(a.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,a,r);else{var u=r;r=n,n=u}return t.revert(r)},i.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,a=!1,i="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(r=this.data[s]>>o)>0&&(a=!0,i=f(r));s>=0;)o<t?(r=(this.data[s]&(1<<o)-1)<<t-o,r|=this.data[--s]>>(o+=this.DB-t)):(r=this.data[s]>>(o-=t)&n,o<=0&&(o+=this.DB,--s)),r>0&&(a=!0),a&&(i+=f(r));return a?i:"0"},i.prototype.negate=function(){var e=s();return i.ZERO.subTo(this,e),e},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this.data[this.t-1]^this.s&this.DM)},i.prototype.mod=function(e){var t=s();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(i.ZERO)>0&&e.subTo(t,t),t},i.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new v(t):new y(t),this.exp(e,r)},i.ZERO=h(0),i.ONE=h(1),_.prototype.convert=E,_.prototype.revert=E,_.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},_.prototype.sqrTo=function(e,t){e.squareTo(t)},S.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=s();return e.copyTo(t),this.reduce(t),t},S.prototype.revert=function(e){return e},S.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},S.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},S.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],I=(1<<26)/A[A.length-1];i.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},i.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=h(r),a=s(),i=s(),o="";for(this.divRemTo(n,a,i);a.signum()>0;)o=(r+i.intValue()).toString(e).substr(1)+o,a.divRemTo(n,a,i);return i.intValue().toString(e)+o},i.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),a=!1,s=0,o=0,u=0;u<e.length;++u){var c=p(e,u);c<0?"-"==e.charAt(u)&&0==this.signum()&&(a=!0):(o=t*o+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),a&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(i.ONE.shiftLeft(e-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(i.ONE.shiftLeft(e-1),this);else{var n=new Array,a=7&e;n.length=1+(e>>3),t.nextBytes(n),a>0?n[0]&=(1<<a)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(e,t,r){var n,a,i=Math.min(e.t,this.t);for(n=0;n<i;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(a=e.s&this.DM,n=i;n<this.t;++n)r.data[n]=t(this.data[n],a);r.t=this.t}else{for(a=this.s&this.DM,n=i;n<e.t;++n)r.data[n]=t(a,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},i.prototype.changeBit=function(e,t){var r=i.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},i.prototype.addTo=function(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},i.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},i.prototype.multiplyLowerTo=function(e,t,r){var n,a=Math.min(this.t+e.t,t);for(r.s=0,r.t=a;a>0;)r.data[--a]=0;for(n=r.t-this.t;a<n;++a)r.data[a+this.t]=this.am(0,e.data[a],r,a,0,this.t);for(n=Math.min(e.t,t);a<n;++a)this.am(0,e.data[a],r,a,0,t-a);r.clamp()},i.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},i.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},i.prototype.millerRabin=function(e){var t=this.subtract(i.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,a=t.shiftRight(r),s={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},o=0;o<e;++o){do{n=new i(this.bitLength(),s)}while(n.compareTo(i.ONE)<=0||n.compareTo(t)>=0);var u=n.modPow(a,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(t)){for(var c=1;c++<r&&0!=u.compareTo(t);)if(0==(u=u.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0},i.prototype.clone=function(){var e=s();return this.copyTo(e),e},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},i.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,a=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[a++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(a>0||r!=this.s)&&(t[a++]=r);return t},i.prototype.equals=function(e){return 0==this.compareTo(e)},i.prototype.min=function(e){return this.compareTo(e)<0?this:e},i.prototype.max=function(e){return this.compareTo(e)>0?this:e},i.prototype.and=function(e){var t=s();return this.bitwiseTo(e,g,t),t},i.prototype.or=function(e){var t=s();return this.bitwiseTo(e,m,t),t},i.prototype.xor=function(e){var t=s();return this.bitwiseTo(e,b,t),t},i.prototype.andNot=function(e){var t=s();return this.bitwiseTo(e,w,t),t},i.prototype.not=function(){for(var e=s(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},i.prototype.shiftLeft=function(e){var t=s();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},i.prototype.shiftRight=function(e){var t=s();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},i.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+k(this.data[e]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=x(this.data[r]^t);return e},i.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},i.prototype.setBit=function(e){return this.changeBit(e,m)},i.prototype.clearBit=function(e){return this.changeBit(e,w)},i.prototype.flipBit=function(e){return this.changeBit(e,b)},i.prototype.add=function(e){var t=s();return this.addTo(e,t),t},i.prototype.subtract=function(e){var t=s();return this.subTo(e,t),t},i.prototype.multiply=function(e){var t=s();return this.multiplyTo(e,t),t},i.prototype.divide=function(e){var t=s();return this.divRemTo(e,t,null),t},i.prototype.remainder=function(e){var t=s();return this.divRemTo(e,null,t),t},i.prototype.divideAndRemainder=function(e){var t=s(),r=s();return this.divRemTo(e,t,r),new Array(t,r)},i.prototype.modPow=function(e,t){var r,n,a=e.bitLength(),i=h(1);if(a<=0)return i;r=a<18?1:a<48?3:a<144?4:a<768?5:6,n=a<8?new v(t):t.isEven()?new S(t):new y(t);var o=new Array,u=3,c=r-1,l=(1<<r)-1;if(o[1]=n.convert(this),r>1){var f=s();for(n.sqrTo(o[1],f);u<=l;)o[u]=s(),n.mulTo(f,o[u-2],o[u]),u+=2}var p,g,m=e.t-1,b=!0,w=s();for(a=d(e.data[m])-1;m>=0;){for(a>=c?p=e.data[m]>>a-c&l:(p=(e.data[m]&(1<<a+1)-1)<<c-a,m>0&&(p|=e.data[m-1]>>this.DB+a-c)),u=r;0==(1&p);)p>>=1,--u;if((a-=u)<0&&(a+=this.DB,--m),b)o[p].copyTo(i),b=!1;else{for(;u>1;)n.sqrTo(i,w),n.sqrTo(w,i),u-=2;u>0?n.sqrTo(i,w):(g=i,i=w,w=g),n.mulTo(w,o[p],i)}for(;m>=0&&0==(e.data[m]&1<<a);)n.sqrTo(i,w),g=i,i=w,w=g,--a<0&&(a=this.DB-1,--m)}return n.revert(i)},i.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return i.ZERO;for(var r=e.clone(),n=this.clone(),a=h(1),s=h(0),o=h(0),u=h(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(e,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&u.isEven()||(o.addTo(this,o),u.subTo(e,u)),o.rShiftTo(1,o)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),t&&a.subTo(o,a),s.subTo(u,s)):(n.subTo(r,n),t&&o.subTo(a,o),u.subTo(s,u))}return 0!=n.compareTo(i.ONE)?i.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u},i.prototype.pow=function(e){return this.exp(e,new _)},i.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var a=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(a<i&&(i=a),i>0&&(t.rShiftTo(i,t),r.rShiftTo(i,r));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r},i.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=A[A.length-1]){for(t=0;t<A.length;++t)if(r.data[0]==A[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<A.length;){for(var n=A[t],a=t+1;a<A.length&&n<I;)n*=A[a++];for(n=r.modInt(n);t<a;)if(n%A[t++]==0)return!1}return r.millerRabin(e)}},29:function(e,t,r){var n=r(392);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},1746:function(e,t,r){var n=r(392);r(7263),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},7263:function(e,t,r){var n=r(392);r(3877),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var a=new n.util.ByteBuffer,i=Math.ceil(r/e.digestLength),s=0;s<i;s++){var o=new n.util.ByteBuffer;o.putInt32(s),e.start(),e.update(t+o.getBytes()),a.putBuffer(e.digest())}return a.truncate(a.length()-r),a.getBytes()}}}},2886:function(e,t,r){var n=r(392);n.pki=n.pki||{};var a=e.exports=n.pki.oids=n.oids=n.oids||{};function i(e,t){a[e]=t,a[t]=e}function s(e,t){a[e]=t}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("1.3.14.3.2.29","sha1WithRSASignature"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("2.16.840.1.101.3.4.2.4","sha224"),i("2.16.840.1.101.3.4.2.5","sha512-224"),i("2.16.840.1.101.3.4.2.6","sha512-256"),i("1.2.840.113549.2.2","md2"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.4","surname"),i("2.5.4.5","serialNumber"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.12","title"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("2.5.4.42","givenName"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),s("2.5.29.1","authorityKeyIdentifier"),s("2.5.29.2","keyAttributes"),s("2.5.29.3","certificatePolicies"),s("2.5.29.4","keyUsageRestriction"),s("2.5.29.5","policyMapping"),s("2.5.29.6","subtreesConstraint"),s("2.5.29.7","subjectAltName"),s("2.5.29.8","issuerAltName"),s("2.5.29.9","subjectDirectoryAttributes"),s("2.5.29.10","basicConstraints"),s("2.5.29.11","nameConstraints"),s("2.5.29.12","policyConstraints"),s("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),s("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),s("2.5.29.20","cRLNumber"),s("2.5.29.21","cRLReason"),s("2.5.29.22","expirationDate"),s("2.5.29.23","instructionCode"),s("2.5.29.24","invalidityDate"),s("2.5.29.25","cRLDistributionPoints"),s("2.5.29.26","issuingDistributionPoint"),s("2.5.29.27","deltaCRLIndicator"),s("2.5.29.28","issuingDistributionPoint"),s("2.5.29.29","certificateIssuer"),s("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),s("2.5.29.33","policyMappings"),s("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),s("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),s("2.5.29.46","freshestCRL"),s("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")},9835:function(e,t,r){var n=r(392);if(r(8605),r(5049),r(1400),r(29),r(2886),r(6019),r(6193),r(3860),r(654),r(5493),r(3877),"undefined"===typeof a)var a=n.jsbn.BigInteger;var i=n.asn1,s=n.pki=n.pki||{};e.exports=s.pbe=n.pbe=n.pbe||{};var o=s.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};function f(e,t){return e.start().update(t).digest().getBytes()}function p(e){var t;if(e){if(!(t=s.oids[i.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return h(t)}function h(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}s.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var a,u,c,l=n.random.getBytesSync(r.saltSize),f=r.count,p=i.integerToDer(f);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var d,v,y;switch(r.algorithm){case"aes128":a=16,d=16,v=o["aes128-CBC"],y=n.aes.createEncryptionCipher;break;case"aes192":a=24,d=16,v=o["aes192-CBC"],y=n.aes.createEncryptionCipher;break;case"aes256":a=32,d=16,v=o["aes256-CBC"],y=n.aes.createEncryptionCipher;break;case"des":a=8,d=8,v=o.desCBC,y=n.des.createEncryptionCipher;break;default:throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),m=h(g),b=n.pkcs5.pbkdf2(t,l,f,a,m),w=n.random.getBytesSync(d);(_=y(b)).start(w),_.update(i.toDer(e)),_.finish(),c=_.output.getBytes();var k=function(e,t,r,a){var o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==a&&o.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids[a]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return o}(l,p,a,g);u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.pkcs5PBKDF2).getBytes()),k]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(v).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,w)])])])}else{var x;if("3des"!==r.algorithm)throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x;a=24;var _,E=new n.util.ByteBuffer(l);b=s.pbe.generatePkcs12Key(t,E,1,f,a),w=s.pbe.generatePkcs12Key(t,E,2,f,a);(_=n.des.createEncryptionCipher(b)).start(w),_.update(i.toDer(e)),_.finish(),c=_.output.getBytes(),u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,p.getBytes())])])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[u,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c)])},s.decryptPrivateKeyInfo=function(e,t){var r=null,a={},o=[];if(!i.validate(e,u,a,o)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=o,c}var l=i.derToOid(a.encryptionOid),f=s.pbe.getCipher(l,a.encryptionParams,t),p=n.util.createBuffer(a.encryptedData);return f.update(p),f.finish()&&(r=i.fromDer(f.output)),r},s.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},s.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return i.fromDer(t.body)},s.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var a=s.wrapRsaPrivateKey(s.privateKeyToAsn1(e));return a=s.encryptPrivateKeyInfo(a,t,r),s.encryptedPrivateKeyToPem(a)}var o,u,c,l;switch(r.algorithm){case"aes128":o="AES-128-CBC",c=16,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes192":o="AES-192-CBC",c=24,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes256":o="AES-256-CBC",c=32,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"3des":o="DES-EDE3-CBC",c=24,u=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;case"des":o="DES-CBC",c=8,u=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var p=l(n.pbe.opensslDeriveBytes(t,u.substr(0,8),c));p.start(u),p.update(i.toDer(s.privateKeyToAsn1(e))),p.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:o,parameters:n.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return n.pem.encode(h)},s.decryptRsaPrivateKey=function(e,t){var r=null,a=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==a.type&&"PRIVATE KEY"!==a.type&&"RSA PRIVATE KEY"!==a.type)throw(c=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=c,c;if(a.procType&&"ENCRYPTED"===a.procType.type){var o,u;switch(a.dekInfo.algorithm){case"DES-CBC":o=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,u=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":o=8,u=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":o=16,u=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var c;throw(c=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".')).algorithm=a.dekInfo.algorithm,c}var l=n.util.hexToBytes(a.dekInfo.parameters),f=u(n.pbe.opensslDeriveBytes(t,l.substr(0,8),o));if(f.start(l),f.update(n.util.createBuffer(a.body)),!f.finish())return r;r=f.output.getBytes()}else r=a.body;return null!==(r="ENCRYPTED PRIVATE KEY"===a.type?s.decryptPrivateKeyInfo(i.fromDer(r),t):i.fromDer(r))&&(r=s.privateKeyFromAsn1(r)),r},s.pbe.generatePkcs12Key=function(e,t,r,a,i,s){var o,u;if("undefined"===typeof s||null===s){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');s=n.md.sha1.create()}var c=s.digestLength,l=s.blockLength,f=new n.util.ByteBuffer,p=new n.util.ByteBuffer;if(null!==e&&void 0!==e){for(u=0;u<e.length;u++)p.putInt16(e.charCodeAt(u));p.putInt16(0)}var h=p.length(),d=t.length(),v=new n.util.ByteBuffer;v.fillWithByte(r,l);var y=l*Math.ceil(d/l),g=new n.util.ByteBuffer;for(u=0;u<y;u++)g.putByte(t.at(u%d));var m=l*Math.ceil(h/l),b=new n.util.ByteBuffer;for(u=0;u<m;u++)b.putByte(p.at(u%h));var w=g;w.putBuffer(b);for(var k=Math.ceil(i/c),x=1;x<=k;x++){var _=new n.util.ByteBuffer;_.putBytes(v.bytes()),_.putBytes(w.bytes());for(var E=0;E<a;E++)s.start(),s.update(_.getBytes()),_=s.digest();var S=new n.util.ByteBuffer;for(u=0;u<l;u++)S.putByte(_.at(u%c));var A=Math.ceil(d/l)+Math.ceil(h/l),I=new n.util.ByteBuffer;for(o=0;o<A;o++){var C=new n.util.ByteBuffer(w.getBytes(l)),Z=511;for(u=S.length()-1;u>=0;u--)Z>>=8,Z+=S.at(u)+C.at(u),C.setAt(u,255&Z);I.putBuffer(C)}w=I,f.putBuffer(_)}return f.truncate(f.length()-i),f},s.pbe.getCipher=function(e,t,r){switch(e){case s.oids.pkcs5PBES2:return s.pbe.getCipherForPBES2(e,t,r);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},s.pbe.getCipherForPBES2=function(e,t,r){var a,o={},u=[];if(!i.validate(t,c,o,u))throw(a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,a;if((e=i.derToOid(o.kdfOid))!==s.oids.pkcs5PBKDF2)throw(a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,a.supportedOids=["pkcs5PBKDF2"],a;if((e=i.derToOid(o.encOid))!==s.oids["aes128-CBC"]&&e!==s.oids["aes192-CBC"]&&e!==s.oids["aes256-CBC"]&&e!==s.oids["des-EDE3-CBC"]&&e!==s.oids.desCBC)throw(a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a;var l,f,h=o.kdfSalt,d=n.util.createBuffer(o.kdfIterationCount);switch(d=d.getInt(d.length()<<3),s.oids[e]){case"aes128-CBC":l=16,f=n.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,f=n.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,f=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,f=n.des.createDecryptionCipher;break;case"desCBC":l=8,f=n.des.createDecryptionCipher}var v=p(o.prfOid),y=n.pkcs5.pbkdf2(r,h,d,l,v),g=o.encIv,m=f(y);return m.start(g),m},s.pbe.getCipherForPKCS12PBE=function(e,t,r){var a={},o=[];if(!i.validate(t,l,a,o))throw(v=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=o,v;var u,c,f,h=n.util.createBuffer(a.salt),d=n.util.createBuffer(a.iterations);switch(d=d.getInt(d.length()<<3),e){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=n.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var v;throw(v=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,v}var y=p(a.prfOid),g=s.pbe.generatePkcs12Key(r,h,1,d,u,y);return y.start(),f(g,s.pbe.generatePkcs12Key(r,h,2,d,c,y))},s.pbe.opensslDeriveBytes=function(e,t,r,a){if("undefined"===typeof a||null===a){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');a=n.md.md5.create()}null===t&&(t="");for(var i=[f(a,e+t)],s=16,o=1;s<r;++o,s+=16)i.push(f(a,i[o-1]+e+t));return i.join("").substr(0,r)}},6019:function(e,t,r){var n=r(392);r(878),r(29),r(3877);var a,i=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(a=r(5819)),e.exports=n.pbkdf2=i.pbkdf2=function(e,t,r,i,s,o){if("function"===typeof s&&(o=s,s=null),n.util.isNodejs&&!n.options.usePureJavaScript&&a.pbkdf2&&(null===s||"object"!==typeof s)&&(a.pbkdf2Sync.length>4||!s||"sha1"===s))return"string"!==typeof s&&(s="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),o?4===a.pbkdf2Sync.length?a.pbkdf2(e,t,r,i,(function(e,t){if(e)return o(e);o(null,t.toString("binary"))})):a.pbkdf2(e,t,r,i,s,(function(e,t){if(e)return o(e);o(null,t.toString("binary"))})):4===a.pbkdf2Sync.length?a.pbkdf2Sync(e,t,r,i).toString("binary"):a.pbkdf2Sync(e,t,r,i,s).toString("binary");if("undefined"!==typeof s&&null!==s||(s="sha1"),"string"===typeof s){if(!(s in n.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=n.md[s].create()}var u=s.digestLength;if(i>4294967295*u){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(i/u),f=i-(l-1)*u,p=n.hmac.create();p.start(s,e);var h,d,v,y="";if(!o){for(var g=1;g<=l;++g){p.start(null,null),p.update(t),p.update(n.util.int32ToBytes(g)),h=v=p.digest().getBytes();for(var m=2;m<=r;++m)p.start(null,null),p.update(v),d=p.digest().getBytes(),h=n.util.xorBytes(h,d,u),v=d;y+=g<l?h:h.substr(0,f)}return y}g=1;function b(){if(g>l)return o(null,y);p.start(null,null),p.update(t),p.update(n.util.int32ToBytes(g)),h=v=p.digest().getBytes(),m=2,w()}function w(){if(m<=r)return p.start(null,null),p.update(v),d=p.digest().getBytes(),h=n.util.xorBytes(h,d,u),v=d,++m,n.util.setImmediate(w);y+=g<l?h:h.substr(0,f),++g,b()}b()}},6193:function(e,t,r){var n=r(392);r(3877);var a=e.exports=n.pem=n.pem||{};function i(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},a=0;a<e.values.length;++a)r.push(e.values[a].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var i=0,s=-1;for(a=0;a<t.length;++a,++i)if(i>65&&-1!==s){var o=t[s];","===o?(++s,t=t.substr(0,s)+"\r\n "+t.substr(s)):t=t.substr(0,s)+"\r\n"+o+t.substr(s+1),i=a-s-1,s=-1,++a}else" "!==t[a]&&"\t"!==t[a]&&","!==t[a]||(s=a);return t}function s(e){return e.replace(/^\s+/,"")}a.encode=function(e,t){t=t||{};var r,a="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(a+=i(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(a+=i(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),a+=i(r)),e.headers)for(var s=0;s<e.headers.length;++s)a+=i(e.headers[s]);return e.procType&&(a+="\r\n"),a+=n.util.encode64(e.body,t.maxline||64)+"\r\n",a+="-----END "+e.type+"-----\r\n"},a.decode=function(e){for(var t,r=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/;t=a.exec(e);){var u=t[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var c={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(c),t[2]){for(var l=t[2].split(o),f=0;t&&f<l.length;){for(var p=l[f].replace(/\s+$/,""),h=f+1;h<l.length;++h){var d=l[h];if(!/\s/.test(d[0]))break;p+=d,f=h}if(t=p.match(i)){for(var v={name:t[1],values:[]},y=t[2].split(","),g=0;g<y.length;++g)v.values.push(s(y[g]));if(c.procType)if(c.contentDomain||"Content-Domain"!==v.name)if(c.dekInfo||"DEK-Info"!==v.name)c.headers.push(v);else{if(0===v.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:y[0],parameters:y[1]||null}}else c.contentDomain=y[0]||"";else{if("Proc-Type"!==v.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==v.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:y[0],type:y[1]}}}++f}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},2627:function(e,t,r){var n=r(392);r(3877),r(3860),r(928);var a=e.exports=n.pkcs1=n.pkcs1||{};function i(e,t,r){r||(r=n.md.sha1.create());for(var a="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(e+o),a+=r.digest().getBytes()}return a.substring(0,t)}a.encode_rsa_oaep=function(e,t,r){var a,s,o,u;"string"===typeof r?(a=r,s=arguments[3]||void 0,o=arguments[4]||void 0):r&&(a=r.label||void 0,s=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),o?o.start():o=n.md.sha1.create(),u||(u=o);var c=Math.ceil(e.n.bitLength()/8),l=c-2*o.digestLength-2;if(t.length>l)throw(y=new Error("RSAES-OAEP input message length is too long.")).length=t.length,y.maxLength=l,y;a||(a=""),o.update(a,"raw");for(var f=o.digest(),p="",h=l-t.length,d=0;d<h;d++)p+="\0";var v=f.getBytes()+p+"\x01"+t;if(s){if(s.length!==o.digestLength){var y;throw(y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=s.length,y.digestLength=o.digestLength,y}}else s=n.random.getBytes(o.digestLength);var g=i(s,c-o.digestLength-1,u),m=n.util.xorBytes(v,g,v.length),b=i(m,o.digestLength,u),w=n.util.xorBytes(s,b,s.length);return"\0"+w+m},a.decode_rsa_oaep=function(e,t,r){var a,s,o;"string"===typeof r?(a=r,s=arguments[3]||void 0):r&&(a=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var u=Math.ceil(e.n.bitLength()/8);if(t.length!==u)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,m.expectedLength=u,m;if(void 0===s?s=n.md.sha1.create():s.start(),o||(o=s),u<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),s.update(a,"raw");for(var c=s.digest().getBytes(),l=t.charAt(0),f=t.substring(1,s.digestLength+1),p=t.substring(1+s.digestLength),h=i(p,s.digestLength,o),d=n.util.xorBytes(f,h,f.length),v=i(d,u-s.digestLength-1,o),y=n.util.xorBytes(p,v,p.length),g=y.substring(0,s.digestLength),m="\0"!==l,b=0;b<s.digestLength;++b)m|=c.charAt(b)!==g.charAt(b);for(var w=1,k=s.digestLength,x=s.digestLength;x<y.length;x++){var _=y.charCodeAt(x),E=1&_^1,S=w?65534:0;m|=_&S,k+=w&=E}if(m||1!==y.charCodeAt(k))throw new Error("Invalid RSAES-OAEP padding.");return y.substring(k+1)}},4660:function(e,t,r){var n=r(392);r(8605),r(5049),r(1400),r(2886),r(6193),r(4922),r(3860),r(3877),r(3391);var a=n.asn1,i=e.exports=n.pkcs7=n.pkcs7||{};function s(e){var t={},r=[];if(!a.validate(e,i.asn1.recipientInfoValidator,t,r)){var s=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw s.errors=r,s}return{version:t.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(t.issuer),serialNumber:n.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:a.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function o(e){for(var t,r=[],i=0;i<e.length;++i)r.push((t=e[i],a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(t.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.encryptedContent.algorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function u(e){var t=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.digestAlgorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureAlgorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<e.unauthenticatedAttributes.length;++i){var s=e.unauthenticatedAttributes[i];r.values.push(c(s))}t.value.push(r)}return t}function c(e){var t;if(e.type===n.pki.oids.contentType)t=a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.value).getBytes());else if(e.type===n.pki.oids.messageDigest)t=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),s=e.value;if("string"===typeof s){var o=Date.parse(s);s=isNaN(o)?13===s.length?a.utcTimeToDate(s):a.generalizedTimeToDate(s):new Date(o)}t=s>=r&&s<i?a.create(a.Class.UNIVERSAL,a.Type.UTCTIME,!1,a.dateToUtcTime(s)):a.create(a.Class.UNIVERSAL,a.Type.GENERALIZEDTIME,!1,a.dateToGeneralizedTime(s))}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[t])])}function l(e,t,r){var i={};if(!a.validate(t,r,i,[])){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}if(a.derToOid(i.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var o="";if(n.util.isArray(i.encryptedContent))for(var u=0;u<i.encryptedContent.length;++u){if(i.encryptedContent[u].type!==a.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=i.encryptedContent[u].value}else o=i.encryptedContent;e.encryptedContent={algorithm:a.derToOid(i.encAlgorithm),parameter:n.util.createBuffer(i.encParameter.value),content:n.util.createBuffer(o)}}if(i.content){o="";if(n.util.isArray(i.content))for(u=0;u<i.content.length;++u){if(i.content[u].type!==a.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=i.content[u].value}else o=i.content;e.content=n.util.createBuffer(o)}return e.version=i.version.charCodeAt(0),e.rawCapture=i,i}function f(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:t=n.aes.createDecryptionCipher(e.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:t=n.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}i.messageFromPem=function(e){var t=n.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var s=a.fromDer(t.body);return i.messageFromAsn1(s)},i.messageToPem=function(e,t){var r={type:"PKCS7",body:a.toDer(e.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:t})},i.messageFromAsn1=function(e){var t={},r=[];if(!a.validate(e,i.asn1.contentInfoValidator,t,r)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw s.errors=r,s}var o,u=a.derToOid(t.contentType);switch(u){case n.pki.oids.envelopedData:o=i.createEnvelopedData();break;case n.pki.oids.encryptedData:o=i.createEncryptedData();break;case n.pki.oids.signedData:o=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return o.fromAsn1(t.content.value[0]),o},i.createSignedData=function(){var e=null;return e={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(l(e,t,i.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,a=0;a<r.length;++a)e.certificates.push(n.pki.certificateFromAsn1(r[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(n.pki.certificateToAsn1(e.certificates[r]));var i=[],s=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&s.value[0].value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,t)),i.length>0&&s.value[0].value.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,i)),s.value[0].value.push(a.create(a.Class.UNIVERSAL,a.Type.SET,!0,e.signerInfos)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),s])},addSigner:function(t){var r=t.issuer,a=t.serialNumber;if(t.certificate){var i=t.certificate;"string"===typeof i&&(i=n.pki.certificateFromPem(i)),r=i.issuer.attributes,a=i.serialNumber}var s=t.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof s&&(s=n.pki.privateKeyFromPem(s));var o=t.digestAlgorithm||n.pki.oids.sha1;switch(o){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var u=t.authenticatedAttributes||[];if(u.length>0){for(var c=!1,l=!1,f=0;f<u.length;++f){var p=u[f];if(c||p.type!==n.pki.oids.contentType){if(l||p.type!==n.pki.oids.messageDigest);else if(l=!0,c)break}else if(c=!0,l)break}if(!c||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:s,version:1,issuer:r,serialNumber:a,digestAlgorithm:o,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(t){var r;(t=t||{},"object"!==typeof e.content||null===e.contentInfo)&&(e.contentInfo=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(n.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof n.util.ByteBuffer?r=e.content.bytes():"string"===typeof e.content&&(r=n.util.encodeUtf8(e.content)),t.detached?e.detachedContent=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r)]))));0!==e.signers.length&&function(t){var r;r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=a.derToOid(e.contentInfo.value[0].value),s=a.toDer(r);for(var o in s.getByte(),a.getBerValueLength(s),s=s.getBytes(),t)t[o].start().update(s);for(var l=new Date,f=0;f<e.signers.length;++f){var p=e.signers[f];if(0===p.authenticatedAttributes.length){if(i!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[]),d=0;d<p.authenticatedAttributes.length;++d){var v=p.authenticatedAttributes[d];v.type===n.pki.oids.messageDigest?v.value=t[p.digestAlgorithm].digest():v.type===n.pki.oids.signingTime&&(v.value||(v.value=l)),h.value.push(c(v)),p.authenticatedAttributesAsn1.value.push(c(v))}s=a.toDer(h).getBytes(),p.md.start().update(s)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(u(e[r]));return t}(e.signers)}(function(){for(var t={},r=0;r<e.signers.length;++r){var i=e.signers[r];(s=i.digestAlgorithm)in t||(t[s]=n.md[n.pki.oids[s]].create()),0===i.authenticatedAttributes.length?i.md=t[s]:i.md=n.md[n.pki.oids[s]].create()}for(var s in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},i.createEncryptedData=function(){var e=null;return e={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){l(e,t,i.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),f(e)}}},i.createEnvelopedData=function(){var e=null;return e={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=l(e,t,i.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(s(e[r]));return t}(r.recipientInfos.value)},toAsn1:function(){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,o(e.recipients)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,(t=e.encryptedContent,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(n.pki.oids.data).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.algorithm).getBytes()),t.parameter?a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var a=e.recipients[n],i=a.issuer;if(a.serialNumber===t.serialNumber&&i.length===r.length){for(var s=!0,o=0;o<r.length;++o)if(i[o].type!==r[o].type||i[o].value!==r[o].value){s=!1;break}if(s)return a}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var a=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=n.util.createBuffer(a);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}f(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var a,i,s;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:a=16,i=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:a=24,i=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:a=32,i=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:a=24,i=8,s=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=n.util.createBuffer(n.random.getBytes(a));else if(t.length()!=a)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+a+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(i));var o=s(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var u=0;u<e.recipients.length;++u){var c=e.recipients[u];if(void 0===c.encryptedContent.content){if(c.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm);c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}}}},4922:function(e,t,r){var n=r(392);r(5049),r(3877);var a=n.asn1,i=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=i;var s={name:"ContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=s;var o={name:"EncryptedContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(o)},i.encryptedDataValidator={name:"EncryptedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"}].concat(o)};var u={name:"SignerInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},s,{name:"SignedData.Certificates",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},5132:function(e,t,r){var n=r(392);r(3877),r(3055),r(3860),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,a=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var s=function(e,t){return e|t};t.generateProbablePrime=function(e,t,a){"function"===typeof t&&(a=t,t={});var i=(t=t||{}).algorithm||"PRIMEINC";"string"===typeof i&&(i={name:i}),i.options=i.options||{};var s=t.prng||n.random,u={nextBytes:function(e){for(var t=s.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(e,t,a,i){if("workers"in a)return function(e,t,a,i){if("undefined"===typeof Worker)return o(e,t,a,i);var s=c(e,t),u=a.workers,l=a.workLoad||100,f=30*l/8,p=a.workerScript||"forge/prime.worker.js";if(-1===u)return n.util.estimateCores((function(e,t){e&&(t=2),u=t-1,h()}));function h(){u=Math.max(1,u);for(var n=[],a=0;a<u;++a)n[a]=new Worker(p);for(a=0;a<u;++a)n[a].addEventListener("message",h);var o=!1;function h(a){if(!o){0;var u=a.data;if(u.found){for(var p=0;p<n.length;++p)n[p].terminate();return o=!0,i(null,new r(u.prime,16))}s.bitLength()>e&&(s=c(e,t));var h=s.toString(16);a.target.postMessage({hex:h,workLoad:l}),s.dAddOffset(f,0)}}}h()}(e,t,a,i);return o(e,t,a,i)}(e,u,i.options,a);throw new Error("Invalid prime generation algorithm: "+i.name)}}function o(e,t,r,n){var a=c(e,t),i=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(i=r.millerRabinTests);var s=10;"maxBlockTime"in r&&(s=r.maxBlockTime),u(a,e,t,0,i,s,n)}function u(e,t,r,i,s,o,l){var f=+new Date;do{if(e.bitLength()>t&&(e=c(t,r)),e.isProbablePrime(s))return l(null,e);e.dAddOffset(a[i++%8],0)}while(o<0||+new Date-f<o);n.util.setImmediate((function(){u(e,t,r,i,s,o,l)}))}function c(e,t){var n=new r(e,t),a=e-1;return n.testBit(a)||n.bitwiseTo(r.ONE.shiftLeft(a),s,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()},6140:function(e,t,r){var n=r(392);r(3877);var a=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(a=r(5819)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,i=new Array(32),s=0;s<32;++s)i[s]=r.create();function o(){if(t.pools[0].messageLength>=32)return u();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),u()}function u(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r===0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var a=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(a),t.generated=0}function c(e){var t=null,r=n.util.globalScope,a=r.crypto||r.msCrypto;a&&a.getRandomValues&&(t=function(e){return a.getRandomValues(e)});var i=n.util.createBuffer();if(t)for(;i.length()<e;){var s=Math.max(1,Math.min(e-i.length(),65536)/4),o=new Uint32Array(Math.floor(s));try{t(o);for(var u=0;u<o.length;++u)i.putInt32(o[u])}catch(h){if(!("undefined"!==typeof QuotaExceededError&&h instanceof QuotaExceededError))throw h}}if(i.length()<e)for(var c,l,f,p=Math.floor(65536*Math.random());i.length()<e;){l=16807*(65535&p),l+=(32767&(c=16807*(p>>16)))<<16,p=4294967295&(l=(2147483647&(l+=c>>15))+(l>>31));for(u=0;u<3;++u)f=p>>>(u<<3),f^=Math.floor(256*Math.random()),i.putByte(255&f)}return i.getBytes(e)}return t.pools=i,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var a=t.plugin.cipher,i=t.plugin.increment,s=t.plugin.formatKey,o=t.plugin.formatSeed,c=n.util.createBuffer();t.key=null,function l(f){if(f)return r(f);if(c.length()>=e)return r(null,c.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return u(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),u(),e()}))}(l)}));var p=a(t.key,t.seed);t.generated+=p.length,c.putBytes(p),t.key=s(a(t.key,i(t.seed))),t.seed=o(a(t.key,t.seed)),n.util.setImmediate(l)}()},t.generateSync=function(e){var r=t.plugin.cipher,a=t.plugin.increment,i=t.plugin.formatKey,s=t.plugin.formatSeed;t.key=null;for(var u=n.util.createBuffer();u.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&o();var c=r(t.key,t.seed);t.generated+=c.length,u.putBytes(c),t.key=i(r(t.key,a(t.seed))),t.seed=s(r(t.key,t.seed))}return u.getBytes(e)},a?(t.seedFile=function(e,t){a.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return a.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,c(e))}catch(r){t(r)}},t.seedFileSync=c),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",a=0;a<r;a+=8)n+=String.fromCharCode(e>>a&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))}},t}},325:function(e,t,r){var n=r(392);r(3860),r(3877),(e.exports=n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,a=e.mgf,i=r.digestLength,s=e.salt||null;if("string"===typeof s&&(s=n.util.createBuffer(s)),"saltLength"in e)t=e.saltLength;else{if(null===s)throw new Error("Salt length not specified or specific salt not given.");t=s.length()}if(null!==s&&s.length()!==t)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||n.random,u={encode:function(e,u){var c,l,f=u-1,p=Math.ceil(f/8),h=e.digest().getBytes();if(p<i+t+2)throw new Error("Message is too long to encrypt.");l=null===s?o.getBytesSync(t):s.bytes();var d=new n.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(h),d.putBytes(l),r.start(),r.update(d.getBytes());var v=r.digest().getBytes(),y=new n.util.ByteBuffer;y.fillWithByte(0,p-t-i-2),y.putByte(1),y.putBytes(l);var g=y.getBytes(),m=p-i-1,b=a.generate(v,m),w="";for(c=0;c<m;c++)w+=String.fromCharCode(g.charCodeAt(c)^b.charCodeAt(c));var k=65280>>8*p-f&255;return(w=String.fromCharCode(w.charCodeAt(0)&~k)+w.substr(1))+v+String.fromCharCode(188)},verify:function(e,s,o){var u,c=o-1,l=Math.ceil(c/8);if(s=s.substr(-l),l<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==s.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var f=l-i-1,p=s.substr(0,f),h=s.substr(f,i),d=65280>>8*l-c&255;if(0!==(p.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var v=a.generate(h,f),y="";for(u=0;u<f;u++)y+=String.fromCharCode(p.charCodeAt(u)^v.charCodeAt(u));y=String.fromCharCode(y.charCodeAt(0)&~d)+y.substr(1);var g=l-i-t-2;for(u=0;u<g;u++)if(0!==y.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(g))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var m=y.substr(-t),b=new n.util.ByteBuffer;return b.fillWithByte(0,8),b.putBytes(e),b.putBytes(m),r.start(),r.update(b.getBytes()),h===r.digest().getBytes()}};return u}},3860:function(e,t,r){var n=r(392);r(8605),r(7404),r(6140),r(3877),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},a=new Array(4),i=n.util.createBuffer();function s(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,a,!1),i.putInt32(a[0]),i.putInt32(a[1]),i.putInt32(a[2]),i.putInt32(a[3]),i.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var o=s(),u=null,c=n.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(u=function(e){return l.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"===typeof window||window.document,o.collectInt(+new Date,32),"undefined"!==typeof navigator){var f="";for(var p in navigator)try{"string"==typeof navigator[p]&&(f+=navigator[p])}catch(h){}o.collect(f),f=null}t&&(t().mousemove((function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)})),t().keypress((function(e){o.collectInt(e.charCode,8)})))}if(n.random)for(var p in o)n.random[p]=o[p];else n.random=o;n.random.createInstance=s,e.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)},654:function(e,t,r){var n=r(392);r(3877);var a=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],s=function(e,t){return e<<t&65535|(65535&e)>>16-t},o=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"===typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,i=e,s=e.length(),o=t,u=Math.ceil(o/8),c=255>>(7&o);for(r=s;r<128;r++)i.putByte(a[i.at(r-1)+i.at(r-s)&255]);for(i.setAt(128-u,a[i.at(128-u)&c]),r=127-u;r>=0;r--)i.setAt(r,a[i.at(r+1)^i.at(r+u)]);return i};var u=function(e,t,r){var a,u,c,l,f=!1,p=null,h=null,d=null,v=[];for(e=n.rc2.expandKey(e,t),c=0;c<64;c++)v.push(e.getInt16Le());r?(a=function(e){for(c=0;c<4;c++)e[c]+=v[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),e[c]=s(e[c],i[c]),l++},u=function(e){for(c=0;c<4;c++)e[c]+=v[63&e[(c+3)%4]]}):(a=function(e){for(c=3;c>=0;c--)e[c]=o(e[c],i[c]),e[c]-=v[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),l--},u=function(e){for(c=3;c>=0;c--)e[c]-=v[63&e[(c+3)%4]]});var y=function(e){var t=[];for(c=0;c<4;c++){var n=p.getInt16Le();null!==d&&(r?n^=d.getInt16Le():d.putInt16Le(n)),t.push(65535&n)}l=r?0:63;for(var a=0;a<e.length;a++)for(var i=0;i<e[a][0];i++)e[a][1](t);for(c=0;c<4;c++)null!==d&&(r?d.putInt16Le(t[c]):t[c]^=d.getInt16Le()),h.putInt16Le(t[c])},g=null;return g={start:function(e,t){e&&"string"===typeof e&&(e=n.util.createBuffer(e)),f=!1,p=n.util.createBuffer(),h=t||new n.util.createBuffer,d=e,g.output=h},update:function(e){for(f||p.putBuffer(e);p.length()>=8;)y([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,p,!r);else{var n=8===p.length()?8:8-p.length();p.fillWithByte(n,n)}if(t&&(f=!0,g.update()),!r&&(t=0===p.length()))if(e)t=e(8,h,!r);else{var a=h.length(),i=h.at(a-1);i>a?t=!1:h.truncate(i)}return t}}};n.rc2.startEncrypting=function(e,t,r){var a=n.rc2.createEncryptionCipher(e,128);return a.start(t,r),a},n.rc2.createEncryptionCipher=function(e,t){return u(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var a=n.rc2.createDecryptionCipher(e,128);return a.start(t,r),a},n.rc2.createDecryptionCipher=function(e,t){return u(e,t,!1)}},5493:function(e,t,r){var n=r(392);if(r(5049),r(3055),r(2886),r(2627),r(5132),r(3860),r(3877),"undefined"===typeof a)var a=n.jsbn.BigInteger;var i=n.util.isNodejs?r(5819):null,s=n.asn1,o=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var u=n.pki,c=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},p={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},h=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},v=function(e){var t;if(!(e.algorithm in u.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=u.oids[e.algorithm];var n=s.oidToDer(t).getBytes(),a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);i.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,n)),i.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var o=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e.digest().getBytes());return a.value.push(i),a.value.push(o),s.toDer(a).getBytes()},y=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var i;t.dP||(t.dP=t.d.mod(t.p.subtract(a.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(a.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{i=new a(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(i.compareTo(t.n)>=0||!i.gcd(t.n).equals(a.ONE));for(var s=(e=e.multiply(i.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),o=e.mod(t.q).modPow(t.dQ,t.q);s.compareTo(o)<0;)s=s.add(t.p);var u=s.subtract(o).multiply(t.qInv).mod(t.p).multiply(t.q).add(o);return u=u.multiply(i.modInverse(t.n)).mod(t.n)};function g(e,t,r){var a=n.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}a.putByte(0),a.putByte(r);var o,u=i-3-e.length;if(0===r||1===r){o=0===r?0:255;for(var c=0;c<u;++c)a.putByte(o)}else for(;u>0;){var l=0,f=n.random.getBytes(u);for(c=0;c<u;++c)0===(o=f.charCodeAt(c))?++l:a.putByte(o);u=l}return a.putByte(0),a.putBytes(e),a}function m(e,t,r,a){var i=Math.ceil(t.n.bitLength()/8),s=n.util.createBuffer(e),o=s.getByte(),u=s.getByte();if(0!==o||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&"undefined"===typeof a)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=i-3-a;for(var l=0;l<c;++l)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;s.length()>1;){if(255!==s.getByte()){--s.read;break}++c}else if(2===u)for(c=0;s.length()>1;){if(0===s.getByte()){--s.read;break}++c}if(0!==s.getByte()||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function b(e,t,r){"function"===typeof t&&(r=t,t={});var i={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function s(){o(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?c(t,e.q):void o(e.qBits,c))}))}function o(e,t){n.prime.generateProbablePrime(e,i,t)}function c(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var i=e.p;e.p=e.q,e.q=i}if(0!==e.p.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.p=null,void s();if(0!==e.q.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.q=null,void o(e.qBits,c);if(e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(a.ONE))return e.p=e.q=null,void s();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,c);var l=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(i.prng=t.prng),s()}function w(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function k(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function x(e){return n.util.isNodejs&&"function"===typeof i[e]}function _(e){return"undefined"!==typeof o.globalScope&&"object"===typeof o.globalScope.crypto&&"object"===typeof o.globalScope.crypto.subtle&&"function"===typeof o.globalScope.crypto.subtle[e]}function E(e){return"undefined"!==typeof o.globalScope&&"object"===typeof o.globalScope.msCrypto&&"object"===typeof o.globalScope.msCrypto.subtle&&"function"===typeof o.globalScope.msCrypto.subtle[e]}function S(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r}u.rsa.encrypt=function(e,t,r){var i,s=r,o=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(s=2===r,i=g(e,t,r)):(i=n.util.createBuffer()).putBytes(e);for(var u=new a(i.toHex(),16),c=y(u,t,s).toString(16),l=n.util.createBuffer(),f=o-Math.ceil(c.length/2);f>0;)l.putByte(0),--f;return l.putBytes(n.util.hexToBytes(c)),l.getBytes()},u.rsa.decrypt=function(e,t,r,i){var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var o=new Error("Encrypted message length is invalid.");throw o.length=e.length,o.expected=s,o}var u=new a(n.util.createBuffer(e).toHex(),16);if(u.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=y(u,t,r).toString(16),l=n.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)l.putByte(0),--f;return l.putBytes(n.util.hexToBytes(c)),!1!==i?m(l.getBytes(),t,r):l.getBytes()},u.rsa.createKeyPairGenerationState=function(e,t,r){"string"===typeof e&&(e=parseInt(e,10)),e=e||2048;var i,s=(r=r||{}).prng||n.random,o={nextBytes:function(e){for(var t=s.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(i={algorithm:u,state:0,bits:e,rng:o,eInt:t||65537,e:new a(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(i.eInt),i},u.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new a(null);r.fromInt(30);for(var n,i=0,s=function(e,t){return e|t},o=+new Date,l=0;null===e.keys&&(t<=0||l<t);){if(0===e.state){var f=null===e.p?e.pBits:e.qBits,p=f-1;0===e.pqState?(e.num=new a(f,e.rng),e.num.testBit(p)||e.num.bitwiseTo(a.ONE.shiftLeft(p),s,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>f?e.pqState=0:e.num.isProbablePrime(k(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(c[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(a.ONE).gcd(e.e).compareTo(a.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(a.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var h=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)}}l+=(n=+new Date)-o,o=n}return null!==e.keys},u.rsa.generateKeyPair=function(e,t,r,a){if(1===arguments.length?"object"===typeof e?(r=e,e=void 0):"function"===typeof e&&(a=e,e=void 0):2===arguments.length?"number"===typeof e?"function"===typeof t?(a=t,t=void 0):"number"!==typeof t&&(r=t,t=void 0):(r=e,a=t,e=void 0,t=void 0):3===arguments.length&&("number"===typeof t?"function"===typeof r&&(a=r,r=void 0):(a=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(a){if(x("generateKeyPair"))return i.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return a(e);a(null,{privateKey:u.privateKeyFromPem(r),publicKey:u.publicKeyFromPem(t)})}));if(_("generateKey")&&_("exportKey"))return o.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return o.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){a(e)})).then((function(e){if(e){var t=u.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(e)));a(null,{privateKey:t,publicKey:u.setRsaPublicKey(t.n,t.e)})}}));if(E("generateKey")&&E("exportKey")){var c=o.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(e){var t=e.target.result,r=o.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=u.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(t)));a(null,{privateKey:r,publicKey:u.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){a(e)}},void(c.onerror=function(e){a(e)})}}else if(x("generateKeyPairSync")){var l=i.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:u.privateKeyFromPem(l.privateKey),publicKey:u.publicKeyFromPem(l.publicKey)}}var f=u.rsa.createKeyPairGenerationState(e,t,r);if(!a)return u.rsa.stepKeyPairGenerationState(f,0),f.keys;b(f,r,a)},u.setRsaPublicKey=u.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,a){if("string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return g(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,a)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"===typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return u.rsa.encrypt(i,r,!0)},verify:function(e,t,a,i){"string"===typeof a?a=a.toUpperCase():void 0===a&&(a="RSASSA-PKCS1-V1_5"),void 0===i&&(i={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in i||(i._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===a?a={verify:function(e,t){t=m(t,r,!0);var a=s.fromDer(t,{parseAllBytes:i._parseAllDigestBytes}),o={},u=[];if(!s.validate(a,d,o,u))throw(c=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,c;var c,l=s.derToOid(o.algorithmIdentifier);if(l!==n.oids.md2&&l!==n.oids.md5&&l!==n.oids.sha1&&l!==n.oids.sha224&&l!==n.oids.sha256&&l!==n.oids.sha384&&l!==n.oids.sha512&&l!==n.oids["sha512-224"]&&l!==n.oids["sha512-256"])throw(c=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=l,c;if((l===n.oids.md2||l===n.oids.md5)&&!("parameters"in o))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===o.digest}}:"NONE"!==a&&"NULL"!==a&&null!==a||(a={verify:function(e,t){return e===(t=m(t,r,!0))}});var o=u.rsa.decrypt(t,r,!0,!1);return a.verify(e,o,r.n.bitLength())}};return r},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(e,t,r,a,i,s,o,c){var l={n:e,e:t,d:r,p:a,q:i,dP:s,dQ:o,qInv:c,decrypt:function(e,t,r){"string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var a=u.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:m};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(a,l,!1)},sign:function(e,t){var r=!1;"string"===typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:v},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,l.n.bitLength());return u.rsa.encrypt(n,l,r)}};return l},u.wrapRsaPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(e).getBytes())])},u.privateKeyFromAsn1=function(e){var t,r,i,o,c,p,h,d,v={},y=[];if(s.validate(e,l,v,y)&&(e=s.fromDer(n.util.createBuffer(v.privateKey))),v={},y=[],!s.validate(e,f,v,y)){var g=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw g.errors=y,g}return t=n.util.createBuffer(v.privateKeyModulus).toHex(),r=n.util.createBuffer(v.privateKeyPublicExponent).toHex(),i=n.util.createBuffer(v.privateKeyPrivateExponent).toHex(),o=n.util.createBuffer(v.privateKeyPrime1).toHex(),c=n.util.createBuffer(v.privateKeyPrime2).toHex(),p=n.util.createBuffer(v.privateKeyExponent1).toHex(),h=n.util.createBuffer(v.privateKeyExponent2).toHex(),d=n.util.createBuffer(v.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new a(t,16),new a(r,16),new a(i,16),new a(o,16),new a(c,16),new a(p,16),new a(h,16),new a(d,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.qInv))])},u.publicKeyFromAsn1=function(e){var t={},r=[];if(s.validate(e,h,t,r)){var i,o=s.derToOid(t.publicKeyOid);if(o!==u.oids.rsaEncryption)throw(i=new Error("Cannot read public key. Unknown OID.")).oid=o,i;e=t.rsaPublicKey}if(r=[],!s.validate(e,p,t,r))throw(i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,i;var c=n.util.createBuffer(t.publicKeyModulus).toHex(),l=n.util.createBuffer(t.publicKeyExponent).toHex();return u.setRsaPublicKey(new a(c,16),new a(l,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(e)])])},u.publicKeyToRSAPublicKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(e.e))])}},928:function(e,t,r){var n=r(392);r(29),r(3877);var a=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=a,a.create=function(){s||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),s=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),a={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,i=0;i<r;++i)a.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},a}};return a.start(),a.update=function(i,s){"utf8"===s&&(i=n.util.encodeUtf8(i));var u=i.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=a.fullMessageLength.length-1;c>=0;--c)a.fullMessageLength[c]+=u[1],u[1]=u[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]=a.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(i),o(e,r,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var s=n.util.createBuffer();s.putBytes(t.bytes());var u,c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;s.putBytes(i.substr(0,a.blockLength-c));for(var l=8*a.fullMessageLength[0],f=0;f<a.fullMessageLength.length-1;++f)l+=(u=8*a.fullMessageLength[f+1])/4294967296>>>0,s.putInt32(l>>>0),l=u>>>0;s.putInt32(l);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};o(p,r,s);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h},a};var i=null,s=!1;function o(e,t,r){for(var n,a,i,s,o,u,c,l=r.length();l>=64;){for(a=e.h0,i=e.h1,s=e.h2,o=e.h3,u=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,n=(a<<5|a>>>27)+(o^i&(s^o))+u+1518500249+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(a<<5|a>>>27)+(o^i&(s^o))+u+1518500249+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(a<<5|a>>>27)+(i^s^o)+u+1859775393+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i^s^o)+u+1859775393+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i&s|o&(i^s))+u+2400959708+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i^s^o)+u+3395469782+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,l-=64}}},7404:function(e,t,r){var n=r(392);r(29),r(3877);var a=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=a,a.create=function(){s||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,i=0;i<r;++i)a.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a}};return a.start(),a.update=function(i,s){"utf8"===s&&(i=n.util.encodeUtf8(i));var o=i.length;a.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=a.fullMessageLength.length-1;c>=0;--c)a.fullMessageLength[c]+=o[1],o[1]=o[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]=a.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),u(e,r,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var s=n.util.createBuffer();s.putBytes(t.bytes());var o,c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;s.putBytes(i.substr(0,a.blockLength-c));for(var l=8*a.fullMessageLength[0],f=0;f<a.fullMessageLength.length-1;++f)l+=(o=8*a.fullMessageLength[f+1])/4294967296>>>0,s.putInt32(l>>>0),l=o>>>0;s.putInt32(l);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};u(p,r,s);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h.putInt32(p.h5),h.putInt32(p.h6),h.putInt32(p.h7),h},a};var i=null,s=!1,o=null;function u(e,t,r){for(var n,a,i,s,u,c,l,f,p,h,d,v,y,g=r.length();g>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=((a=t[u-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[u]=n+t[u-7]+a+t[u-16]|0;for(c=e.h0,l=e.h1,f=e.h2,p=e.h3,h=e.h4,d=e.h5,v=e.h6,y=e.h7,u=0;u<64;++u)i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),s=c&l|f&(c^l),n=y+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(v^h&(d^v))+o[u]+t[u],y=v,v=d,d=h,h=p+n>>>0,p=f,f=l,l=c,c=n+(a=i+s)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+p|0,e.h4=e.h4+h|0,e.h5=e.h5+d|0,e.h6=e.h6+v|0,e.h7=e.h7+y|0,g-=64}}},4770:function(e,t,r){var n=r(392);r(29),r(3877);var a=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=a;var i=n.sha384=n.sha512.sha384=n.sha512.sha384||{};i.create=function(){return a.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=i,n.sha512.sha256=n.sha512.sha256||{create:function(){return a.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return a.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,a.create=function(e){if(o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(c={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],o=!0),"undefined"===typeof e&&(e="SHA-512"),!(e in c))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=c[e],r=null,a=n.util.createBuffer(),i=new Array(80),f=0;f<80;++f)i[f]=new Array(2);var p=64;switch(e){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var h={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];for(var e=h.messageLengthSize/4,i=0;i<e;++i)h.fullMessageLength.push(0);a=n.util.createBuffer(),r=new Array(t.length);for(i=0;i<t.length;++i)r[i]=t[i].slice(0);return h}};return h.start(),h.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var s=e.length;h.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=h.fullMessageLength.length-1;o>=0;--o)h.fullMessageLength[o]+=s[1],s[1]=s[0]+(h.fullMessageLength[o]/4294967296>>>0),h.fullMessageLength[o]=h.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return a.putBytes(e),l(r,i,a),(a.read>2048||0===a.length())&&a.compact(),h},h.digest=function(){var t=n.util.createBuffer();t.putBytes(a.bytes());var o,u=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize&h.blockLength-1;t.putBytes(s.substr(0,h.blockLength-u));for(var c=8*h.fullMessageLength[0],f=0;f<h.fullMessageLength.length-1;++f)c+=(o=8*h.fullMessageLength[f+1])/4294967296>>>0,t.putInt32(c>>>0),c=o>>>0;t.putInt32(c);var p=new Array(r.length);for(f=0;f<r.length;++f)p[f]=r[f].slice(0);l(p,i,t);var d,v=n.util.createBuffer();d="SHA-512"===e?p.length:"SHA-384"===e?p.length-2:p.length-4;for(f=0;f<d;++f)v.putInt32(p[f][0]),f===d-1&&"SHA-512/224"===e||v.putInt32(p[f][1]);return v},h};var s=null,o=!1,u=null,c=null;function l(e,t,r){for(var n,a,i,s,o,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A,I,C,Z,R,T,D,P,N,O,B,L=r.length();L>=128;){for(R=0;R<16;++R)t[R][0]=r.getInt32()>>>0,t[R][1]=r.getInt32()>>>0;for(;R<80;++R)n=(((T=(P=t[R-2])[0])>>>19|(D=P[1])<<13)^(D>>>29|T<<3)^T>>>6)>>>0,a=((T<<13|D>>>19)^(D<<3|T>>>29)^(T<<26|D>>>6))>>>0,i=(((T=(O=t[R-15])[0])>>>1|(D=O[1])<<31)^(T>>>8|D<<24)^T>>>7)>>>0,s=((T<<31|D>>>1)^(T<<24|D>>>8)^(T<<25|D>>>7))>>>0,N=t[R-7],B=t[R-16],D=a+N[1]+s+B[1],t[R][0]=n+N[0]+i+B[0]+(D/4294967296>>>0)>>>0,t[R][1]=D>>>0;for(d=e[0][0],v=e[0][1],y=e[1][0],g=e[1][1],m=e[2][0],b=e[2][1],w=e[3][0],k=e[3][1],x=e[4][0],_=e[4][1],E=e[5][0],S=e[5][1],A=e[6][0],I=e[6][1],C=e[7][0],Z=e[7][1],R=0;R<80;++R)l=((x>>>14|_<<18)^(x>>>18|_<<14)^(_>>>9|x<<23))>>>0,f=(A^x&(E^A))>>>0,o=((d>>>28|v<<4)^(v>>>2|d<<30)^(v>>>7|d<<25))>>>0,c=((d<<4|v>>>28)^(v<<30|d>>>2)^(v<<25|d>>>7))>>>0,p=(d&y|m&(d^y))>>>0,h=(v&g|b&(v^g))>>>0,D=Z+(((x<<18|_>>>14)^(x<<14|_>>>18)^(_<<23|x>>>9))>>>0)+((I^_&(S^I))>>>0)+u[R][1]+t[R][1],n=C+l+f+u[R][0]+t[R][0]+(D/4294967296>>>0)>>>0,a=D>>>0,i=o+p+((D=c+h)/4294967296>>>0)>>>0,s=D>>>0,C=A,Z=I,A=E,I=S,E=x,S=_,x=w+n+((D=k+a)/4294967296>>>0)>>>0,_=D>>>0,w=m,k=b,m=y,b=g,y=d,g=v,d=n+i+((D=a+s)/4294967296>>>0)>>>0,v=D>>>0;D=e[0][1]+v,e[0][0]=e[0][0]+d+(D/4294967296>>>0)>>>0,e[0][1]=D>>>0,D=e[1][1]+g,e[1][0]=e[1][0]+y+(D/4294967296>>>0)>>>0,e[1][1]=D>>>0,D=e[2][1]+b,e[2][0]=e[2][0]+m+(D/4294967296>>>0)>>>0,e[2][1]=D>>>0,D=e[3][1]+k,e[3][0]=e[3][0]+w+(D/4294967296>>>0)>>>0,e[3][1]=D>>>0,D=e[4][1]+_,e[4][0]=e[4][0]+x+(D/4294967296>>>0)>>>0,e[4][1]=D>>>0,D=e[5][1]+S,e[5][0]=e[5][0]+E+(D/4294967296>>>0)>>>0,e[5][1]=D>>>0,D=e[6][1]+I,e[6][0]=e[6][0]+A+(D/4294967296>>>0)>>>0,e[6][1]=D>>>0,D=e[7][1]+Z,e[7][0]=e[7][0]+C+(D/4294967296>>>0)>>>0,e[7][1]=D>>>0,L-=128}}},3877:function(e,t,r){var n=r(392),a=r(5754),i=e.exports=n.util=n.util||{};function s(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function o(e){if(this.data="",this.read=0,"string"===typeof e)this.data=e;else if(i.isArrayBuffer(e)||i.isArrayBufferView(e))if("undefined"!==typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof o||"object"===typeof e&&"string"===typeof e.data&&"number"===typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!==typeof process&&process.nextTick&&!process.browser)return i.nextTick=process.nextTick,void("function"===typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"===typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(e){return setImmediate(e)});if(i.setImmediate=function(e){setTimeout(e,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var e="forge.setImmediate",t=[];i.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!==typeof MutationObserver){var r=Date.now(),n=!0,a=document.createElement("div");t=[];new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(a,{attributes:!0});var s=i.setImmediate;i.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),s(e)):(t.push(e),1===t.length&&a.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}(),i.isNodejs="undefined"!==typeof process&&process.versions&&process.versions.node,i.globalScope=i.isNodejs?r.g:"undefined"===typeof self?window:self,i.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isArrayBuffer=function(e){return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer},i.isArrayBufferView=function(e){return e&&i.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},i.ByteBuffer=o,i.ByteStringBuffer=o;i.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},i.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},i.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},i.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(i.encodeUtf8(e))},i.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},i.ByteStringBuffer.prototype.putInt=function(e,t){s(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},i.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},i.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},i.ByteStringBuffer.prototype.getInt=function(e){s(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},i.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},i.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.ByteStringBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},i.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var e=i.createBuffer(this.data);return e.read=this.read,e},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=i.isArrayBuffer(e),n=i.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},i.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},i.DataBuffer.prototype.putBytes=function(e,t){if(i.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(i.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof i.DataBuffer||"object"===typeof e&&"number"===typeof e.read&&"number"===typeof e.write&&i.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof i.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"===typeof e){var a;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(e,a,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(e,a,this.write),this;if("utf8"===t&&(e=i.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(a),this;if("utf16"===t)return this.accommodate(2*e.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},i.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},i.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},i.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(e,t){s(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},i.DataBuffer.prototype.putSignedInt=function(e,t){return s(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},i.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},i.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},i.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},i.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},i.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},i.DataBuffer.prototype.getInt=function(e){s(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},i.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},i.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.DataBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},i.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},i.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return i.binary.raw.encode(t);if("hex"===e)return i.binary.hex.encode(t);if("base64"===e)return i.binary.base64.encode(t);if("utf8"===e)return i.text.utf8.decode(t);if("utf16"===e)return i.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},i.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=i.encodeUtf8(e)),new i.ByteBuffer(e)},i.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},i.xorBytes=function(e,t,r){for(var n="",a="",i="",s=0,o=0;r>0;--r,++s)a=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(n+=i,i="",o=0),i+=String.fromCharCode(a),++o;return n+=i},i.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},i.bytesToHex=function(e){return i.createBuffer(e).toHex()},i.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(e,t){for(var r,n,a,i="",s="",o=0;o<e.length;)r=e.charCodeAt(o++),n=e.charCodeAt(o++),a=e.charCodeAt(o++),i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),t&&i.length>t&&(s+=i.substr(0,t)+"\r\n",i=i.substr(t));return s+=i},i.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,a,i="",s=0;s<e.length;)t=c[e.charCodeAt(s++)-43],r=c[e.charCodeAt(s++)-43],n=c[e.charCodeAt(s++)-43],a=c[e.charCodeAt(s++)-43],i+=String.fromCharCode(t<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==a&&(i+=String.fromCharCode((3&n)<<6|a)));return i},i.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},i.decodeUtf8=function(e){return decodeURIComponent(escape(e))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},i.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},i.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var a=r=r||0,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var a=0,i=r=r||0;for(1&e.length&&(a=1,n[i++]=parseInt(e[0],16));a<e.length;a+=2)n[i++]=parseInt(e.substr(a,2),16);return t?i-r:n},i.binary.base64.encode=function(e,t){for(var r,n,a,i="",s="",o=0;o<e.byteLength;)r=e[o++],n=e[o++],a=e[o++],i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),t&&i.length>t&&(s+=i.substr(0,t)+"\r\n",i=i.substr(t));return s+=i},i.binary.base64.decode=function(e,t,r){var n,a,i,s,o=t;o||(o=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<e.length;)n=c[e.charCodeAt(u++)-43],a=c[e.charCodeAt(u++)-43],i=c[e.charCodeAt(u++)-43],s=c[e.charCodeAt(u++)-43],o[l++]=n<<2|a>>4,64!==i&&(o[l++]=(15&a)<<4|i>>2,64!==s&&(o[l++]=(3&i)<<6|s));return t?l-r:o.subarray(0,l)},i.binary.base58.encode=function(e,t){return i.binary.baseN.encode(e,l,t)},i.binary.base58.decode=function(e,t){return i.binary.baseN.decode(e,l,t)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(e,t,r){e=i.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var a=r=r||0,s=0;s<e.length;++s)n[a++]=e.charCodeAt(s);return t?a-r:n},i.text.utf8.decode=function(e){return i.decodeUtf8(String.fromCharCode.apply(null,e))},i.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var a=new Uint16Array(n.buffer),i=r=r||0,s=r,o=0;o<e.length;++o)a[s++]=e.charCodeAt(o),i+=2;return t?i-r:n},i.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},i.deflate=function(e,t,r){if(t=i.decode64(e.deflate(i.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},i.inflate=function(e,t,r){var n=e.inflate(i.encode64(t)).rval;return null===n?null:i.decode64(n)};var f=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=i.encode64(JSON.stringify(r)),n=e.setItem(t,r)),"undefined"!==typeof n&&!0!==n.rval){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}},p=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},h=function(e,t,r,n){var a=p(e,t);null===a&&(a={}),a[r]=n,f(e,t,a)},d=function(e,t,r){var n=p(e,t);return null!==n&&(n=r in n?n[r]:null),n},v=function(e,t,r){var n=p(e,t);if(null!==n&&r in n){delete n[r];var a=!0;for(var i in n){a=!1;break}a&&(n=null),f(e,t,n)}},y=function(e,t){f(e,t,null)},g=function(e,t,r){var n,a=null;"undefined"===typeof r&&(r=["web","flash"]);var i=!1,s=null;for(var o in r){n=r[o];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");a=e.apply(this,t),i="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,a=e.apply(this,t),i=!0)}catch(u){s=u}if(i)break}if(!i)throw s;return a};i.setItem=function(e,t,r,n,a){g(h,arguments,a)},i.getItem=function(e,t,r,n){return g(d,arguments,n)},i.removeItem=function(e,t,r,n){g(v,arguments,n)},i.clearItems=function(e,t,r){g(y,arguments,r)},i.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},i.format=function(e){for(var t,r,n=/%./g,a=0,i=[],s=0;t=n.exec(e);){(r=e.substring(s,n.lastIndex-2)).length>0&&i.push(r),s=n.lastIndex;var o=t[0][1];switch(o){case"s":case"o":a<arguments.length?i.push(arguments[1+a++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+o+"?>")}}return i.push(e.substring(s)),i.join("")},i.formatNumber=function(e,t,r,n){var a=e,i=isNaN(t=Math.abs(t))?2:t,s=void 0===r?",":r,o=void 0===n?".":n,u=a<0?"-":"",c=parseInt(a=Math.abs(+a||0).toFixed(i),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+o:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+o)+(i?s+Math.abs(a-c).toFixed(i).slice(2):"")},i.formatSize=function(e){return e=e>=1073741824?i.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?i.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?i.formatNumber(e/1024,0)+" KiB":i.formatNumber(e,0)+" bytes"},i.bytesFromIP=function(e){return-1!==e.indexOf(".")?i.bytesFromIPv4(e):-1!==e.indexOf(":")?i.bytesFromIPv6(e):null},i.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=i.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},i.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=i.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var s=i.hexToBytes(e[a]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(e){return 4===e.length?i.bytesToIPv4(e):16===e.length?i.bytesToIPv6(e):null},i.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},i.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,a=0;a<e.length;a+=2){for(var s=i.bytesToHex(e[a]+e[a+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var o=r[r.length-1],u=t.length;o&&u===o.end+1?(o.end=u,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}t.push(s)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),0===c.start&&t.unshift(""),7===c.end&&t.push(""))}return t.join(":")},i.estimateCores=function(e,t){if("function"===typeof e&&(t=e,e={}),e=e||{},"cores"in i&&!e.update)return t(null,i.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,t(null,i.cores);if("undefined"===typeof Worker)return i.cores=1,t(null,i.cores);if("undefined"===typeof Blob)return i.cores=2,t(null,i.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,a,s){if(0===a){var o=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return i.cores=Math.max(1,o),URL.revokeObjectURL(r),t(null,i.cores)}!function(e,t){for(var n=[],a=[],i=0;i<e;++i){var s=new Worker(r);s.addEventListener("message",(function(r){if(a.push(r.data),a.length===e){for(var i=0;i<e;++i)n[i].terminate();t(null,a)}})),n.push(s)}for(i=0;i<e;++i)n[i].postMessage(i)}(s,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var a=t[n],i=r[n]=[],s=0;s<e;++s)if(n!==s){var o=t[s];(a.st>o.st&&a.st<o.et||o.st>a.st&&o.st<a.et)&&i.push(s)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(s,r)),e(n,a-1,s)}))}([],5,16)}},3391:function(e,t,r){var n=r(392);r(8605),r(5049),r(1400),r(29),r(1746),r(2886),r(6193),r(325),r(5493),r(3877);var a=n.asn1,i=e.exports=n.pki=n.pki||{},s=i.oids,o={};o.CN=s.commonName,o.commonName="CN",o.C=s.countryName,o.countryName="C",o.L=s.localityName,o.localityName="L",o.ST=s.stateOrProvinceName,o.stateOrProvinceName="ST",o.O=s.organizationName,o.organizationName="O",o.OU=s.organizationalUnitName,o.organizationalUnitName="OU",o.E=s.emailAddress,o.emailAddress="E";var u=n.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:a.Class.UNIVERSAL,type:a.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:a.Class.UNIVERSAL,type:a.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:a.Class.UNIVERSAL,type:a.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:a.Class.UNIVERSAL,type:a.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:a.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:a.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:a.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:a.Class.UNIVERSAL,type:a.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:a.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:a.Class.UNIVERSAL,type:a.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},f={name:"CertificationRequestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},u,{name:"CertificationRequestInfo.attributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0}]}]}]},p={name:"CertificationRequest",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[f,{name:"CertificationRequest.signatureAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function h(e,t){"string"===typeof t&&(t={shortName:t});for(var r,n=null,a=0;null===n&&a<e.attributes.length;++a)r=e.attributes[a],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}i.RDNAttributesAsArray=function(e,t){for(var r,n,i,u=[],c=0;c<e.value.length;++c){r=e.value[c];for(var l=0;l<r.value.length;++l)i={},n=r.value[l],i.type=a.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in s&&(i.name=s[i.type],i.name in o&&(i.shortName=o[i.name])),t&&(t.update(i.type),t.update(i.value)),u.push(i)}return u},i.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],u=a.derToOid(n.value[0].value),c=n.value[1].value,l=0;l<c.length;++l){var f={};if(f.type=u,f.value=c[l].value,f.valueTagClass=c[l].type,f.type in s&&(f.name=s[f.type],f.name in o&&(f.shortName=o[f.name])),f.type===s.extensionRequest){f.extensions=[];for(var p=0;p<f.value.length;++p)f.extensions.push(i.certificateExtensionFromAsn1(f.value[p]))}t.push(f)}return t};var d=function(e,t,r){var n={};if(e!==s["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:s.sha1},mgf:{algorithmOid:s.mgf1,hash:{algorithmOid:s.sha1}},saltLength:20});var i={},o=[];if(!a.validate(t,l,i,o)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=o,u}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=a.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=a.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=a.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n},v=function(e){switch(s[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},y=function(e){var t,r=e.certificate;switch(r.signatureOid){case s.sha1WithRSAEncryption:case s.sha1WithRSASignature:break;case s["RSASSA-PSS"]:var a,i,o;if(void 0===(a=s[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[a])throw(o=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,o.name=a,o;if(void 0===(i=s[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[i])throw(o=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,o.name=i,o;if(i=n.mgf[i].create(n.md[a].create()),void 0===(a=s[r.signatureParameters.hash.algorithmOid])||void 0===n.md[a])throw(o=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,o.name=a,o;t=n.pss.create(n.md[a].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function g(e){for(var t,r,i=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),s=e.attributes,o=0;o<s.length;++o){var u=(t=s[o]).value,c=a.Type.PRINTABLESTRING;"valueTagClass"in t&&(c=t.valueTagClass)===a.Type.UTF8&&(u=n.util.encodeUtf8(u)),r=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.type).getBytes()),a.create(a.Class.UNIVERSAL,c,!1,u)])]),i.value.push(r)}return i}function m(e){for(var t,r=0;r<e.length;++r){if("undefined"===typeof(t=e[r]).name&&(t.type&&t.type in i.oids?t.name=i.oids[t.type]:t.shortName&&t.shortName in o&&(t.name=i.oids[o[t.shortName]])),"undefined"===typeof t.type){if(!t.name||!(t.name in i.oids))throw(u=new Error("Attribute type not specified.")).attribute=t,u;t.type=i.oids[t.name]}if("undefined"===typeof t.shortName&&t.name&&t.name in o&&(t.shortName=o[t.name]),t.type===s.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=a.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(i.certificateExtensionToAsn1(b(t.extensions[n])))}var u;if("undefined"===typeof t.value)throw(u=new Error("Attribute value not specified.")).attribute=t,u}}function b(e,t){if(t=t||{},"undefined"===typeof e.name&&e.id&&e.id in i.oids&&(e.name=i.oids[e.id]),"undefined"===typeof e.id){if(!e.name||!(e.name in i.oids))throw(k=new Error("Extension ID not specified.")).extension=e,k;e.id=i.oids[e.name]}if("undefined"!==typeof e.value)return e;if("keyUsage"===e.name){var r=0,o=0,u=0;e.digitalSignature&&(o|=128,r=7),e.nonRepudiation&&(o|=64,r=6),e.keyEncipherment&&(o|=32,r=5),e.dataEncipherment&&(o|=16,r=4),e.keyAgreement&&(o|=8,r=3),e.keyCertSign&&(o|=4,r=2),e.cRLSign&&(o|=2,r=1),e.encipherOnly&&(o|=1,r=0),e.decipherOnly&&(u|=128,r=7);var c=String.fromCharCode(r);0!==u?c+=String.fromCharCode(o)+String.fromCharCode(u):0!==o&&(c+=String.fromCharCode(o)),e.value=a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,c)}else if("basicConstraints"===e.name)e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(a.create(a.Class.UNIVERSAL,a.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);var l=e.value.value;for(var f in e)!0===e[f]&&(f in s?l.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s[f]).getBytes())):-1!==f.indexOf(".")&&l.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(f).getBytes())))}else if("nsCertType"===e.name){r=0,o=0;e.client&&(o|=128,r=7),e.server&&(o|=64,r=6),e.email&&(o|=32,r=5),e.objsign&&(o|=16,r=4),e.reserved&&(o|=8,r=3),e.sslCA&&(o|=4,r=2),e.emailCA&&(o|=2,r=1),e.objCA&&(o|=1,r=0);c=String.fromCharCode(r);0!==o&&(c+=String.fromCharCode(o)),e.value=a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,c)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);for(var p=0;p<e.altNames.length;++p){c=(m=e.altNames[p]).value;if(7===m.type&&m.ip){if(null===(c=n.util.bytesFromIP(m.ip)))throw(k=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,k}else 8===m.type&&(c=m.oid?a.oidToDer(a.oidToDer(m.oid)):a.oidToDer(c));e.value.value.push(a.create(a.Class.CONTEXT_SPECIFIC,m.type,!1,c))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=a.create(a.Class.UNIVERSAL,a.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var h=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=h.toHex(),e.value=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,h.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);l=e.value.value;if(e.keyIdentifier){var d=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;l.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!1,d))}if(e.authorityCertIssuer){var v=[a.create(a.Class.CONTEXT_SPECIFIC,4,!0,[g(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];l.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,v))}if(e.serialNumber){var y=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);l.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if("cRLDistributionPoints"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);l=e.value.value;var m,b=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),w=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<e.altNames.length;++p){c=(m=e.altNames[p]).value;if(7===m.type&&m.ip){if(null===(c=n.util.bytesFromIP(m.ip)))throw(k=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,k}else 8===m.type&&(c=m.oid?a.oidToDer(a.oidToDer(m.oid)):a.oidToDer(c));w.value.push(a.create(a.Class.CONTEXT_SPECIFIC,m.type,!1,c))}b.value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(b)}var k;if("undefined"===typeof e.value)throw(k=new Error("Extension value not specified.")).extension=e,k;return e}function w(e,t){if(e===s["RSASSA-PSS"]){var r=[];return void 0!==t.hash.algorithmOid&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.hash.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.mgf.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.mgf.hash.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(t.saltLength).getBytes())])),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,r)}return a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")}function k(e){var t=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,i=0;i<r.length;++i){var s=r[i],o=s.value,u=a.Type.UTF8;"valueTagClass"in s&&(u=s.valueTagClass),u===a.Type.UTF8&&(o=n.util.encodeUtf8(o));var c=!1;"valueConstructed"in s&&(c=s.valueConstructed);var l=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.type).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,u,c,o)])]);t.value.push(l)}return t}i.certificateFromPem=function(e,t,r){var s=n.pem.decode(e)[0];if("CERTIFICATE"!==s.type&&"X509 CERTIFICATE"!==s.type&&"TRUSTED CERTIFICATE"!==s.type){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=s.type,o}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=a.fromDer(s.body,r);return i.certificateFromAsn1(u,t)},i.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:a.toDer(i.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var s=a.fromDer(t.body);return i.publicKeyFromAsn1(s)},i.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:a.toDer(i.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:a.toDer(i.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.getPublicKeyFingerprint=function(e,t){var r,s=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=a.toDer(i.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=a.toDer(i.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}s.start(),s.update(r);var o=s.digest();if("hex"===t.encoding){var u=o.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return o.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return o},i.certificationRequestFromPem=function(e,t,r){var s=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==s.type){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=s.type,o}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=a.fromDer(s.body,r);return i.certificationRequestFromAsn1(u,t)},i.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:a.toDer(i.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return h(e.issuer,t)},e.issuer.addField=function(t){m([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return h(e.subject,t)},e.subject.addField=function(t){m([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){m(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){m(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)b(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"===typeof t&&(t={name:t});for(var r,n=null,a=0;null===n&&a<e.extensions.length;++a)r=e.extensions[a],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var o=s[e.md.algorithm+"WithRSAEncryption"];if(!o){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=o,e.tbsCertificate=i.getTBSCertificate(e);var c=a.toDer(e.tbsCertificate);e.md.update(c.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,s=e.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=s.attributes,o.actualIssuer=n.attributes,o}var u=t.md;if(null===u){u=v({signatureOid:t.signatureOid,type:"certificate"});var c=t.tbsCertificate||i.getTBSCertificate(t),l=a.toDer(c);u.update(l.getBytes())}return null!==u&&(r=y({certificate:e,md:u,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,a=t.subject;if(n.hash&&a.hash)r=n.hash===a.hash;else if(n.attributes.length===a.attributes.length){var i,s;r=!0;for(var o=0;r&&o<n.attributes.length;++o)i=n.attributes[o],s=a.attributes[o],i.type===s.type&&i.value===s.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return i.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=s.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var a=e.extensions[r];if(a.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(a.subjectKeyIdentifier)===i}}return!1},e},i.certificateFromAsn1=function(e,t){var r={},s=[];if(!a.validate(e,c,r,s)){var o=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw o.errors=s,o}if(a.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=n.asn1.derToOid(r.certSignatureOid),u.signatureParameters=d(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var f=[];if(void 0!==r.certValidity1UTCTime&&f.push(a.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&f.push(a.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&f.push(a.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&f.push(a.generalizedTimeToDate(r.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=f[0],u.validity.notAfter=f[1],u.tbsCertificate=r.tbsCertificate,t){u.md=v({signatureOid:u.signatureOid,type:"certificate"});var p=a.toDer(u.tbsCertificate);u.md.update(p.getBytes())}var y=n.md.sha1.create(),g=a.toDer(r.certIssuer);y.update(g.getBytes()),u.issuer.getField=function(e){return h(u.issuer,e)},u.issuer.addField=function(e){m([e]),u.issuer.attributes.push(e)},u.issuer.attributes=i.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=y.digest().toHex();var b=n.md.sha1.create(),w=a.toDer(r.certSubject);return b.update(w.getBytes()),u.subject.getField=function(e){return h(u.subject,e)},u.subject.addField=function(e){m([e]),u.subject.attributes.push(e)},u.subject.attributes=i.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=b.digest().toHex(),r.certExtensions?u.extensions=i.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},i.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],a=0;a<n.value.length;++a)t.push(i.certificateExtensionFromAsn1(n.value[a]));return t},i.certificateExtensionFromAsn1=function(e){var t={};if(t.id=a.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===a.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in s)if(t.name=s[t.id],"keyUsage"===t.name){var r=0,i=0;(u=a.fromDer(t.value)).value.length>1&&(r=u.value.charCodeAt(1),i=u.value.length>2?u.value.charCodeAt(2):0),t.digitalSignature=128===(128&r),t.nonRepudiation=64===(64&r),t.keyEncipherment=32===(32&r),t.dataEncipherment=16===(16&r),t.keyAgreement=8===(8&r),t.keyCertSign=4===(4&r),t.cRLSign=2===(2&r),t.encipherOnly=1===(1&r),t.decipherOnly=128===(128&i)}else if("basicConstraints"===t.name){(u=a.fromDer(t.value)).value.length>0&&u.value[0].type===a.Type.BOOLEAN?t.cA=0!==u.value[0].value.charCodeAt(0):t.cA=!1;var o=null;u.value.length>0&&u.value[0].type===a.Type.INTEGER?o=u.value[0].value:u.value.length>1&&(o=u.value[1].value),null!==o&&(t.pathLenConstraint=a.derToInteger(o))}else if("extKeyUsage"===t.name)for(var u=a.fromDer(t.value),c=0;c<u.value.length;++c){var l=a.derToOid(u.value[c].value);l in s?t[s[l]]=!0:t[l]=!0}else if("nsCertType"===t.name){r=0;(u=a.fromDer(t.value)).value.length>1&&(r=u.value.charCodeAt(1)),t.client=128===(128&r),t.server=64===(64&r),t.email=32===(32&r),t.objsign=16===(16&r),t.reserved=8===(8&r),t.sslCA=4===(4&r),t.emailCA=2===(2&r),t.objCA=1===(1&r)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var f;t.altNames=[];u=a.fromDer(t.value);for(var p=0;p<u.value.length;++p){var h={type:(f=u.value[p]).type,value:f.value};switch(t.altNames.push(h),f.type){case 1:case 2:case 6:break;case 7:h.ip=n.util.bytesToIP(f.value);break;case 8:h.oid=a.derToOid(f.value)}}}else if("subjectKeyIdentifier"===t.name){u=a.fromDer(t.value);t.subjectKeyIdentifier=n.util.bytesToHex(u.value)}return t},i.certificationRequestFromAsn1=function(e,t){var r={},s=[];if(!a.validate(e,p,r,s)){var o=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw o.errors=s,o}if(a.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=d(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,t){u.md=v({signatureOid:u.signatureOid,type:"certification request"});var c=a.toDer(u.certificationRequestInfo);u.md.update(c.getBytes())}var l=n.md.sha1.create();return u.subject.getField=function(e){return h(u.subject,e)},u.subject.addField=function(e){m([e]),u.subject.attributes.push(e)},u.subject.attributes=i.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),u.subject.hash=l.digest().toHex(),u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(e){return h(u,e)},u.addAttribute=function(e){m([e]),u.attributes.push(e)},u.attributes=i.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},i.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return h(e.subject,t)},e.subject.addField=function(t){m([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return h(e,t)},e.addAttribute=function(t){m([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){m(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){m(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var o=s[e.md.algorithm+"WithRSAEncryption"];if(!o){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=o,e.certificationRequestInfo=i.getCertificationRequestInfo(e);var c=a.toDer(e.certificationRequestInfo);e.md.update(c.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=v({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||i.getCertificationRequestInfo(e),s=a.toDer(n);r.update(s.getBytes())}return null!==r&&(t=y({certificate:e,md:r,signature:e.signature})),t},e};var x=new Date("1950-01-01T00:00:00Z"),_=new Date("2050-01-01T00:00:00Z");function E(e){return e>=x&&e<_?a.create(a.Class.UNIVERSAL,a.Type.UTCTIME,!1,a.dateToUtcTime(e)):a.create(a.Class.UNIVERSAL,a.Type.GENERALIZEDTIME,!1,a.dateToGeneralizedTime(e))}i.getTBSCertificate=function(e){var t=E(e.validity.notBefore),r=E(e.validity.notAfter),s=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes())]),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.siginfo.algorithmOid).getBytes()),w(e.siginfo.algorithmOid,e.siginfo.parameters)]),g(e.issuer),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,r]),g(e.subject),i.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&s.value.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&s.value.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!0,[a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&s.value.push(i.certificateExtensionsToAsn1(e.extensions)),s},i.getCertificationRequestInfo=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),g(e.subject),i.publicKeyToAsn1(e.publicKey),k(e)])},i.distinguishedNameToAsn1=function(e){return g(e)},i.certificateToAsn1=function(e){var t=e.tbsCertificate||i.getTBSCertificate(e);return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},i.certificateExtensionsToAsn1=function(e){var t=a.create(a.Class.CONTEXT_SPECIFIC,3,!0,[]),r=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(i.certificateExtensionToAsn1(e[n]));return t},i.certificateExtensionToAsn1=function(e){var t=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.id).getBytes())),e.critical&&t.value.push(a.create(a.Class.UNIVERSAL,a.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!==typeof e.value&&(r=a.toDer(r).getBytes()),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r)),t},i.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||i.getCertificationRequestInfo(e);return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},i.createCaStore=function(e){var t={certs:{}};function r(e){return s(e),t.certs[e.hash]||null}function s(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=i.RDNAttributesAsArray(g(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),s(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var s=a.toDer(i.certificateToAsn1(e)).getBytes(),o=0;o<t.length;++o){if(s===a.toDer(i.certificateToAsn1(t[o])).getBytes())return!0}return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var a=t.certs[r];if(n.util.isArray(a))for(var i=0;i<a.length;++i)e.push(a[i]);else e.push(a)}return e},t.removeCertificate=function(e){var o;if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),s(e.subject),!t.hasCertificate(e))return null;var u=r(e.subject);if(!n.util.isArray(u))return o=t.certs[e.subject.hash],delete t.certs[e.subject.hash],o;for(var c=a.toDer(i.certificateToAsn1(e)).getBytes(),l=0;l<u.length;++l){c===a.toDer(i.certificateToAsn1(u[l])).getBytes()&&(o=u[l],u.splice(l,1))}return 0===u.length&&delete t.certs[e.subject.hash],o},e)for(var o=0;o<e.length;++o){var u=e[o];t.addCertificate(u)}return t},i.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},i.verifyCertificateChain=function(e,t,r){"function"===typeof r&&(r={verify:r}),r=r||{};var a=(t=t.slice(0)).slice(0),s=r.validityCheckDate;"undefined"===typeof s&&(s=new Date);var o=!0,u=null,c=0;do{var l=t.shift(),f=null,p=!1;if(s&&(s<l.validity.notBefore||s>l.validity.notAfter)&&(u={message:"Certificate is not valid yet or has expired.",error:i.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:s}),null===u){if(null===(f=t[0]||e.getIssuer(l))&&l.isIssuer(l)&&(p=!0,f=l),f){var h=f;n.util.isArray(h)||(h=[h]);for(var d=!1;!d&&h.length>0;){f=h.shift();try{d=f.verify(l)}catch(x){}}d||(u={message:"Certificate signature is invalid.",error:i.certificateError.bad_certificate})}null!==u||f&&!p||e.hasCertificate(l)||(u={message:"Certificate is not trusted.",error:i.certificateError.unknown_ca})}if(null===u&&f&&!l.isIssuer(f)&&(u={message:"Certificate issuer is invalid.",error:i.certificateError.bad_certificate}),null===u)for(var v={keyUsage:!0,basicConstraints:!0},y=0;null===u&&y<l.extensions.length;++y){var g=l.extensions[y];g.critical&&!(g.name in v)&&(u={message:"Certificate has an unsupported critical extension.",error:i.certificateError.unsupported_certificate})}if(null===u&&(!o||0===t.length&&(!f||p))){var m=l.getExtension("basicConstraints"),b=l.getExtension("keyUsage");if(null!==b&&(b.keyCertSign&&null!==m||(u={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:i.certificateError.bad_certificate})),null!==u||null===m||m.cA||(u={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:i.certificateError.bad_certificate}),null===u&&null!==b&&"pathLenConstraint"in m)c-1>m.pathLenConstraint&&(u={message:"Certificate basicConstraints pathLenConstraint violated.",error:i.certificateError.bad_certificate})}var w=null===u||u.error,k=r.verify?r.verify(w,c,a):w;if(!0!==k)throw!0===w&&(u={message:"The application rejected the certificate.",error:i.certificateError.bad_certificate}),(k||0===k)&&("object"!==typeof k||n.util.isArray(k)?"string"===typeof k&&(u.error=k):(k.message&&(u.message=k.message),k.error&&(u.error=k.error))),u;u=null,o=!1,++c}while(t.length>0);return!0}},9879:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(5125),s=r(2673);e.exports=function(){"use strict";function e(){n(this,e),this._buffer=new i,this._waitingConsumers=new i}return a(e,[{key:"push",value:function(e){var t=s(),r=t.promise,n=t.resolve;return this._buffer.push({chunk:e,resolve:n}),this._consume(),r}},{key:"_consume",value:function(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){var e=this._waitingConsumers.shift(),t=this._buffer.shift();e.resolve(t.chunk),t.resolve()}}},{key:"shift",value:function(){var e=s(),t=e.promise,r=e.resolve;return this._waitingConsumers.push({resolve:r}),this._consume(),t}},{key:"isEmpty",value:function(){return this._buffer.isEmpty()}}]),e}()},2673:function(e){"use strict";e.exports=function(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}},9674:function(e){"use strict";e.exports=function(e,t){return t=t||function(){},e.then((function(e){return new Promise((function(e){e(t())})).then((function(){return e}))}),(function(e){return new Promise((function(e){e(t())})).then((function(){throw e}))}))}},3931:function(e,t,r){"use strict";e.exports=r(3794).default},3794:function(e,t,r){"use strict";var n=r(4704).default,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(7922),s=a(r(8974)),o=a(r(2795)),u=r(7201),c=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((function(e){return new i.Netmask(e)}));function l(e){return/^::$/.test(e)||/^::1$/.test(e)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}t.default=function(e){if((0,u.isValid)(e)){var t=(0,u.parse)(e);if("ipv4"===t.kind())return function(e){var t,r=n(c);try{for(r.s();!(t=r.n()).done;)if(t.value.contains(e))return!0}catch(a){r.e(a)}finally{r.f()}return!1}(t.toNormalizedString());if("ipv6"===t.kind())return l(e)}else if((0,o.default)(e)&&s.default.v6().test(e))return l(e)}},8541:function(e){"use strict";var t;e.exports.timeout=function(e,r){var n,a=new t;return Promise.race([e,new Promise((function(e,t){n=setTimeout((function(){t(a)}),r)}))]).then((function(e){return clearTimeout(n),e}),(function(e){throw clearTimeout(n),e}))};(t=e.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"}).prototype=Object.create(Error.prototype),t.prototype.name="TimeoutError"},886:function(e,t,r){"use strict";e.exports=r(4722)},4722:function(e,t,r){"use strict";var n=t;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(7063),n.BufferWriter=r(2815),n.Reader=r(6216),n.BufferReader=r(3557),n.util=r(3097),n.rpc=r(9994),n.roots=r(7907),n.configure=a,a()},6216:function(e,t,r){"use strict";e.exports=u;var n,a=r(3097),i=a.LongBits,s=a.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},l=function(){return a.Buffer?function(e){return(u.create=function(e){return a.Buffer.isBuffer(e)?new n(e):c(e)})(e)}:c};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw o(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}u.create=l(),u.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,u.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return p(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|p(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw o(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){n=e,u.create=l(),n._configure();var t=a.Long?"toLong":"toNumber";a.merge(u.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},3557:function(e,t,r){"use strict";e.exports=i;var n=r(6216);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(3097);function i(e){n.call(this,e)}i._configure=function(){a.Buffer&&(i.prototype._slice=a.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},7907:function(e){"use strict";e.exports={}},9994:function(e,t,r){"use strict";t.Service=r(4281)},4281:function(e,t,r){"use strict";e.exports=a;var n=r(3097);function a(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a,a.prototype.rpcCall=function e(t,r,a,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return n.asPromise(e,o,t,r,a,i);if(o.rpcImpl)try{return o.rpcImpl(t,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return o.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof a))try{r=a[o.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return o.emit("error",e,t),s(e)}return o.emit("data",r,t),s(null,r)}o.end(!0)}))}catch(u){return o.emit("error",u,t),void setTimeout((function(){s(u)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},a.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},9351:function(e,t,r){"use strict";e.exports=a;var n=r(3097);function a(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=a.zero=new a(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new a(r,n)},a.from=function(e){if("number"===typeof e)return a.fromNumber(e);if(n.isString(e)){if(!n.Long)return a.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new a(e.low>>>0,e.high>>>0):i},a.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},a.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;a.fromHash=function(e){return e===s?i:new a((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},a.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},a.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},3097:function(e,t,r){"use strict";var n=t;function a(e,t,r){for(var n=Object.keys(t),a=0;a<n.length;++a)void 0!==e[n[a]]&&r||(e[n[a]]=t[n[a]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&a(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(7206),n.base64=r(1),n.EventEmitter=r(7111),n.float=r(802),n.inquire=r(7172),n.utf8=r(3861),n.pool=r(8236),n.LongBits=r(9351),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=a,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},7063:function(e,t,r){"use strict";e.exports=f;var n,a=r(3097),i=a.LongBits,s=a.base64,o=a.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var p=function(){return a.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function h(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function v(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=p(),f.alloc=function(e){return new a.Array(e)},a.Array!==Array&&(f.alloc=a.pool(f.alloc,a.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},d.prototype=Object.create(u.prototype),d.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(v,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(v,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(v,t.length(),t)},f.prototype.bool=function(e){return this._push(h,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(a.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(a.float.writeDoubleLE,8,e)};var g=a.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(a.isString(e)){var r=f.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(g,t,e)},f.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(h,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){n=e,f.create=p(),n._configure()}},2815:function(e,t,r){"use strict";e.exports=i;var n=r(7063);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(3097);function i(){n.call(this)}function s(e,t,r){e.length<40?a.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=a._Buffer_allocUnsafe,i.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&"set"===a.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){a.isString(e)&&(e=a._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},4183:function(e,t,r){var n;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:r.g):function(e){return(n||(n=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))}},760:function(e,t,r){var n=r(9361).instantiate;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return n(new Response(new Blob([t],{type:"application/wasm"})),e)}a.supported="undefined"!==typeof WebAssembly,e.exports=a},8729:function(e,t,r){var n=r(7061).default,a=r(7156).default,i=r(2983),s=r(760),o=function(){var e=a(n().mark((function e(t,r,a,o,u){var c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return c=e.sent,e.abrupt("return",new i(c,t,r,a,o,u));case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}();e.exports={Rabin:i,create:o}},2983:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=function(){"use strict";function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8192,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32768,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:64,o=arguments.length>5?arguments[5]:void 0;n(this,e),this.bits=r,this.min=a,this.max=i,this.asModule=t,this.rabin=new t.Rabin(r,a,i,s,o),this.polynomial=o}return a(e,[{key:"fingerprint",value:function(e){var t=this.asModule,r=t.__retain,n=t.__release,a=t.__allocArray,i=t.__getInt32Array,s=t.Int32Array_ID,o=t.Uint8Array_ID,u=r(a(s,new Int32Array(Math.ceil(e.length/this.min)))),c=r(a(o,e)),l=i(this.rabin.fingerprint(c,u));n(c),n(u);var f=l.indexOf(0);return f>=0?l.subarray(0,f):l}}]),e}();e.exports=i},2525:function(e,t,r){"use strict";var n=65536,a=4294967295;var i=r(2543).Buffer,s=r.g.crypto||r.g.msCrypto;s&&s.getRandomValues?e.exports=function(e,t){if(e>a)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(e>0)if(e>n)for(var o=0;o<e;o+=n)s.getRandomValues(r.slice(o,o+n));else s.getRandomValues(r);if("function"===typeof t)return process.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},4463:function(e,t,r){"use strict";var n=r(2791),a=r(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},d={};function v(e,t,r,n,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}function b(e,t,r,n){var a=y.hasOwnProperty(t)?y[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!f.call(d,e)||!f.call(h,e)&&(p.test(e)?d[e]=!0:(h[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,m);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,m);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,m);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var B,L=Object.assign;function M(e){if(void 0===B)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=n.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o]){var u="\n"+a[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=s&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?M(e):""}function F(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case E:return"StrictMode";case Z:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(r){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=q(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=K(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var r=K(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&G(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+K(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:K(r)}}function ie(e,t){var r=K(t.value),n=K(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function ve(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ye(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=ve(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(he).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Se(e){if(e=ba(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=ka(t),xe(e.stateNode,e.type,t))}}function Ae(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ze(){}var Re=!1;function Te(e,t,r){if(Re)return e(t,r);Re=!0;try{return Ce(e,t,r)}finally{Re=!1,(null!==_e||null!==Ee)&&(Ze(),Ie())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=ka(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Pe=!1;if(l)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(le){Pe=!1}function Oe(e,t,r,n,a,i,s,o,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(l){this.onError(l)}}var Be=!1,Le=null,Me=!1,Ue=null,je={onError:function(e){Be=!0,Le=e}};function Fe(e,t,r,n,a,i,s,o,u){Be=!1,Le=null,Oe.apply(je,arguments)}function ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(i(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(n=a.return)){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return Ke(a),e;if(s===n)return Ke(a),t;s=s.sibling}throw Error(i(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,u=a.child;u;){if(u===r){o=!0,r=a,n=s;break}if(u===n){o=!0,n=a,r=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===r){o=!0,r=s,n=a;break}if(u===n){o=!0,n=s,r=a;break}u=u.sibling}if(!o)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Je=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,it=null;var st=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/ut|0)|0},ot=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=268435455&r;if(0!==s){var o=s&~a;0!==o?n=ft(o):0!==(i&=s)&&(n=ft(i))}else 0!==(s=r&~a)?n=ft(s):0!==i&&(n=ft(i));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-st(t)),n|=e[r],t&=~a;return n}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function mt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-st(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,xt,_t,Et,St,At=!1,It=[],Ct=null,Zt=null,Rt=null,Tt=new Map,Dt=new Map,Pt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Bt(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&xt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ma(e.target);if(null!==t){var r=ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void St(e.priority,(function(){_t(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ba(r))&&xt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);we=n,r.target.dispatchEvent(n),we=null,t.shift()}return!0}function Ut(e,t,r){Mt(e)&&r.delete(t)}function jt(){At=!1,null!==Ct&&Mt(Ct)&&(Ct=null),null!==Zt&&Mt(Zt)&&(Zt=null),null!==Rt&&Mt(Rt)&&(Rt=null),Tt.forEach(Ut),Dt.forEach(Ut)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Ft(t,e)}if(0<It.length){Ft(It[0],e);for(var r=1;r<It.length;r++){var n=It[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Ct&&Ft(Ct,e),null!==Zt&&Ft(Zt,e),null!==Rt&&Ft(Rt,e),Tt.forEach(t),Dt.forEach(t),r=0;r<Pt.length;r++)(n=Pt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Pt.length&&null===(r=Pt[0]).blockedOn;)Lt(r),null===r.blockedOn&&Pt.shift()}var Vt=w.ReactCurrentBatchConfig,Kt=!0;function qt(e,t,r,n){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=1,Wt(e,t,r,n)}finally{bt=a,Vt.transition=i}}function Ht(e,t,r,n){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=4,Wt(e,t,r,n)}finally{bt=a,Vt.transition=i}}function Wt(e,t,r,n){if(Kt){var a=Yt(e,t,r,n);if(null===a)Kn(e,t,n,Gt,r),Ot(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Ct=Bt(Ct,e,t,r,n,a),!0;case"dragenter":return Zt=Bt(Zt,e,t,r,n,a),!0;case"mouseover":return Rt=Bt(Rt,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Tt.set(i,Bt(Tt.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Dt.set(i,Bt(Dt.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Ot(e,n),4&t&&-1<Nt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&kt(i),null===(i=Yt(e,t,r,n))&&Kn(e,t,n,Gt,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else Kn(e,t,n,null,r)}}var Gt=null;function Yt(e,t,r,n){if(Gt=null,null!==(e=ma(e=ke(n))))if(null===(t=ze(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,$t=null;function er(){if($t)return $t;var e,t,r=Xt,n=r.length,a="value"in Jt?Jt.value:Jt.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,i){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,sr,or,ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(ur),lr=L({},ur,{view:0,detail:0}),fr=ar(lr),pr=L({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ir=e.screenX-or.screenX,sr=e.screenY-or.screenY):sr=ir=0,or=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),hr=ar(pr),dr=ar(L({},pr,{dataTransfer:0})),vr=ar(L({},lr,{relatedTarget:0})),yr=ar(L({},ur,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=L({},ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mr=ar(gr),br=ar(L({},ur,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xr[e])&&!!t[e]}function Er(){return _r}var Sr=L({},lr,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ar=ar(Sr),Ir=ar(L({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cr=ar(L({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Zr=ar(L({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rr=L({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=ar(Rr),Dr=[9,13,27,32],Pr=l&&"CompositionEvent"in window,Nr=null;l&&"documentMode"in document&&(Nr=document.documentMode);var Or=l&&"TextEvent"in window&&!Nr,Br=l&&(!Pr||Nr&&8<Nr&&11>=Nr),Lr=String.fromCharCode(32),Mr=!1;function Ur(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fr=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function Kr(e,t,r,n){Ae(n),0<(t=Hn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qr=null,Hr=null;function Wr(e){Mn(e,0)}function Gr(e){if(W(wa(e)))return e}function Yr(e,t){if("change"===e)return t}var Qr=!1;if(l){var Jr;if(l){var Xr="oninput"in document;if(!Xr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Xr="function"===typeof $r.oninput}Jr=Xr}else Jr=!1;Qr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){qr&&(qr.detachEvent("onpropertychange",tn),Hr=qr=null)}function tn(e){if("value"===e.propertyName&&Gr(Hr)){var t=[];Kr(t,Hr,e,ke(e)),Te(Wr,t)}}function rn(e,t,r){"focusin"===e?(en(),Hr=r,(qr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Hr)}function an(e,t){if("click"===e)return Gr(t)}function sn(e,t){if("input"===e||"change"===e)return Gr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function un(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!f.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ln(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function fn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pn(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=G((e=t.contentWindow).document)}return t}function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function dn(e){var t=pn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fn(r.ownerDocument.documentElement,r)){if(null!==n&&hn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=void 0===n.end?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=ln(r,i);var s=ln(r,n);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vn=l&&"documentMode"in document&&11>=document.documentMode,yn=null,gn=null,mn=null,bn=!1;function wn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==yn||yn!==G(n)||("selectionStart"in(n=yn)&&hn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},mn&&un(mn,n)||(mn=n,0<(n=Hn(gn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yn)))}function kn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xn={animationend:kn("Animation","AnimationEnd"),animationiteration:kn("Animation","AnimationIteration"),animationstart:kn("Animation","AnimationStart"),transitionend:kn("Transition","TransitionEnd")},_n={},En={};function Sn(e){if(_n[e])return _n[e];if(!xn[e])return e;var t,r=xn[e];for(t in r)if(r.hasOwnProperty(t)&&t in En)return _n[e]=r[t];return e}l&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var An=Sn("animationend"),In=Sn("animationiteration"),Cn=Sn("animationstart"),Zn=Sn("transitionend"),Rn=new Map,Tn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){Rn.set(e,t),u(t,[e])}for(var Pn=0;Pn<Tn.length;Pn++){var Nn=Tn[Pn];Dn(Nn.toLowerCase(),"on"+(Nn[0].toUpperCase()+Nn.slice(1)))}Dn(An,"onAnimationEnd"),Dn(In,"onAnimationIteration"),Dn(Cn,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(Zn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bn=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function Ln(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,s,o,u,c){if(Fe.apply(this,arguments),Be){if(!Be)throw Error(i(198));var l=Le;Be=!1,Le=null,Me||(Me=!0,Ue=l)}}(n,t,void 0,e),e.currentTarget=null}function Mn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==i&&a.isPropagationStopped())break e;Ln(a,o,c),i=u}else for(s=0;s<n.length;s++){if(u=(o=n[s]).instance,c=o.currentTarget,o=o.listener,u!==i&&a.isPropagationStopped())break e;Ln(a,o,c),i=u}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Un(e,t){var r=t[va];void 0===r&&(r=t[va]=new Set);var n=e+"__bubble";r.has(n)||(Vn(t,e,2,!1),r.add(n))}function jn(e,t,r){var n=0;t&&(n|=4),Vn(r,e,n,t)}var Fn="_reactListening"+Math.random().toString(36).slice(2);function zn(e){if(!e[Fn]){e[Fn]=!0,s.forEach((function(t){"selectionchange"!==t&&(Bn.has(t)||jn(t,!1,e),jn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fn]||(t[Fn]=!0,jn("selectionchange",!1,t))}}function Vn(e,t,r,n){switch(Qt(t)){case 1:var a=qt;break;case 4:a=Ht;break;default:a=Wt}r=a.bind(null,t,r,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Kn(e,t,r,n,a){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=n.return;null!==s;){var u=s.tag;if((3===u||4===u)&&((u=s.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=ma(o)))return;if(5===(u=s.tag)||6===u){n=i=s;continue e}o=o.parentNode}}n=n.return}Te((function(){var n=i,a=ke(r),s=[];e:{var o=Rn.get(e);if(void 0!==o){var u=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":u=Ar;break;case"focusin":c="focus",u=vr;break;case"focusout":c="blur",u=vr;break;case"beforeblur":case"afterblur":u=vr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=dr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Cr;break;case An:case In:case Cn:u=yr;break;case Zn:u=Zr;break;case"scroll":u=fr;break;case"wheel":u=Tr;break;case"copy":case"cut":case"paste":u=mr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ir}var l=0!==(4&t),f=!l&&"scroll"===e,p=l?null!==o?o+"Capture":null:o;l=[];for(var h,d=n;null!==d;){var v=(h=d).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==p&&(null!=(v=De(d,p))&&l.push(qn(d,v,h)))),f)break;d=d.return}0<l.length&&(o=new u(o,c,null,r,a),s.push({event:o,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===we||!(c=r.relatedTarget||r.fromElement)||!ma(c)&&!c[da])&&(u||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,u?(u=n,null!==(c=(c=r.relatedTarget||r.toElement)?ma(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=n),u!==c)){if(l=hr,v="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(l=Ir,v="onPointerLeave",p="onPointerEnter",d="pointer"),f=null==u?o:wa(u),h=null==c?o:wa(c),(o=new l(v,d+"leave",u,r,a)).target=f,o.relatedTarget=h,v=null,ma(a)===n&&((l=new l(p,d+"enter",c,r,a)).target=h,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(p=c,d=0,h=l=u;h;h=Wn(h))d++;for(h=0,v=p;v;v=Wn(v))h++;for(;0<d-h;)l=Wn(l),d--;for(;0<h-d;)p=Wn(p),h--;for(;d--;){if(l===p||null!==p&&l===p.alternate)break e;l=Wn(l),p=Wn(p)}l=null}else l=null;null!==u&&Gn(s,o,u,l,!1),null!==c&&null!==f&&Gn(s,f,c,l,!0)}if("select"===(u=(o=n?wa(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===u&&"file"===o.type)var y=Yr;else if(Vr(o))if(Qr)y=sn;else{y=nn;var g=rn}else(u=o.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(y=an);switch(y&&(y=y(e,n))?Kr(s,y,r,a):(g&&g(e,o,n),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=n?wa(n):window,e){case"focusin":(Vr(g)||"true"===g.contentEditable)&&(yn=g,gn=n,mn=null);break;case"focusout":mn=gn=yn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,wn(s,r,a);break;case"selectionchange":if(vn)break;case"keydown":case"keyup":wn(s,r,a)}var m;if(Pr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Fr?Ur(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Br&&"ko"!==r.locale&&(Fr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Fr&&(m=er()):(Xt="value"in(Jt=a)?Jt.value:Jt.textContent,Fr=!0)),0<(g=Hn(n,b)).length&&(b=new br(b,e,null,r,a),s.push({event:b,listeners:g}),m?b.data=m:null!==(m=jr(r))&&(b.data=m))),(m=Or?function(e,t){switch(e){case"compositionend":return jr(t);case"keypress":return 32!==t.which?null:(Mr=!0,Lr);case"textInput":return(e=t.data)===Lr&&Mr?null:e;default:return null}}(e,r):function(e,t){if(Fr)return"compositionend"===e||!Pr&&Ur(e,t)?(e=er(),$t=Xt=Jt=null,Fr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Br&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Hn(n,"onBeforeInput")).length&&(a=new br("onBeforeInput","beforeinput",null,r,a),s.push({event:a,listeners:n}),a.data=m))}Mn(s,t)}))}function qn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=De(e,r))&&n.unshift(qn(e,i,a)),null!=(i=De(e,t))&&n.push(qn(e,i,a))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gn(e,t,r,n,a){for(var i=t._reactName,s=[];null!==r&&r!==n;){var o=r,u=o.alternate,c=o.stateNode;if(null!==u&&u===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(u=De(r,i))&&s.unshift(qn(r,u,o)):a||null!=(u=De(r,i))&&s.push(qn(r,u,o))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Yn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Yn,"\n").replace(Qn,"")}function Xn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(i(425))}function $n(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,sa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout((function(){throw e}))}function ua(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void zt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),pa="__reactFiber$"+fa,ha="__reactProps$"+fa,da="__reactContainer$"+fa,va="__reactEvents$"+fa,ya="__reactListeners$"+fa,ga="__reactHandles$"+fa;function ma(e){var t=e[pa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[da]||r[pa]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=la(e);null!==e;){if(r=e[pa])return r;e=la(e)}return t}r=(e=r).parentNode}return null}function ba(e){return!(e=e[pa]||e[da])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ka(e){return e[ha]||null}var xa=[],_a=-1;function Ea(e){return{current:e}}function Sa(e){0>_a||(e.current=xa[_a],xa[_a]=null,_a--)}function Aa(e,t){_a++,xa[_a]=e.current,e.current=t}var Ia={},Ca=Ea(Ia),Za=Ea(!1),Ra=Ia;function Ta(e,t){var r=e.type.contextTypes;if(!r)return Ia;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in r)i[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){Sa(Za),Sa(Ca)}function Na(e,t,r){if(Ca.current!==Ia)throw Error(i(168));Aa(Ca,t),Aa(Za,r)}function Oa(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(i(108,V(e)||"Unknown",a));return L({},r,n)}function Ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ia,Ra=Ca.current,Aa(Ca,e),Aa(Za,Za.current),!0}function La(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=Oa(e,t,Ra),n.__reactInternalMemoizedMergedChildContext=e,Sa(Za),Sa(Ca),Aa(Ca,e)):Sa(Za),Aa(Za,r)}var Ma=null,Ua=!1,ja=!1;function Fa(e){null===Ma?Ma=[e]:Ma.push(e)}function za(){if(!ja&&null!==Ma){ja=!0;var e=0,t=bt;try{var r=Ma;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ma=null,Ua=!1}catch(a){throw null!==Ma&&(Ma=Ma.slice(e+1)),We($e,za),a}finally{bt=t,ja=!1}}return null}var Va=[],Ka=0,qa=null,Ha=0,Wa=[],Ga=0,Ya=null,Qa=1,Ja="";function Xa(e,t){Va[Ka++]=Ha,Va[Ka++]=qa,qa=e,Ha=t}function $a(e,t,r){Wa[Ga++]=Qa,Wa[Ga++]=Ja,Wa[Ga++]=Ya,Ya=e;var n=Qa;e=Ja;var a=32-st(n)-1;n&=~(1<<a),r+=1;var i=32-st(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Qa=1<<32-st(t)+a|r<<a|n,Ja=i+e}else Qa=1<<i|r<<a|n,Ja=e}function ei(e){null!==e.return&&(Xa(e,1),$a(e,1,0))}function ti(e){for(;e===qa;)qa=Va[--Ka],Va[Ka]=null,Ha=Va[--Ka],Va[Ka]=null;for(;e===Ya;)Ya=Wa[--Ga],Wa[Ga]=null,Ja=Wa[--Ga],Wa[Ga]=null,Qa=Wa[--Ga],Wa[Ga]=null}var ri=null,ni=null,ai=!1,ii=null;function si(e,t){var r=Tc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function oi(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,ni=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ya?{id:Qa,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Tc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ri=e,ni=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ni;if(t){var r=t;if(!oi(e,t)){if(ui(e))throw Error(i(418));t=ca(r.nextSibling);var n=ri;t&&oi(e,t)?si(n,r):(e.flags=-4097&e.flags|2,ai=!1,ri=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ri=e}}}function li(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function fi(e){if(e!==ri)return!1;if(!ai)return li(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ni)){if(ui(e))throw pi(),Error(i(418));for(;t;)si(e,t),t=ca(t.nextSibling)}if(li(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ni=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ni=null}}else ni=ri?ca(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ni;e;)e=ca(e.nextSibling)}function hi(){ni=ri=null,ai=!1}function di(e){null===ii?ii=[e]:ii.push(e)}var vi=w.ReactCurrentBatchConfig;function yi(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var gi=Ea(null),mi=null,bi=null,wi=null;function ki(){wi=bi=mi=null}function xi(e){var t=gi.current;Sa(gi),e._currentValue=t}function _i(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ei(e,t){mi=e,wi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Si(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===mi)throw Error(i(308));bi=e,mi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ai=null;function Ii(e){null===Ai?Ai=[e]:Ai.push(e)}function Ci(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Ii(t)):(r.next=a.next,a.next=r),t.interleaved=r,Zi(e,n)}function Zi(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ri=!1;function Ti(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ni(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Cu)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Zi(e,r)}return null===(a=n.interleaved)?(t.next=t,Ii(n)):(t.next=a.next,a.next=t),n.interleaved=t,Zi(e,r)}function Oi(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,mt(e,r)}}function Bi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?a=i=s:i=i.next=s,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Li(e,t,r,n){var a=e.updateQueue;Ri=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var u=o,c=u.next;u.next=null,null===s?i=c:s.next=c,s=u;var l=e.alternate;null!==l&&((o=(l=l.updateQueue).lastBaseUpdate)!==s&&(null===o?l.firstBaseUpdate=c:o.next=c,l.lastBaseUpdate=u))}if(null!==i){var f=a.baseState;for(s=0,l=c=u=null,o=i;;){var p=o.lane,h=o.eventTime;if((n&p)===p){null!==l&&(l=l.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,v=o;switch(p=t,h=r,v.tag){case 1:if("function"===typeof(d=v.payload)){f=d.call(h,f,p);break e}f=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(p="function"===typeof(d=v.payload)?d.call(h,f,p):d)||void 0===p)break e;f=L({},f,p);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===l?(c=l=h,u=f):l=l.next=h,s|=p;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===l&&(u=f),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Bu|=s,e.lanes=s,e.memoizedState=f}}function Mi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(i(191,a));a.call(n)}}}var Ui=(new n.Component).refs;function ji(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Fi={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),i=Pi(n,a);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Ni(e,i,a))&&(rc(t,e,a,n),Oi(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),i=Pi(n,a);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Ni(e,i,a))&&(rc(t,e,a,n),Oi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Pi(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Ni(e,a,n))&&(rc(t,e,n,r),Oi(t,e,n))}};function zi(e,t,r,n,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!un(r,n)||!un(a,i))}function Vi(e,t,r){var n=!1,a=Ia,i=t.contextType;return"object"===typeof i&&null!==i?i=Si(i):(a=Da(t)?Ra:Ca.current,i=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ta(e,a):Ia),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Fi,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ki(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Fi.enqueueReplaceState(t,t.state,null)}function qi(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=Ui,Ti(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Si(i):(i=Da(t)?Ra:Ca.current,a.context=Ta(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ji(e,t,i,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Fi.enqueueReplaceState(a,a.state,null),Li(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Hi(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var a=n,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=a.refs;t===Ui&&(t=a.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gi(e){return(0,e._init)(e._payload)}function Yi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,r,n){return null===t||6!==t.tag?((t=Lc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===_?f(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&Gi(i)===t.type)?((n=a(t,r.props)).ref=Hi(e,t,r),n.return=e,n):((n=Nc(r.type,r.key,r.props,null,e.mode,n)).ref=Hi(e,t,r),n.return=e,n)}function l(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Mc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function f(e,t,r,n,i){return null===t||7!==t.tag?((t=Oc(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function p(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(r=Nc(t.type,t.key,t.props,null,e.mode,r)).ref=Hi(e,null,t),r.return=e,r;case x:return(t=Mc(t,e.mode,r)).return=e,t;case D:return p(e,(0,t._init)(t._payload),r)}if(te(t)||O(t))return(t=Oc(t,e.mode,r,null)).return=e,t;Wi(e,t)}return null}function h(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:u(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return r.key===a?c(e,t,r,n):null;case x:return r.key===a?l(e,t,r,n):null;case D:return h(e,t,(a=r._init)(r._payload),n)}if(te(r)||O(r))return null!==a?null:f(e,t,r,n,null);Wi(e,r)}return null}function d(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return u(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case x:return l(t,e=e.get(null===n.key?r:n.key)||null,n,a);case D:return d(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||O(n))return f(t,e=e.get(r)||null,n,a,null);Wi(t,n)}return null}function v(a,i,o,u){for(var c=null,l=null,f=i,v=i=0,y=null;null!==f&&v<o.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var g=h(a,f,o[v],u);if(null===g){null===f&&(f=y);break}e&&f&&null===g.alternate&&t(a,f),i=s(g,i,v),null===l?c=g:l.sibling=g,l=g,f=y}if(v===o.length)return r(a,f),ai&&Xa(a,v),c;if(null===f){for(;v<o.length;v++)null!==(f=p(a,o[v],u))&&(i=s(f,i,v),null===l?c=f:l.sibling=f,l=f);return ai&&Xa(a,v),c}for(f=n(a,f);v<o.length;v++)null!==(y=d(f,a,v,o[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),i=s(y,i,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(a,e)})),ai&&Xa(a,v),c}function y(a,o,u,c){var l=O(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var f=l=null,v=o,y=o=0,g=null,m=u.next();null!==v&&!m.done;y++,m=u.next()){v.index>y?(g=v,v=null):g=v.sibling;var b=h(a,v,m.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(a,v),o=s(b,o,y),null===f?l=b:f.sibling=b,f=b,v=g}if(m.done)return r(a,v),ai&&Xa(a,y),l;if(null===v){for(;!m.done;y++,m=u.next())null!==(m=p(a,m.value,c))&&(o=s(m,o,y),null===f?l=m:f.sibling=m,f=m);return ai&&Xa(a,y),l}for(v=n(a,v);!m.done;y++,m=u.next())null!==(m=d(v,a,y,m.value,c))&&(e&&null!==m.alternate&&v.delete(null===m.key?y:m.key),o=s(m,o,y),null===f?l=m:f.sibling=m,f=m);return e&&v.forEach((function(e){return t(a,e)})),ai&&Xa(a,y),l}return function e(n,i,s,u){if("object"===typeof s&&null!==s&&s.type===_&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case k:e:{for(var c=s.key,l=i;null!==l;){if(l.key===c){if((c=s.type)===_){if(7===l.tag){r(n,l.sibling),(i=a(l,s.props.children)).return=n,n=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Gi(c)===l.type){r(n,l.sibling),(i=a(l,s.props)).ref=Hi(n,l,s),i.return=n,n=i;break e}r(n,l);break}t(n,l),l=l.sibling}s.type===_?((i=Oc(s.props.children,n.mode,u,s.key)).return=n,n=i):((u=Nc(s.type,s.key,s.props,null,n.mode,u)).ref=Hi(n,i,s),u.return=n,n=u)}return o(n);case x:e:{for(l=s.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){r(n,i.sibling),(i=a(i,s.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Mc(s,n.mode,u)).return=n,n=i}return o(n);case D:return e(n,i,(l=s._init)(s._payload),u)}if(te(s))return v(n,i,s,u);if(O(s))return y(n,i,s,u);Wi(n,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(r(n,i.sibling),(i=a(i,s)).return=n,n=i):(r(n,i),(i=Lc(s,n.mode,u)).return=n,n=i),o(n)):r(n,i)}}var Qi=Yi(!0),Ji=Yi(!1),Xi={},$i=Ea(Xi),es=Ea(Xi),ts=Ea(Xi);function rs(e){if(e===Xi)throw Error(i(174));return e}function ns(e,t){switch(Aa(ts,t),Aa(es,e),Aa($i,Xi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa($i),Aa($i,t)}function as(){Sa($i),Sa(es),Sa(ts)}function is(e){rs(ts.current);var t=rs($i.current),r=ue(t,e.type);t!==r&&(Aa(es,e),Aa($i,r))}function ss(e){es.current===e&&(Sa($i),Sa(es))}var os=Ea(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cs=[];function ls(){for(var e=0;e<cs.length;e++)cs[e]._workInProgressVersionPrimary=null;cs.length=0}var fs=w.ReactCurrentDispatcher,ps=w.ReactCurrentBatchConfig,hs=0,ds=null,vs=null,ys=null,gs=!1,ms=!1,bs=0,ws=0;function ks(){throw Error(i(321))}function xs(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function _s(e,t,r,n,a,s){if(hs=s,ds=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=null===e||null===e.memoizedState?so:oo,e=r(n,a),ms){s=0;do{if(ms=!1,bs=0,25<=s)throw Error(i(301));s+=1,ys=vs=null,t.updateQueue=null,fs.current=uo,e=r(n,a)}while(ms)}if(fs.current=io,t=null!==vs&&null!==vs.next,hs=0,ys=vs=ds=null,gs=!1,t)throw Error(i(300));return e}function Es(){var e=0!==bs;return bs=0,e}function Ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?ds.memoizedState=ys=e:ys=ys.next=e,ys}function As(){if(null===vs){var e=ds.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===ys?ds.memoizedState:ys.next;if(null!==t)ys=t,vs=e;else{if(null===e)throw Error(i(310));e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===ys?ds.memoizedState=ys=e:ys=ys.next=e}return ys}function Is(e,t){return"function"===typeof t?t(e):t}function Cs(e){var t=As(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=vs,a=n.baseQueue,s=r.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(null!==a){s=a.next,n=n.baseState;var u=o=null,c=null,l=s;do{var f=l.lane;if((hs&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var p={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=p,o=n):c=c.next=p,ds.lanes|=f,Bu|=f}l=l.next}while(null!==l&&l!==s);null===c?o=n:c.next=u,on(n,t.memoizedState)||(wo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{s=a.lane,ds.lanes|=s,Bu|=s,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Zs(e){var t=As(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);on(s,t.memoizedState)||(wo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Rs(){}function Ts(e,t){var r=ds,n=As(),a=t(),s=!on(n.memoizedState,a);if(s&&(n.memoizedState=a,wo=!0),n=n.queue,Vs(Ns.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(r.flags|=2048,Ms(9,Ps.bind(null,r,n,a,t),void 0,null),null===Zu)throw Error(i(349));0!==(30&hs)||Ds(r,t,a)}return a}function Ds(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ds.updateQueue)?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ps(e,t,r,n){t.value=r,t.getSnapshot=n,Os(t)&&Bs(e)}function Ns(e,t,r){return r((function(){Os(t)&&Bs(e)}))}function Os(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Bs(e){var t=Zi(e,1);null!==t&&rc(t,e,1,-1)}function Ls(e){var t=Ss();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,ds,e),[t.memoizedState,e]}function Ms(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ds.updateQueue)?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Us(){return As().memoizedState}function js(e,t,r,n){var a=Ss();ds.flags|=e,a.memoizedState=Ms(1|t,r,void 0,void 0===n?null:n)}function Fs(e,t,r,n){var a=As();n=void 0===n?null:n;var i=void 0;if(null!==vs){var s=vs.memoizedState;if(i=s.destroy,null!==n&&xs(n,s.deps))return void(a.memoizedState=Ms(t,r,i,n))}ds.flags|=e,a.memoizedState=Ms(1|t,r,i,n)}function zs(e,t){return js(8390656,8,e,t)}function Vs(e,t){return Fs(2048,8,e,t)}function Ks(e,t){return Fs(4,2,e,t)}function qs(e,t){return Fs(4,4,e,t)}function Hs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ws(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Fs(4,4,Hs.bind(null,t,e),r)}function Gs(){}function Ys(e,t){var r=As();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&xs(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Qs(e,t){var r=As();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&xs(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Js(e,t,r){return 0===(21&hs)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=r):(on(r,t)||(r=vt(),ds.lanes|=r,Bu|=r,e.baseState=!0),t)}function Xs(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=ps.transition;ps.transition={};try{e(!1),t()}finally{bt=r,ps.transition=n}}function $s(){return As().memoizedState}function eo(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ro(e))no(t,r);else if(null!==(r=Ci(e,t,r,n))){rc(r,e,n,ec()),ao(r,t,n)}}function to(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ro(e))no(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,s)){var u=t.interleaved;return null===u?(a.next=a,Ii(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ci(e,t,a,n))&&(rc(r,e,n,a=ec()),ao(r,t,n))}}function ro(e){var t=e.alternate;return e===ds||null!==t&&t===ds}function no(e,t){ms=gs=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ao(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,mt(e,r)}}var io={readContext:Si,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},so={readContext:Si,useCallback:function(e,t){return Ss().memoizedState=[e,void 0===t?null:t],e},useContext:Si,useEffect:zs,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,js(4194308,4,Hs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return js(4194308,4,e,t)},useInsertionEffect:function(e,t){return js(4,2,e,t)},useMemo:function(e,t){var r=Ss();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ss();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eo.bind(null,ds,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ss().memoizedState=e},useState:Ls,useDebugValue:Gs,useDeferredValue:function(e){return Ss().memoizedState=e},useTransition:function(){var e=Ls(!1),t=e[0];return e=Xs.bind(null,e[1]),Ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ds,a=Ss();if(ai){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===Zu)throw Error(i(349));0!==(30&hs)||Ds(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,zs(Ns.bind(null,n,s,e),[e]),n.flags|=2048,Ms(9,Ps.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Ss(),t=Zu.identifierPrefix;if(ai){var r=Ja;t=":"+t+"R"+(r=(Qa&~(1<<32-st(Qa)-1)).toString(32)+r),0<(r=bs++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ws++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Si,useCallback:Ys,useContext:Si,useEffect:Vs,useImperativeHandle:Ws,useInsertionEffect:Ks,useLayoutEffect:qs,useMemo:Qs,useReducer:Cs,useRef:Us,useState:function(){return Cs(Is)},useDebugValue:Gs,useDeferredValue:function(e){return Js(As(),vs.memoizedState,e)},useTransition:function(){return[Cs(Is)[0],As().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Ts,useId:$s,unstable_isNewReconciler:!1},uo={readContext:Si,useCallback:Ys,useContext:Si,useEffect:Vs,useImperativeHandle:Ws,useInsertionEffect:Ks,useLayoutEffect:qs,useMemo:Qs,useReducer:Zs,useRef:Us,useState:function(){return Zs(Is)},useDebugValue:Gs,useDeferredValue:function(e){var t=As();return null===vs?t.memoizedState=e:Js(t,vs.memoizedState,e)},useTransition:function(){return[Zs(Is)[0],As().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Ts,useId:$s,unstable_isNewReconciler:!1};function co(e,t){try{var r="",n=t;do{r+=F(n),n=n.return}while(n);var a=r}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function lo(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function fo(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var po="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,r){(r=Pi(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ku||(Ku=!0,qu=n),fo(0,t)},r}function vo(e,t,r){(r=Pi(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){fo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(r.callback=function(){fo(0,t),"function"!==typeof n&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function yo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new po;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Pi(-1,1)).tag=2,Ni(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bo=w.ReactCurrentOwner,wo=!1;function ko(e,t,r,n){t.child=null===e?Ji(t,null,r,n):Qi(t,e.child,r,n)}function xo(e,t,r,n,a){r=r.render;var i=t.ref;return Ei(t,a),n=_s(e,t,r,n,i,a),r=Es(),null===e||wo?(ai&&r&&ei(t),t.flags|=1,ko(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ko(e,t,a))}function _o(e,t,r,n,a){if(null===e){var i=r.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Nc(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Eo(e,t,i,n,a))}if(i=e.child,0===(e.lanes&a)){var s=i.memoizedProps;if((r=null!==(r=r.compare)?r:un)(s,n)&&e.ref===t.ref)return Ko(e,t,a)}return t.flags|=1,(e=Pc(i,n)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(un(i,n)&&e.ref===t.ref){if(wo=!1,t.pendingProps=n=i,0===(e.lanes&a))return t.lanes=e.lanes,Ko(e,t,a);0!==(131072&e.flags)&&(wo=!0)}}return Io(e,t,r,n,a)}function So(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Pu,Du),Du|=r;else{if(0===(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Aa(Pu,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,Aa(Pu,Du),Du|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,Aa(Pu,Du),Du|=n;return ko(e,t,a,r),t.child}function Ao(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Io(e,t,r,n,a){var i=Da(r)?Ra:Ca.current;return i=Ta(t,i),Ei(t,a),r=_s(e,t,r,n,i,a),n=Es(),null===e||wo?(ai&&n&&ei(t),t.flags|=1,ko(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ko(e,t,a))}function Co(e,t,r,n,a){if(Da(r)){var i=!0;Ba(t)}else i=!1;if(Ei(t,a),null===t.stateNode)Vo(e,t),Vi(t,r,n),qi(t,r,n,a),n=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var u=s.context,c=r.contextType;"object"===typeof c&&null!==c?c=Si(c):c=Ta(t,c=Da(r)?Ra:Ca.current);var l=r.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;f||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==n||u!==c)&&Ki(t,s,n,c),Ri=!1;var p=t.memoizedState;s.state=p,Li(t,n,s,a),u=t.memoizedState,o!==n||p!==u||Za.current||Ri?("function"===typeof l&&(ji(t,r,l,n),u=t.memoizedState),(o=Ri||zi(t,r,o,n,p,u,c))?(f||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),s.props=n,s.state=u,s.context=c,n=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Di(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:yi(t.type,o),s.props=c,f=t.pendingProps,p=s.context,"object"===typeof(u=r.contextType)&&null!==u?u=Si(u):u=Ta(t,u=Da(r)?Ra:Ca.current);var h=r.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==f||p!==u)&&Ki(t,s,n,u),Ri=!1,p=t.memoizedState,s.state=p,Li(t,n,s,a);var d=t.memoizedState;o!==f||p!==d||Za.current||Ri?("function"===typeof h&&(ji(t,r,h,n),d=t.memoizedState),(c=Ri||zi(t,r,c,n,p,d,u)||!1)?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,d,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,d,u)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=d),s.props=n,s.state=d,s.context=u,n=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Zo(e,t,r,n,i,a)}function Zo(e,t,r,n,a,i){Ao(e,t);var s=0!==(128&t.flags);if(!n&&!s)return a&&La(t,r,!1),Ko(e,t,i);n=t.stateNode,bo.current=t;var o=s&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=Qi(t,e.child,null,i),t.child=Qi(t,null,o,i)):ko(e,t,o,i),t.memoizedState=n.state,a&&La(t,r,!0),t.child}function Ro(e){var t=e.stateNode;t.pendingContext?Na(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Na(0,t.context,!1),ns(e,t.containerInfo)}function To(e,t,r,n,a){return hi(),di(a),t.flags|=256,ko(e,t,r,n),t.child}var Do,Po,No,Oo={dehydrated:null,treeContext:null,retryLane:0};function Bo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,r){var n,a=t.pendingProps,s=os.current,o=!1,u=0!==(128&t.flags);if((n=u)||(n=(null===e||null!==e.memoizedState)&&0!==(2&s)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Aa(os,1&s),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,o?(a=t.mode,o=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=u):o=Bc(u,a,0,null),e=Oc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Bo(r),t.memoizedState=Oo,e):Mo(t,u));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,a,s,o){if(r)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,n=lo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,a=t.mode,n=Bc({mode:"visible",children:n.children},a,0,null),(s=Oc(s,a,o,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!==(1&t.mode)&&Qi(t,e.child,null,o),t.child.memoizedState=Bo(o),t.memoizedState=Oo,s);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var u=n.dgst;return n=u,Uo(e,t,o,n=lo(s=Error(i(419)),n,void 0))}if(u=0!==(o&e.childLanes),wo||u){if(null!==(n=Zu)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Zi(e,a),rc(n,e,a,-1))}return vc(),Uo(e,t,o,n=lo(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ni=ca(a.nextSibling),ri=t,ai=!0,ii=null,null!==e&&(Wa[Ga++]=Qa,Wa[Ga++]=Ja,Wa[Ga++]=Ya,Qa=e.id,Ja=e.overflow,Ya=t),(t=Mo(t,n.children)).flags|=4096,t)}(e,t,u,a,n,s,r);if(o){o=a.fallback,u=t.mode,n=(s=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Pc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==n?o=Pc(n,o):(o=Oc(o,u,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,u=null===(u=e.child.memoizedState)?Bo(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~r,t.memoizedState=Oo,a}return e=(o=e.child).sibling,a=Pc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Mo(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,r,n){return null!==n&&di(n),Qi(t,e.child,null,r),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),_i(e.return,t,r)}function Fo(e,t,r,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function zo(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ko(e,t,n.children,r),0!==(2&(n=os.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jo(e,r,t);else if(19===e.tag)jo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Aa(os,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===us(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Fo(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===us(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Fo(t,!0,r,null,i);break;case"together":Fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ko(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Pc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Pc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function qo(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Wo(e,t,r){var n=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:case 17:return Da(t.type)&&Pa(),Ho(t),null;case 3:return n=t.stateNode,as(),Sa(Za),Sa(Ca),ls(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sc(ii),ii=null))),Ho(t),null;case 5:ss(t);var a=rs(ts.current);if(r=t.type,null!==e&&null!=t.stateNode)Po(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return Ho(t),null}if(e=rs($i.current),fi(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[pa]=t,n[ha]=s,e=0!==(1&t.mode),r){case"dialog":Un("cancel",n),Un("close",n);break;case"iframe":case"object":case"embed":Un("load",n);break;case"video":case"audio":for(a=0;a<On.length;a++)Un(On[a],n);break;case"source":Un("error",n);break;case"img":case"image":case"link":Un("error",n),Un("load",n);break;case"details":Un("toggle",n);break;case"input":Q(n,s),Un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Un("invalid",n);break;case"textarea":ae(n,s),Un("invalid",n)}for(var u in me(r,s),a=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?n.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Un("scroll",n)}switch(r){case"input":H(n),$(n,s,!0);break;case"textarea":H(n),se(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=$n)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),"select"===r&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[pa]=t,e[ha]=n,Do(e,t),t.stateNode=e;e:{switch(u=be(r,n),r){case"dialog":Un("cancel",e),Un("close",e),a=n;break;case"iframe":case"object":case"embed":Un("load",e),a=n;break;case"video":case"audio":for(a=0;a<On.length;a++)Un(On[a],e);a=n;break;case"source":Un("error",e),a=n;break;case"img":case"image":case"link":Un("error",e),Un("load",e),a=n;break;case"details":Un("toggle",e),a=n;break;case"input":Q(e,n),a=Y(e,n),Un("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=L({},n,{value:void 0}),Un("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Un("invalid",e)}for(s in me(r,a),c=a)if(c.hasOwnProperty(s)){var l=c[s];"style"===s?ye(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===s?"string"===typeof l?("textarea"!==r||""!==l)&&pe(e,l):"number"===typeof l&&pe(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Un("scroll",e):null!=l&&b(e,s,l,u))}switch(r){case"input":H(e),$(e,n,!1);break;case"textarea":H(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+K(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?re(e,!!n.multiple,s,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$n)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&null!=t.stateNode)No(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(i(166));if(r=rs(ts.current),rs($i.current),fi(t)){if(n=t.stateNode,r=t.memoizedProps,n[pa]=t,(s=n.nodeValue!==r)&&null!==(e=ri))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[pa]=t,t.stateNode=n}return Ho(t),null;case 13:if(Sa(os),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ni&&0!==(1&t.mode)&&0===(128&t.flags))pi(),hi(),t.flags|=98560,s=!1;else if(s=fi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[pa]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),s=!1}else null!==ii&&(sc(ii),ii=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&os.current)?0===Nu&&(Nu=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ho(t),null);case 4:return as(),null===e&&zn(t.stateNode.containerInfo),Ho(t),null;case 10:return xi(t.type._context),Ho(t),null;case 19:if(Sa(os),null===(s=t.memoizedState))return Ho(t),null;if(n=0!==(128&t.flags),null===(u=s.rendering))if(n)qo(s,!1);else{if(0!==Nu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=us(e))){for(t.flags|=128,qo(s,!1),null!==(n=u.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Aa(os,1&os.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>zu&&(t.flags|=128,n=!0,qo(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=us(u))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),qo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!u.alternate&&!ai)return Ho(t),null}else 2*Je()-s.renderingStartTime>zu&&1073741824!==r&&(t.flags|=128,n=!0,qo(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(null!==(r=s.last)?r.sibling=u:t.child=u,s.last=u)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,r=os.current,Aa(os,n?1&r|2:1&r),t):(Ho(t),null);case 22:case 23:return fc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Go(e,t){switch(ti(t),t.tag){case 1:return Da(t.type)&&Pa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return as(),Sa(Za),Sa(Ca),ls(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ss(t),null;case 13:if(Sa(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(os),null;case 4:return as(),null;case 10:return xi(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Do=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Po=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,rs($i.current);var i,s=null;switch(r){case"input":a=Y(e,a),n=Y(e,n),s=[];break;case"select":a=L({},a,{value:void 0}),n=L({},n,{value:void 0}),s=[];break;case"textarea":a=ne(e,a),n=ne(e,n),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(l in me(r,n),r=null,a)if(!n.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(o.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var c=n[l];if(u=null!=a?a[l]:void 0,n.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(l,r)),r=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(o.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Un("scroll",e),s||u===c||(s=[])):(s=s||[]).push(l,c))}r&&(s=s||[]).push("style",r);var l=s;(t.updateQueue=l)&&(t.flags|=4)}},No=function(e,t,r,n){r!==n&&(t.flags|=4)};var Yo=!1,Qo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function $o(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Ec(e,t,n)}else r.current=null}function eu(e,t,r){try{r()}catch(n){Ec(e,t,n)}}var tu=!1;function ru(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&eu(t,r,i)}a=a.next}while(a!==n)}}function nu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function au(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[ha],delete t[va],delete t[ya],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function ou(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(uu(e,t,r),e=e.sibling;null!==e;)uu(e,t,r),e=e.sibling}function cu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cu(e,t,r),e=e.sibling;null!==e;)cu(e,t,r),e=e.sibling}var lu=null,fu=!1;function pu(e,t,r){for(r=r.child;null!==r;)hu(e,t,r),r=r.sibling}function hu(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Qo||$o(r,t);case 6:var n=lu,a=fu;lu=null,pu(e,t,r),fu=a,null!==(lu=n)&&(fu?(e=lu,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):lu.removeChild(r.stateNode));break;case 18:null!==lu&&(fu?(e=lu,r=r.stateNode,8===e.nodeType?ua(e.parentNode,r):1===e.nodeType&&ua(e,r),zt(e)):ua(lu,r.stateNode));break;case 4:n=lu,a=fu,lu=r.stateNode.containerInfo,fu=!0,pu(e,t,r),lu=n,fu=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&eu(r,t,s),a=a.next}while(a!==n)}pu(e,t,r);break;case 1:if(!Qo&&($o(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Ec(r,t,o)}pu(e,t,r);break;case 21:pu(e,t,r);break;case 22:1&r.mode?(Qo=(n=Qo)||null!==r.memoizedState,pu(e,t,r),Qo=n):pu(e,t,r);break;default:pu(e,t,r)}}function du(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Jo),t.forEach((function(t){var n=Cc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function vu(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var s=e,o=t,u=o;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,fu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===lu)throw Error(i(160));hu(s,o,a),lu=null,fu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Ec(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),gu(e),4&n){try{ru(3,e,e.return),nu(3,e)}catch(y){Ec(e,e.return,y)}try{ru(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:vu(t,e),gu(e),512&n&&null!==r&&$o(r,r.return);break;case 5:if(vu(t,e),gu(e),512&n&&null!==r&&$o(r,r.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(y){Ec(e,e.return,y)}}if(4&n&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==r?r.memoizedProps:s,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===s.type&&null!=s.name&&J(a,s),be(u,o);var l=be(u,s);for(o=0;o<c.length;o+=2){var f=c[o],p=c[o+1];"style"===f?ye(a,p):"dangerouslySetInnerHTML"===f?fe(a,p):"children"===f?pe(a,p):b(a,f,p,l)}switch(u){case"input":X(a,s);break;case"textarea":ie(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var d=s.value;null!=d?re(a,!!s.multiple,d,!1):h!==!!s.multiple&&(null!=s.defaultValue?re(a,!!s.multiple,s.defaultValue,!0):re(a,!!s.multiple,s.multiple?[]:"",!1))}a[ha]=s}catch(y){Ec(e,e.return,y)}}break;case 6:if(vu(t,e),gu(e),4&n){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(y){Ec(e,e.return,y)}}break;case 3:if(vu(t,e),gu(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:vu(t,e),gu(e);break;case 13:vu(t,e),gu(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(Fu=Je())),4&n&&du(e);break;case 22:if(f=null!==r&&null!==r.memoizedState,1&e.mode?(Qo=(l=Qo)||f,vu(t,e),Qo=l):vu(t,e),gu(e),8192&n){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xo=e,f=e.child;null!==f;){for(p=Xo=f;null!==Xo;){switch(d=(h=Xo).child,h.tag){case 0:case 11:case 14:case 15:ru(4,h,h.return);break;case 1:$o(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(n,r,y)}}break;case 5:$o(h,h.return);break;case 22:if(null!==h.memoizedState){ku(p);continue}}null!==d?(d.return=h,Xo=d):ku(p)}f=f.sibling}e:for(f=null,p=e;;){if(5===p.tag){if(null===f){f=p;try{a=p.stateNode,l?"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(u=p.stateNode,o=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",o))}catch(y){Ec(e,e.return,y)}}}else if(6===p.tag){if(null===f)try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vu(t,e),gu(e),4&n&&du(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(su(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(pe(a,""),n.flags&=-33),cu(e,ou(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;uu(e,ou(e),s);break;default:throw Error(i(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function mu(e,t,r){Xo=e,bu(e,t,r)}function bu(e,t,r){for(var n=0!==(1&e.mode);null!==Xo;){var a=Xo,i=a.child;if(22===a.tag&&n){var s=null!==a.memoizedState||Yo;if(!s){var o=a.alternate,u=null!==o&&null!==o.memoizedState||Qo;o=Yo;var c=Qo;if(Yo=s,(Qo=u)&&!c)for(Xo=a;null!==Xo;)u=(s=Xo).child,22===s.tag&&null!==s.memoizedState?xu(a):null!==u?(u.return=s,Xo=u):xu(a);for(;null!==i;)Xo=i,bu(i,t,r),i=i.sibling;Xo=a,Yo=o,Qo=c}wu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Xo=i):wu(e)}}function wu(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||nu(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:yi(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Mi(t,s,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Mi(t,o,r)}break;case 5:var u=t.stateNode;if(null===r&&4&t.flags){r=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var p=f.dehydrated;null!==p&&zt(p)}}}break;default:throw Error(i(163))}Qo||512&t.flags&&au(t)}catch(h){Ec(t,t.return,h)}}if(t===e){Xo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xo=r;break}Xo=t.return}}function ku(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xo=r;break}Xo=t.return}}function xu(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nu(4,t)}catch(u){Ec(t,r,u)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(u){Ec(t,a,u)}}var i=t.return;try{au(t)}catch(u){Ec(t,i,u)}break;case 5:var s=t.return;try{au(t)}catch(u){Ec(t,s,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var _u,Eu=Math.ceil,Su=w.ReactCurrentDispatcher,Au=w.ReactCurrentOwner,Iu=w.ReactCurrentBatchConfig,Cu=0,Zu=null,Ru=null,Tu=0,Du=0,Pu=Ea(0),Nu=0,Ou=null,Bu=0,Lu=0,Mu=0,Uu=null,ju=null,Fu=0,zu=1/0,Vu=null,Ku=!1,qu=null,Hu=null,Wu=!1,Gu=null,Yu=0,Qu=0,Ju=null,Xu=-1,$u=0;function ec(){return 0!==(6&Cu)?Je():-1!==Xu?Xu:Xu=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Tu?Tu&-Tu:null!==vi.transition?(0===$u&&($u=vt()),$u):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,r,n){if(50<Qu)throw Qu=0,Ju=null,Error(i(185));gt(e,r,n),0!==(2&Cu)&&e===Zu||(e===Zu&&(0===(2&Cu)&&(Lu|=r),4===Nu&&oc(e,Tu)),nc(e,n),1===r&&0===Cu&&0===(1&t.mode)&&(zu=Je()+500,Ua&&za()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),o=1<<s,u=a[s];-1===u?0!==(o&r)&&0===(o&n)||(a[s]=ht(o,t)):u<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var n=pt(e,e===Zu?Tu:0);if(0===n)null!==r&&Ge(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ge(r),1===t)0===e.tag?function(e){Ua=!0,Fa(e)}(uc.bind(null,e)):Fa(uc.bind(null,e)),sa((function(){0===(6&Cu)&&za()})),r=null;else{switch(wt(n)){case 1:r=$e;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Zc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Xu=-1,$u=0,0!==(6&Cu))throw Error(i(327));var r=e.callbackNode;if(xc()&&e.callbackNode!==r)return null;var n=pt(e,e===Zu?Tu:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=yc(e,n);else{t=n;var a=Cu;Cu|=2;var s=dc();for(Zu===e&&Tu===t||(Vu=null,zu=Je()+500,pc(e,t));;)try{mc();break}catch(u){hc(e,u)}ki(),Su.current=s,Cu=a,null!==Ru?t=0:(Zu=null,Tu=0,t=Nu)}if(0!==t){if(2===t&&(0!==(a=dt(e))&&(n=a,t=ic(e,a))),1===t)throw r=Ou,pc(e,0),oc(e,n),nc(e,Je()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!on(i(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=yc(e,n))&&(0!==(s=dt(e))&&(n=s,t=ic(e,s))),1===t))throw r=Ou,pc(e,0),oc(e,n),nc(e,Je()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:kc(e,ju,Vu);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Fu+500-Je())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(kc.bind(null,e,ju,Vu),t);break}kc(e,ju,Vu);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-st(n);s=1<<o,(o=t[o])>a&&(a=o),n&=~s}if(n=a,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Eu(n/1960))-n)){e.timeoutHandle=na(kc.bind(null,e,ju,Vu),n);break}kc(e,ju,Vu);break;default:throw Error(i(329))}}}return nc(e,Je()),e.callbackNode===r?ac.bind(null,e):null}function ic(e,t){var r=Uu;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=ju,ju=r,null!==t&&sc(t)),e}function sc(e){null===ju?ju=e:ju.push.apply(ju,e)}function oc(e,t){for(t&=~Mu,t&=~Lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),n=1<<r;e[r]=-1,t&=~n}}function uc(e){if(0!==(6&Cu))throw Error(i(327));xc();var t=pt(e,0);if(0===(1&t))return nc(e,Je()),null;var r=yc(e,t);if(0!==e.tag&&2===r){var n=dt(e);0!==n&&(t=n,r=ic(e,n))}if(1===r)throw r=Ou,pc(e,0),oc(e,t),nc(e,Je()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,ju,Vu),nc(e,Je()),null}function cc(e,t){var r=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=r)&&(zu=Je()+500,Ua&&za())}}function lc(e){null!==Gu&&0===Gu.tag&&0===(6&Cu)&&xc();var t=Cu;Cu|=1;var r=Iu.transition,n=bt;try{if(Iu.transition=null,bt=1,e)return e()}finally{bt=n,Iu.transition=r,0===(6&(Cu=t))&&za()}}function fc(){Du=Pu.current,Sa(Pu)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Ru)for(r=Ru.return;null!==r;){var n=r;switch(ti(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Pa();break;case 3:as(),Sa(Za),Sa(Ca),ls();break;case 5:ss(n);break;case 4:as();break;case 13:case 19:Sa(os);break;case 10:xi(n.type._context);break;case 22:case 23:fc()}r=r.return}if(Zu=e,Ru=e=Pc(e.current,null),Tu=Du=t,Nu=0,Ou=null,Mu=Lu=Bu=0,ju=Uu=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(n=(r=Ai[t]).interleaved)){r.interleaved=null;var a=n.next,i=r.pending;if(null!==i){var s=i.next;i.next=a,n.next=s}r.pending=n}Ai=null}return e}function hc(e,t){for(;;){var r=Ru;try{if(ki(),fs.current=io,gs){for(var n=ds.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}gs=!1}if(hs=0,ys=vs=ds=null,ms=!1,bs=0,Au.current=null,null===r||null===r.return){Nu=1,Ou=t,Ru=null;break}e:{var s=e,o=r.return,u=r,c=t;if(t=Tu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,p=f.tag;if(0===(1&f.mode)&&(0===p||11===p||15===p)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var d=go(o);if(null!==d){d.flags&=-257,mo(d,o,u,0,t),1&d.mode&&yo(s,l,t),c=l;var v=(t=d).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yo(s,l,t),vc();break e}c=Error(i(426))}else if(ai&&1&u.mode){var g=go(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),mo(g,o,u,0,t),di(co(c,u));break e}}s=c=co(c,u),4!==Nu&&(Nu=2),null===Uu?Uu=[s]:Uu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,ho(0,c,t));break e;case 1:u=c;var m=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof m.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hu||!Hu.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,vo(s,u,t));break e}}s=s.return}while(null!==s)}wc(r)}catch(w){t=w,Ru===r&&null!==r&&(Ru=r=r.return);continue}break}}function dc(){var e=Su.current;return Su.current=io,null===e?io:e}function vc(){0!==Nu&&3!==Nu&&2!==Nu||(Nu=4),null===Zu||0===(268435455&Bu)&&0===(268435455&Lu)||oc(Zu,Tu)}function yc(e,t){var r=Cu;Cu|=2;var n=dc();for(Zu===e&&Tu===t||(Vu=null,pc(e,t));;)try{gc();break}catch(a){hc(e,a)}if(ki(),Cu=r,Su.current=n,null!==Ru)throw Error(i(261));return Zu=null,Tu=0,Nu}function gc(){for(;null!==Ru;)bc(Ru)}function mc(){for(;null!==Ru&&!Ye();)bc(Ru)}function bc(e){var t=_u(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wc(e):Ru=t,Au.current=null}function wc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Wo(r,t,Du)))return void(Ru=r)}else{if(null!==(r=Go(r,t)))return r.flags&=32767,void(Ru=r);if(null===e)return Nu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Nu&&(Nu=5)}function kc(e,t,r){var n=bt,a=Iu.transition;try{Iu.transition=null,bt=1,function(e,t,r,n){do{xc()}while(null!==Gu);if(0!==(6&Cu))throw Error(i(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-st(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}(e,s),e===Zu&&(Ru=Zu=null,Tu=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Wu||(Wu=!0,Zc(tt,(function(){return xc(),null}))),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=Iu.transition,Iu.transition=null;var o=bt;bt=1;var u=Cu;Cu|=4,Au.current=null,function(e,t){if(ea=Kt,hn(e=pn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(k){r=null;break e}var o=0,u=-1,c=-1,l=0,f=0,p=e,h=null;t:for(;;){for(var d;p!==r||0!==a&&3!==p.nodeType||(u=o+a),p!==s||0!==n&&3!==p.nodeType||(c=o+n),3===p.nodeType&&(o+=p.nodeValue.length),null!==(d=p.firstChild);)h=p,p=d;for(;;){if(p===e)break t;if(h===r&&++l===a&&(u=o),h===s&&++f===n&&(c=o),null!==(d=p.nextSibling))break;h=(p=h).parentNode}p=d}r=-1===u||-1===c?null:{start:u,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Kt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,g=v.memoizedState,m=t.stateNode,b=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:yi(t.type,y),g);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(k){Ec(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}v=tu,tu=!1}(e,r),yu(r,e),dn(ta),Kt=!!ea,ta=ea=null,e.current=r,mu(r,e,a),Qe(),Cu=u,bt=o,Iu.transition=s}else e.current=r;if(Wu&&(Wu=!1,Gu=e,Yu=a),0===(s=e.pendingLanes)&&(Hu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n((a=t[r]).value,{componentStack:a.stack,digest:a.digest});if(Ku)throw Ku=!1,e=qu,qu=null,e;0!==(1&Yu)&&0!==e.tag&&xc(),0!==(1&(s=e.pendingLanes))?e===Ju?Qu++:(Qu=0,Ju=e):Qu=0,za()}(e,t,r,n)}finally{Iu.transition=a,bt=n}return null}function xc(){if(null!==Gu){var e=wt(Yu),t=Iu.transition,r=bt;try{if(Iu.transition=null,bt=16>e?16:e,null===Gu)var n=!1;else{if(e=Gu,Gu=null,Yu=0,0!==(6&Cu))throw Error(i(331));var a=Cu;for(Cu|=4,Xo=e.current;null!==Xo;){var s=Xo,o=s.child;if(0!==(16&Xo.flags)){var u=s.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Xo=l;null!==Xo;){var f=Xo;switch(f.tag){case 0:case 11:case 15:ru(8,f,s)}var p=f.child;if(null!==p)p.return=f,Xo=p;else for(;null!==Xo;){var h=(f=Xo).sibling,d=f.return;if(iu(f),f===l){Xo=null;break}if(null!==h){h.return=d,Xo=h;break}Xo=d}}}var v=s.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(null!==y)}}Xo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(s=Xo).flags))switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var m=s.sibling;if(null!==m){m.return=s.return,Xo=m;break e}Xo=s.return}}var b=e.current;for(Xo=b;null!==Xo;){var w=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Xo=w;else e:for(o=b;null!==Xo;){if(0!==(2048&(u=Xo).flags))try{switch(u.tag){case 0:case 11:case 15:nu(9,u)}}catch(x){Ec(u,u.return,x)}if(u===o){Xo=null;break e}var k=u.sibling;if(null!==k){k.return=u.return,Xo=k;break e}Xo=u.return}}if(Cu=a,za(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(x){}n=!0}return n}finally{bt=r,Iu.transition=t}}return!1}function _c(e,t,r){e=Ni(e,t=ho(0,t=co(r,t),1),1),t=ec(),null!==e&&(gt(e,1,t),nc(e,t))}function Ec(e,t,r){if(3===e.tag)_c(e,e,r);else for(;null!==t;){if(3===t.tag){_c(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Hu||!Hu.has(n))){t=Ni(t,e=vo(t,e=co(r,e),1),1),e=ec(),null!==t&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Zu===e&&(Tu&r)===r&&(4===Nu||3===Nu&&(130023424&Tu)===Tu&&500>Je()-Fu?pc(e,0):Mu|=r),nc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var r=ec();null!==(e=Zi(e,t))&&(gt(e,t,r),nc(e,r))}function Ic(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ac(e,r)}function Cc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),Ac(e,r)}function Zc(e,t){return We(e,t)}function Rc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,r,n){return new Rc(e,t,r,n)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var r=e.alternate;return null===r?((r=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Nc(e,t,r,n,a,s){var o=2;if(n=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Oc(r.children,a,s,t);case E:o=8,a|=8;break;case S:return(e=Tc(12,r,t,2|a)).elementType=S,e.lanes=s,e;case Z:return(e=Tc(13,r,t,a)).elementType=Z,e.lanes=s,e;case R:return(e=Tc(19,r,t,a)).elementType=R,e.lanes=s,e;case P:return Bc(r,a,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case I:o=9;break e;case C:o=11;break e;case T:o=14;break e;case D:o=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Tc(o,r,t,a)).elementType=e,t.type=n,t.lanes=s,t}function Oc(e,t,r,n){return(e=Tc(7,e,n,t)).lanes=r,e}function Bc(e,t,r,n){return(e=Tc(22,e,n,t)).elementType=P,e.lanes=r,e.stateNode={isHidden:!1},e}function Lc(e,t,r){return(e=Tc(6,e,null,t)).lanes=r,e}function Mc(e,t,r){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function jc(e,t,r,n,a,i,s,o,u){return e=new Uc(e,t,r,o,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Tc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ti(i),e}function Fc(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function zc(e){if(!e)return Ia;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Da(r))return Oa(e,r,t)}return t}function Vc(e,t,r,n,a,i,s,o,u){return(e=jc(r,n,!0,e,0,i,0,o,u)).context=zc(null),r=e.current,(i=Pi(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,Ni(r,i,a),e.current.lanes=a,gt(e,a,n),nc(e,n),e}function Kc(e,t,r,n){var a=t.current,i=ec(),s=tc(a);return r=zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Pi(i,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ni(a,t,s))&&(rc(e,a,s,i),Oi(e,a,s)),s}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_u=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Za.current)wo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return wo=!1,function(e,t,r){switch(t.tag){case 3:Ro(t),hi();break;case 5:is(t);break;case 1:Da(t.type)&&Ba(t);break;case 4:ns(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Aa(gi,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Aa(os,1&os.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Lo(e,t,r):(Aa(os,1&os.current),null!==(e=Ko(e,t,r))?e.sibling:null);Aa(os,1&os.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return zo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(os,os.current),n)break;return null;case 22:case 23:return t.lanes=0,So(e,t,r)}return Ko(e,t,r)}(e,t,r);wo=0!==(131072&e.flags)}else wo=!1,ai&&0!==(1048576&t.flags)&&$a(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vo(e,t),e=t.pendingProps;var a=Ta(t,Ca.current);Ei(t,r),a=_s(null,t,n,e,a,r);var s=Es();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(n)?(s=!0,Ba(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ti(t),a.updater=Fi,t.stateNode=a,a._reactInternals=t,qi(t,n,e,r),t=Zo(null,t,n,!0,s,r)):(t.tag=0,ai&&s&&ei(t),ko(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===T)return 14}return 2}(n),e=yi(n,e),a){case 0:t=Io(null,t,n,e,r);break e;case 1:t=Co(null,t,n,e,r);break e;case 11:t=xo(null,t,n,e,r);break e;case 14:t=_o(null,t,n,yi(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,Io(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 1:return n=t.type,a=t.pendingProps,Co(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 3:e:{if(Ro(t),null===e)throw Error(i(387));n=t.pendingProps,a=(s=t.memoizedState).element,Di(e,t),Li(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=To(e,t,n,r,a=co(Error(i(423)),t));break e}if(n!==a){t=To(e,t,n,r,a=co(Error(i(424)),t));break e}for(ni=ca(t.stateNode.containerInfo.firstChild),ri=t,ai=!0,ii=null,r=Ji(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(hi(),n===a){t=Ko(e,t,r);break e}ko(e,t,n,r)}t=t.child}return t;case 5:return is(t),null===e&&ci(t),n=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==s&&ra(n,s)&&(t.flags|=32),Ao(e,t),ko(e,t,o,r),t.child;case 6:return null===e&&ci(t),null;case 13:return Lo(e,t,r);case 4:return ns(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Qi(t,null,n,r):ko(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,xo(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 7:return ko(e,t,t.pendingProps,r),t.child;case 8:case 12:return ko(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Aa(gi,n._currentValue),n._currentValue=o,null!==s)if(on(s.value,o)){if(s.children===a.children&&!Za.current){t=Ko(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){o=s.child;for(var c=u.firstContext;null!==c;){if(c.context===n){if(1===s.tag){(c=Pi(-1,r&-r)).tag=2;var l=s.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),_i(s.return,r,t),u.lanes|=r;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=r,null!==(u=o.alternate)&&(u.lanes|=r),_i(o,r,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}ko(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ei(t,r),n=n(a=Si(a)),t.flags|=1,ko(e,t,n,r),t.child;case 14:return a=yi(n=t.type,t.pendingProps),_o(e,t,n,a=yi(n.type,a),r);case 15:return Eo(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:yi(n,a),Vo(e,t),t.tag=1,Da(n)?(e=!0,Ba(t)):e=!1,Ei(t,r),Vi(t,n,a),qi(t,n,a,r),Zo(null,t,n,!0,e,r);case 19:return zo(e,t,r);case 22:return So(e,t,r)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if("function"===typeof a){var o=a;a=function(){var e=qc(s);o.call(e)}}Kc(t,s,e,a)}else s=function(e,t,r,n,a){if(a){if("function"===typeof n){var i=n;n=function(){var e=qc(s);i.call(e)}}var s=Vc(t,n,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[da]=s.current,zn(8===e.nodeType?e.parentNode:e),lc(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=qc(u);o.call(e)}}var u=jc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=u,e[da]=u.current,zn(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,u,r,n)})),u}(r,t,e,a,n);return qc(s)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Kc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[da]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pt.length&&0!==t&&t<Pt[r].priority;r++);Pt.splice(r,0,e),0===r&&Lt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ft(t.pendingLanes);0!==r&&(mt(t,1|r),nc(t,Je()),0===(6&Cu)&&(zu=Je()+500,za()))}break;case 13:lc((function(){var t=Zi(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Zi(e,134217728);if(null!==t)rc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),r=Zi(e,t);if(null!==r)rc(r,e,t,ec());Wc(e,t)}},Et=function(){return bt},St=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},xe=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ka(n);if(!a)throw Error(i(90));W(n),X(n,a)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ce=cc,Ze=lc;var tl={usingClientEntryPoint:!1,Events:[ba,wa,ka,Ae,Ie,cc]},rl={findFiberByHostInstance:ma,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nl={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(nl),it=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(i(200));return Fc(e,t,null,r)},t.createRoot=function(e,t){if(!Jc(e))throw Error(i(299));var r=!1,n="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=jc(e,1,!1,null,0,r,0,n,a),e[da]=t.current,zn(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,r){if(!Xc(t))throw Error(i(200));return el(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Jc(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,a=!1,s="",o=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,a,0,s,o),e[da]=t.current,zn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Qc(t)},t.render=function(e,t,r){if(!Xc(t))throw Error(i(200));return el(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[da]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xc(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},4164:function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4463)},6374:function(e,t,r){"use strict";var n=r(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,n)&&!u.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function g(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||d}function m(){}function b(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||d}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var w=b.prototype=new m;w.constructor=b,v(w,g.prototype),w.isPureReactComponent=!0;var k=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var a,i={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,a)&&!E.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:r,type:e,key:s,ref:o,props:i,_owner:_.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function Z(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var u=!1;if(null===e)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0}}if(u)return s=s(u=e),e=""===i?"."+C(u,0):i,k(s)?(a="",null!=e&&(a=e.replace(I,"$&/")+"/"),Z(s,t,a,"",(function(e){return e}))):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+e)),t.push(s)),1;if(u=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var l=i+C(o=e[c],c);u+=Z(o,t,a,l,s)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(o=e.next()).done;)u+=Z(o=o.value,t,a,l=i+C(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,r){if(null==e)return e;var n=[],a=0;return Z(e,n,"","",(function(e){return t.call(r,e,a++)})),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},N={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:R,forEach:function(e,t,r){R(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:r,type:e.type,key:i,ref:s,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},2791:function(e,t,r){"use strict";e.exports=r(9117)},184:function(e,t,r){"use strict";e.exports=r(6374)},4003:function(e){"use strict";var t={};function r(e,r,n){n||(n=Error);var a=function(e){var t,n;function a(t,n,a){return e.call(this,function(e,t,n){return"string"===typeof r?r:r(e,t,n)}(t,n,a))||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a}(n);a.prototype.name=n.name,a.prototype.code=e,t[e]=a}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var a,i,s,o;if("string"===typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(a="must not be",t=t.replace(/^not /,"")):a="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o="The ".concat(e," ").concat(a," ").concat(n(t,"type"));else{var u=function(e,t,r){return"number"!==typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(u," ").concat(a," ").concat(n(t,"type"))}return o+=". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},8749:function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var a=r(6978),i=r(1704);r(2534)(c,a);for(var s=n(i.prototype),o=0;o<s.length;o++){var u=s[o];c.prototype[u]||(c.prototype[u]=i.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);a.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||process.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5627:function(e,t,r){"use strict";e.exports=a;var n=r(4784);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}r(2534)(a,n),a.prototype._transform=function(e,t,r){r(null,e)}},6978:function(e,t,r){"use strict";var n;e.exports=E,E.ReadableState=_;r(7465).EventEmitter;var a=function(e,t){return e.listeners(t).length},i=r(6184),s=r(9778).Buffer,o=r.g.Uint8Array||function(){};var u,c=r(4616);u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,f,p,h=r(5566),d=r(2644),v=r(5730).getHighWaterMark,y=r(4003).q,g=y.ERR_INVALID_ARG_TYPE,m=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(2534)(E,i);var k=d.errorOrDestroy,x=["error","close","destroy","pause","resume"];function _(e,t,a){n=n||r(8749),e=e||{},"boolean"!==typeof a&&(a=t instanceof n),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=v(this,e,"readableHighWaterMark",a),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=r(5948).s),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function E(e){if(n=n||r(8749),!(this instanceof E))return new E(e);var t=this instanceof n;this._readableState=new _(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),i.call(this)}function S(e,t,r,n,a){u("readableAddChunk",t);var i,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?Z(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,c);else if(a||(i=function(e,t){var r;n=t,s.isBuffer(n)||n instanceof o||"string"===typeof t||void 0===t||e.objectMode||(r=new g("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(c,t)),i)k(e,i);else if(c.objectMode||t&&t.length>0)if("string"===typeof t||c.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)c.endEmitted?k(e,new w):A(e,c,t,!0);else if(c.ended)k(e,new m);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?A(e,c,t,!1):T(e,c)):A(e,c,t,!1)}else n||(c.reading=!1,T(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function A(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Z(e)),T(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=d.destroy,E.prototype._undestroy=d.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),S(this,e,t,!1,r)},E.prototype.unshift=function(e){return S(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){l||(l=r(5948).s);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,a="";null!==n;)a+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==a&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var I=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function Z(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(R,e))}function R(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function T(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(u("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){u("readable nexttick read 0"),e.read(0)}function O(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(U,t,e))}function U(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function j(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):Z(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,a=t.needReadable;return u("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",a=!0),t.ended||t.reading?u("reading or ended",a=!1):a&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(r,t))),null===(n=e>0?L(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){k(this,new b("_read()"))},E.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,u("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?o:v;function s(t,a){u("onunpipe"),t===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,u("cleanup"),e.removeListener("close",h),e.removeListener("finish",d),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",s),r.removeListener("end",o),r.removeListener("end",v),r.removeListener("data",f),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function o(){u("onend"),e.end()}n.endEmitted?process.nextTick(i):r.once("end",i),e.on("unpipe",s);var c=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,B(e))}}(r);e.on("drain",c);var l=!1;function f(t){u("ondata");var a=e.write(t);u("dest.write",a),!1===a&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==j(n.pipes,e))&&!l&&(u("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(t){u("onerror",t),v(),e.removeListener("error",p),0===a(e,"error")&&k(e,t)}function h(){e.removeListener("finish",d),v()}function d(){u("onfinish"),e.removeListener("close",h),v()}function v(){u("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",h),e.once("finish",d),e.emit("pipe",r),n.flowing||(u("pipe resume"),r.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=j(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var r=i.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,u("on readable",n.length,n.reading),n.length?Z(this):n.reading||process.nextTick(N,this))),r},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var r=i.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(P,this),r},E.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(P,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(O,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var a in e.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){(u("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!r.objectMode||null!==a&&void 0!==a)&&((r.objectMode||a&&a.length)&&(t.push(a)||(n=!0,e.pause())))})),e)void 0===this[a]&&"function"===typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<x.length;i++)e.on(x[i],this.emit.bind(this,x[i]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"===typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(9150)),f(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=L,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(E.from=function(e,t){return void 0===p&&(p=r(4886)),p(E,e,t)})},4784:function(e,t,r){"use strict";e.exports=l;var n=r(4003).q,a=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(8749);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,r){p(e,t,r)}))}function p(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new o;if(e._transformState.transforming)throw new s;return e.push(null)}r(2534)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new a("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},1704:function(e,t,r){"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var a=n.callback;t.pendingcb--,a(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var a;e.exports=E,E.WritableState=_;var i={deprecate:r(9515)},s=r(6184),o=r(9778).Buffer,u=r.g.Uint8Array||function(){};var c,l=r(2644),f=r(5730).getHighWaterMark,p=r(4003).q,h=p.ERR_INVALID_ARG_TYPE,d=p.ERR_METHOD_NOT_IMPLEMENTED,v=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_STREAM_CANNOT_PIPE,g=p.ERR_STREAM_DESTROYED,m=p.ERR_STREAM_NULL_VALUES,b=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,k=l.errorOrDestroy;function x(){}function _(e,t,i){a=a||r(8749),e=e||{},"boolean"!==typeof i&&(i=t instanceof a),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,a=r.writecb;if("function"!==typeof a)throw new v;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,a){--t.pendingcb,r?(process.nextTick(a,n),process.nextTick(R,e,t),e._writableState.errorEmitted=!0,k(e,n)):(a(n),e._writableState.errorEmitted=!0,k(e,n),R(e,t))}(e,r,n,t,a);else{var i=C(r)||e.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||I(e,r),n?process.nextTick(A,e,r,i,a):A(e,r,i,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function E(e){var t=this instanceof(a=a||r(8749));if(!t&&!c.call(E,this))return new E(e);this._writableState=new _(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),s.call(this)}function S(e,t,r,n,a,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):r?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function A(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),R(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var a=t.bufferedRequestCount,i=new Array(a),s=t.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;)i[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;i.allBuffers=u,S(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(S(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Z(e,t){e._final((function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var r=C(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(Z,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(2534)(E,s),_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(_.prototype,"buffer",{get:i.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===E&&(e&&e._writableState instanceof _)}})):c=function(e){return e instanceof this},E.prototype.pipe=function(){k(this,new y)},E.prototype.write=function(e,t,r){var n,a=this._writableState,i=!1,s=!a.objectMode&&(n=e,o.isBuffer(n)||n instanceof u);return s&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"===typeof t&&(r=t,t=null),s?t="buffer":t||(t=a.defaultEncoding),"function"!==typeof r&&(r=x),a.ending?function(e,t){var r=new b;k(e,r),process.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var a;return null===r?a=new m:"string"===typeof r||t.objectMode||(a=new h("chunk",["string","Buffer"],r)),!a||(k(e,a),process.nextTick(n,a),!1)}(this,a,e,r))&&(a.pendingcb++,i=function(e,t,r,n,a,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=o.from(t,r));return t}(t,n,a);n!==s&&(r=!0,a="buffer",n=s)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,u,n,a,i);return c}(this,a,s,e,t,r)),i},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,r){r(new d("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,r){var n=this._writableState;return"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,R(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=l.destroy,E.prototype._undestroy=l.undestroy,E.prototype._destroy=function(e,t){t(e)}},9150:function(e,t,r){"use strict";var n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(5762),s=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),p=Symbol("stream");function h(e,t){return{value:e,done:t}}function d(e){var t=e[s];if(null!==t){var r=e[p].read();null!==r&&(e[l]=null,e[s]=null,e[o]=null,t(h(r,!1)))}}function v(e){process.nextTick(d,e)}var y=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((a(n={get stream(){return this[p]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(h(void 0,!0));if(this[p].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[u]?r(e[u]):t(h(void 0,!0))}))}));var r,n=this[l];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(h(void 0,!0)):t[f](r,n)}),n)}}(n,this));else{var a=this[p].read();if(null!==a)return Promise.resolve(h(a,!1));r=new Promise(this[f])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),a(n,"return",(function(){var e=this;return new Promise((function(t,r){e[p].destroy(null,(function(e){e?r(e):t(h(void 0,!0))}))}))})),n),y);e.exports=function(e){var t,r=Object.create(g,(a(t={},p,{value:e,writable:!0}),a(t,s,{value:null,writable:!0}),a(t,o,{value:null,writable:!0}),a(t,u,{value:null,writable:!0}),a(t,c,{value:e._readableState.endEmitted,writable:!0}),a(t,f,{value:function(e,t){var n=r[p].read();n?(r[l]=null,r[s]=null,r[o]=null,e(h(n,!1))):(r[s]=e,r[o]=t)},writable:!0}),t));return r[l]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[o];return null!==t&&(r[l]=null,r[s]=null,r[o]=null,t(e)),void(r[u]=e)}var n=r[s];null!==n&&(r[l]=null,r[s]=null,r[o]=null,n(h(void 0,!0))),r[c]=!0})),e.on("readable",v.bind(null,r)),r}},5566:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(9778).Buffer,o=r(2361).inspect,u=o&&o.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n,a=s.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,r=a,n=o,s.prototype.copy.call(t,r,n),o+=i.data.length,i=i.next;return a}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var a=t.data,i=e>a.length?a.length:e;if(i===a.length?n+=a:n+=a.slice(0,e),0===(e-=i)){i===a.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=a.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var a=r.data,i=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,i),0===(e-=i)){i===a.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=a.slice(i));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&i(t.prototype,r),c&&i(t,c),e}()},2644:function(e){"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,a){var i=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(a?a(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!a&&e?i._writableState?i._writableState.errorEmitted?process.nextTick(r,i):(i._writableState.errorEmitted=!0,process.nextTick(t,i,e)):process.nextTick(t,i,e):a?(process.nextTick(r,i),a(e)):process.nextTick(r,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},5762:function(e,t,r){"use strict";var n=r(4003).q.ERR_STREAM_PREMATURE_CLOSE;function a(){}e.exports=function e(t,r,i){if("function"===typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];e.apply(this,n)}}}(i||a);var s=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){o=!1,c=!0,s||i.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){s=!1,f=!0,o||i.call(t)},h=function(e){i.call(t,e)},d=function(){var e;return s&&!f?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},v=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",d),t.req?v():t.on("request",v)),t.on("end",p),t.on("finish",l),!1!==r.error&&t.on("error",h),t.on("close",d),function(){t.removeListener("complete",l),t.removeListener("abort",d),t.removeListener("request",v),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",d)}}},4886:function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},4541:function(e,t,r){"use strict";var n;var a=r(4003).q,i=a.ERR_MISSING_ARGS,s=a.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function u(e,t,a,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var o=!1;e.on("close",(function(){o=!0})),void 0===n&&(n=r(5762)),n(e,{readable:t,writable:a},(function(e){if(e)return i(e);o=!0,i()}));var u=!1;return function(t){if(!o&&!u)return u=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void i(t||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!==typeof e[e.length-1]?o:e.pop():o}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,a=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var s=t.map((function(e,r){var i=r<t.length-1;return u(e,i,r>0,(function(e){n||(n=e),e&&s.forEach(c),i||(s.forEach(c),a(n))}))}));return t.reduce(l)}},5730:function(e,t,r){"use strict";var n=r(4003).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,a){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,a,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(a?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},6184:function(e,t,r){e.exports=r(7465).EventEmitter},723:function(e,t,r){(t=e.exports=r(6978)).Stream=t,t.Readable=t,t.Writable=r(1704),t.Duplex=r(8749),t.Transform=r(4784),t.PassThrough=r(5627),t.finished=r(5762),t.pipeline=r(4541)},449:function(e,t,r){"use strict";e.exports=s;var n=r(8193),a=s.prototype,i=new Date%1e9;function s(e){e=e||{},this.id=e.id||(1e9*Math.random()>>>0)+i++,this.max=e.max||1/0,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,r,n=this.items.length;n--;)t=this.items[n],r=new Date(t.expires)-new Date,this._lookup[t.key]=t,r>0?this.expire(t.key,r):r<=0&&this.delete(t.key)}a.has=function(e){return e in this._lookup},a.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},a.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},a.set=function(e,t,r){var n=this._lookup[e],a=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,a)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(a),this.size++),r&&("ttl"in r&&this.expire(e,r.ttl),"meta"in r&&(a.meta=r.meta),r.refresh&&(a.refresh=r.ttl)),this},a.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},a.expire=function(e,t){var r=t||0,a=this._lookup[e];if(!a)return this;if("string"===typeof r&&(r=n(t)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(a.timeout),a.timeout=setTimeout(this.delete.bind(this,a.key),r),a.expires=Number(new Date)+r,this},a.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},a.toJSON=function(){for(var e,t=new Array(this.items.length),r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}},1779:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6222),s=function(){function e(t,r,a){n(this,e);var s=this;this._started=i(),this._rescheduled=0,this._scheduled=r,this._args=a,this._triggered=!1,this._timerWrapper=function(){s._rescheduled>0?(s._scheduled=s._rescheduled-(i()-s._started),s._schedule(s._scheduled)):(s._triggered=!0,t.apply(null,s._args))},this._timer=setTimeout(this._timerWrapper,r)}return a(e,[{key:"reschedule",value:function(e){e||(e=this._scheduled);var t=i();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}},{key:"_schedule",value:function(e){this._triggered=!1,this._started=i(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}},{key:"clear",value:function(){clearTimeout(this._timer)}}]),e}();e.exports=function(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new s(arguments[0],arguments[1],e)}},6222:function(e){"use strict";e.exports=function(){return Date.now()}},8636:function(e,t,r){e.exports=function(e,t,r){if("number"!==typeof t)throw new Error("second argument must be a Number");var a,i,s,o,u,c,l=!0;Array.isArray(e)?(a=[],s=i=e.length):(o=Object.keys(e),a={},s=i=o.length);function f(e){function t(){r&&r(e,a),r=null}l?n(t):t()}function p(t,r,n){if(a[t]=n,r&&(u=!0),0===--s||r)f(r);else if(!u&&c<i){var l;o?(l=o[c],c+=1,e[l]((function(e,t){p(l,e,t)}))):(l=c,c+=1,e[l]((function(e,t){p(l,e,t)})))}}c=t,s?o?o.some((function(r,n){return e[r]((function(e,t){p(r,e,t)})),n===t-1})):e.some((function(e,r){return e((function(e,t){p(r,e,t)})),r===t-1})):f(null);l=!1};var n=r(4183)},2543:function(e,t,r){var n=r(9778),a=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return a(e,t,r)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),s.prototype=Object.create(a.prototype),i(a,s),s.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},s.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return a(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},6327:function(e,t,r){"use strict";var n=r(206),a=/[\/\?<>\\:\*\|"]/g,i=/[\x00-\x1f\x80-\x9f]/g,s=/^\.+$/,o=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u=/[\. ]+$/;function c(e,t){if("string"!==typeof e)throw new Error("Input must be string");var r=e.replace(a,t).replace(i,t).replace(s,t).replace(o,t).replace(u,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=c(e,r);return""===r?n:c(n,"")}},6813:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,s=a>>>1;n<s;){var o=2*(n+1)-1,u=e[o],c=o+1,l=e[c];if(0>i(u,r))c<a&&0>i(l,u)?(e[n]=l,e[c]=r,n=c):(e[n]=u,e[o]=r,n=o);else{if(!(c<a&&0>i(l,r)))break e;e[n]=l,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],l=[],f=1,p=null,h=3,d=!1,v=!1,y=!1,g="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,r(c,t)}t=n(l)}}function k(e){if(y=!1,w(e),!v)if(null!==n(c))v=!0,P(x);else{var t=n(l);null!==t&&N(k,t.startTime-e)}}function x(e,r){v=!1,y&&(y=!1,m(A),A=-1),d=!0;var i=h;try{for(w(r),p=n(c);null!==p&&(!(p.expirationTime>r)||e&&!Z());){var s=p.callback;if("function"===typeof s){p.callback=null,h=p.priorityLevel;var o=s(p.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?p.callback=o:p===n(c)&&a(c),w(r)}else a(c);p=n(c)}if(null!==p)var u=!0;else{var f=n(l);null!==f&&N(k,f.startTime-r),u=!1}return u}finally{p=null,h=i,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,A=-1,I=5,C=-1;function Z(){return!(t.unstable_now()-C<I)}function R(){if(null!==S){var e=t.unstable_now();C=e;var r=!0;try{r=S(!0,e)}finally{r?_():(E=!1,S=null)}}else E=!1}if("function"===typeof b)_=function(){b(R)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,D=T.port2;T.port1.onmessage=R,_=function(){D.postMessage(null)}}else _=function(){g(R,0)};function P(e){S=e,E||(E=!0,_())}function N(e,r){A=g((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,r(l,e),null===n(c)&&e===n(l)&&(y?(m(A),A=-1):y=!0,N(k,i-s))):(e.sortIndex=o,r(c,e),v||d||(v=!0,P(x))),e},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},5296:function(e,t,r){"use strict";e.exports=r(6813)},8928:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=new Map;function s(){return(s=a(n().mark((function e(t,r,a){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.get(a)){e.next=16;break}return e.prev=1,e.next=4,t();case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),setTimeout((function(){throw e.t0}),1),e.abrupt("break",16);case 10:if(i.get(a)){e.next=12;break}return e.abrupt("break",16);case 12:return e.next=14,new Promise((function(e){var t=setTimeout(e,r);i.set(a,t)}));case 14:e.next=0;break;case 16:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}e.exports={setDelayedInterval:function(e,t,r){r=r||t;var n="".concat(Date.now(),":").concat(Math.floor(1e6*Math.random())),a=setTimeout((function(){!function(e,t,r){s.apply(this,arguments)}(e,t,n)}),r);return i.set(n,a),n},clearDelayedInterval:function(e){var t=i.get(e);t&&(clearTimeout(t),i.delete(e))}}},4542:function(e,t,r){"use strict";var n=r(2122).default,a=r(4704).default,i=r(861).default,s=r(887);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");var r=t.deep,o=[],u=[],c=function e(t){var r=o.indexOf(t);if(-1!==r)return u[r];var n=[];return o.push(t),u.push(n),n.push.apply(n,i(t.map((function(t){return Array.isArray(t)?e(t):s(t)?l(t):t})))),n},l=function e(i){var l=o.indexOf(i);if(-1!==l)return u[l];var f={},p=Object.keys(i).sort(t.compare);o.push(i),u.push(f);var h,d=a(p);try{for(d.s();!(h=d.n()).done;){var v=h.value,y=i[v],g=void 0;g=r&&Array.isArray(y)?c(y):r&&s(y)?e(y):y,Object.defineProperty(f,v,n(n({},Object.getOwnPropertyDescriptor(i,v)),{},{value:g}))}}catch(m){d.e(m)}finally{d.f()}return f};return Array.isArray(e)?r?c(e):e.slice():l(e)}},1620:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;function i(e,t){return e+s(t)}function s(e){var t=e;return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24}function o(e,t){return e[0]-t[0]}function u(e){return e[1]}e.exports=function(){function e(){n(this,e),this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}return a(e,[{key:"set",value:function(e,t){var r=this._internalPositionFor(e,!1);if(void 0===t)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{var n=!1;-1===r?(r=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(r,e,t,n),this._changedLength=!0}}},{key:"unset",value:function(e){this.set(e,void 0)}},{key:"get",value:function(e){this._sortData();var t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}},{key:"push",value:function(e){return this.set(this.length,e),this.length}},{key:"length",get:function(){if(this._sortData(),this._changedLength){var e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}},{key:"forEach",value:function(e){for(var t=0;t<this.length;)e(this.get(t),t,this),t++}},{key:"map",value:function(e){for(var t=0,r=new Array(this.length);t<this.length;)r[t]=e(this.get(t),t,this),t++;return r}},{key:"reduce",value:function(e,t){for(var r=0,n=t;r<this.length;){n=e(n,this.get(r),r),r++}return n}},{key:"find",value:function(e){for(var t,r,n=0;n<this.length&&!t;)t=e(r=this.get(n)),n++;return t?r:void 0}},{key:"_internalPositionFor",value:function(e,t){var r=this._bytePosFor(e,t);if(r>=this._bitArrays.length)return-1;var n=this._bitArrays[r],a=e-7*r;return(n&1<<a)>0?this._bitArrays.slice(0,r).reduce(i,0)+s(n&~(4294967295<<a+1))-1:-1}},{key:"_bytePosFor",value:function(e,t){for(var r=Math.floor(e/7),n=r+1;!t&&this._bitArrays.length<n;)this._bitArrays.push(0);return r}},{key:"_setBit",value:function(e){var t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}},{key:"_unsetBit",value:function(e){var t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}},{key:"_setInternalPos",value:function(e,t,r,n){var a=this._data,i=[t,r];if(n)this._sortData(),a[e]=i;else{if(a.length)if(a[a.length-1][0]>=t)a.push(i);else if(a[0][0]<=t)a.unshift(i);else{var s=Math.round(a.length/2);this._data=a.slice(0,s).concat(i).concat(a.slice(s))}else this._data.push(i);this._changedData=!0,this._changedLength=!0}}},{key:"_unsetInternalPos",value:function(e){this._data.splice(e,1)}},{key:"_sortData",value:function(){this._changedData&&this._data.sort(o),this._changedData=!1}},{key:"bitField",value:function(){for(var e,t=[],r=8,n=0,a=0,i=this._bitArrays.slice();i.length||n;){0===n&&(e=i.shift(),n=7);var s=Math.min(n,r);a|=(e&~(255<<s))<<8-r,e>>>=s,n-=s,(r-=s)&&(n||i.length)||(t.push(a),a=0,r=8)}for(var o=t.length-1;o>0;o--){if(0!==t[o])break;t.pop()}return t}},{key:"compactArray",value:function(){return this._sortData(),this._data.map(u)}}]),e}()},9210:function(e,t,r){var n=r(7061).default,a=r(6737).default,i=r(8186).default;e.exports=function(e){if(e[Symbol.asyncIterator])return e;if(e.getReader)return i(n().mark((function t(){var r,i,s,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getReader(),t.prev=1;case 2:return t.next=5,a(r.read());case 5:if(i=t.sent,s=i.done,o=i.value,!s){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,o;case 12:t.next=2;break;case 14:return t.prev=14,r.releaseLock(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,,14,17]])})))();throw new Error("unknown stream")}},5948:function(e,t,r){"use strict";var n=r(2543).Buffer,a=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(n.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var a=s(t[n]);if(a>=0)return a>0&&(e.lastNeed=a-1),a;if(--n<r||-2===a)return 0;if((a=s(t[n]))>=0)return a>0&&(e.lastNeed=a-2),a;if(--n<r||-2===a)return 0;if((a=s(t[n]))>=0)return a>0&&(2===a?a=0:e.lastNeed=a-3),a;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},7683:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6115).default,s=r(1588).default,o=r(3808).default,u=r(1655).default,c=r(6389).default,l=globalThis.AbortController,f=r(1779),p=function(e){u(r,e);var t=c(r);function r(e){var a;return n(this,r),(a=t.call(this))._ms=e,a._timer=f((function(){return a.abort()}),e),Object.setPrototypeOf(i(a),r.prototype),a}return a(r,[{key:"abort",value:function(){return this._timer.clear(),s(o(r.prototype),"abort",this).call(this)}},{key:"clear",value:function(){this._timer.clear()}},{key:"reset",value:function(){var e=this;this._timer.clear(),this._timer=f((function(){return e.abort()}),this._ms)}}]),r}(l);e.exports={TimeoutController:p}},9900:function(e){!function(){e.exports=y;var t=86400,r=3200,n=1168776,a=100982246400,i=1e3*a,s=864e13,o=4294967296,u=1e6,c=1e9,l="000000000",f=Math.trunc||function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!==1/0)?-0:t},p=y.prototype;y.fromDate=function(e){return new y(+e)},y.fromInt64BE=k(0,1,2,3,0,4),y.fromInt64LE=k(3,2,1,0,4,0),y.fromString=function(e){var t,r=new y,n=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=+e,n=1970+(t-1970)%400;return r.year=t-n,n})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,r,n){return r<0&&(n*=-1),t=6e4*(60*+r+ +n),""})).replace(/\.\d+$/,(function(e){return r.nano=+(e+l).substr(1,9),""})).split(/\D+/);n.length>1?n[1]--:n[1]=0;if(r.time=t=Date.UTC.apply(Date,n)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return g(r)},y.fromTimeT=function(e){return b(e,0)},p.year=0,p.time=0,p.nano=0,p.addNano=function(e){return this.nano+=+e||0,this},p.getNano=function(){var e=g(this);return(e.time%1e3*u+ +e.nano+c)%c},p.getTimeT=function(){var e=g(this),a=Math.floor(e.time/1e3),i=e.year;i&&(a+=i*n*t/r);return a},p.getYear=function(){return this.toDate().getUTCFullYear()+this.year},p.toDate=function(){return m(g(this).time)},p.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},p.toString=function(e){var t=this,r=t.toDate(),n={H:function(){return _(r.getUTCHours())},L:function(){return E(r.getUTCMilliseconds(),3)},M:function(){return _(r.getUTCMinutes())},N:function(){return E(t.getNano(),9)},S:function(){return _(r.getUTCSeconds())},Y:function(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+E(e,6):e>=0?E(e,4):e>=-999999?"-"+E(-e,6):e},a:function(){return d[r.getUTCDay()]},b:function(){return h[r.getUTCMonth()]},d:function(){return _(r.getUTCDate())},e:function(){return e=r.getUTCDate(),(e>9?"":" ")+(0|e);var e},m:function(){return _(r.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var r=t[1],a=v[r],i=n[r];return a?e(a):i?i():t}))}(e||"%Y-%m-%dT%H:%M:%S.%NZ")},p.writeInt64BE=w(0,1,2,3,0,4),p.writeInt64LE=w(3,2,1,0,4,0);var h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return y;function y(e,t,r){var n=this;if(!(n instanceof y))return new y(e,t,r);n.time=+e||0,n.nano=+t||0,n.year=+r||0,g(n)}function g(e){var t,n,a=e.year,o=e.time,c=e.nano;if(c<0||u<=c){var l=Math.floor(c/u);c-=l*u,o+=l,t=1}var p=a%r;if(o<-s||s<o||p){(n=f(o/i))&&(a+=n*r,o-=n*i);var h=m(o);h.setUTCFullYear(p+h.getUTCFullYear());var d=(o=+h)+(n=f((a-=p)/r))*i;n&&-s<=d&&d<=s&&(a-=n*r,o=d),t=1}return t&&(e.year=a,e.time=o,e.nano=c),e}function m(e){var t=new Date(0);return t.setTime(e),t}function b(e,t){t|=0,e=+e||0;var n=f((t*=o)/a)+f(e/a),i=t%a+e%a,s=f(i/a);return s&&(n+=s,i-=s*a),new y(1e3*i,0,n*r)}function w(e,t,r,n,a,i){return function(e,t){var r=g(this);e||(e=new Array(8));x(e,t|=0);var n=Math.floor(r.time/1e3),u=31556952*r.year,c=f(u/o)+f(n/o),l=u%o+n%o,p=Math.floor(l/o);p&&(c+=p,l-=p*o);return s(e,t+a,c),s(e,t+i,l),e};function s(a,i,s){a[i+e]=s>>24&255,a[i+t]=s>>16&255,a[i+r]=s>>8&255,a[i+n]=255&s}}function k(e,t,r,n,a,i){return function(e,t){x(e,t|=0);var r=s(e,t+a);return b(s(e,t+i),r)};function s(a,i){return 16777216*a[i+e]+(a[i+t]<<16|a[i+r]<<8|a[i+n])}}function x(e,t){var r=e&&e.length;if(null==r)throw new TypeError("Invalid Buffer");if(r<t+8)throw new RangeError("Out of range")}function _(e){return(e>9?"":"0")+(0|e)}function E(e,t){return(l+(0|e)).substr(-t)}}()},206:function(e,t,r){"use strict";var n=r(9022),a=r(4847);e.exports=n.bind(null,a)},9022:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e,n,a){if("string"!==typeof n)throw new Error("Input must be string");for(var i,s,o=n.length,u=0,c=0;c<o;c+=1){if(i=n.charCodeAt(c),s=n[c],t(i)&&r(n.charCodeAt(c+1))&&(s+=n[c+=1]),(u+=e(s))===a)return n.slice(0,c+1);if(u>a)return n.slice(0,c-s.length+1)}return n}},4847:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!==typeof e)throw new Error("Input must be string");for(var n=e.length,a=0,i=null,s=null,o=0;o<n;o++)r(i=e.charCodeAt(o))?null!=s&&t(s)?a+=1:a+=3:i<=127?a+=1:i>=128&&i<=2047?a+=2:i>=2048&&i<=65535&&(a+=3),s=i;return a}},9515:function(e,t,r){function n(e){try{if(!r.g.localStorage)return!1}catch(n){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},6794:function(e){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},7374:function(e,t,r){"use strict";var n=r(5450),a=r(5718),i=r(8264),s=r(6218);function o(e){return e.call.bind(e)}var u="undefined"!==typeof BigInt,c="undefined"!==typeof Symbol,l=o(Object.prototype.toString),f=o(Number.prototype.valueOf),p=o(String.prototype.valueOf),h=o(Boolean.prototype.valueOf);if(u)var d=o(BigInt.prototype.valueOf);if(c)var v=o(Symbol.prototype.valueOf);function y(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(r){return!1}}function g(e){return"[object Map]"===l(e)}function m(e){return"[object Set]"===l(e)}function b(e){return"[object WeakMap]"===l(e)}function w(e){return"[object WeakSet]"===l(e)}function k(e){return"[object ArrayBuffer]"===l(e)}function x(e){return"undefined"!==typeof ArrayBuffer&&(k.working?k(e):e instanceof ArrayBuffer)}function _(e){return"[object DataView]"===l(e)}function E(e){return"undefined"!==typeof DataView&&(_.working?_(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=a,t.isTypedArray=s,t.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||E(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},g.working="undefined"!==typeof Map&&g(new Map),t.isMap=function(e){return"undefined"!==typeof Map&&(g.working?g(e):e instanceof Map)},m.working="undefined"!==typeof Set&&m(new Set),t.isSet=function(e){return"undefined"!==typeof Set&&(m.working?m(e):e instanceof Set)},b.working="undefined"!==typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!==typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},k.working="undefined"!==typeof ArrayBuffer&&k(new ArrayBuffer),t.isArrayBuffer=x,_.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&_(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=E;var S="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function A(e){return"[object SharedArrayBuffer]"===l(e)}function I(e){return"undefined"!==typeof S&&("undefined"===typeof A.working&&(A.working=A(new S)),A.working?A(e):e instanceof S)}function C(e){return y(e,f)}function Z(e){return y(e,p)}function R(e){return y(e,h)}function T(e){return u&&y(e,d)}function D(e){return c&&y(e,v)}t.isSharedArrayBuffer=I,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=C,t.isStringObject=Z,t.isBooleanObject=R,t.isBigIntObject=T,t.isSymbolObject=D,t.isBoxedPrimitive=function(e){return C(e)||Z(e)||R(e)||T(e)||D(e)},t.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(x(e)||I(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9639:function(e,t,r){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},a=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(a,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}})),o=n[r];r<i;o=n[++r])y(o)||!k(o)?s+=" "+o:s+=" "+u(o);return s},t.deprecate=function(e,r){if("undefined"!==typeof process&&!0===process.noDeprecation)return e;if("undefined"===typeof process)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}};var i={},s=/^$/;if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG){var o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}function u(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),f(n,e,n.depth)}function c(e,t){var r=u.styles[t];return r?"\x1b["+u.colors[r][0]+"m"+e+"\x1b["+u.colors[r][1]+"m":e}function l(e,t){return e}function f(e,r,n){if(e.customInspect&&r&&E(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var a=r.inspect(n,e);return m(a)||(a=f(e,a,n)),a}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(e,r);if(i)return i;var s=Object.keys(r),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),_(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(r);if(0===s.length){if(E(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return e.stylize(Date.prototype.toString.call(r),"date");if(_(r))return p(r)}var c,l="",k=!1,S=["{","}"];(d(r)&&(k=!0,S=["[","]"]),E(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(l=" "+RegExp.prototype.toString.call(r)),x(r)&&(l=" "+Date.prototype.toUTCString.call(r)),_(r)&&(l=" "+p(r)),0!==s.length||k&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=k?function(e,t,r,n,a){for(var i=[],s=0,o=t.length;s<o;++s)Z(t,String(s))?i.push(h(e,t,r,n,String(s),!0)):i.push("");return a.forEach((function(a){a.match(/^\d+$/)||i.push(h(e,t,r,n,a,!0))})),i}(e,r,n,o,s):s.map((function(t){return h(e,r,n,o,t,k)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,l,S)):S[0]+l+S[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,a,i){var s,o,u;if((u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?o=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(o=e.stylize("[Setter]","special")),Z(n,a)||(s="["+a+"]"),o||(e.seen.indexOf(u.value)<0?(o=y(r)?f(e,u.value,null):f(e,u.value,r-1)).indexOf("\n")>-1&&(o=i?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),b(s)){if(i&&a.match(/^\d+$/))return o;(s=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function d(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function y(e){return null===e}function g(e){return"number"===typeof e}function m(e){return"string"===typeof e}function b(e){return void 0===e}function w(e){return k(e)&&"[object RegExp]"===S(e)}function k(e){return"object"===typeof e&&null!==e}function x(e){return k(e)&&"[object Date]"===S(e)}function _(e){return k(e)&&("[object Error]"===S(e)||e instanceof Error)}function E(e){return"function"===typeof e}function S(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!i[e])if(s.test(e)){var r=process.pid;i[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else i[e]=function(){};return i[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(7374),t.isArray=d,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=m,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=b,t.isRegExp=w,t.types.isRegExp=w,t.isObject=k,t.isDate=x,t.types.isDate=x,t.isError=_,t.types.isNativeError=_,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(6794);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function Z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=r(2534),t._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var R="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!==typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);a.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,a)}catch(s){r(s)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=R,t.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var a=this,i=function(){return n.apply(a,arguments)};e.apply(this,t).then((function(e){process.nextTick(i.bind(null,null,e))}),(function(e){process.nextTick(T.bind(null,e,i))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}},9662:function(e){e.exports=function e(t,r){var n,a=0,i=0,s=r=r||0,o=t.length;do{if(s>=o)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=s-r,a}},1625:function(e){e.exports=function e(r,n,a){n=n||[];var i=a=a||0;for(;r>=t;)n[a++]=255&r|128,r/=128;for(;-128&r;)n[a++]=255&r|128,r>>>=7;return n[a]=0|r,e.bytes=a-i+1,n};var t=Math.pow(2,31)},6074:function(e,t,r){e.exports={encode:r(1625),decode:r(9662),encodingLength:r(3120)}},3120:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),a=Math.pow(2,28),i=Math.pow(2,35),s=Math.pow(2,42),o=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<a?4:e<i?5:e<s?6:e<o?7:e<u?8:e<c?9:10}},9806:function(e,t,r){"use strict";var n=r(6074);e.exports=function(e){if(!(e instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");for(var t=[];e.length>0;){var r=n.decode(e);t.push(r),e=e.slice(n.decode.bytes)}return t}},3522:function(e){e.exports=function e(t,r){var n,a=0,i=0,s=r=r||0,o=t.length;do{if(s>=o||i>49)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=s-r,a}},6993:function(e){e.exports=function e(r,n,a){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");n=n||[];var i=a=a||0;for(;r>=t;)n[a++]=255&r|128,r/=128;for(;-128&r;)n[a++]=255&r|128,r>>>=7;return n[a]=0|r,e.bytes=a-i+1,n};var t=Math.pow(2,31)},4561:function(e,t,r){e.exports={encode:r(6993),decode:r(3522),encodingLength:r(2570)}},2570:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),a=Math.pow(2,28),i=Math.pow(2,35),s=Math.pow(2,42),o=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<a?4:e<i?5:e<s?6:e<o?7:e<u?8:e<c?9:10}},3227:function(e,t,r){"use strict";var n=r(2193),a="object"===typeof window&&"object"===typeof document&&9===document.nodeType,i=n(),s=a&&!i,o=i&&!a,u=i&&a,c="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!i,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,f="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&"test"===globalThis.process.env.NODE_ENV,p="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:f,isElectron:i,isElectronMain:o,isElectronRenderer:u,isNode:c,isBrowser:s,isWebWorker:l,isEnvWithDom:a,isReactNative:p}},8264:function(e,t,r){"use strict";var n=r(5369),a=r(306),i=r(4037),s=i("Object.prototype.toString"),o=r(4707)(),u="undefined"===typeof globalThis?r.g:globalThis,c=a(),l=i("String.prototype.slice"),f={},p=r(636),h=Object.getPrototypeOf;o&&p&&h&&n(c,(function(e){if("function"===typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var r=h(t),n=p(r,Symbol.toStringTag);if(!n){var a=h(r);n=p(a,Symbol.toStringTag)}f[e]=n.get}}}));var d=r(6218);e.exports=function(e){return!!d(e)&&(o&&Symbol.toStringTag in e?function(e){var t=!1;return n(f,(function(r,n){if(!t)try{var a=r.call(e);a===n&&(t=a)}catch(i){}})),t}(e):l(s(e),8,-1))}},7420:function(){},5856:function(){},5883:function(){},2480:function(){},2596:function(){},9880:function(){},9156:function(){},5819:function(){},2361:function(){},4616:function(){},4642:function(e,t,r){var n=r(9805);function a(e){var t,r;function a(t,r){try{var s=e[t](r),o=s.value,u=o instanceof n;Promise.resolve(u?o.wrapped:o).then((function(e){u?a("return"===t?"return":"next",e):i(s.done?"return":"normal",e)}),(function(e){a("throw",e)}))}catch(c){i("throw",c)}}function i(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?a(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise((function(i,s){var o={key:e,arg:n,resolve:i,reject:s,next:null};r?r=r.next=o:(t=r=o,a(e,n))}))},"function"!==typeof e.return&&(this.return=void 0)}a.prototype["function"===typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)},e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9805:function(e){e.exports=function(e){this.wrapped=e},e.exports.__esModule=!0,e.exports.default=e.exports},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,r){var n=r(3897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8131:function(e){e.exports=function(e,t){var r={},n=!1;function a(r,a){return n=!0,a=new Promise((function(t){t(e[r](a))})),{done:!1,value:t(a)}}return r["undefined"!==typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},r.next=function(e){return n?(n=!1,e):a("next",e)},"function"===typeof e.throw&&(r.throw=function(e){if(n)throw n=!1,e;return a("throw",e)}),"function"===typeof e.return&&(r.return=function(e){return n?(n=!1,e):a("return",e)}),r},e.exports.__esModule=!0,e.exports.default=e.exports},8237:function(e){function t(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return t=function(e){this.s=e,this.n=e.next},t.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new t(e)}e.exports=function(e){var r,n,a,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);i--;){if(n&&null!=(r=e[n]))return r.call(e);if(a&&null!=(r=e[a]))return new t(r.call(e));n="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(a,i){var s=e.apply(r,n);function o(e){t(s,a,i,o,u,"next",e)}function u(e){t(s,a,i,o,u,"throw",e)}o(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6737:function(e,t,r){var n=r(9805);e.exports=function(e){return new n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,r){var n=r(6015),a=r(9617);function i(t,r,s){return a()?(e.exports=i=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,r){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return r&&n(i,r.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,r){var n=r(6116);e.exports=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw s}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,r){var n=r(3808),a=r(9617),i=r(4993);e.exports=function(e){var t=a();return function(){var r,a=n(e);if(t){var s=n(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return i(this,r)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,r){var n=r(1753);function a(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=a=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,r){var n=r(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(u){o=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,r){var n=r(8416);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,r){var n=r(8698).default,a=r(6115);e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,r){var n=r(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,i=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(Z){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),s=new A(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return C()}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var o=_(s,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(Z){return{type:"throw",arg:Z}}}t.wrap=f;var h={};function d(){}function v(){}function y(){}var g={};l(g,o,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(I([])));b&&b!==r&&i.call(b,o)&&(g=b);var w=y.prototype=d.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,s,o,u){var c=p(e[a],e,s);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(c.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function _(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=y,l(w,"constructor",y),l(y,"constructor",v),v.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var s=new x(f(e,r,n,a),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(w),l(w,c,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(o&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,r){var n=r(5372),a=r(8872),i=r(6116),s=r(2218);e.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,r){var n=r(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,r){var n=r(3405),a=r(9498),i=r(6116),s=r(2281);e.exports=function(e){return n(e)||a(e)||i(e)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,r){var n=r(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},8186:function(e,t,r){var n=r(4642);e.exports=function(e){return function(){return new n(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,r){var n=r(3808),a=r(6015),i=r(6035),s=r(3515);function o(t){var r="function"===typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!i(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},306:function(e,t,r){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],a="undefined"===typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"===typeof a[n[t]]&&(e[e.length]=n[t]);return e}},636:function(e,t,r){"use strict";var n=r(2506)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(a){n=null}e.exports=n},907:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:function(){return n}})},3878:function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}r.d(t,{Z:function(){return n}})},5861:function(e,t,r){"use strict";function n(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var s=e.apply(t,r);function o(e){n(s,a,i,o,u,"next",e)}function u(e){n(s,a,i,o,u,"throw",e)}o(void 0)}))}}r.d(t,{Z:function(){return a}})},5671:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:function(){return n}})},3144:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r.d(t,{Z:function(){return a}})},7762:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(181);function a(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=(0,n.Z)(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw s}}}}},4942:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})},5267:function(e,t,r){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,{Z:function(){return n}})},1413:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(4942);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},4165:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(1002);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),s=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var o=x(s,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var p={};function h(){}function d(){}function v(){}var y={};c(y,s,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(A([])));m&&m!==t&&r.call(m,s)&&(y=m);var b=v.prototype=h.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function a(i,s,o,u){var c=f(e[i],e,s);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==(0,n.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,u)}),(function(e){a("throw",e,o,u)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,u)}))}u(c.arg)}var i;this._invoke=function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return i=i?i.then(n,n):n()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=v,c(b,"constructor",v),c(v,"constructor",d),d.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var s=new k(l(t,r,n,a),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(b),c(b,u,"Generator"),c(b,s,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}},9439:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(3878);var a=r(181),i=r(5267);function s(e,t){return(0,n.Z)(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(u){o=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},1002:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:function(){return n}})},181:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(907);function a(e,t){if(e){if("string"===typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}},1149:function(e,t,r){"use strict";r.d(t,{Dy:function(){return i.D},Jx:function(){return a.Jx},WU:function(){return i.W},cv:function(){return n.cv}});var n=r(310),a=r(2548),i=r(2651)},8039:function(e,t,r){"use strict";r.d(t,{Fh:function(){return d},Jl:function(){return u},Km:function(){return l},Tp:function(){return v},X0:function(){return o},YX:function(){return c},Zh:function(){return f},cs:function(){return p},kj:function(){return s},or:function(){return i},uN:function(){return h}});var n=r(2651),a=r(8912),i=[24,256,65536,4294967296,BigInt("18446744073709551616")];function s(e,t,r){(0,a.DO)(e,t,1);var n=e[t];if(!0===r.strict&&n<i[0])throw new Error("".concat(a.IR," integer encoded in more bytes than necessary (strict decode)"));return n}function o(e,t,r){(0,a.DO)(e,t,2);var n=e[t]<<8|e[t+1];if(!0===r.strict&&n<i[1])throw new Error("".concat(a.IR," integer encoded in more bytes than necessary (strict decode)"));return n}function u(e,t,r){(0,a.DO)(e,t,4);var n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<i[2])throw new Error("".concat(a.IR," integer encoded in more bytes than necessary (strict decode)"));return n}function c(e,t,r){(0,a.DO)(e,t,8);var n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],s=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],o=(BigInt(n)<<BigInt(32))+BigInt(s);if(!0===r.strict&&o<i[3])throw new Error("".concat(a.IR," integer encoded in more bytes than necessary (strict decode)"));if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(!0===r.allowBigInt)return o;throw new Error("".concat(a.IR," integers outside of the safe integer range are not supported"))}function l(e,t,r,a){return new n.W(n.D.uint,s(e,t+1,a),2)}function f(e,t,r,a){return new n.W(n.D.uint,o(e,t+1,a),3)}function p(e,t,r,a){return new n.W(n.D.uint,u(e,t+1,a),5)}function h(e,t,r,a){return new n.W(n.D.uint,c(e,t+1,a),9)}function d(e,t){return v(e,0,t.value)}function v(e,t,r){if(r<i[0]){var n=Number(r);e.push([t|n])}else if(r<i[1]){var s=Number(r);e.push([24|t,s])}else if(r<i[2]){var o=Number(r);e.push([25|t,o>>>8,255&o])}else if(r<i[3]){var u=Number(r);e.push([26|t,u>>>24&255,u>>>16&255,u>>>8&255,255&u])}else{var c=BigInt(r);if(!(c<i[4]))throw new Error("".concat(a.IR," encountered BigInt larger than allowable range"));var l=[27|t,0,0,0,0,0,0,0],f=Number(c&BigInt(4294967295)),p=Number(c>>BigInt(32)&BigInt(4294967295));l[8]=255&f,f>>=8,l[7]=255&f,f>>=8,l[6]=255&f,f>>=8,l[5]=255&f,l[4]=255&p,p>>=8,l[3]=255&p,p>>=8,l[2]=255&p,p>>=8,l[1]=255&p,e.push(l)}}d.encodedSize=function(e){return v.encodedSize(e.value)},v.encodedSize=function(e){return e<i[0]?1:e<i[1]?2:e<i[2]?3:e<i[3]?5:9},d.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}},5779:function(e,t,r){"use strict";r.d(t,{UT:function(){return p},ec:function(){return f},r0:function(){return o},wy:function(){return u},yr:function(){return s}});var n=r(2651),a=r(8039),i=r(8912);function s(e,t,r,i){return new n.W(n.D.negint,-1-a.kj(e,t+1,i),2)}function o(e,t,r,i){return new n.W(n.D.negint,-1-a.X0(e,t+1,i),3)}function u(e,t,r,i){return new n.W(n.D.negint,-1-a.Jl(e,t+1,i),5)}var c=BigInt(-1),l=BigInt(1);function f(e,t,r,s){var o=a.YX(e,t+1,s);if("bigint"!==typeof o){var u=-1-o;if(u>=Number.MIN_SAFE_INTEGER)return new n.W(n.D.negint,u,9)}if(!0!==s.allowBigInt)throw new Error("".concat(i.IR," integers outside of the safe integer range are not supported"));return new n.W(n.D.negint,c-BigInt(o),9)}function p(e,t){var r=t.value,n="bigint"===typeof r?r*c-l:-1*r-1;a.Tp(e,t.type.majorEncoded,n)}p.encodedSize=function(e){var t=e.value,r="bigint"===typeof t?t*c-l:-1*t-1;return r<a.or[0]?1:r<a.or[1]?2:r<a.or[2]?3:r<a.or[3]?5:9},p.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0}},8125:function(e,t,r){"use strict";r.d(t,{BS:function(){return l},Ii:function(){return u},ME:function(){return p},UQ:function(){return c},hg:function(){return d},zU:function(){return f}});var n=r(2651),a=r(8912),i=r(8039),s=r(2741);function o(e,t,r,i){(0,a.DO)(e,t,r+i);var o=(0,s.tP)(e,t+r,t+r+i);return new n.W(n.D.bytes,o,r+i)}function u(e,t,r,n){return o(e,t,1,r)}function c(e,t,r,n){return o(e,t,2,i.kj(e,t+1,n))}function l(e,t,r,n){return o(e,t,3,i.X0(e,t+1,n))}function f(e,t,r,n){return o(e,t,5,i.Jl(e,t+1,n))}function p(e,t,r,n){var s=i.YX(e,t+1,n);if("bigint"===typeof s)throw new Error("".concat(a.IR," 64-bit integer bytes lengths not supported"));return o(e,t,9,s)}function h(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===n.D.string?(0,s.mL)(e.value):e.value),e.encodedBytes}function d(e,t){var r=h(t);i.Tp(e,t.type.majorEncoded,r.length),e.push(r)}d.encodedSize=function(e){var t=h(e);return i.Tp.encodedSize(t.length)+t.length},d.compareTokens=function(e,t){return r=h(e),n=h(t),r.length<n.length?-1:r.length>n.length?1:(0,s.qu)(r,n);var r,n}},4989:function(e,t,r){"use strict";r.d(t,{Bq:function(){return l},YW:function(){return d},bc:function(){return h},h:function(){return f},nt:function(){return c},q0:function(){return p}});var n=r(2651),a=r(8912),i=r(8039),s=r(8125),o=r(2741);function u(e,t,r,i,s){var u=r+i;(0,a.DO)(e,t,u);var c=new n.W(n.D.string,(0,o.BB)(e,t+r,t+u),u);return!0===s.retainStringBytes&&(c.byteValue=(0,o.tP)(e,t+r,t+u)),c}function c(e,t,r,n){return u(e,t,1,r,n)}function l(e,t,r,n){return u(e,t,2,i.kj(e,t+1,n),n)}function f(e,t,r,n){return u(e,t,3,i.X0(e,t+1,n),n)}function p(e,t,r,n){return u(e,t,5,i.Jl(e,t+1,n),n)}function h(e,t,r,n){var s=i.YX(e,t+1,n);if("bigint"===typeof s)throw new Error("".concat(a.IR," 64-bit integer string lengths not supported"));return u(e,t,9,s,n)}var d=s.hg},2386:function(e,t,r){"use strict";r.d(t,{HF:function(){return h},Ju:function(){return o},OC:function(){return c},a8:function(){return f},h7:function(){return u},lY:function(){return l},s5:function(){return p}});var n=r(2651),a=r(8039),i=r(8912);function s(e,t,r,a){return new n.W(n.D.array,a,r)}function o(e,t,r,n){return s(0,0,1,r)}function u(e,t,r,n){return s(0,0,2,a.kj(e,t+1,n))}function c(e,t,r,n){return s(0,0,3,a.X0(e,t+1,n))}function l(e,t,r,n){return s(0,0,5,a.Jl(e,t+1,n))}function f(e,t,r,n){var o=a.YX(e,t+1,n);if("bigint"===typeof o)throw new Error("".concat(i.IR," 64-bit integer array lengths not supported"));return s(0,0,9,o)}function p(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("".concat(i.IR," indefinite length items not allowed"));return s(0,0,1,1/0)}function h(e,t){a.Tp(e,n.D.array.majorEncoded,t.value)}h.compareTokens=a.Fh.compareTokens,h.encodedSize=function(e){return a.Tp.encodedSize(e.value)}},9634:function(e,t,r){"use strict";r.d(t,{F2:function(){return f},G:function(){return u},IY:function(){return l},KI:function(){return h},_K:function(){return o},ng:function(){return p},qe:function(){return c}});var n=r(2651),a=r(8039),i=r(8912);function s(e,t,r,a){return new n.W(n.D.map,a,r)}function o(e,t,r,n){return s(0,0,1,r)}function u(e,t,r,n){return s(0,0,2,a.kj(e,t+1,n))}function c(e,t,r,n){return s(0,0,3,a.X0(e,t+1,n))}function l(e,t,r,n){return s(0,0,5,a.Jl(e,t+1,n))}function f(e,t,r,n){var o=a.YX(e,t+1,n);if("bigint"===typeof o)throw new Error("".concat(i.IR," 64-bit integer map lengths not supported"));return s(0,0,9,o)}function p(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("".concat(i.IR," indefinite length items not allowed"));return s(0,0,1,1/0)}function h(e,t){a.Tp(e,n.D.map.majorEncoded,t.value)}h.compareTokens=a.Fh.compareTokens,h.encodedSize=function(e){return a.Tp.encodedSize(e.value)}},5454:function(e,t,r){"use strict";r.d(t,{CF:function(){return o},MV:function(){return c},ZR:function(){return s},qJ:function(){return i},vP:function(){return u},xy:function(){return l}});var n=r(2651),a=r(8039);function i(e,t,r,a){return new n.W(n.D.tag,r,1)}function s(e,t,r,i){return new n.W(n.D.tag,a.kj(e,t+1,i),2)}function o(e,t,r,i){return new n.W(n.D.tag,a.X0(e,t+1,i),3)}function u(e,t,r,i){return new n.W(n.D.tag,a.Jl(e,t+1,i),5)}function c(e,t,r,i){return new n.W(n.D.tag,a.YX(e,t+1,i),9)}function l(e,t){a.Tp(e,n.D.tag.majorEncoded,t.value)}l.compareTokens=a.Fh.compareTokens,l.encodedSize=function(e){return a.Tp.encodedSize(e.value)}},6453:function(e,t,r){"use strict";r.d(t,{GI:function(){return l},h1:function(){return s},mW:function(){return c},tA:function(){return p},vV:function(){return f},y7:function(){return o}});var n=r(2651),a=r(8912),i=r(8039);function s(e,t,r,i){if(!1===i.allowUndefined)throw new Error("".concat(a.IR," undefined values are not supported"));return!0===i.coerceUndefinedToNull?new n.W(n.D.null,null,1):new n.W(n.D.undefined,void 0,1)}function o(e,t,r,i){if(!1===i.allowIndefinite)throw new Error("".concat(a.IR," indefinite length items not allowed"));return new n.W(n.D.break,void 0,1)}function u(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error("".concat(a.IR," NaN values are not supported"));if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error("".concat(a.IR," Infinity values are not supported"))}return new n.W(n.D.float,e,t)}function c(e,t,r,n){return u(g(e,t+1),3,n)}function l(e,t,r,n){return u(b(e,t+1),5,n)}function f(e,t,r,n){return u(w(e,t+1),9,n)}function p(e,t,r){var a,i=t.value;if(!1===i)e.push([20|n.D.float.majorEncoded]);else if(!0===i)e.push([21|n.D.float.majorEncoded]);else if(null===i)e.push([22|n.D.float.majorEncoded]);else if(void 0===i)e.push([23|n.D.float.majorEncoded]);else{var s=!1;r&&!0===r.float64||(y(i),i===g(v,1)||Number.isNaN(i)?(v[0]=249,e.push(v.slice(0,3)),s=!0):(m(i),i===b(v,1)&&(v[0]=250,e.push(v.slice(0,5)),s=!0))),s||(a=i,d.setFloat64(0,a,!1),w(v,1),v[0]=251,e.push(v.slice(0,9)))}}p.encodedSize=function(e,t){var r=e.value;if(!1===r||!0===r||null===r||void 0===r)return 1;if(!t||!0!==t.float64){y(r);var n=g(v,1);if(r===n||Number.isNaN(r))return 3;if(m(r),r===(n=b(v,1)))return 5}return 9};var h=new ArrayBuffer(9),d=new DataView(h,1),v=new Uint8Array(h,0);function y(e){if(e===1/0)d.setUint16(0,31744,!1);else if(e===-1/0)d.setUint16(0,64512,!1);else if(Number.isNaN(e))d.setUint16(0,32256,!1);else{d.setFloat32(0,e);var t=d.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)d.setUint16(0,31744,!1);else if(0===r)d.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{var a=r-127;a<-24?d.setUint16(0,0):a<-14?d.setUint16(0,(2147483648&t)>>16|1<<24+a,!1):d.setUint16(0,(2147483648&t)>>16|a+15<<10|n>>13,!1)}}}function g(e,t){if(e.length-t<2)throw new Error("".concat(a.IR," not enough data for float16"));var r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;var n,i=r>>10&31,s=1023&r;return n=0===i?s*Math.pow(2,-24):31!==i?(s+1024)*Math.pow(2,i-25):0===s?1/0:NaN,32768&r?-n:n}function m(e){d.setFloat32(0,e,!1)}function b(e,t){if(e.length-t<4)throw new Error("".concat(a.IR," not enough data for float32"));var r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function w(e,t){if(e.length-t<8)throw new Error("".concat(a.IR," not enough data for float64"));var r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}p.compareTokens=i.Fh.compareTokens},2741:function(e,t,r){"use strict";r.d(t,{BB:function(){return c},Dz:function(){return u},Pu:function(){return m},mL:function(){return l},nI:function(){return f},qu:function(){return v},tP:function(){return p},un:function(){return d},zo:function(){return h}});var n=r(7762),a=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,i=new TextDecoder,s=new TextEncoder;function o(e){return a&&globalThis.Buffer.isBuffer(e)}function u(e){return e instanceof Uint8Array?o(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var c=a?function(e,t,r){return r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):g(e,t,r)}:function(e,t,r){return r-t>64?i.decode(e.subarray(t,r)):g(e,t,r)},l=a?function(e){return e.length>64?globalThis.Buffer.from(e):y(e)}:function(e){return e.length>64?s.encode(e):y(e)},f=function(e){return Uint8Array.from(e)},p=a?function(e,t,r){return o(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r)}:function(e,t,r){return e.slice(t,r)},h=a?function(e,t){return e=e.map((function(e){return e instanceof Uint8Array?e:globalThis.Buffer.from(e)})),u(globalThis.Buffer.concat(e,t))}:function(e,t){var r,a=new Uint8Array(t),i=0,s=(0,n.Z)(e);try{for(s.s();!(r=s.n()).done;){var o=r.value;i+o.length>a.length&&(o=o.subarray(0,a.length-i)),a.set(o,i),i+=o.length}}catch(u){s.e(u)}finally{s.f()}return a},d=a?function(e){return globalThis.Buffer.allocUnsafe(e)}:function(e){return new Uint8Array(e)};function v(e,t){if(o(e)&&o(t))return e.compare(t);for(var r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function y(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=e.length,a=null,i=[],s=0;s<n;++s){if((t=e.charCodeAt(s))>55295&&t<57344){if(!a){if(t>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(r-=3)>-1&&i.push(239,191,189);continue}a=t;continue}if(t<56320){(r-=3)>-1&&i.push(239,191,189),a=t;continue}t=65536+(a-55296<<10|t-56320)}else a&&(r-=3)>-1&&i.push(239,191,189);if(a=null,t<128){if((r-=1)<0)break;i.push(t)}else if(t<2048){if((r-=2)<0)break;i.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;i.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return i}function g(e,t,r){for(var n=[];t<r;){var a=e[t],i=null,s=a>239?4:a>223?3:a>191?2:1;if(t+s<=r){var o=void 0,u=void 0,c=void 0,l=void 0;switch(s){case 1:a<128&&(i=a);break;case 2:128===(192&(o=e[t+1]))&&(l=(31&a)<<6|63&o)>127&&(i=l);break;case 3:o=e[t+1],u=e[t+2],128===(192&o)&&128===(192&u)&&(l=(15&a)<<12|(63&o)<<6|63&u)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:o=e[t+1],u=e[t+2],c=e[t+3],128===(192&o)&&128===(192&u)&&128===(192&c)&&(l=(15&a)<<18|(63&o)<<12|(63&u)<<6|63&c)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),t+=s}return m(n)}function m(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}},8912:function(e,t,r){"use strict";r.d(t,{DO:function(){return s},IR:function(){return n},OO:function(){return a}});var n="CBOR decode error:",a="CBOR encode error:",i=[];function s(e,t,r){if(e.length-t<r)throw new Error("".concat(n," not enough data for type"))}i[23]=1,i[24]=2,i[25]=3,i[26]=5,i[27]=9},2548:function(e,t,r){"use strict";r.d(t,{Jx:function(){return h}});var n=r(5671),a=r(3144),i=r(8912),s=r(2651),o=r(2456),u={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},c=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.Z)(this,e),this.pos=0,this.data=t,this.options=r}return(0,a.Z)(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"next",value:function(){var e=this.data[this.pos],t=o.PS[e];if(void 0===t){var r=o.cW[e];if(!r)throw new Error("".concat(i.IR," no decoder for major type ").concat(e>>>5," (byte 0x").concat(e.toString(16).padStart(2,"0"),")"));var n=31&e;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}}]),e}(),l=Symbol.for("DONE"),f=Symbol.for("BREAK");function p(e,t){if(e.done())return l;var r=e.next();if(r.type===s.D.break)return f;if(r.type.terminal)return r.value;if(r.type===s.D.array)return function(e,t,r){for(var n=[],a=0;a<e.value;a++){var s=p(t,r);if(s===f){if(e.value===1/0)break;throw new Error("".concat(i.IR," got unexpected break to lengthed array"))}if(s===l)throw new Error("".concat(i.IR," found array but not enough entries (got ").concat(a,", expected ").concat(e.value,")"));n[a]=s}return n}(r,e,t);if(r.type===s.D.map)return function(e,t,r){for(var n=!0===r.useMaps,a=n?void 0:{},s=n?new Map:void 0,o=0;o<e.value;o++){var u=p(t,r);if(u===f){if(e.value===1/0)break;throw new Error("".concat(i.IR," got unexpected break to lengthed map"))}if(u===l)throw new Error("".concat(i.IR," found map but not enough entries (got ").concat(o," [no key], expected ").concat(e.value,")"));if(!0!==n&&"string"!==typeof u)throw new Error("".concat(i.IR," non-string keys not supported (got ").concat(typeof u,")"));var c=p(t,r);if(c===l)throw new Error("".concat(i.IR," found map but not enough entries (got ").concat(o," [no value], expected ").concat(e.value,")"));n?s.set(u,c):a[u]=c}return n?s:a}(r,e,t);if(r.type===s.D.tag){if(t.tags&&"function"===typeof t.tags[r.value]){var n=p(e,t);return t.tags[r.value](n)}throw new Error("".concat(i.IR," tag not supported (").concat(r.value,")"))}throw new Error("unsupported")}function h(e,t){if(!(e instanceof Uint8Array))throw new Error("".concat(i.IR," data to decode must be a Uint8Array"));var r=(t=Object.assign({},u,t)).tokenizer||new c(e,t),n=p(r,t);if(n===l)throw new Error("".concat(i.IR," did not find any content to decode"));if(n===f)throw new Error("".concat(i.IR," got unexpected break"));if(!r.done())throw new Error("".concat(i.IR," too many terminals, data makes no sense"));return n}},310:function(e,t,r){"use strict";r.d(t,{cv:function(){return N},w$:function(){return P}});var n=r(7762),a=r(5671),i=r(3144),s=["string","number","bigint","symbol"],o=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function u(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";var t=typeof e;if(s.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";var r=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);if(o.includes(t))return t;return}(e);return r||"Object"}var c=r(2651),l=r(2741),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;(0,a.Z)(this,e),this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}return(0,i.Z)(e,[{key:"reset",value:function(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}},{key:"push",value:function(e){var t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){var r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){var n=t.length-(this.maxCursor-this.cursor)-1;n<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=(0,l.un)(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}},{key:"toBytes",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){var r=this.chunks[0];t&&this.cursor>r.length/2?(e=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=(0,l.tP)(r,0,this.cursor)}else e=(0,l.zo)(this.chunks,this.cursor);return t&&this.reset(),e}}]),e}(),p=r(8912),h=r(2456),d=r(8039),v=r(5779),y=r(8125),g=r(4989),m=r(2386),b=r(9634),w=r(5454),k=r(6453),x={float64:!1,mapSorter:function(e,t){var r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);var a=r.type.major,i=_[a].compareTokens(r,n);0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return i},quickEncodeToken:h.JN};var _=function(){var e=[];return e[c.D.uint.major]=d.Fh,e[c.D.negint.major]=v.UT,e[c.D.bytes.major]=y.hg,e[c.D.string.major]=g.YW,e[c.D.array.major]=m.HF,e[c.D.map.major]=b.KI,e[c.D.tag.major]=w.xy,e[c.D.float.major]=k.tA,e}(),E=new f,S=function(){function e(t,r){(0,a.Z)(this,e),this.obj=t,this.parent=r}return(0,i.Z)(e,[{key:"includes",value:function(e){var t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}}],[{key:"createCheck",value:function(t,r){if(t&&t.includes(r))throw new Error("".concat(p.OO," object contains circular references"));return new e(r,t)}}]),e}(),A={null:new c.W(c.D.null,null),undefined:new c.W(c.D.undefined,void 0),true:new c.W(c.D.true,!0),false:new c.W(c.D.false,!1),emptyArray:new c.W(c.D.array,0),emptyMap:new c.W(c.D.map,0)},I={number:function(e,t,r,n){return Number.isInteger(e)&&Number.isSafeInteger(e)?e>=0?new c.W(c.D.uint,e):new c.W(c.D.negint,e):new c.W(c.D.float,e)},bigint:function(e,t,r,n){return e>=BigInt(0)?new c.W(c.D.uint,e):new c.W(c.D.negint,e)},Uint8Array:function(e,t,r,n){return new c.W(c.D.bytes,e)},string:function(e,t,r,n){return new c.W(c.D.string,e)},boolean:function(e,t,r,n){return e?A.true:A.false},null:function(e,t,r,n){return A.null},undefined:function(e,t,r,n){return A.undefined},ArrayBuffer:function(e,t,r,n){return new c.W(c.D.bytes,new Uint8Array(e))},DataView:function(e,t,r,n){return new c.W(c.D.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array:function(e,t,r,a){if(!e.length)return!0===r.addBreakTokens?[A.emptyArray,new c.W(c.D.break)]:A.emptyArray;a=S.createCheck(a,e);var i,s=[],o=0,u=(0,n.Z)(e);try{for(u.s();!(i=u.n()).done;){var l=i.value;s[o++]=T(l,r,a)}}catch(f){u.e(f)}finally{u.f()}return r.addBreakTokens?[new c.W(c.D.array,e.length),s,new c.W(c.D.break)]:[new c.W(c.D.array,e.length),s]},Object:function(e){function t(t,r,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,r,a){var i="Object"!==t,s=i?e.keys():Object.keys(e),o=i?e.size:s.length;if(!o)return!0===r.addBreakTokens?[A.emptyMap,new c.W(c.D.break)]:A.emptyMap;a=S.createCheck(a,e);var u,l=[],f=0,p=(0,n.Z)(s);try{for(p.s();!(u=p.n()).done;){var h=u.value;l[f++]=[T(h,r,a),T(i?e.get(h):e[h],r,a)]}}catch(d){p.e(d)}finally{p.f()}return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(l,r),r.addBreakTokens?[new c.W(c.D.map,o),l,new c.W(c.D.break)]:[new c.W(c.D.map,o),l]}))};I.Map=I.Object,I.Buffer=I.Uint8Array;var C,Z=(0,n.Z)("Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "));try{for(Z.s();!(C=Z.n()).done;){var R=C.value;I["".concat(R,"Array")]=I.DataView}}catch(O){Z.e(O)}finally{Z.f()}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=u(e),a=t&&t.typeEncoders&&t.typeEncoders[n]||I[n];if("function"===typeof a){var i=a(e,n,t,r);if(null!=i)return i}var s=I[n];if(!s)throw new Error("".concat(p.OO," unsupported type: ").concat(n));return s(e,n,t,r)}function D(e,t,r,a){if(Array.isArray(t)){var i,s=(0,n.Z)(t);try{for(s.s();!(i=s.n()).done;){D(e,i.value,r,a)}}catch(O){s.e(O)}finally{s.f()}}else r[t.type.major](e,t,a)}function P(e,t,r){var n=T(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){var a=r.quickEncodeToken(n);if(a)return a;var i=t[n.type.major];if(i.encodedSize){var s=i.encodedSize(n,r),o=new f(s);if(i(o,n,r),1!==o.chunks.length)throw new Error("Unexpected error: pre-calculated length for ".concat(n," was wrong"));return(0,l.Dz)(o.chunks[0])}}return E.reset(),D(E,n,t,r),E.toBytes(!0)}function N(e,t){return t=Object.assign({},x,t),P(e,_,t)}},2456:function(e,t,r){"use strict";r.d(t,{JN:function(){return C},PS:function(){return S},cW:function(){return y}});var n=r(2651),a=r(8039),i=r(5779),s=r(8125),o=r(4989),u=r(2386),c=r(9634),l=r(5454),f=r(6453),p=r(8912),h=r(2741);function d(e,t,r){throw new Error("".concat(p.IR," encountered invalid minor (").concat(r,") for major ").concat(e[t]>>>5))}function v(e){return function(){throw new Error("".concat(p.IR," ").concat(e))}}for(var y=[],g=0;g<=23;g++)y[g]=d;y[24]=a.Km,y[25]=a.Zh,y[26]=a.cs,y[27]=a.uN,y[28]=d,y[29]=d,y[30]=d,y[31]=d;for(var m=32;m<=55;m++)y[m]=d;y[56]=i.yr,y[57]=i.r0,y[58]=i.wy,y[59]=i.ec,y[60]=d,y[61]=d,y[62]=d,y[63]=d;for(var b=64;b<=87;b++)y[b]=s.Ii;y[88]=s.UQ,y[89]=s.BS,y[90]=s.zU,y[91]=s.ME,y[92]=d,y[93]=d,y[94]=d,y[95]=v("indefinite length bytes/strings are not supported");for(var w=96;w<=119;w++)y[w]=o.nt;y[120]=o.Bq,y[121]=o.h,y[122]=o.q0,y[123]=o.bc,y[124]=d,y[125]=d,y[126]=d,y[127]=v("indefinite length bytes/strings are not supported");for(var k=128;k<=151;k++)y[k]=u.Ju;y[152]=u.h7,y[153]=u.OC,y[154]=u.lY,y[155]=u.a8,y[156]=d,y[157]=d,y[158]=d,y[159]=u.s5;for(var x=160;x<=183;x++)y[x]=c._K;y[184]=c.G,y[185]=c.qe,y[186]=c.IY,y[187]=c.F2,y[188]=d,y[189]=d,y[190]=d,y[191]=c.ng;for(var _=192;_<=215;_++)y[_]=l.qJ;y[216]=l.ZR,y[217]=l.CF,y[218]=l.vP,y[219]=l.MV,y[220]=d,y[221]=d,y[222]=d,y[223]=d;for(var E=224;E<=243;E++)y[E]=v("simple values are not supported");y[244]=d,y[245]=d,y[246]=d,y[247]=f.h1,y[248]=v("simple values are not supported"),y[249]=f.mW,y[250]=f.GI,y[251]=f.vV,y[252]=d,y[253]=d,y[254]=d,y[255]=f.y7;for(var S=[],A=0;A<24;A++)S[A]=new n.W(n.D.uint,A,1);for(var I=-1;I>=-24;I--)S[31-I]=new n.W(n.D.negint,I,1);function C(e){switch(e.type){case n.D.false:return(0,h.nI)([244]);case n.D.true:return(0,h.nI)([245]);case n.D.null:return(0,h.nI)([246]);case n.D.bytes:return e.value.length?void 0:(0,h.nI)([64]);case n.D.string:return""===e.value?(0,h.nI)([96]):void 0;case n.D.array:return 0===e.value?(0,h.nI)([128]):void 0;case n.D.map:return 0===e.value?(0,h.nI)([160]):void 0;case n.D.uint:return e.value<24?(0,h.nI)([Number(e.value)]):void 0;case n.D.negint:if(e.value>=-24)return(0,h.nI)([31-Number(e.value)])}}S[64]=new n.W(n.D.bytes,new Uint8Array(0),1),S[96]=new n.W(n.D.string,"",1),S[128]=new n.W(n.D.array,0,1),S[160]=new n.W(n.D.map,0,1),S[244]=new n.W(n.D.false,!1,1),S[245]=new n.W(n.D.true,!0,1),S[246]=new n.W(n.D.null,null,1)},2651:function(e,t,r){"use strict";r.d(t,{D:function(){return i},W:function(){return s}});var n=r(5671),a=r(3144),i=function(){function e(t,r,a){(0,n.Z)(this,e),this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=a}return(0,a.Z)(e,[{key:"toString",value:function(){return"Type[".concat(this.major,"].").concat(this.name)}},{key:"compare",value:function(e){return this.major<e.major?-1:this.major>e.major?1:0}}]),e}();i.uint=new i(0,"uint",!0),i.negint=new i(1,"negint",!0),i.bytes=new i(2,"bytes",!0),i.string=new i(3,"string",!0),i.array=new i(4,"array",!1),i.map=new i(5,"map",!1),i.tag=new i(6,"tag",!1),i.float=new i(7,"float",!0),i.false=new i(7,"false",!0),i.true=new i(7,"true",!0),i.null=new i(7,"null",!0),i.undefined=new i(7,"undefined",!0),i.break=new i(7,"break",!0);var s=function(){function e(t,r,a){(0,n.Z)(this,e),this.type=t,this.value=r,this.encodedLength=a,this.encodedBytes=void 0,this.byteValue=void 0}return(0,a.Z)(e,[{key:"toString",value:function(){return"Token[".concat(this.type,"].").concat(this.value)}}]),e}()},8204:function(e,t,r){"use strict";r.r(t),r.d(t,{code:function(){return u},decode:function(){return l},encode:function(){return c},name:function(){return o}});var n=r(1149),a=r(6629);var i={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;var t=a.CID.asCID(e);if(!t)return null;var r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new n.WU(n.Dy.tag,42),new n.WU(n.Dy.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};var s={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};s.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return a.CID.decode(e.subarray(1))};var o="dag-cbor",u=113,c=function(e){return n.cv(e,i)},l=function(e){return n.Jx(e,s)}},2087:function(e,t,r){"use strict";r.d(t,{kU:function(){return v},Dp:function(){return d},ET:function(){return y}});var n=r(4942),a=r(1413),i=r(5671),s=r(3144);var o=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),s=i.charCodeAt(0);if(255!==r[s])throw new TypeError(i+" is ambiguous");r[s]=a}var o=e.length,u=e.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,s=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=o*s[p]>>>0,s[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===s[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=s[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var s=(i-a)*l+1>>>0,c=new Uint8Array(s);a!==i;){for(var f=t[a],p=0,h=s-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%o>>>0,f=f/o>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=s-n;d!==s&&0===c[d];)d++;for(var v=u.repeat(r);d<s;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},u=r(1250),c=function(){function e(t,r,n){(0,i.Z)(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return(0,s.Z)(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),l=function(){function e(t,r,n){if((0,i.Z)(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return(0,s.Z)(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return p(this,e)}}]),e}(),f=function(){function e(t){(0,i.Z)(this,e),this.decoders=t}return(0,s.Z)(e,[{key:"or",value:function(e){return p(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),p=function(e,t){return new f((0,a.Z)((0,a.Z)({},e.decoders||(0,n.Z)({},e.prefix,e)),t.decoders||(0,n.Z)({},t.prefix,t)))},h=function(){function e(t,r,n,a){(0,i.Z)(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new c(t,r,n),this.decoder=new l(t,r,a)}return(0,s.Z)(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),d=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new h(t,r,n,a)},v=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=o(n,r),i=a.encode,s=a.decode;return d({prefix:t,name:r,encode:i,decode:function(e){return(0,u.coerce)(s(e))}})},y=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return d({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",s=0,o=0,u=0;u<e.length;++u)for(o=o<<8|e[u],s+=8;s>r;)i+=t[a&o>>(s-=r)];if(s&&(i+=t[a&o<<r-s]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var s=e.length;"="===e[s-1];)--s;for(var o=new Uint8Array(s*r/8|0),u=0,c=0,l=0,f=0;f<s;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,o[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return o}(e,a,n,t)}})}},1128:function(e,t,r){"use strict";r.r(t),r.d(t,{base32:function(){return a},base32hex:function(){return u},base32hexpad:function(){return l},base32hexpadupper:function(){return f},base32hexupper:function(){return c},base32pad:function(){return s},base32padupper:function(){return o},base32upper:function(){return i},base32z:function(){return p}});var n=r(2087),a=(0,n.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),i=(0,n.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s=(0,n.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o=(0,n.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u=(0,n.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),c=(0,n.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l=(0,n.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),f=(0,n.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),p=(0,n.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},5645:function(e,t,r){"use strict";r.r(t),r.d(t,{base36:function(){return a},base36upper:function(){return i}});var n=r(2087),a=(0,n.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i=(0,n.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},6898:function(e,t,r){"use strict";r.r(t),r.d(t,{base58btc:function(){return a},base58flickr:function(){return i}});var n=r(2087),a=(0,n.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i=(0,n.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},4426:function(e,t,r){"use strict";r.r(t),r.d(t,{base64:function(){return a},base64pad:function(){return i},base64url:function(){return s},base64urlpad:function(){return o}});var n=r(2087),a=(0,n.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),i=(0,n.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),s=(0,n.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),o=(0,n.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},6759:function(e,t,r){"use strict";r.d(t,{gh:function(){return T},QB:function(){return P},kq:function(){return D}});var n={};r.r(n),r.d(n,{identity:function(){return p}});var a={};r.r(a),r.d(a,{base2:function(){return h}});var i={};r.r(i),r.d(i,{base8:function(){return d}});var s={};r.r(s),r.d(s,{base10:function(){return v}});var o={};r.r(o),r.d(o,{base16:function(){return y},base16upper:function(){return g}});var u={};r.r(u),r.d(u,{base256emoji:function(){return A}});var c=r(1413),l=r(2087),f=r(1250),p=(0,l.Dp)({prefix:"\0",name:"identity",encode:function(e){return(0,f.toString)(e)},decode:function(e){return(0,f.fromString)(e)}}),h=(0,l.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),d=(0,l.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),v=(0,l.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),y=(0,l.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),g=(0,l.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),m=r(1128),b=r(5645),w=r(6898),k=r(4426),x=r(7762),_=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),E=_.reduce((function(e,t,r){return e[r]=t,e}),[]),S=_.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var A=(0,l.Dp)({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=E[t]}),"")},decode:function(e){var t,r=[],n=(0,x.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=S[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(s){n.e(s)}finally{n.f()}return new Uint8Array(r)}}),I=r(9400),C=r(173),Z=r(2710),R=r(7512),T=(r(3545),(0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({},n),a),i),s),o),m),b),w),k),u)),D=(0,c.Z)((0,c.Z)({},I),C),P={raw:Z,json:R}},1250:function(e,t,r){"use strict";r.r(t),r.d(t,{coerce:function(){return o},empty:function(){return n},equals:function(){return s},fromHex:function(){return i},fromString:function(){return c},isBinary:function(){return u},toHex:function(){return a},toString:function(){return l}});var n=new Uint8Array(0),a=function(e){return e.reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),"")},i=function(e){var t=e.match(/../g);return t?new Uint8Array(t.map((function(e){return parseInt(e,16)}))):n},s=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},o=function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},u=function(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)},c=function(e){return(new TextEncoder).encode(e)},l=function(e){return(new TextDecoder).decode(e)}},6629:function(e,t,r){"use strict";r.r(t),r.d(t,{CID:function(){return f}});var n=r(9439),a=r(5671),i=r(3144),s=r(5136),o=r(8315),u=r(6898),c=r(1128),l=r(1250),f=function(e,t){function r(e,t,n,i){(0,a.Z)(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:w,byteLength:w,code:b,version:b,multihash:b,bytes:b,_baseCache:w,asCID:w})}return(0,i.Z)(r,[{key:"toV0",value:function(){if(0===this.version)return this;var e=this.code,t=this.multihash;if(e!==v)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==y)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=o.create(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"equals",value:function(e){return e&&this.code===e.code&&this.version===e.version&&o.equals(this.multihash,e.multihash)}},{key:"toString",value:function(e){var t=this.bytes,r=this.version,n=this._baseCache;return 0===r?h(t,n,e||u.base58btc.encoder):d(t,n,e||c.base32.encoder)}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:e,get:function(){return"CID"}},{key:t,value:function(){return"CID("+this.toString()+")"}},{key:"toBaseEncodedString",get:function(){throw new Error("Deprecated, use .toString()")}},{key:"codec",get:function(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}},{key:"buffer",get:function(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}},{key:"multibaseName",get:function(){throw new Error('"multibaseName" property is deprecated')}},{key:"prefix",get:function(){throw new Error('"prefix" property is deprecated')}}],[{key:"isCID",value:function(e){return k(/^0\.0/,x),!(!e||!e[m]&&e.asCID!==e)}},{key:"asCID",value:function(e){if(e instanceof r)return e;if(null!=e&&e.asCID===e){var t=e.version,n=e.code,a=e.multihash;return new r(t,n,a,e.bytes||g(t,n,a.bytes))}if(null!=e&&!0===e[m]){var i=e.version,s=e.multihash,u=e.code,c=o.decode(s);return r.create(i,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==v)throw new Error("Version 0 CID must use dag-pb (code: ".concat(v,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,g(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,v,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=r.decodeFirst(e),a=(0,n.Z)(t,2),i=a[0];if(a[1].length)throw new Error("Incorrect length");return i}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=(0,l.coerce)(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),s=new o.Digest(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(s):r.createV1(t.codec,s),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=s.Jx(e.subarray(t)),a=(0,n.Z)(r,2),i=a[0],o=a[1];return t+=o,i},a=r(),i=v;if(18===a?(a=0,t=0):1===a&&(i=r()),0!==a&&1!==a)throw new RangeError("Invalid CID version ".concat(a));var o=t,u=r(),c=r(),l=t+c;return{version:a,codec:i,multihashCode:u,digestSize:c,multihashSize:l-o,size:l}}},{key:"parse",value:function(e,t){var a=p(e,t),i=(0,n.Z)(a,2),s=i[0],o=i[1],u=r.decode(o);return u._baseCache.set(s,e),u}}]),r}(Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom")),p=function(e,t){switch(e[0]){case"Q":var r=t||u.base58btc;return[u.base58btc.prefix,r.decode("".concat(u.base58btc.prefix).concat(e))];case u.base58btc.prefix:var n=t||u.base58btc;return[u.base58btc.prefix,n.decode(e)];case c.base32.prefix:var a=t||c.base32;return[c.base32.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},h=function(e,t,r){var n=r.prefix;if(n!==u.base58btc.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},d=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},v=112,y=18,g=function(e,t,r){var n=s.P$(e),a=n+s.P$(t),i=new Uint8Array(a+r.byteLength);return s.mL(e,i,0),s.mL(t,i,n),i.set(r,a),i},m=Symbol.for("@ipld/js-cid/CID"),b={writable:!1,configurable:!1,enumerable:!0},w={writable:!1,enumerable:!1,configurable:!1},k=function(e,t){if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},x="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},7512:function(e,t,r){"use strict";r.r(t),r.d(t,{code:function(){return s},decode:function(){return u},encode:function(){return o},name:function(){return i}});var n=new TextEncoder,a=new TextDecoder,i="json",s=512,o=function(e){return n.encode(JSON.stringify(e))},u=function(e){return JSON.parse(a.decode(e))}},2710:function(e,t,r){"use strict";r.r(t),r.d(t,{code:function(){return i},decode:function(){return o},encode:function(){return s},name:function(){return a}});var n=r(1250),a="raw",i=85,s=function(e){return(0,n.coerce)(e)},o=function(e){return(0,n.coerce)(e)}},8315:function(e,t,r){"use strict";r.r(t),r.d(t,{Digest:function(){return f},create:function(){return u},decode:function(){return c},equals:function(){return l}});var n=r(3144),a=r(5671),i=r(9439),s=r(1250),o=r(5136),u=function(e,t){var r=t.byteLength,n=o.P$(e),a=n+o.P$(r),i=new Uint8Array(a+r);return o.mL(e,i,0),o.mL(r,i,n),i.set(t,a),new f(e,r,t,i)},c=function(e){var t=(0,s.coerce)(e),r=o.Jx(t),n=(0,i.Z)(r,2),a=n[0],u=n[1],c=o.Jx(t.subarray(u)),l=(0,i.Z)(c,2),p=l[0],h=l[1],d=t.subarray(u+h);if(d.byteLength!==p)throw new Error("Incorrect length");return new f(a,p,d,t)},l=function(e,t){return e===t||e.code===t.code&&e.size===t.size&&(0,s.equals)(e.bytes,t.bytes)},f=(0,n.Z)((function e(t,r,n,i){(0,a.Z)(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=i}))},2231:function(e,t,r){"use strict";r.d(t,{D:function(){return s}});var n=r(5671),a=r(3144),i=r(8315),s=function(e){var t=e.name,r=e.code,n=e.encode;return new o(t,r,n)},o=function(){function e(t,r,a){(0,n.Z)(this,e),this.name=t,this.code=r,this.encode=a}return(0,a.Z)(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?i.create(this.code,r):r.then((function(e){return i.create(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}()},173:function(e,t,r){"use strict";r.r(t),r.d(t,{identity:function(){return s}});var n=r(1250),a=r(8315),i=n.coerce,s={code:0,name:"identity",encode:i,digest:function(e){return a.create(0,i(e))}}},9400:function(e,t,r){"use strict";r.r(t),r.d(t,{sha256:function(){return o},sha512:function(){return u}});var n=r(4165),a=r(5861),i=r(2231),s=function(e){return function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},o=(0,i.D)({name:"sha2-256",code:18,encode:s("SHA-256")}),u=(0,i.D)({name:"sha2-512",code:19,encode:s("SHA-512")})},3545:function(e,t,r){"use strict";r.d(t,{aI:function(){return a},k0:function(){return n.CID}});var n=r(6629),a=(r(5136),r(1250));r(2231),r(8315)},5136:function(e,t,r){"use strict";r.d(t,{Jx:function(){return y},mL:function(){return g},P$:function(){return m}});var n=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=a;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},a=Math.pow(2,31);var i=function e(t,r){var n,a=0,i=0,s=r=r||0,o=t.length;do{if(s>=o)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=s-r,a};var s=Math.pow(2,7),o=Math.pow(2,14),u=Math.pow(2,21),c=Math.pow(2,28),l=Math.pow(2,35),f=Math.pow(2,42),p=Math.pow(2,49),h=Math.pow(2,56),d=Math.pow(2,63),v={encode:n,decode:i,encodingLength:function(e){return e<s?1:e<o?2:e<u?3:e<c?4:e<l?5:e<f?6:e<p?7:e<h?8:e<d?9:10}},y=function(e){return[v.decode(e),v.decode.bytes]},g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v.encode(e,t,r),t},m=function(e){return v.encodingLength(e)}},422:function(e,t,r){"use strict";r.r(t),r.d(t,{customAlphabet:function(){return s},customRandom:function(){return i},nanoid:function(){return o},random:function(){return a},urlAlphabet:function(){return n}});var n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",a=function(e){return crypto.getRandomValues(new Uint8Array(e))},i=function(e,t,r){var n=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*n*t/e.length);return function(){for(var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,s="";;)for(var o=r(a),u=a;u--;)if((s+=e[o[u]&n]||"").length===i)return s}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return i(e,t,a)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")}},3089:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}r.d(t,{E:function(){return n}})},2110:function(e,t,r){"use strict";r.r(t),r.d(t,{concat:function(){return i}});var n=r(7762),a=r(3089);function i(e,t){t||(t=e.reduce((function(e,t){return e+t.length}),0));var r,i=(0,a.E)(t),s=0,o=(0,n.Z)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value;i.set(u,s),s+=u.length}}catch(c){o.e(c)}finally{o.f()}return i}},8779:function(e,t,r){"use strict";function n(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}r.r(t),r.d(t,{equals:function(){return n}})},6765:function(e,t,r){"use strict";r.r(t),r.d(t,{fromString:function(){return a}});var n=r(2787);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=n.Z[t];if(!r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):globalThis.Buffer.from(e,"utf8")}},2051:function(e,t,r){"use strict";r.r(t),r.d(t,{toString:function(){return a}});var n=r(2787);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=n.Z[t];if(!r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},2787:function(e,t,r){"use strict";var n=r(1413),a=r(6759),i=r(3089);function s(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var o=s("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),u=s("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){e=e.substring(1);for(var t=(0,i.E)(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),c=(0,n.Z)({utf8:o,"utf-8":o,hex:a.gh.base16,latin1:u,ascii:u,binary:u},a.gh);t.Z=c}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};__webpack_require__.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var a=Object.create(null);__webpack_require__.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){i[e]=function(){return r[e]}}));return i.default=function(){return r},__webpack_require__.d(a,i),a}}(),__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{code:function(){return ft},createLink:function(){return ct},createNode:function(){return ut},decode:function(){return ht},encode:function(){return pt},name:function(){return lt},prepare:function(){return st},validate:function(){return ot}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{code:function(){return mt},decode:function(){return wt},encode:function(){return bt},name:function(){return gt}});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{code:function(){return Jt},decode:function(){return $t},encode:function(){return Xt},name:function(){return Qt}});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{RsaPrivateKey:function(){return as},RsaPublicKey:function(){return ns},fromJwk:function(){return us},generateKeyPair:function(){return ls},unmarshalRsaPrivateKey:function(){return is},unmarshalRsaPublicKey:function(){return os}});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{Ed25519PrivateKey:function(){return xo},Ed25519PublicKey:function(){return ko},generateKeyPair:function(){return So},generateKeyPairFromSeed:function(){return Io},unmarshalEd25519PrivateKey:function(){return _o},unmarshalEd25519PublicKey:function(){return Eo}});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{Secp256k1PrivateKey:function(){return Uu},Secp256k1PublicKey:function(){return Mu},generateKeyPair:function(){return zu},unmarshalSecp256k1PrivateKey:function(){return ju},unmarshalSecp256k1PublicKey:function(){return Fu}});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{InvalidValueError:function(){return tE},MissingRepoOptionsError:function(){return rE},NonReversibleMigrationError:function(){return X_},NotInitializedRepoError:function(){return $_},RequiredParameterError:function(){return eE}});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{Decoder:function(){return SD},Encoder:function(){return ED},PacketType:function(){return xD},protocol:function(){return _D}});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{RsaPrivateKey:function(){return JL},RsaPublicKey:function(){return QL},fromJwk:function(){return tM},generateKeyPair:function(){return nM},unmarshalRsaPrivateKey:function(){return XL},unmarshalRsaPublicKey:function(){return eM}});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{Ed25519PrivateKey:function(){return gM},Ed25519PublicKey:function(){return yM},generateKeyPair:function(){return wM},generateKeyPairFromSeed:function(){return xM},unmarshalEd25519PrivateKey:function(){return mM},unmarshalEd25519PublicKey:function(){return bM}});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{Secp256k1PrivateKey:function(){return DM},Secp256k1PublicKey:function(){return TM},generateKeyPair:function(){return OM},unmarshalSecp256k1PrivateKey:function(){return PM},unmarshalSecp256k1PublicKey:function(){return NM}});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{abortedError:function(){return LV},notFoundError:function(){return BV}});var p,h=__webpack_require__(2791),d=__webpack_require__(4164),v=__webpack_require__(7762),y=__webpack_require__(9439);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(p||(p={}));var m=function(e){return e};var b="beforeunload",w="popstate";function k(e){e.preventDefault(),e.returnValue=""}function x(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function _(){return Math.random().toString(36).substr(2,8)}function E(e){var t=e.pathname,r=void 0===t?"/":t,n=e.search,a=void 0===n?"":n,i=e.hash,s=void 0===i?"":i;return a&&"?"!==a&&(r+="?"===a.charAt(0)?a:"?"+a),s&&"#"!==s&&(r+="#"===s.charAt(0)?s:"#"+s),r}function S(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var A=(0,h.createContext)(null);var I=(0,h.createContext)(null);var C=(0,h.createContext)({outlet:null,matches:[]});function Z(e,t){if(!e)throw new Error(t)}function R(e,t,r){void 0===r&&(r="/");var n=M(("string"===typeof t?S(t):t).pathname||"/",r);if(null==n)return null;var a=T(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var r=e.length===t.length&&e.slice(0,-1).every((function(e,r){return e===t[r]}));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,s=0;null==i&&s<a.length;++s)i=O(a[s],n);return i}function T(e,t,r,n){return void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(n)||Z(!1),i.relativePath=i.relativePath.slice(n.length));var s=U([n,i.relativePath]),o=r.concat(i);e.children&&e.children.length>0&&(!0===e.index&&Z(!1),T(e.children,t,o,s)),(null!=e.path||e.index)&&t.push({path:s,score:N(s,e.index),routesMeta:o})})),t}var D=/^:\w+$/,P=function(e){return"*"===e};function N(e,t){var r=e.split("/"),n=r.length;return r.some(P)&&(n+=-2),t&&(n+=2),r.filter((function(e){return!P(e)})).reduce((function(e,t){return e+(D.test(t)?3:""===t?1:10)}),n)}function O(e,t){for(var r=e.routesMeta,n={},a="/",i=[],s=0;s<r.length;++s){var o=r[s],u=s===r.length-1,c="/"===a?t:t.slice(a.length)||"/",l=B({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},c);if(!l)return null;Object.assign(n,l.params);var f=o.route;i.push({params:n,pathname:U([a,l.pathname]),pathnameBase:j(U([a,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(a=U([a,l.pathnameBase]))}return i}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var r=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);var n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return n.push(t),"([^\\/]+)"}));e.endsWith("*")?(n.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=r?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),n=(0,y.Z)(r,2),a=n[0],i=n[1],s=t.match(a);if(!s)return null;var o=s[0],u=o.replace(/(.)\/+$/,"$1"),c=s.slice(1),l=i.reduce((function(e,t,r){if("*"===t){var n=c[r]||"";u=o.slice(0,o.length-n.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(r){return e}}(c[r]||""),e}),{});return{params:l,pathname:o,pathnameBase:u,pattern:e}}function L(e,t,r){var n,a="string"===typeof e?S(e):e,i=""===e||""===a.pathname?"/":a.pathname;if(null==i)n=r;else{var s=t.length-1;if(i.startsWith("..")){for(var o=i.split("/");".."===o[0];)o.shift(),s-=1;a.pathname=o.join("/")}n=s>=0?t[s]:"/"}var u=function(e,t){void 0===t&&(t="/");var r="string"===typeof e?S(e):e,n=r.pathname,a=r.search,i=void 0===a?"":a,s=r.hash,o=void 0===s?"":s,u=n?n.startsWith("/")?n:function(e,t){var r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(n,t):t;return{pathname:u,search:F(i),hash:z(o)}}(a,n);return i&&"/"!==i&&i.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var r=e.charAt(t.length);return r&&"/"!==r?null:e.slice(t.length)||"/"}var U=function(e){return e.join("/").replace(/\/\/+/g,"/")},j=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},F=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},z=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function V(e){K()||Z(!1);var t=(0,h.useContext)(A),r=t.basename,n=t.navigator,a=G(e),i=a.hash,s=a.pathname,o=a.search,u=s;if("/"!==r){var c=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?S(e).pathname:e.pathname}(e),l=null!=c&&c.endsWith("/");u="/"===s?r+(l?"/":""):U([r,s])}return n.createHref({pathname:u,search:o,hash:i})}function K(){return null!=(0,h.useContext)(I)}function q(){return K()||Z(!1),(0,h.useContext)(I).location}function H(){K()||Z(!1);var e=(0,h.useContext)(A),t=e.basename,r=e.navigator,n=(0,h.useContext)(C).matches,a=q().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase}))),s=(0,h.useRef)(!1);(0,h.useEffect)((function(){s.current=!0}));var o=(0,h.useCallback)((function(e,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof e){var o=L(e,JSON.parse(i),a);"/"!==t&&(o.pathname=U([t,o.pathname])),(n.replace?r.replace:r.push)(o,n.state)}else r.go(e)}),[t,r,i,a]);return o}var W=(0,h.createContext)(null);function G(e){var t=(0,h.useContext)(C).matches,r=q().pathname,n=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,h.useMemo)((function(){return L(e,JSON.parse(n),r)}),[e,n,r])}function Y(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(r,n,a){return(0,h.createElement)(C.Provider,{children:void 0!==n.route.element?n.route.element:r,value:{outlet:r,matches:t.concat(e.slice(0,a+1))}})}),null)}function Q(e){return function(e){var t=(0,h.useContext)(C).outlet;return t?(0,h.createElement)(W.Provider,{value:e},t):t}(e.context)}function J(e){Z(!1)}function X(e){var t=e.basename,r=void 0===t?"/":t,n=e.children,a=void 0===n?null:n,i=e.location,s=e.navigationType,o=void 0===s?p.Pop:s,u=e.navigator,c=e.static,l=void 0!==c&&c;K()&&Z(!1);var f=j(r),d=(0,h.useMemo)((function(){return{basename:f,navigator:u,static:l}}),[f,u,l]);"string"===typeof i&&(i=S(i));var v=i,y=v.pathname,g=void 0===y?"/":y,m=v.search,b=void 0===m?"":m,w=v.hash,k=void 0===w?"":w,x=v.state,_=void 0===x?null:x,E=v.key,C=void 0===E?"default":E,R=(0,h.useMemo)((function(){var e=M(g,f);return null==e?null:{pathname:e,search:b,hash:k,state:_,key:C}}),[f,g,b,k,_,C]);return null==R?null:(0,h.createElement)(A.Provider,{value:d},(0,h.createElement)(I.Provider,{children:a,value:{location:R,navigationType:o}}))}function $(e){var t=e.children,r=e.location;return function(e,t){K()||Z(!1);var r,n=(0,h.useContext)(C).matches,a=n[n.length-1],i=a?a.params:{},s=(a&&a.pathname,a?a.pathnameBase:"/"),o=(a&&a.route,q());if(t){var u,c="string"===typeof t?S(t):t;"/"===s||(null==(u=c.pathname)?void 0:u.startsWith(s))||Z(!1),r=c}else r=o;var l=r.pathname||"/",f=R(e,{pathname:"/"===s?l:l.slice(s.length)||"/"});return Y(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},i,e.params),pathname:U([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:U([s,e.pathnameBase])})})),n)}(ee(t),r)}function ee(e){var t=[];return h.Children.forEach(e,(function(e){if((0,h.isValidElement)(e))if(e.type!==h.Fragment){e.type!==J&&Z(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=ee(e.props.children)),t.push(r)}else t.push.apply(t,ee(e.props.children))})),t}function te(){return te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}function re(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var ne=["onClick","reloadDocument","replace","state","target","to"],ae=["aria-current","caseSensitive","className","end","style","to","children"];function ie(e){var t=e.basename,r=e.children,n=e.window,a=(0,h.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,r=void 0===t?document.defaultView:t,n=r.history;function a(){var e=r.location,t=e.pathname,a=e.search,i=e.hash,s=n.state||{};return[s.idx,m({pathname:t,search:a,hash:i,state:s.usr||null,key:s.key||"default"})]}var i=null;r.addEventListener(w,(function(){if(i)f.call(i),i=null;else{var e=p.Pop,t=a(),r=t[0],n=t[1];if(f.length){if(null!=r){var s=u-r;s&&(i={action:e,location:n,retry:function(){I(-1*s)}},I(s))}}else A(e)}}));var s=p.Pop,o=a(),u=o[0],c=o[1],l=x(),f=x();function h(e){return"string"===typeof e?e:E(e)}function d(e,t){return void 0===t&&(t=null),m(g({pathname:c.pathname,hash:"",search:""},"string"===typeof e?S(e):e,{state:t,key:_()}))}function v(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function y(e,t,r){return!f.length||(f.call({action:e,location:t,retry:r}),!1)}function A(e){s=e;var t=a();u=t[0],c=t[1],l.call({action:s,location:c})}function I(e){n.go(e)}null==u&&(u=0,n.replaceState(g({},n.state,{idx:u}),""));var C={get action(){return s},get location(){return c},createHref:h,push:function e(t,a){var i=p.Push,s=d(t,a);if(y(i,s,(function(){e(t,a)}))){var o=v(s,u+1),c=o[0],l=o[1];try{n.pushState(c,"",l)}catch(f){r.location.assign(l)}A(i)}},replace:function e(t,r){var a=p.Replace,i=d(t,r);if(y(a,i,(function(){e(t,r)}))){var s=v(i,u),o=s[0],c=s[1];n.replaceState(o,"",c),A(a)}},go:I,back:function(){I(-1)},forward:function(){I(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&r.addEventListener(b,k),function(){t(),f.length||r.removeEventListener(b,k)}}};return C}({window:n}));var i=a.current,s=(0,h.useState)({action:i.action,location:i.location}),o=(0,y.Z)(s,2),u=o[0],c=o[1];return(0,h.useLayoutEffect)((function(){return i.listen(c)}),[i]),(0,h.createElement)(X,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:i})}var se=(0,h.forwardRef)((function(e,t){var r=e.onClick,n=e.reloadDocument,a=e.replace,i=void 0!==a&&a,s=e.state,o=e.target,u=e.to,c=re(e,ne),l=V(u),f=function(e,t){var r=void 0===t?{}:t,n=r.target,a=r.replace,i=r.state,s=H(),o=q(),u=G(e);return(0,h.useCallback)((function(t){if(0===t.button&&(!n||"_self"===n)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var r=!!a||E(o)===E(u);s(e,{replace:r,state:i})}}),[o,s,u,a,i,n,e])}(u,{replace:i,state:s,target:o});return(0,h.createElement)("a",te({},c,{href:l,onClick:function(e){r&&r(e),e.defaultPrevented||n||f(e)},ref:t,target:o}))}));var oe=(0,h.forwardRef)((function(e,t){var r=e["aria-current"],n=void 0===r?"page":r,a=e.caseSensitive,i=void 0!==a&&a,s=e.className,o=void 0===s?"":s,u=e.end,c=void 0!==u&&u,l=e.style,f=e.to,p=e.children,d=re(e,ae),v=q(),y=G(f),g=v.pathname,m=y.pathname;i||(g=g.toLowerCase(),m=m.toLowerCase());var b,w=g===m||!c&&g.startsWith(m)&&"/"===g.charAt(m.length),k=w?n:void 0;b="function"===typeof o?o({isActive:w}):[o,w?"active":null].filter(Boolean).join(" ");var x="function"===typeof l?l({isActive:w}):l;return(0,h.createElement)(se,te({},d,{"aria-current":k,className:b,ref:t,style:x,to:f}),"function"===typeof p?p({isActive:w}):p)}));function ue(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((function(t,r){var n=e[r];return t.concat(Array.isArray(n)?n.map((function(e){return[r,e]})):[[r,n]])}),[]))}var ce=__webpack_require__(4165),le=__webpack_require__(1413),fe=__webpack_require__(5861),pe=__webpack_require__(5671),he=__webpack_require__(3144);function de(e){this.wrapped=e}function ve(e){var t,r;function n(t,r){try{var i=e[t](r),s=i.value,o=s instanceof de;Promise.resolve(o?s.wrapped:s).then((function(e){o?n("return"===t?"return":"next",e):a(i.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(Dy){a("throw",Dy)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise((function(i,s){var o={key:e,arg:a,resolve:i,reject:s,next:null};r?r=r.next=o:(t=r=o,n(e,a))}))},"function"!==typeof e.return&&(this.return=void 0)}function ye(e){return function(){return new ve(e.apply(this,arguments))}}ve.prototype["function"===typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ve.prototype.next=function(e){return this._invoke("next",e)},ve.prototype.throw=function(e){return this._invoke("throw",e)},ve.prototype.return=function(e){return this._invoke("return",e)};var ge=__webpack_require__(9842),me=__webpack_require__(6927),be=__webpack_require__(8392),we=__webpack_require__(6898),ke=__webpack_require__(1128),xe=__webpack_require__(4426);function _e(e){return Object.assign(be(e),{error:be("".concat(e,":error")),trace:be("".concat(e,":trace"))})}be.formatters.b=function(e){return null==e?"undefined":we.base58btc.baseEncode(e)},be.formatters.t=function(e){return null==e?"undefined":ke.base32.baseEncode(e)},be.formatters.m=function(e){return null==e?"undefined":xe.base64.baseEncode(e)},be.formatters.p=function(e){return null==e?"undefined":e.toString()},be.formatters.c=function(e){return null==e?"undefined":e.toString()},be.formatters.k=function(e){return null==e?"undefined":e.toString()};var Ee=__webpack_require__(7963),Se=__webpack_require__(886),Ae=Se.Reader,Ie=Se.Writer,Ce=Se.util,Ze=Se.roots["ipfs-unixfs"]||(Se.roots["ipfs-unixfs"]={}),Re=Ze.Data=function(){function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Type=0,e.prototype.Data=Ce.newBuffer([]),e.prototype.filesize=Ce.Long?Ce.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=Ce.emptyArray,e.prototype.hashType=Ce.Long?Ce.Long.fromBits(0,0,!0):0,e.prototype.fanout=Ce.Long?Ce.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=Ie.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var r=0;r<e.blocksizes.length;++r)t.uint32(32).uint64(e.blocksizes[r]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&Ze.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Ae||(e=Ae.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ze.Data;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),2===(7&a))for(var i=e.uint32()+e.pos;e.pos<i;)n.blocksizes.push(e.uint64());else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=Ze.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&a)}}if(!n.hasOwnProperty("Type"))throw Ce.ProtocolError("missing required 'Type'",{instance:n});return n},e.fromObject=function(e){if(e instanceof Ze.Data)return e;var t=new Ze.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"===typeof e.Data?Ce.base64.decode(e.Data,t.Data=Ce.newBuffer(Ce.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(Ce.Long?(t.filesize=Ce.Long.fromValue(e.filesize)).unsigned=!0:"string"===typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"===typeof e.filesize?t.filesize=e.filesize:"object"===typeof e.filesize&&(t.filesize=new Ce.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r)Ce.Long?(t.blocksizes[r]=Ce.Long.fromValue(e.blocksizes[r])).unsigned=!0:"string"===typeof e.blocksizes[r]?t.blocksizes[r]=parseInt(e.blocksizes[r],10):"number"===typeof e.blocksizes[r]?t.blocksizes[r]=e.blocksizes[r]:"object"===typeof e.blocksizes[r]&&(t.blocksizes[r]=new Ce.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(!0))}if(null!=e.hashType&&(Ce.Long?(t.hashType=Ce.Long.fromValue(e.hashType)).unsigned=!0:"string"===typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"===typeof e.hashType?t.hashType=e.hashType:"object"===typeof e.hashType&&(t.hashType=new Ce.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(Ce.Long?(t.fanout=Ce.Long.fromValue(e.fanout)).unsigned=!0:"string"===typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"===typeof e.fanout?t.fanout=e.fanout:"object"===typeof e.fanout&&(t.fanout=new Ce.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!==typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=Ze.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocksizes=[]),t.defaults){if(r.Type=t.enums===String?"Raw":0,t.bytes===String?r.Data="":(r.Data=[],t.bytes!==Array&&(r.Data=Ce.newBuffer(r.Data))),Ce.Long){var n=new Ce.Long(0,0,!0);r.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.filesize=t.longs===String?"0":0;if(Ce.Long){n=new Ce.Long(0,0,!0);r.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.hashType=t.longs===String?"0":0;if(Ce.Long){n=new Ce.Long(0,0,!0);r.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.fanout=t.longs===String?"0":0;r.mode=0,r.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(r.Type=t.enums===String?Ze.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(r.Data=t.bytes===String?Ce.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"===typeof e.filesize?r.filesize=t.longs===String?String(e.filesize):e.filesize:r.filesize=t.longs===String?Ce.Long.prototype.toString.call(e.filesize):t.longs===Number?new Ce.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){r.blocksizes=[];for(var a=0;a<e.blocksizes.length;++a)"number"===typeof e.blocksizes[a]?r.blocksizes[a]=t.longs===String?String(e.blocksizes[a]):e.blocksizes[a]:r.blocksizes[a]=t.longs===String?Ce.Long.prototype.toString.call(e.blocksizes[a]):t.longs===Number?new Ce.LongBits(e.blocksizes[a].low>>>0,e.blocksizes[a].high>>>0).toNumber(!0):e.blocksizes[a]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"===typeof e.hashType?r.hashType=t.longs===String?String(e.hashType):e.hashType:r.hashType=t.longs===String?Ce.Long.prototype.toString.call(e.hashType):t.longs===Number?new Ce.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"===typeof e.fanout?r.fanout=t.longs===String?String(e.fanout):e.fanout:r.fanout=t.longs===String?Ce.Long.prototype.toString.call(e.fanout):t.longs===Number?new Ce.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(r.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(r.mtime=Ze.UnixTime.toObject(e.mtime,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e}(),Te=(Ze.UnixTime=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Seconds=Ce.Long?Ce.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=Ie.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof Ae||(e=Ae.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ze.UnixTime;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&a)}}if(!n.hasOwnProperty("Seconds"))throw Ce.ProtocolError("missing required 'Seconds'",{instance:n});return n},e.fromObject=function(e){if(e instanceof Ze.UnixTime)return e;var t=new Ze.UnixTime;return null!=e.Seconds&&(Ce.Long?(t.Seconds=Ce.Long.fromValue(e.Seconds)).unsigned=!1:"string"===typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"===typeof e.Seconds?t.Seconds=e.Seconds:"object"===typeof e.Seconds&&(t.Seconds=new Ce.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(Ce.Long){var n=new Ce.Long(0,0,!1);r.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Seconds=t.longs===String?"0":0;r.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"===typeof e.Seconds?r.Seconds=t.longs===String?String(e.Seconds):e.Seconds:r.Seconds=t.longs===String?Ce.Long.prototype.toString.call(e.Seconds):t.longs===Number?new Ce.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=e.FractionalNanoseconds),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),Ze.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=Ie.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof Ae||(e=Ae.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ze.Metadata;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.MimeType=e.string();else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof Ze.Metadata)return e;var t=new Ze.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(r.MimeType=e.MimeType),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),Re),De=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],Pe=["directory","hamt-sharded-directory"],Ne=parseInt("0644",8),Oe=parseInt("0755",8);function Be(e){if(null!=e)return"number"===typeof e?4095&e:"0"===(e=e.toString()).substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10)}function Le(e){if(null!=e){var t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){var r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw Ee(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}var Me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"file"};(0,pe.Z)(this,e);var r=t.type,n=t.data,a=t.blockSizes,i=t.hashType,s=t.fanout,o=t.mtime,u=t.mode;if(r&&!De.includes(r))throw Ee(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r||"file",this.data=n,this.hashType=i,this.fanout=s,this.blockSizes=a||[],this._originalMode=0,this.mode=Be(u),o&&(this.mtime=Le(o),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}return(0,he.Z)(e,[{key:"mode",get:function(){return this._mode},set:function(e){this._mode=this.isDirectory()?Oe:Ne;var t=Be(e);void 0!==t&&(this._mode=t)}},{key:"isDirectory",value:function(){return Boolean(this.type&&Pe.includes(this.type))}},{key:"addBlockSize",value:function(e){this.blockSizes.push(e)}},{key:"removeBlockSize",value:function(e){this.blockSizes.splice(e,1)}},{key:"fileSize",value:function(){if(this.isDirectory())return 0;var e=0;return this.blockSizes.forEach((function(t){e+=t})),this.data&&(e+=this.data.length),e}},{key:"marshal",value:function(){var e;switch(this.type){case"raw":e=Te.DataType.Raw;break;case"directory":e=Te.DataType.Directory;break;case"file":e=Te.DataType.File;break;case"metadata":e=Te.DataType.Metadata;break;case"symlink":e=Te.DataType.Symlink;break;case"hamt-sharded-directory":e=Te.DataType.HAMTShard;break;default:throw Ee(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}var t,r,n=this.data;if(this.data&&this.data.length||(n=void 0),null!=this.mode&&((t=4294963200&this._originalMode|(Be(this.mode)||0))!==Ne||this.isDirectory()||(t=void 0),t===Oe&&this.isDirectory()&&(t=void 0)),null!=this.mtime){var a=Le(this.mtime);a&&0===(r={Seconds:a.secs,FractionalNanoseconds:a.nsecs}).FractionalNanoseconds&&delete r.FractionalNanoseconds}var i={Type:e,Data:n,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:r};return Te.encode(i).finish()}}],[{key:"unmarshal",value:function(t){var r=Te.decode(t),n=Te.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),a=new e({type:De[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return a._originalMode=n.mode||0,a}}]),e}(),Ue=__webpack_require__(6629),je=new TextDecoder;function Fe(e,t){for(var r=0,n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");var a=e[t++];if(r+=n<28?(127&a)<<n:(127&a)*Math.pow(2,n),a<128)break}return[r,t]}function ze(e,t){var r,n=Fe(e,t),a=(0,y.Z)(n,2);r=a[0];var i=(t=a[1])+r;if(r<0||i<0)throw new Error("protobuf: invalid length");if(i>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,i),i]}function Ve(e,t){var r,n=Fe(e,t),a=(0,y.Z)(n,2);return[7&(r=a[0]),r>>3,t=a[1]]}function Ke(e){for(var t={},r=e.length,n=0;n<r;){var a,i,s=Ve(e,n),o=(0,y.Z)(s,3);if(a=o[0],i=o[1],n=o[2],1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Hash"));if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");var u=ze(e,n),c=(0,y.Z)(u,2);t.Hash=c[0],n=c[1]}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Name"));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");var l,f=ze(e,n),p=(0,y.Z)(f,2);l=p[0],n=p[1],t.Name=je.decode(l)}else{if(3!==i)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ".concat(i));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Tsize"));var h=Fe(e,n),d=(0,y.Z)(h,2);t.Tsize=d[0],n=d[1]}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}var qe=new TextEncoder,He=Math.pow(2,32),We=Math.pow(2,31);function Ge(e,t){var r=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t[r=Je(t,r,e.Tsize)-1]=24}if("string"===typeof e.Name){var n=qe.encode(e.Name);r-=n.length,t.set(n,r),t[r=Je(t,r,n.length)-1]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),t[r=Je(t,r,e.Hash.length)-1]=10),t.length-r}function Ye(e){var t=function(e){var t=0;if(e.Data){var r=e.Data.length;t+=1+r+Xe(r)}if(e.Links){var n,a=(0,v.Z)(e.Links);try{for(a.s();!(n=a.n()).done;){var i=Qe(n.value);t+=1+i+Xe(i)}}catch(Dy){a.e(Dy)}finally{a.f()}}return t}(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),r[n=Je(r,n,e.Data.length)-1]=10),e.Links)for(var a=e.Links.length-1;a>=0;a--){var i=Ge(e.Links[a],r.subarray(0,n));r[n=Je(r,n-=i,i)-1]=18}return r}function Qe(e){var t=0;if(e.Hash){var r=e.Hash.length;t+=1+r+Xe(r)}if("string"===typeof e.Name){var n=qe.encode(e.Name).length;t+=1+n+Xe(n)}return"number"===typeof e.Tsize&&(t+=1+Xe(e.Tsize)),t}function Je(e,t,r){for(var n=t-=Xe(r);r>=We;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function Xe(e){return e%2===0&&e++,Math.floor((function(e){var t=0;e>=He&&(e=Math.floor(e/He),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+$e[e]}(e)+6)/7)}var $e=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],et=["Data","Links"],tt=["Hash","Name","Tsize"],rt=new TextEncoder;function nt(e,t){if(e===t)return 0;for(var r=e.Name?rt.encode(e.Name):[],n=t.Name?rt.encode(t.Name):[],a=r.length,i=n.length,s=0,o=Math.min(a,i);s<o;++s)if(r[s]!==n[s]){a=r[s],i=n[s];break}return a<i?-1:i<a?1:0}function at(e,t){return!Object.keys(e).some((function(e){return!t.includes(e)}))}function it(e){if("object"===typeof e.asCID){var t=Ue.CID.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var r={};if(e.Hash){var n=Ue.CID.asCID(e.Hash);try{n||("string"===typeof e.Hash?n=Ue.CID.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=Ue.CID.decode(e.Hash)))}catch(a){throw new TypeError("Invalid DAG-PB form: ".concat(a.message))}n&&(r.Hash=n)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(r.Name=e.Name),"number"===typeof e.Tsize&&(r.Tsize=e.Tsize),r}function st(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=rt.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(it),t.Links.sort(nt)}else t.Links=[];return t}function ot(e){if(!e||"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!at(e,et))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(var t=0;t<e.Links.length;t++){var r=e.Links[t];if(!r||"object"!==typeof r||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!at(r,tt))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!==typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize&&("number"!==typeof r.Tsize||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===nt(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return st({Data:e,Links:t})}function ct(e,t,r){return it({Hash:r,Name:e,Tsize:t})}var lt="dag-pb",ft=112;function pt(e){ot(e);var t={};return e.Links&&(t.Links=e.Links.map((function(e){var t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),Ye(t)}function ht(e){var t=function(e){for(var t,r,n=e.length,a=0,i=!1;a<n;){var s,o,u=Ve(e,a),c=(0,y.Z)(u,3);if(s=c[0],o=c[1],a=c[2],2!==s)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got ".concat(s));if(1===o){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");var l=ze(e,a),f=(0,y.Z)(l,2);r=f[0],a=f[1],t&&(i=!0)}else{if(2!==o)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ".concat(o));if(i)throw new Error("protobuf: (PBNode) duplicate Links section");t||(t=[]);var p,h=ze(e,a),d=(0,y.Z)(h,2);p=d[0],a=d[1],t.push(Ke(p))}}if(a>n)throw new Error("protobuf: (PBNode) unexpected end of data");var v={};return r&&(v.Data=r),v.Links=t||[],v}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((function(e){var t={};try{t.Hash=Ue.CID.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}var dt=__webpack_require__(1149);var vt={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;var t=Ue.CID.asCID(e);if(!t)return null;var r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new dt.WU(dt.Dy.tag,42),new dt.WU(dt.Dy.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};var yt={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};yt.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ue.CID.decode(e.subarray(1))};var gt="dag-cbor",mt=113,bt=function(e){return dt.cv(e,vt)},wt=function(e){return dt.Jx(e,yt)};function kt(e){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kt(e)}function xt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kt(e)););return e}function _t(){return _t="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=xt(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},_t.apply(this,arguments)}function Et(e,t){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Et(e,t)}function St(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}function At(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var It=__webpack_require__(1002);function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e,t){if(t&&("object"===(0,It.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ct(e)}function Rt(e){var t=At();return function(){var r,n=kt(e);if(t){var a=kt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Zt(this,r)}}var Tt=__webpack_require__(3545);function Dt(e,t,r){return Dt=At()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Et(a,r.prototype),a},Dt.apply(null,arguments)}function Pt(e){var t="function"===typeof Map?new Map:void 0;return Pt=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Dt(e,arguments,kt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Et(n,e)},Pt(e)}var Nt=__webpack_require__(2651),Ot=__webpack_require__(310),Bt=__webpack_require__(8912),Lt=__webpack_require__(2741),Mt=function(e,t,r,n,a,i,s,o,u){St(l,e);var c=Rt(l);function l(){var e;return(0,pe.Z)(this,l),(e=c.call(this)).inRecursive=[],e}return(0,he.Z)(l,[{key:"prefix",value:function(e){var t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Nt.D.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===Nt.D.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}},{key:t,value:function(e,t){this.prefix(e);for(var r=String(t.value),n=[],a=0;a<r.length;a++)n[a]=r.charCodeAt(a);e.push(n)}},{key:r,value:function(e,t){this[Nt.D.uint.major](e,t)}},{key:n,value:function(e,t){throw new Error("".concat(Bt.OO," unsupported type: Uint8Array"))}},{key:a,value:function(e,t){this.prefix(e);var r=(0,Lt.mL)(JSON.stringify(t.value));e.push(r.length>32?(0,Lt.Dz)(r):r)}},{key:i,value:function(e,t){this.prefix(e),this.inRecursive.push({type:Nt.D.array,elements:0}),e.push([91])}},{key:s,value:function(e,t){this.prefix(e),this.inRecursive.push({type:Nt.D.map,elements:0}),e.push([123])}},{key:o,value:function(e,t){}},{key:u,value:function(e,t){if("break"===t.type.name){var r=this.inRecursive.pop();if(r){if(r.type===Nt.D.array)e.push([93]);else{if(r.type!==Nt.D.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error("".concat(Bt.OO," unsupported type: undefined"));if(this.prefix(e),"true"!==t.type.name)if("false"!==t.type.name)if("null"!==t.type.name){for(var n=String(t.value),a=[],i=!1,s=0;s<n.length;s++)a[s]=n.charCodeAt(s),i||46!==a[s]&&101!==a[s]&&69!==a[s]||(i=!0);i||(a.push(46),a.push(48)),e.push(a)}else e.push([110,117,108,108]);else e.push([102,97,108,115,101]);else e.push([116,114,117,101])}}]),l}(Pt(Array),Nt.D.uint.major,Nt.D.negint.major,Nt.D.bytes.major,Nt.D.string.major,Nt.D.array.major,Nt.D.map.major,Nt.D.tag.major,Nt.D.float.major);var Ut={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error("".concat(Bt.OO," complex map keys are not supported"));var r=e[0],n=t[0];if(r.type!==Nt.D.string||n.type!==Nt.D.string)throw new Error("".concat(Bt.OO," non-string map keys are not supported"));if(r<n)return-1;if(r>n)return 1;throw new Error("".concat(Bt.OO," unexpected duplicate map keys, this is not supported"))}};var jt=__webpack_require__(907);function Ft(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var zt=__webpack_require__(181);function Vt(e){return function(e){if(Array.isArray(e))return(0,jt.Z)(e)}(e)||Ft(e)||(0,zt.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Kt=__webpack_require__(2548),qt=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,pe.Z)(this,e),this.pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}return(0,he.Z)(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"ch",value:function(){return this.data[this.pos]}},{key:"currentMode",value:function(){return this.modeStack[this.modeStack.length-1]}},{key:"skipWhitespace",value:function(){for(var e=this.ch();32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}},{key:"expect",value:function(e){if(this.data.length-this.pos<e.length)throw new Error("".concat(Bt.IR," unexpected end of input at position ").concat(this.pos));for(var t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error("".concat(Bt.IR," unexpected token at position ").concat(this.pos,", expected to find '").concat(String.fromCharCode.apply(String,Vt(e)),"'"))}},{key:"parseNumber",value:function(){var e=this,t=this.pos,r=!1,n=!1,a=function(t){for(;!e.done();){var r=e.ch();if(!t.includes(r))break;e.pos++}};if(45===this.ch()&&(r=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new Nt.W(Nt.D.uint,0,this.pos-t);this.pos++,n=!0}if(a([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===t+1)throw new Error("".concat(Bt.IR," unexpected token at position ").concat(this.pos));if(!this.done()&&46===this.ch()){if(n)throw new Error("".concat(Bt.IR," unexpected token at position ").concat(this.pos));n=!0,this.pos++,a([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,a([48,49,50,51,52,53,54,55,56,57]));var i=String.fromCharCode.apply(null,this.data.subarray(t,this.pos)),s=parseFloat(i);return n?new Nt.W(Nt.D.float,s,this.pos-t):!0!==this.options.allowBigInt||Number.isSafeInteger(s)?new Nt.W(s>=0?Nt.D.uint:Nt.D.negint,s,this.pos-t):new Nt.W(s>=0?Nt.D.uint:Nt.D.negint,BigInt(i),this.pos-t)}},{key:"parseString",value:function(){var e=this;if(34!==this.ch())throw new Error("".concat(Bt.IR," unexpected character at position ").concat(this.pos,"; this shouldn't happen"));this.pos++;for(var t=this.pos,r=0;t<this.data.length&&r<65536;t++,r++){var n=this.data[t];if(92===n||n<32||n>=128)break;if(34===n){var a=String.fromCharCode.apply(null,this.data.subarray(this.pos,t));return this.pos=t+1,new Nt.W(Nt.D.string,a,r)}}for(var i=this.pos,s=[],o=function(){if(e.pos+4>=e.data.length)throw new Error("".concat(Bt.IR," unexpected end of unicode escape sequence at position ").concat(e.pos));for(var t=0,r=0;r<4;r++){var n=e.ch();if(n>=48&&n<=57)n-=48;else if(n>=97&&n<=102)n=n-97+10;else{if(!(n>=65&&n<=70))throw new Error("".concat(Bt.IR," unexpected unicode escape character at position ").concat(e.pos));n=n-65+10}t=16*t+n,e.pos++}return t},u=function(){var t,r,n,a,i=e.ch(),o=null,u=i>239?4:i>223?3:i>191?2:1;if(e.pos+u>e.data.length)throw new Error("".concat(Bt.IR," unexpected unicode sequence at position ").concat(e.pos));switch(u){case 1:i<128&&(o=i);break;case 2:128===(192&(t=e.data[e.pos+1]))&&(a=(31&i)<<6|63&t)>127&&(o=a);break;case 3:t=e.data[e.pos+1],r=e.data[e.pos+2],128===(192&t)&&128===(192&r)&&(a=(15&i)<<12|(63&t)<<6|63&r)>2047&&(a<55296||a>57343)&&(o=a);break;case 4:t=e.data[e.pos+1],r=e.data[e.pos+2],n=e.data[e.pos+3],128===(192&t)&&128===(192&r)&&128===(192&n)&&(a=(15&i)<<18|(63&t)<<12|(63&r)<<6|63&n)>65535&&a<1114112&&(o=a)}null===o?(o=65533,u=1):o>65535&&(o-=65536,s.push(o>>>10&1023|55296),o=56320|1023&o),s.push(o),e.pos+=u};!this.done();){var c=this.ch(),l=void 0;switch(c){case 92:if(this.pos++,this.done())throw new Error("".concat(Bt.IR," unexpected string termination at position ").concat(this.pos));switch(l=this.ch(),this.pos++,l){case 34:case 39:case 92:case 47:s.push(l);break;case 98:s.push(8);break;case 116:s.push(9);break;case 110:s.push(10);break;case 102:s.push(12);break;case 114:s.push(13);break;case 117:s.push(o());break;default:throw new Error("".concat(Bt.IR," unexpected string escape character at position ").concat(this.pos))}break;case 34:return this.pos++,new Nt.W(Nt.D.string,(0,Lt.Pu)(s),this.pos-i);default:if(c<32)throw new Error("".concat(Bt.IR," invalid control character at position ").concat(this.pos));c<128?(s.push(c),this.pos++):u()}}throw new Error("".concat(Bt.IR," unexpected end of string at position ").concat(this.pos))}},{key:"parseValue",value:function(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Nt.W(Nt.D.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Nt.W(Nt.D.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Nt.W(Nt.D.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Nt.W(Nt.D.false,!1,5);case 116:return this.expect([116,114,117,101]),new Nt.W(Nt.D.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error("".concat(Bt.IR," unexpected character at position ").concat(this.pos))}}},{key:"next",value:function(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new Nt.W(Nt.D.break,void 0,1);if(44!==this.ch())throw new Error("".concat(Bt.IR," unexpected character at position ").concat(this.pos,", was expecting array delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new Nt.W(Nt.D.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Nt.W(Nt.D.break,void 0,1);if(44!==this.ch())throw new Error("".concat(Bt.IR," unexpected character at position ").concat(this.pos,", was expecting object delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));this.pos++,this.skipWhitespace();case"obj-start":if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new Nt.W(Nt.D.break,void 0,1);var e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error("".concat(Bt.IR," unexpected character at position ").concat(this.pos,", was expecting key/value delimiter ':' but found '").concat(String.fromCharCode(this.ch()),"'"));return this.pos++,this.modeStack.push("obj-value"),e;case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error("".concat(Bt.IR," unexpected parse state at position ").concat(this.pos,"; this shouldn't happen"))}}}]),e}();function Ht(e){var t=xe.base64.encode(e).slice(1);return[new dt.WU(dt.Dy.map,1/0,1),new dt.WU(dt.Dy.string,"/",1),new dt.WU(dt.Dy.map,1/0,1),new dt.WU(dt.Dy.string,"bytes",5),new dt.WU(dt.Dy.string,t,t.length),new dt.WU(dt.Dy.break,void 0,1),new dt.WU(dt.Dy.break,void 0,1)]}var Wt={typeEncoders:{Object:function(e){if(e.asCID!==e)return null;var t=Tt.k0.asCID(e);if(!t)return null;var r=t.toString();return[new dt.WU(dt.Dy.map,1/0,1),new dt.WU(dt.Dy.string,"/",1),new dt.WU(dt.Dy.string,r,r.length),new dt.WU(dt.Dy.break,void 0,1)]},Uint8Array:Ht,Buffer:Ht,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},Gt=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this,e,n)).tokenBuffer=[],a}return(0,he.Z)(r,[{key:"done",value:function(){return 0===this.tokenBuffer.length&&_t(kt(r.prototype),"done",this).call(this)}},{key:"_next",value:function(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():_t(kt(r.prototype),"next",this).call(this)}},{key:"next",value:function(){var e=this._next();if(e.type===dt.Dy.map){var t=this._next();if(t.type===dt.Dy.string&&"/"===t.value){var r=this._next();if(r.type===dt.Dy.string){if(this._next().type!==dt.Dy.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(r),new dt.WU(dt.Dy.tag,42,0)}if(r.type===dt.Dy.map){var n=this._next();if(n.type===dt.Dy.string&&"bytes"===n.value){var a=this._next();if(a.type===dt.Dy.string){for(var i=0;i<2;i++){if(this._next().type!==dt.Dy.break)throw new Error("Invalid encoded Bytes form")}var s=xe.base64.decode("m".concat(a.value));return new dt.WU(dt.Dy.bytes,s,a.value.length)}this.tokenBuffer.push(a)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}this.tokenBuffer.push(t)}return e}}]),r}(qt),Yt={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Yt.tags[42]=Tt.k0.parse;var Qt="dag-json",Jt=297,Xt=function(e){return t=e,r=Wt,r=Object.assign({},Ut,r),(0,Ot.w$)(t,new Mt,r);var t,r},$t=function(e){return function(e,t){return t=Object.assign({tokenizer:new qt(e,t)},t),(0,Kt.Jx)(e,t)}(e,Object.assign(Yt,{tokenizer:new Gt(e,Yt)}))},er=__webpack_require__(8990),tr=__webpack_require__.t(er,2),rr=__webpack_require__(173),nr=__webpack_require__(6759);var ar=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not initialized";return(0,pe.Z)(this,r),(e=t.call(this,n)).name="NotInitializedError",e.code=r.code,e}return(0,he.Z)(r)}(Pt(Error));ar.code="ERR_NOT_INITIALIZED";var ir=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot initialize an initializing node";return(0,pe.Z)(this,r),(e=t.call(this,n)).name="AlreadyInitializingError",e.code=sr.code,e}return(0,he.Z)(r)}(Pt(Error));ir.code="ERR_ALREADY_INITIALIZING";var sr=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot re-initialize an initialized node";return(0,pe.Z)(this,r),(e=t.call(this,n)).name="AlreadyInitializedError",e.code=r.code,e}return(0,he.Z)(r)}(Pt(Error));sr.code="ERR_ALREADY_INITIALIZED";var or=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not started";return(0,pe.Z)(this,r),(e=t.call(this,n)).name="NotStartedError",e.code=r.code,e}return(0,he.Z)(r)}(Pt(Error));or.code="ERR_NOT_STARTED";var ur=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot start, already startin";return(0,pe.Z)(this,r),(e=t.call(this,n)).name="AlreadyStartingError",e.code=r.code,e}return(0,he.Z)(r)}(Pt(Error));ur.code="ERR_ALREADY_STARTING";var cr=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot start, already started";return(0,pe.Z)(this,r),(e=t.call(this,n)).name="AlreadyStartedError",e.code=r.code,e}return(0,he.Z)(r)}(Pt(Error));cr.code="ERR_ALREADY_STARTED";var lr=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not enabled";return(0,pe.Z)(this,r),(e=t.call(this,n)).name="NotEnabledError",e.code=r.code,e}return(0,he.Z)(r)}(Pt(Error));lr.code="ERR_NOT_ENABLED";var fr=__webpack_require__(6765);function pr(e){return new de(e)}function hr(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new dr(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function dr(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return dr=function(e){this.s=e,this.n=e.next},dr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new dr(e)}var vr=__webpack_require__(2262),yr=__webpack_require__(422),gr=__webpack_require__(2051),mr="/",br=(new TextEncoder).encode(mr),wr=br[0],kr=function(e){function t(e,r){if((0,pe.Z)(this,t),"string"===typeof e)this._buf=(0,fr.fromString)(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==r&&(r=!0),r&&this.clean(),0===this._buf.byteLength||this._buf[0]!==wr)throw new Error("Invalid key")}return(0,he.Z)(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";return(0,gr.toString)(this._buf,e)}},{key:"uint8Array",value:function(){return this._buf}},{key:e,get:function(){return"Key(".concat(this.toString(),")")}},{key:"clean",value:function(){if(this._buf&&0!==this._buf.byteLength||(this._buf=br),this._buf[0]!==wr){var e=new Uint8Array(this._buf.byteLength+1);e.fill(wr,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===wr;)this._buf=this._buf.subarray(0,-1)}},{key:"less",value:function(e){for(var t=this.list(),r=e.list(),n=0;n<t.length;n++){if(r.length<n+1)return!1;var a=t[n],i=r[n];if(a<i)return!0;if(a>i)return!1}return t.length<r.length}},{key:"reverse",value:function(){return t.withNamespaces(this.list().slice().reverse())}},{key:"namespaces",value:function(){return this.list()}},{key:"baseNamespace",value:function(){var e=this.namespaces();return e[e.length-1]}},{key:"list",value:function(){return this.toString().split(mr).slice(1)}},{key:"type",value:function(){return function(e){var t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}},{key:"name",value:function(){return function(e){var t=e.split(":");return t[t.length-1]}(this.baseNamespace())}},{key:"instance",value:function(e){return new t(this.toString()+":"+e)}},{key:"path",value:function(){var e=this.parent().toString();return e.endsWith(mr)||(e+=mr),new t(e+=this.type())}},{key:"parent",value:function(){var e=this.list();return 1===e.length?new t(mr):new t(e.slice(0,-1).join(mr))}},{key:"child",value:function(e){return this.toString()===mr?e:e.toString()===mr?this:new t(this.toString()+e.toString(),!1)}},{key:"isAncestorOf",value:function(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}},{key:"isDecendantOf",value:function(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}},{key:"isTopLevel",value:function(){return 1===this.list().length}},{key:"concat",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.withNamespaces([].concat(Vt(this.namespaces()),Vt(xr(r.map((function(e){return e.namespaces()}))))))}}],[{key:"withNamespaces",value:function(e){return new t(e.join(mr))}},{key:"random",value:function(){return new t((0,yr.nanoid)().replace(/-/g,""))}},{key:"asKey",value:function(e){return e instanceof Uint8Array||"string"===typeof e?new t(e):e.uint8Array?new t(e.uint8Array()):null}}]),t}(Symbol.toStringTag);function xr(e){var t;return(t=[]).concat.apply(t,Vt(e))}var _r=__webpack_require__(7683),Er=__webpack_require__(6622),Sr=/(\x2D?(?:[0-9]+\.?[0-9]*|[0-9]*\.?[0-9]+)(?:e[\+\x2D]?[0-9]+)?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*)/gi;function Ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms",r=null;return(e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(Sr,(function(e,t,n){(n=Ir(n))&&(r=(r||0)+parseFloat(t,10)*n)})),r&&r/(Ir(t)||1)}function Ir(e){return Ar[e]||Ar[e.toLowerCase().replace(/s$/,"")]}Ar.nanosecond=Ar.ns=1e-6,Ar["\xb5s"]=Ar["\u03bcs"]=Ar.us=Ar.microsecond=.001,Ar.millisecond=Ar.ms=Ar[""]=1,Ar.second=Ar.sec=Ar.s=1e3*Ar.ms,Ar.minute=Ar.min=Ar.m=60*Ar.s,Ar.hour=Ar.hr=Ar.h=60*Ar.m,Ar.day=Ar.d=24*Ar.h,Ar.week=Ar.wk=Ar.w=7*Ar.d,Ar.month=Ar.b=30.4375*Ar.d,Ar.year=Ar.yr=Ar.y=365.25*Ar.d;var Cr=Ar,Zr=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request timed out";return(0,pe.Z)(this,r),(e=t.call(this,n)).name="TimeoutError",e.code=r.code,e}return(0,he.Z)(r)}(Pt(Error));function Rr(e,t){return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n[null==t?n.length-1:t];if(!i||!i.timeout)return e.apply(void 0,n);var s="string"===typeof i.timeout?Cr(i.timeout):i.timeout,o=new _r.TimeoutController(s);i.signal=(0,Er.anySignal)([i.signal,o.signal]);var u=e.apply(void 0,n),c=new Promise((function(e,t){o.signal.addEventListener("abort",(function(){t(new Zr)}))})),l=Date.now(),f=function(){if(o.signal.aborted)throw new Zr;if(Date.now()-l>s)throw o.abort(),new Zr};return u[Symbol.asyncIterator]?ye((0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u[Symbol.asyncIterator](),e.prev=1;case 2:return e.next=5,pr(Promise.race([t.next(),c]));case 5:if(r=e.sent,n=r.value,!r.done){e.next=10;break}return e.abrupt("break",15);case 10:return f(),e.next=13,n;case 13:e.next=2;break;case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(1),f(),e.t0;case 21:return e.prev=21,o.clear(),t.return&&t.return(),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[1,17,21,25]])})))():(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.race([u,c]);case 3:return t=e.sent,f(),e.abrupt("return",t);case 8:throw e.prev=8,e.t0=e.catch(0),f(),e.t0;case 12:return e.prev=12,o.clear(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})))()}}Zr.code="ERR_TIMEOUT";var Tr="/ipfs/";function Dr(e){if(e instanceof Uint8Array)try{e=Ue.CID.decode(e)}catch(Dy){throw Ee(Dy,"ERR_INVALID_CID")}var t=Ue.CID.asCID(e);if(t)return{cid:t,path:void 0};(e=e.toString()).startsWith(Tr)&&(e=e.substring(Tr.length));var r,n=e.split("/");try{t=Ue.CID.parse(n.shift()||"")}catch(Dy){throw Ee(Dy,"ERR_INVALID_CID")}return n.length&&(r="/".concat(n.join("/"))),{cid:t,path:r}}var Pr="This command must be run in online mode. Try running 'ipfs daemon' first.",Nr=new kr("/local/filesroot"),Or=262144,Br=function(e){if(Ue.CID.asCID(e))return"/ipfs/".concat(e);var t=e.toString();try{return"/ipfs/".concat(Ue.CID.parse(t))}catch(r){}if(vr.path(t))return t;throw Ee(new Error("invalid path: ".concat(e)),"ERR_BAD_PATH")},Lr=function(e){return e instanceof Uint8Array?Ue.CID.decode(e).toString():(0===(e=e.toString()).indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e)},Mr=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p,h,d,v,y,g,m=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.length>3&&void 0!==m[3]?m[3]:{},i=Dr(n),s=i.cid,(o=i.path)&&(a.path=o),u=s,(c=a.path||"").startsWith("/")&&(c=c.substring(1)),!a.path){e.next=45;break}e.prev=7,l=!1,f=!1,e.prev=10,h=hr(Fr(s,a.path,r,t,{signal:a.signal}));case 12:return e.next=14,h.next();case 14:if(!(l=!(d=e.sent).done)){e.next=23;break}if(v=d.value,y=v.value,g=v.remainderPath,Ue.CID.asCID(y)){e.next=18;break}return e.abrupt("break",23);case 18:c=g,u=y;case 20:l=!1,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),f=!0,p=e.t0;case 29:if(e.prev=29,e.prev=30,!l||null==h.return){e.next=34;break}return e.next=34,h.return();case 34:if(e.prev=34,!f){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(29);case 39:e.next=45;break;case 41:throw e.prev=41,e.t1=e.catch(7),e.t1.message.startsWith("Object has no property")&&(e.t1.message='no link named "'.concat(c.split("/")[0],'" under ').concat(u),e.t1.code="ERR_NO_LINK"),e.t1;case 45:return e.abrupt("return",{cid:u,remainderPath:c||""});case 46:case"end":return e.stop()}}),e,null,[[7,41],[10,25,29,39],[30,,34,38]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Ur=function(e){if("file"!==e.type&&"directory"!==e.type&&"raw"!==e.type)throw new Error("Unknown node type '".concat(e.type,"'"));var t={cid:e.cid,path:e.path,name:e.name,size:e.size,type:"file"};return"directory"===e.type&&(t.type="dir"),"file"===e.type&&(t.size=e.unixfs.fileSize()),"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,void 0!==e.unixfs.mtime&&(t.mtime=e.unixfs.mtime)),t},jr=Rr(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Fr=function(){var e=ye((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCodec(t.code);case 2:return r=e.sent,e.next=5,a.blocks.get(t,i);case 5:return s=e.sent,e.abrupt("return",r.decode(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=r.split("/").filter(Boolean),e.next=4,pr(s(t));case 4:u=e.sent,c=t,l=(0,ce.Z)().mark((function e(){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.shift()){e.next=3;break}throw Ee(new Error('Could not resolve path "'.concat(r,'"')),"ERR_INVALID_PATH");case 3:if(t.code!==ft||!Array.isArray(u.Links)){e.next=13;break}if(!(a=u.Links.find((function(e){return e.Name===n})))){e.next=13;break}return e.next=8,{value:a.Hash,remainderPath:o.join("/")};case 8:return e.next=10,pr(s(a.Hash));case 10:return u=e.sent,c=a.Hash,e.abrupt("return","continue");case 13:if(!Object.prototype.hasOwnProperty.call(u,n)){e.next=19;break}return u=u[n],e.next=17,{value:u,remainderPath:o.join("/")};case 17:e.next=20;break;case 19:throw Ee(new Error('no link named "'.concat(n,'" under ').concat(c)),"ERR_NO_LINK");case 20:if(!Ue.CID.asCID(u)){e.next=25;break}return c=u,e.next=24,pr(s(u));case 24:u=e.sent;case 25:case"end":return e.stop()}}),e)}));case 7:if(!o.length){e.next=14;break}return e.delegateYield(l(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",7);case 12:e.next=7;break;case 14:return e.next=16,{value:u,remainderPath:""};case 16:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),zr=function(){function e(t,r){(0,pe.Z)(this,e),this.activate=t,this.deactivate=r,this.state={status:"stopped"}}return(0,he.Z)(e,[{key:"use",value:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.use(this,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"try",value:function(){return e.try(this)}}],[{key:"create",value:function(t){return new e(t.start,t.stop)}},{key:"start",value:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.state,i=r.activate,t.t0=a.status,t.next="stopped"===t.t0?4:"starting"===t.t0?18:"started"===t.t0?19:"stopping"===t.t0?20:25;break;case 4:return t.prev=4,s=i(n),r.state={status:"starting",ready:s},t.next=9,s;case 9:return o=t.sent,r.state={status:"started",value:o},t.abrupt("return",o);case 14:throw t.prev=14,t.t1=t.catch(4),r.state={status:"stopped"},t.t1;case 18:throw new ur;case 19:throw new cr;case 20:return t.next=22,a.ready;case 22:return t.next=24,e.start(r,n);case 24:return t.abrupt("return",t.sent);case 25:return t.abrupt("return",e.panic(r));case 26:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.state,a=r.deactivate,t.t0=n.status,t.next="stopped"===t.t0?4:"starting"===t.t0?5:"stopping"===t.t0?15:"started"===t.t0?18:23;break;case 4:return t.abrupt("break",24);case 5:return t.prev=5,t.next=8,n.ready;case 8:t.next=12;break;case 10:t.prev=10,t.t1=t.catch(5);case 12:return t.next=14,e.stop(r);case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,n.ready;case 17:return t.abrupt("return",t.sent);case 18:if(!a){t.next=21;break}return t.next=21,a(n.value);case 21:return r.state={status:"stopped"},t.abrupt("break",24);case 23:e.panic(n);case 24:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"try",value:function(e){var t=e.state;return"started"===t.status?t.value:null}},{key:"use",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state,e.t0=n.status,e.next="started"===e.t0?4:"starting"===e.t0?5:8;break;case 4:return e.abrupt("return",n.value);case 5:return e.next=7,jr(n.ready,r);case 7:return e.abrupt("return",e.sent);case 8:throw new or;case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"panic",value:function(e){var t=e.state,r=JSON.stringify({status:t.status});throw RangeError("Service in invalid state ".concat(r,", should never happen if you see this please report a bug"))}}]),e}();var Vr=__webpack_require__(4737),Kr=function(){function e(t){(0,pe.Z)(this,e),this.lru=Vr(t)}return(0,he.Z)(e,[{key:"get",value:function(e){var t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}},{key:"set",value:function(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}},{key:"has",value:function(e){return!!this.get(e)}},{key:"remove",value:function(e){this.lru.remove(e)}},{key:"clear",value:function(){this.lru.clear()}}]),e}(),qr=__webpack_require__(7143),Hr=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="TimeoutError",n}return(0,he.Z)(r)}(Pt(Error)),Wr=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this)).name="AbortError",n.message=e,n}return(0,he.Z)(r)}(Pt(Error)),Gr=function(e){return void 0===globalThis.DOMException?new Wr(e):new DOMException(e)},Yr=function(e){var t=void 0===e.reason?Gr("This operation was aborted."):e.reason;return t instanceof Error?t:Gr(t)};function Qr(e,t,r,n){var a,i=new Promise((function(i,s){if("number"!==typeof t||1!==Math.sign(t))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(t,"`"));if(t!==Number.POSITIVE_INFINITY){if((n=(0,le.Z)({customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout}},n)).signal){var o=n.signal;o.aborted&&s(Yr(o)),o.addEventListener("abort",(function(){s(Yr(o))}))}a=n.customTimers.setTimeout.call(void 0,(function(){if("function"!==typeof r){var n="string"===typeof r?r:"Promise timed out after ".concat(t," milliseconds"),a=r instanceof Error?r:new Hr(n);"function"===typeof e.cancel&&e.cancel(),s(a)}else try{i(r())}catch(o){s(o)}}),t),(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=i,t.next=4,e;case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),s(t.t2);case 11:return t.prev=11,n.customTimers.clearTimeout.call(void 0,a),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}else i(e)}));return i.clear=function(){clearTimeout(a),a=void 0},i}var Jr,Xr=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},$r=function(){function e(){(0,pe.Z)(this,e),Jr.set(this,[])}return(0,he.Z)(e,[{key:"enqueue",value:function(e,t){var r={priority:(t=(0,le.Z)({priority:0},t)).priority,run:e};if(this.size&&Xr(this,Jr,"f")[this.size-1].priority>=t.priority)Xr(this,Jr,"f").push(r);else{var n=function(e,t,r){for(var n=0,a=e.length;a>0;){var i=Math.trunc(a/2),s=n+i;r(e[s],t)<=0?(n=++s,a-=i+1):a=i}return n}(Xr(this,Jr,"f"),r,(function(e,t){return t.priority-e.priority}));Xr(this,Jr,"f").splice(n,0,r)}}},{key:"dequeue",value:function(){var e=Xr(this,Jr,"f").shift();return null===e||void 0===e?void 0:e.run}},{key:"filter",value:function(e){return Xr(this,Jr,"f").filter((function(t){return t.priority===e.priority})).map((function(e){return e.run}))}},{key:"size",get:function(){return Xr(this,Jr,"f").length}}]),e}();Jr=new WeakMap;var en,tn,rn,nn,an,sn,on,un,cn,ln,fn,pn,hn,dn,vn,yn,gn,mn,bn,wn,kn,xn,_n,En,Sn,An,In=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},Cn=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},Zn=new Hr,Rn=function(e){St(r,e);var t=Rt(r);function r(){return(0,pe.Z)(this,r),t.apply(this,arguments)}return(0,he.Z)(r)}(Pt(Error)),Tn=function(e){St(r,e);var t=Rt(r);function r(e){var n,a,i,s,o;if((0,pe.Z)(this,r),n=t.call(this),en.add(Ct(n)),tn.set(Ct(n),void 0),rn.set(Ct(n),void 0),nn.set(Ct(n),0),an.set(Ct(n),void 0),sn.set(Ct(n),void 0),on.set(Ct(n),0),un.set(Ct(n),void 0),cn.set(Ct(n),void 0),ln.set(Ct(n),void 0),fn.set(Ct(n),void 0),pn.set(Ct(n),0),hn.set(Ct(n),void 0),dn.set(Ct(n),void 0),vn.set(Ct(n),void 0),Object.defineProperty(Ct(n),"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e=(0,le.Z)({carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:$r},e)).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(i=null===(a=e.intervalCap)||void 0===a?void 0:a.toString())&&void 0!==i?i:"","` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(o=null===(s=e.interval)||void 0===s?void 0:s.toString())&&void 0!==o?o:"","` (").concat(typeof e.interval,")"));return In(Ct(n),tn,e.carryoverConcurrencyCount,"f"),In(Ct(n),rn,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),In(Ct(n),an,e.intervalCap,"f"),In(Ct(n),sn,e.interval,"f"),In(Ct(n),ln,new e.queueClass,"f"),In(Ct(n),fn,e.queueClass,"f"),n.concurrency=e.concurrency,n.timeout=e.timeout,In(Ct(n),vn,!0===e.throwOnTimeout,"f"),In(Ct(n),dn,!1===e.autoStart,"f"),n}return(0,he.Z)(r,[{key:"concurrency",get:function(){return Cn(this,hn,"f")},set:function(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));In(this,hn,e,"f"),Cn(this,en,"m",Sn).call(this)}},{key:"add",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=this,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",new Promise((function(e,a){var i=function(){var i=(0,fe.Z)((0,ce.Z)().mark((function i(){var s,o,u,c,l;return(0,ce.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(In(n,pn,(o=Cn(n,pn,"f"),++o),"f"),In(n,nn,(u=Cn(n,nn,"f"),++u),"f"),i.prev=2,!(null===(s=r.signal)||void 0===s?void 0:s.aborted)){i.next=6;break}return a(new Rn("The task was aborted.")),i.abrupt("return");case 6:return c=void 0===n.timeout&&void 0===r.timeout?t({signal:r.signal}):Qr(Promise.resolve(t({signal:r.signal})),void 0===r.timeout?n.timeout:r.timeout,(function(){(void 0===r.throwOnTimeout?Cn(n,vn,"f"):r.throwOnTimeout)&&a(Zn)})),i.next=9,c;case 9:l=i.sent,e(l),n.emit("completed",l),i.next=18;break;case 14:i.prev=14,i.t0=i.catch(2),a(i.t0),n.emit("error",i.t0);case 18:Cn(n,en,"m",mn).call(n);case 19:case"end":return i.stop()}}),i,null,[[2,14]])})));return function(){return i.apply(this,arguments)}}();Cn(n,ln,"f").enqueue(i,r),Cn(n,en,"m",xn).call(n),n.emit("add")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAll",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.add(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"start",value:function(){return Cn(this,dn,"f")?(In(this,dn,!1,"f"),Cn(this,en,"m",Sn).call(this),this):this}},{key:"pause",value:function(){In(this,dn,!0,"f")}},{key:"clear",value:function(){In(this,ln,new(Cn(this,fn,"f")),"f")}},{key:"onEmpty",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Cn(this,ln,"f").size){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Cn(this,en,"m",An).call(this,"empty");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSizeLessThan",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Cn(this,ln,"f").size<t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Cn(this,en,"m",An).call(this,"next",(function(){return Cn(r,ln,"f").size<t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onIdle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Cn(this,pn,"f")||0!==Cn(this,ln,"f").size){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Cn(this,en,"m",An).call(this,"idle");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"size",get:function(){return Cn(this,ln,"f").size}},{key:"sizeBy",value:function(e){return Cn(this,ln,"f").filter(e).length}},{key:"pending",get:function(){return Cn(this,pn,"f")}},{key:"isPaused",get:function(){return Cn(this,dn,"f")}}]),r}(qr);tn=new WeakMap,rn=new WeakMap,nn=new WeakMap,an=new WeakMap,sn=new WeakMap,on=new WeakMap,un=new WeakMap,cn=new WeakMap,ln=new WeakMap,fn=new WeakMap,pn=new WeakMap,hn=new WeakMap,dn=new WeakMap,vn=new WeakMap,en=new WeakSet,yn=function(){return Cn(this,rn,"f")||Cn(this,nn,"f")<Cn(this,an,"f")},gn=function(){return Cn(this,pn,"f")<Cn(this,hn,"f")},mn=function(){var e;In(this,pn,(e=Cn(this,pn,"f"),--e),"f"),Cn(this,en,"m",xn).call(this),this.emit("next")},bn=function(){this.emit("empty"),0===Cn(this,pn,"f")&&this.emit("idle")},wn=function(){Cn(this,en,"m",En).call(this),Cn(this,en,"m",_n).call(this),In(this,cn,void 0,"f")},kn=function(){var e=this,t=Date.now();if(void 0===Cn(this,un,"f")){var r=Cn(this,on,"f")-t;if(!(r<0))return void 0===Cn(this,cn,"f")&&In(this,cn,setTimeout((function(){Cn(e,en,"m",wn).call(e)}),r),"f"),!0;In(this,nn,Cn(this,tn,"f")?Cn(this,pn,"f"):0,"f")}return!1},xn=function(){if(0===Cn(this,ln,"f").size)return Cn(this,un,"f")&&clearInterval(Cn(this,un,"f")),In(this,un,void 0,"f"),Cn(this,en,"m",bn).call(this),!1;if(!Cn(this,dn,"f")){var e=!Cn(this,en,"a",kn);if(Cn(this,en,"a",yn)&&Cn(this,en,"a",gn)){var t=Cn(this,ln,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&Cn(this,en,"m",_n).call(this),!0)}}return!1},_n=function(){var e=this;Cn(this,rn,"f")||void 0!==Cn(this,un,"f")||(In(this,un,setInterval((function(){Cn(e,en,"m",En).call(e)}),Cn(this,sn,"f")),"f"),In(this,on,Date.now()+Cn(this,sn,"f"),"f"))},En=function(){0===Cn(this,nn,"f")&&0===Cn(this,pn,"f")&&Cn(this,un,"f")&&(clearInterval(Cn(this,un,"f")),In(this,un,void 0,"f")),In(this,nn,Cn(this,tn,"f")?Cn(this,pn,"f"):0,"f"),Cn(this,en,"m",Sn).call(this)},Sn=function(){for(;Cn(this,en,"m",xn).call(this););},An=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n.on(t,(function a(){r&&!r()||(n.off(t,a),e())}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var Dn=__webpack_require__(8257),Pn=new Kr(1e3),Nn=6e4,On=new(Tn.default?Tn.default:Tn)({concurrency:4}),Bn=function(e){if(e.Path)return e.Path;throw new Error(e.Message)};function Ln(e,t){return Mn.apply(this,arguments)}function Mn(){return Mn=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},(n=new URLSearchParams(r)).set("arg",t),a=n.toString(),r.nocache||!Pn.has(a)){e.next=7;break}return i=Pn.get(a),e.abrupt("return",Bn(i));case 7:return e.next=9,On.add((0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn.get("https://ipfs.io/api/v0/dns",{searchParams:n});case 2:return t=e.sent,r=new URL(t.url).search.slice(1),e.next=6,t.json();case 6:return a=e.sent,Pn.set(r,a,Nn),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))));case 9:return s=e.sent,e.abrupt("return",Bn(s));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",n(t,r));case 2:case"end":return e.stop()}}),e)}))),Mn.apply(this,arguments)}function Un(e){return e.endsWith(".eth")&&(e=e.replace(/.eth$/,".eth.link")),e}var jn=__webpack_require__(3878),Fn=__webpack_require__(5267);function zn(e){return(0,jn.Z)(e)||Ft(e)||(0,zt.Z)(e)||(0,Fn.Z)()}var Vn=__webpack_require__(8315),Kn=__webpack_require__(8779),qn=__webpack_require__(9400),Hn=Symbol.for("@libp2p/peer-id");var Wn=Object.values(nr.gh).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),nr.gh.identity.decoder),Gn=function(e){function t(e){(0,pe.Z)(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return(0,he.Z)(t,[{key:e,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:Hn,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=we.base58btc.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return Ue.CID.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return(0,Kn.equals)(this.multihash.bytes,e);if("string"===typeof e)return $n(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return(0,Kn.equals)(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}}]),t}(Symbol.toStringTag),Yn=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,(0,le.Z)((0,le.Z)({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return(0,he.Z)(r)}(Gn),Qn=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,(0,le.Z)((0,le.Z)({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return(0,he.Z)(r)}(Gn),Jn=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,(0,le.Z)((0,le.Z)({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return(0,he.Z)(r)}(Gn);function Xn(e){if("RSA"===e.type)return new Yn(e);if("Ed25519"===e.type)return new Qn(e);if("secp256k1"===e.type)return new Jn(e);throw Ee(new Error("Not a PeerId"),"ERR_INVALID_PARAMETERS")}function $n(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:Wn,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=Vn.decode(we.base58btc.decode("z".concat(e)));return e.startsWith("12D")?new Qn({multihash:n}):e.startsWith("16U")?new Jn({multihash:n}):new Yn({multihash:n})}return ea(Wn.decode(e))}function ea(e){try{var t=Vn.decode(e);if(t.code===rr.identity.code){if(36===t.digest.length)return new Qn({multihash:t});if(37===t.digest.length)return new Jn({multihash:t})}if(t.code===qn.sha256.code)return new Yn({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===qn.sha256.code)return new Yn({multihash:e.multihash});if(t.code===rr.identity.code){if(36===t.digest.length)return new Qn({multihash:e.multihash});if(37===t.digest.length)return new Jn({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Ue.CID.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function ta(e,t){return ra.apply(this,arguments)}function ra(){return(ra=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(36!==t.length){e.next=2;break}return e.abrupt("return",new Qn({multihash:Vn.create(rr.identity.code,t),privateKey:r}));case 2:if(37!==t.length){e.next=4;break}return e.abrupt("return",new Jn({multihash:Vn.create(rr.identity.code,t),privateKey:r}));case 4:return e.t0=Yn,e.next=7,qn.sha256.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e){try{return $n(e).toBytes()}catch(t){return Ue.CID.parse(e).bytes}}var aa=__webpack_require__(6723);function ia(e,t){var r={},n=!1;function a(r,a){return n=!0,a=new Promise((function(t){t(e[r](a))})),{done:!1,value:t(a)}}return r["undefined"!==typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},r.next=function(e){return n?(n=!1,e):a("next",e)},"function"===typeof e.throw&&(r.throw=function(e){if(n)throw n=!1,e;return a("throw",e)}),"function"===typeof e.return&&(r.return=function(e){return n?(n=!1,e):a("return",e)}),r}function sa(e){return oa.apply(this,arguments)}function oa(){return(oa=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,y,g,m,b,w,k,x,_,E,S;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t){e.next=2;break}throw Ee(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 2:if(!(r=Ue.CID.asCID(t))){e.next=7;break}return e.next=6,ua({cid:r});case 6:return e.abrupt("return");case 7:if(!(t instanceof String||"string"===typeof t)){e.next=11;break}return e.next=10,ua({path:t});case 10:return e.abrupt("return");case 11:if(null==t.cid&&null==t.path){e.next=15;break}return e.next=14,ua(t);case 14:return e.abrupt("return",e.sent);case 15:if(!(Symbol.iterator in t)){e.next=63;break}if(n=t[Symbol.iterator](),!(a=n.next()).done){e.next=20;break}return e.abrupt("return",n);case 20:if(!(Ue.CID.asCID(a.value)||a.value instanceof String||"string"===typeof a.value)){e.next=41;break}return e.next=23,ua({cid:a.value});case 23:i=(0,v.Z)(n),e.prev=24,i.s();case 26:if((s=i.n()).done){e.next=32;break}return o=s.value,e.next=30,ua({cid:o});case 30:e.next=26;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(24),i.e(e.t0);case 37:return e.prev=37,i.f(),e.finish(37);case 40:return e.abrupt("return");case 41:if(null==a.value.cid&&null==a.value.path){e.next=62;break}return e.next=44,ua(a.value);case 44:u=(0,v.Z)(n),e.prev=45,u.s();case 47:if((c=u.n()).done){e.next=53;break}return l=c.value,e.next=51,ua(l);case 51:e.next=47;break;case 53:e.next=58;break;case 55:e.prev=55,e.t1=e.catch(45),u.e(e.t1);case 58:return e.prev=58,u.f(),e.finish(58);case 61:return e.abrupt("return");case 62:throw Ee(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 63:if(!(Symbol.asyncIterator in t)){e.next=137;break}return f=t[Symbol.asyncIterator](),e.next=67,pr(f.next());case 67:if(!(p=e.sent).done){e.next=70;break}return e.abrupt("return",f);case 70:if(!(Ue.CID.asCID(p.value)||p.value instanceof String||"string"===typeof p.value)){e.next=103;break}return e.next=73,ua({cid:p.value});case 73:h=!1,d=!1,e.prev=75,g=hr(f);case 77:return e.next=79,pr(g.next());case 79:if(!(h=!(m=e.sent).done)){e.next=86;break}return b=m.value,e.next=83,ua({cid:b});case 83:h=!1,e.next=77;break;case 86:e.next=92;break;case 88:e.prev=88,e.t2=e.catch(75),d=!0,y=e.t2;case 92:if(e.prev=92,e.prev=93,!h||null==g.return){e.next=97;break}return e.next=97,pr(g.return());case 97:if(e.prev=97,!d){e.next=100;break}throw y;case 100:return e.finish(97);case 101:return e.finish(92);case 102:return e.abrupt("return");case 103:if(null==p.value.cid&&null==p.value.path){e.next=136;break}return e.next=106,ua(p.value);case 106:w=!1,k=!1,e.prev=108,_=hr(f);case 110:return e.next=112,pr(_.next());case 112:if(!(w=!(E=e.sent).done)){e.next=119;break}return S=E.value,e.next=116,ua(S);case 116:w=!1,e.next=110;break;case 119:e.next=125;break;case 121:e.prev=121,e.t3=e.catch(108),k=!0,x=e.t3;case 125:if(e.prev=125,e.prev=126,!w||null==_.return){e.next=130;break}return e.next=130,pr(_.return());case 130:if(e.prev=130,!k){e.next=133;break}throw x;case 133:return e.finish(130);case 134:return e.finish(125);case 135:return e.abrupt("return");case 136:case 137:throw Ee(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 138:case"end":return e.stop()}}),e,null,[[24,34,37,40],[45,55,58,61],[75,88,92,102],[93,,97,101],[108,121,125,135],[126,,130,134]])})))).apply(this,arguments)}function ua(e){var t=e.cid||"".concat(e.path);if(!t)throw Ee(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");var r={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(r.metadata=e.metadata),r}var ca={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function la(e,t,r){var n={type:e,cid:t};return r&&(n.metadata=r),n}var fa=(0,he.Z)((function e(t){var r=t.codecs,n=t.repo;(0,pe.Z)(this,e);var a=function(e){var t=e.repo,r=e.codecs;function n(){return n=ye((0,ce.Z)().mark((function e(n){var a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]?o[1]:{},i=function(){var e=ye((0,ce.Z)().mark((function e(){var a,i,s,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,o=hr(sa(n));case 4:return e.next=6,pr(o.next());case 6:if(!(a=!(u=e.sent).done)){e.next=30;break}return c=u.value,l=c.path,f=c.recursive,p=c.metadata,e.next=10,pr(Mr(t,r,l));case 10:return h=e.sent,d=h.cid,e.next=14,pr(t.pins.isPinnedWithType(d,[ca.recursive,ca.direct]));case 14:if("recursive"!==e.sent.reason||f){e.next=18;break}throw new Error("".concat(d," already pinned recursively"));case 18:if(!f){e.next=23;break}return e.next=21,pr(t.pins.pinRecursively(d,{metadata:p}));case 21:e.next=25;break;case 23:return e.next=25,pr(t.pins.pinDirectly(d,{metadata:p}));case 25:return e.next=27,d;case 27:a=!1,e.next=4;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(2),i=!0,s=e.t0;case 36:if(e.prev=36,e.prev=37,!a||null==o.return){e.next=41;break}return e.next=41,pr(o.return());case 41:if(e.prev=41,!i){e.next=44;break}throw s;case 44:return e.finish(41);case 45:return e.finish(36);case 46:case"end":return e.stop()}}),e,null,[[2,32,36,46],[37,,41,45]])})));return function(){return e.apply(this,arguments)}}(),Boolean(a.lock)){e.next=6;break}return e.delegateYield(ia(hr(i()),pr),"t0",5);case 5:return e.abrupt("return");case 6:return e.next=8,pr(t.gcLock.readLock());case 8:return s=e.sent,e.prev=9,e.delegateYield(ia(hr(i()),pr),"t1",11);case 11:return e.prev=11,s(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[9,,11,14]])}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({codecs:r,repo:n});this.addAll=a,this.add=function(e){var t=e.addAll;return function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Ue.CID.asCID(e);return r=t(a?[(0,le.Z)({cid:a},n)]:[(0,le.Z)({path:e.toString()},n)],n),aa(r)}}({addAll:a});var i=function(e){var t=e.repo,r=e.codecs;function n(){return n=ye((0,ce.Z)().mark((function e(n){var a,i,s,o,u,c,l,f,p,h,d,v,y,g,m=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.length>1&&void 0!==m[1]&&m[1],e.next=3,pr(t.gcLock.readLock());case 3:a=e.sent,e.prev=4,i=!1,s=!1,e.prev=7,u=hr(sa(n));case 9:return e.next=11,pr(u.next());case 11:if(!(i=!(c=e.sent).done)){e.next=43;break}return l=c.value,f=l.path,p=l.recursive,e.next=15,pr(Mr(t,r,f));case 15:return h=e.sent,d=h.cid,e.next=19,pr(t.pins.isPinnedWithType(d,ca.all));case 19:if(v=e.sent,y=v.pinned,g=v.reason,y){e.next=24;break}throw new Error("".concat(d," is not pinned"));case 24:e.t0=g,e.next=e.t0===ca.recursive?27:e.t0===ca.direct?34:39;break;case 27:if(p){e.next=29;break}throw new Error("".concat(d," is pinned recursively"));case 29:return e.next=31,pr(t.pins.unpin(d));case 31:return e.next=33,d;case 33:return e.abrupt("break",40);case 34:return e.next=36,pr(t.pins.unpin(d));case 36:return e.next=38,d;case 38:return e.abrupt("break",40);case 39:throw new Error("".concat(d," is pinned indirectly under ").concat(g));case 40:i=!1,e.next=9;break;case 43:e.next=49;break;case 45:e.prev=45,e.t1=e.catch(7),s=!0,o=e.t1;case 49:if(e.prev=49,e.prev=50,!i||null==u.return){e.next=54;break}return e.next=54,pr(u.return());case 54:if(e.prev=54,!s){e.next=57;break}throw o;case 57:return e.finish(54);case 58:return e.finish(49);case 59:return e.prev=59,a(),e.finish(59);case 62:case"end":return e.stop()}}),e,null,[[4,,59,62],[7,45,49,59],[50,,54,58]])}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({codecs:r,repo:n});this.rmAll=i,this.rm=function(e){var t=e.rmAll;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,aa(t([(0,le.Z)({path:r},n)],n));case 3:if(a=e.sent){e.next=6;break}throw new Error("CID expected");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}({rmAll:i}),this.ls=function(e){var t=e.repo,r=e.codecs;function n(){return n=ye((0,ce.Z)().mark((function e(){var n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A,I,C,Z,R,T,D,P,N,O,B,L,M,U,j,F=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=F.length>0&&void 0!==F[0]?F[0]:{},a=ca.all,!n.type){e.next=6;break}if(a=n.type,Object.keys(ca).includes(a)){e.next=6;break}throw Ee(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");case 6:if(!n.paths){e.next=61;break}i=!1,s=!1,o=!1,e.prev=10,c=hr(sa(n.paths));case 12:return e.next=14,pr(c.next());case 14:if(!(s=!(l=e.sent).done)){e.next=42;break}return f=l.value.path,e.next=18,pr(Mr(t,r,f));case 18:return p=e.sent,h=p.cid,e.next=22,pr(t.pins.isPinnedWithType(h,a));case 22:if(d=e.sent,v=d.reason,y=d.pinned,g=d.parent,m=d.metadata,y){e.next=29;break}throw Ee(new Error("path '".concat(f,"' is not pinned")),"ERR_NOT_PINNED");case 29:e.t0=v,e.next=e.t0===ca.direct||e.t0===ca.recursive?32:36;break;case 32:return i=!0,e.next=35,la(v,h,m);case 35:return e.abrupt("break",39);case 36:return i=!0,e.next=39,la("".concat(ca.indirect," through ").concat(g),h,m);case 39:s=!1,e.next=12;break;case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(10),o=!0,u=e.t1;case 48:if(e.prev=48,e.prev=49,!s||null==c.return){e.next=53;break}return e.next=53,pr(c.return());case 53:if(e.prev=53,!o){e.next=56;break}throw u;case 56:return e.finish(53);case 57:return e.finish(48);case 58:if(i){e.next=60;break}throw new Error("No match found");case 60:return e.abrupt("return");case 61:if(a!==ca.recursive&&a!==ca.all){e.next=91;break}b=!1,w=!1,e.prev=64,x=hr(t.pins.recursiveKeys());case 66:return e.next=68,pr(x.next());case 68:if(!(b=!(_=e.sent).done)){e.next=75;break}return E=_.value,S=E.cid,A=E.metadata,e.next=72,la(ca.recursive,S,A);case 72:b=!1,e.next=66;break;case 75:e.next=81;break;case 77:e.prev=77,e.t2=e.catch(64),w=!0,k=e.t2;case 81:if(e.prev=81,e.prev=82,!b||null==x.return){e.next=86;break}return e.next=86,pr(x.return());case 86:if(e.prev=86,!w){e.next=89;break}throw k;case 89:return e.finish(86);case 90:return e.finish(81);case 91:if(a!==ca.indirect&&a!==ca.all){e.next=121;break}I=!1,C=!1,e.prev=94,R=hr(t.pins.indirectKeys(n));case 96:return e.next=98,pr(R.next());case 98:if(!(I=!(T=e.sent).done)){e.next=105;break}return D=T.value,e.next=102,la(ca.indirect,D);case 102:I=!1,e.next=96;break;case 105:e.next=111;break;case 107:e.prev=107,e.t3=e.catch(94),C=!0,Z=e.t3;case 111:if(e.prev=111,e.prev=112,!I||null==R.return){e.next=116;break}return e.next=116,pr(R.return());case 116:if(e.prev=116,!C){e.next=119;break}throw Z;case 119:return e.finish(116);case 120:return e.finish(111);case 121:if(a!==ca.direct&&a!==ca.all){e.next=151;break}P=!1,N=!1,e.prev=124,B=hr(t.pins.directKeys());case 126:return e.next=128,pr(B.next());case 128:if(!(P=!(L=e.sent).done)){e.next=135;break}return M=L.value,U=M.cid,j=M.metadata,e.next=132,la(ca.direct,U,j);case 132:P=!1,e.next=126;break;case 135:e.next=141;break;case 137:e.prev=137,e.t4=e.catch(124),N=!0,O=e.t4;case 141:if(e.prev=141,e.prev=142,!P||null==B.return){e.next=146;break}return e.next=146,pr(B.return());case 146:if(e.prev=146,!N){e.next=149;break}throw O;case 149:return e.finish(146);case 150:return e.finish(141);case 151:case"end":return e.stop()}}),e,null,[[10,44,48,58],[49,,53,57],[64,77,81,91],[82,,86,90],[94,107,111,121],[112,,116,120],[124,137,141,151],[142,,146,150]])}))),n.apply(this,arguments)}return Rr((function(){return n.apply(this,arguments)}))}({codecs:r,repo:n}),this.remote={add:function(e){return Promise.reject(new Error("Not implemented"))},ls:function(){var e=ye((0,ce.Z)().mark((function e(t){var r=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Promise.reject(new Error("Not implemented")));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rm:function(e){return Promise.reject(new Error("Not implemented"))},rmAll:function(e){return Promise.reject(new Error("Not implemented"))},service:{add:function(e,t){return Promise.reject(new Error("Not implemented"))},rm:function(e){return Promise.reject(new Error("Not implemented"))},ls:function(){return Promise.reject(new Error("Not implemented"))}}}})),pa=Symbol.for("@libp2p/peer-id");function ha(e){return null!=e&&Boolean(e[pa])}function da(e){return e=e||new Error("Cannot open database"),Ee(e,"ERR_DB_OPEN_FAILED")}function va(e){return e=e||new Error("Delete failed"),Ee(e,"ERR_DB_DELETE_FAILED")}function ya(e){return e=e||new Error("Write failed"),Ee(e,"ERR_DB_WRITE_FAILED")}function ga(e){return e=e||new Error("Not Found"),Ee(e,"ERR_NOT_FOUND")}var ma=__webpack_require__(9900),ba=__webpack_require__(2110),wa=Symbol.for("@achingbrain/uint8arraylist");function ka(e,t,r){if(null==t||t<0||t>=r)throw new RangeError("index is out of bounds");var n,a=0,i=(0,v.Z)(e);try{for(i.s();!(n=i.n()).done;){var s=n.value,o=a+s.byteLength;if(t<o)return{buf:s,index:t-a};a=o}}catch(Dy){i.e(Dy)}finally{i.f()}throw new RangeError("index is out of bounds")}function xa(e){return Boolean(null===e||void 0===e?void 0:e[wa])}var _a=function(e){function t(){(0,pe.Z)(this,t),Object.defineProperty(this,wa,{value:!0}),this.bufs=[],this.length=0;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this.appendAll(r)}return(0,he.Z)(t,[{key:e,value:(0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.bufs,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"byteLength",get:function(){return this.length}},{key:"append",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.appendAll(t)}},{key:"appendAll",value:function(e){var t,r=0,n=(0,v.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a instanceof Uint8Array)r+=a.byteLength,this.bufs.push(a);else{if(!xa(a))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");r+=a.length,this.bufs=this.bufs.concat(a.bufs)}}}catch(Dy){n.e(Dy)}finally{n.f()}this.length+=r}},{key:"get",value:function(e){var t=ka(this.bufs,e,this.length);return t.buf[t.index]}},{key:"set",value:function(e,t){var r=ka(this.bufs,e,this.length);r.buf[r.index]=t}},{key:"write",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof Uint8Array)for(var r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(!xa(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(var n=0;n<e.length;n++)this.set(t+n,e.get(n))}}},{key:"consume",value:function(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0))for(;this.bufs.length>0;){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}},{key:"slice",value:function(e,t){var r=this._subList(e,t),n=r.bufs,a=r.length;return(0,ba.concat)(n,a)}},{key:"subarray",value:function(e,r){var n=this._subList(e,r).bufs,a=new t;return a.appendAll(n),a}},{key:"_subList",value:function(e,t){var r,n;if(null==e&&null==t)return{bufs:this.bufs,length:this.length};if(e=null!==(r=e)&&void 0!==r?r:0,t=null!==(n=t)&&void 0!==n?n:this.length>0?this.length:0,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index out of bounds");if(e===t)return{bufs:[],length:0};var a,i=[],s=0,o=(0,v.Z)(this.bufs);try{for(o.s();!(a=o.n()).done;){var u=a.value,c=s,l=c+u.byteLength,f=t>c&&t<=l,p=e<c&&t>=l;s=l;var h=void 0,d=void 0;if(e>=c&&e<l&&(h=e-c,d=u.byteLength),f&&(d=t-c,null==h&&(h=0)),p&&(h=0,d=u.byteLength),null!=h&&null!=d&&i.push(u.subarray(h,d)),f)break}}catch(Dy){o.e(Dy)}finally{o.f()}return{bufs:i,length:t-e}}},{key:"getInt8",value:function(e){var t=this.slice(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}},{key:"setInt8",value:function(e,t){var r=new Uint8Array(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,t),this.write(r,e)}},{key:"getInt16",value:function(e,t){var r=this.slice(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,t)}},{key:"setInt16",value:function(e,t,r){var n=new Uint8Array(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt16(0,t,r),this.write(n,e)}},{key:"getInt32",value:function(e,t){var r=this.slice(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,t)}},{key:"setInt32",value:function(e,t,r){var n=new Uint8Array(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(0,t,r),this.write(n,e)}},{key:"getBigInt64",value:function(e,t){var r=this.slice(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,t)}},{key:"setBigInt64",value:function(e,t,r){var n=new Uint8Array(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(0,t,r),this.write(n,e)}},{key:"getUint8",value:function(e){var t=this.slice(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}},{key:"setUint8",value:function(e,t){var r=new Uint8Array(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,t),this.write(r,e)}},{key:"getUint16",value:function(e,t){var r=this.slice(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,t)}},{key:"setUint16",value:function(e,t,r){var n=new Uint8Array(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint16(0,t,r),this.write(n,e)}},{key:"getUint32",value:function(e,t){var r=this.slice(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,t)}},{key:"setUint32",value:function(e,t,r){var n=new Uint8Array(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,t,r),this.write(n,e)}},{key:"getBigUint64",value:function(e,t){var r=this.slice(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,t)}},{key:"setBigUint64",value:function(e,t,r){var n=new Uint8Array(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigUint64(0,t,r),this.write(n,e)}},{key:"getFloat32",value:function(e,t){var r=this.slice(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,t)}},{key:"setFloat32",value:function(e,t,r){var n=new Uint8Array(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat32(0,t,r),this.write(n,e)}},{key:"getFloat64",value:function(e,t){var r=this.slice(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,t)}},{key:"setFloat64",value:function(e,t,r){var n=new Uint8Array(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat64(0,t,r),this.write(n,e)}}]),t}(Symbol.iterator);function Ea(e){return e instanceof Uint8Array?{get:function(t){return e[t]},set:function(t,r){e[t]=r}}:{get:function(t){return e.get(t)},set:function(t,r){e.set(t,r)}}}var Sa,Aa=4294967296,Ia=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,pe.Z)(this,e),this.hi=t,this.lo=r}return(0,he.Z)(e,[{key:"toBigInt",value:function(e){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){var t=1+~this.lo>>>0,r=~this.hi>>>0;return 0===t&&(r=r+1>>>0),-(BigInt(t)+(BigInt(r)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}},{key:"zzDecode",value:function(){var t=-(1&this.lo),r=((this.lo>>>1|this.hi<<31)^t)>>>0;return new e((this.hi>>>1^t)>>>0,r)}},{key:"zzEncode",value:function(){var t=this.hi>>31;return new e(((this.hi<<1|this.lo>>>31)^t)>>>0,(this.lo<<1^t)>>>0)}},{key:"toBytes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Ea(e);this.hi>0;)r.set(t++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)r.set(t++,127&this.lo|128),this.lo=this.lo>>>7;r.set(t++,this.lo)}}],[{key:"fromBigInt",value:function(t){if(0n===t)return new e;var r=t<0;r&&(t=-t);var n=0|Number(t>>32n),a=0|Number(t-(BigInt(n)<<32n));return r&&(n=~n>>>0,a=~a>>>0,++a>Aa&&(a=0,++n>Aa&&(n=0))),new e(n,a)}},{key:"fromNumber",value:function(t){if(0===t)return new e;var r=t<0;r&&(t=-t);var n=t>>>0,a=(t-n)/4294967296>>>0;return r&&(a=~a>>>0,n=~n>>>0,++n>4294967295&&(n=0,++a>4294967295&&(a=0))),new e(a,n)}},{key:"fromBytes",value:function(t,r){var n=Ea(t),a=new e,i=0;if(!(t.length-r>4)){for(;i<3;++i){if(r>=t.length)throw RangeError("index out of range: ".concat(r," > ").concat(t.length));if(a.lo=(a.lo|(127&n.get(r))<<7*i)>>>0,n.get(r++)<128)return a}return a.lo=(a.lo|(127&n.get(r++))<<7*i)>>>0,a}for(;i<4;++i)if(a.lo=(a.lo|(127&n.get(r))<<7*i)>>>0,n.get(r++)<128)return a;if(a.lo=(a.lo|(127&n.get(r))<<28)>>>0,a.hi=(a.hi|(127&n.get(r))>>4)>>>0,n.get(r++)<128)return a;if(i=0,t.length-r>4){for(;i<5;++i)if(a.hi=(a.hi|(127&n.get(r))<<7*i+3)>>>0,n.get(r++)<128)return a}else for(;i<5;++i){if(r>=t.length)throw RangeError("index out of range: ".concat(r," > ").concat(t.length));if(a.hi=(a.hi|(127&n.get(r))<<7*i+3)>>>0,n.get(r++)<128)return a}throw Error("invalid varint encoding")}}]),e}(),Ca=Math.pow(2,31),Za=Math.pow(2,7),Ra=Math.pow(2,14),Ta=Math.pow(2,21),Da=Math.pow(2,28),Pa=Math.pow(2,35),Na=Math.pow(2,42),Oa=Math.pow(2,49),Ba=Math.pow(2,56),La=Math.pow(2,63),Ma=function(e){return e<Za?1:e<Ra?2:e<Ta?3:e<Da?4:e<Pa?5:e<Na?6:e<Oa?7:e<Ba?8:e<La?9:10},Ua=function(e,t){for(var r=0,n=Ea(t);e>=Ca;)n.set(r++,255&e|128),e/=128;for(;(-128&e)>0;)n.set(r++,255&e|128),e>>>=7;n.set(r,0|e)},ja=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Ea(e),n=4294967295;if(n=(127&r.get(t))>>>0,r.get(t++)<128)return n;if(n=(n|(127&r.get(t))<<7)>>>0,r.get(t++)<128)return n;if(n=(n|(127&r.get(t))<<14)>>>0,r.get(t++)<128)return n;if(n=(n|(127&r.get(t))<<21)>>>0,r.get(t++)<128)return n;if(n=(n|(15&r.get(t))<<28)>>>0,r.get(t++)<128)return n;if((t+=5)>e.length)throw RangeError("index out of range: ".concat(t," > ").concat(e.length));return n},Fa=function(e){return e<0?10:Ma(e)},za=function(e,t){if(e<0){for(var r=0,n=Ea(t),a=Ia.fromNumber(e);a.hi>0;)n.set(r++,127&a.lo|128),a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)n.set(r++,127&a.lo|128),a.lo=a.lo>>>7;n.set(r++,a.lo)}else Ua(e,t)},Va=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0|ja(e,t)},Ka=function(e){return Ma(e=(e<<1^e>>31)>>>0)},qa=function(e,t){return Ua(e=(e<<1^e>>31)>>>0,t)},Ha=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=ja(e,t);return r>>>1^-(1&r)|0};function Wa(e,t){var r=new Uint8Array(Ma(e.length));return Ua(e.length,r),t.decode(new _a(r,e),0)}function Ga(e,t){var r=t.encode(e),n=Ma(ja(r));return r.slice(n)}function Ya(e,t,r,n,a){return{name:e,type:t,encode:r,decode:n,encodingLength:a}}!function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(Sa||(Sa={}));var Qa=Ya("bool",Sa.VARINT,(function(e){return Uint8Array.from([e?1:0])}),(function(e,t){return e.get(t)>0}),(function(){return 1})),Ja=Ya("bytes",Sa.LENGTH_DELIMITED,(function(e){var t=new Uint8Array(Ma(e.byteLength));return Ua(e.byteLength,t),new _a(t,e)}),(function(e,t){var r=ja(e,t);return t+=Ma(r),e.slice(t,t+r)}),(function(e){var t=e.byteLength;return Ma(t)+t})),Xa=function(){return 8};Ya("double",Sa.BIT64,(function(e){var t=new _a(new Uint8Array(8));return t.setFloat64(0,e,!0),t}),(function(e,t){return e.getFloat64(t,!0)}),Xa);function $a(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return"number"===typeof t?t:e[t]}return Ya("enum",Sa.VARINT,(function(e){var r=t(e),n=new Uint8Array(Ma(r));return Ua(r,n),n}),(function(t,r){var n=ja(t,r).toString();if(null==e[n])throw new Error("Invalid enum value");return e[n]}),(function(e){return Ma(t(e))}))}var ei=function(){return 4},ti=(Ya("fixed32",Sa.BIT32,(function(e){var t=new _a(new Uint8Array(4));return t.setInt32(0,e,!0),t}),(function(e,t){return e.getInt32(t,!0)}),ei),function(e){return 8}),ri=(Ya("fixed64",Sa.BIT64,(function(e){var t=new _a(new Uint8Array(8));return t.setBigInt64(0,e,!0),t}),(function(e,t){return e.getBigInt64(t,!0)}),ti),function(){return 4}),ni=(Ya("float",Sa.BIT32,(function(e){var t=new _a(new Uint8Array(4));return t.setFloat32(0,e,!0),t}),(function(e,t){return e.getFloat32(t,!0)}),ri),function(e){return Fa(e)}),ai=Ya("int32",Sa.VARINT,(function(e){var t=new Uint8Array(ni(e));return za(e,t),t}),(function(e,t){return Va(e,t)}),ni),ii=0x7fn,si=function(e){for(var t=0;e>=0x80n;t++)e>>=7n;return t+1},oi=function(e,t){for(var r=Ea(t),n=0;ii<e;)r.set(n++,128|Number(e&ii)),e>>=7n;r.set(n,Number(e))},ui=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ia.fromBytes(e,t).toBigInt(!0)},ci=function(e){return e<0n?10:si(e)},li=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(e<0n))return oi(e,t);Ia.fromBigInt(e).toBytes(t,r)},fi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ia.fromBytes(e,t).toBigInt(!1)},pi=function(e){return si(e>=0?2n*e:-2n*e-1n)},hi=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Ia.fromBigInt(e).zzEncode().toBytes(t,r)},di=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ia.fromBytes(e,t).zzDecode().toBigInt(!1)},vi=function(e){return ci(e)};Ya("int64",Sa.VARINT,(function(e){var t=new Uint8Array(vi(e));return li(e,t),t}),(function(e,t){return 0n|fi(e,t)}),vi);function yi(e){return Ya("message",Sa.LENGTH_DELIMITED,(function(t){var r=new _a;function n(e,t,n){if(null==e){if(!0===n.optional)return;throw new Error('Non optional field "'.concat(n.name,'" was ').concat(null===e?"null":"undefined"))}var a=t<<3|n.codec.type,i=new Uint8Array(Ma(a));Ua(a,i);var s=n.codec.encode(e);r.append(i),r.append(s)}for(var a=0,i=Object.entries(e);a<i.length;a++){var s=(0,y.Z)(i[a],2),o=s[0],u=s[1],c=parseInt(o);if(!0===u.repeats){if(!Array.isArray(t[u.name]))throw new Error('Repeating field "'.concat(u.name,'" was not an array'));var l,f=(0,v.Z)(t[u.name]);try{for(f.s();!(l=f.n()).done;){n(l.value,c,u)}}catch(Dy){f.e(Dy)}finally{f.f()}}else n(t[u.name],c,u)}var p=new Uint8Array(Ma(r.length));return Ua(r.length,p),new _a(p,r)}),(function(t,r){for(var n=ja(t,r),a=(r+=Ma(n))+n,i={};r<a;){var s=ja(t,r);r+=Ma(s);var o=7&s,u=e[s>>3],c=0;if(o===Sa.VARINT)if(null!=u){var l=u.codec.decode(t,r);c=u.codec.encodingLength(l)}else{var f=ja(t,r);c=Ma(f)}else if(o===Sa.BIT64)c=8;else if(o===Sa.LENGTH_DELIMITED){var p=ja(t,r);c=p+Ma(p)}else if(o===Sa.BIT32)c=4;else{if(o===Sa.START_GROUP)throw new Error("Unsupported wire type START_GROUP");if(o===Sa.END_GROUP)throw new Error("Unsupported wire type END_GROUP")}if(null!=u){var h=u.codec.decode(t,r);!0===u.repeats?(null==i[u.name]&&(i[u.name]=[]),i[u.name].push(h)):i[u.name]=h}r+=c}for(var d=0,v=Object.values(e);d<v.length;d++){var y=v[d];!0===y.repeats&&null==i[y.name]&&(i[y.name]=[])}return i}),(function(t){for(var r=0,n=0,a=Object.values(e);n<a.length;n++){var i=a[n];r+=i.codec.encodingLength(t[i.name])}return Ma(r)+r}))}var gi,mi,bi,wi,ki=function(){return 4},xi=(Ya("sfixed32",Sa.BIT32,(function(e){var t=new _a(new Uint8Array(4));return t.setInt32(0,e,!0),t}),(function(e,t){return e.getInt32(t,!0)}),ki),function(){return 8}),_i=(Ya("sfixed64",Sa.BIT64,(function(e){var t=new _a(new Uint8Array(8));return t.setBigInt64(0,e,!0),t}),(function(e,t){return e.getBigInt64(t,!0)}),xi),function(e){return Ka(e)}),Ei=(Ya("sint32",Sa.VARINT,(function(e){var t=new Uint8Array(_i(e));return qa(e,t),t}),(function(e,t){return Ha(e,t)}),_i),function(e){return pi(e)}),Si=(Ya("sint64",Sa.VARINT,(function(e){var t=new Uint8Array(Ei(e));return hi(e,t),t}),(function(e,t){return di(e,t)}),Ei),Ya("string",Sa.LENGTH_DELIMITED,(function(e){var t=(0,fr.fromString)(e),r=new Uint8Array(Ma(t.byteLength));return Ua(t.length,r),new _a(r,t)}),(function(e,t){var r=ja(e,t);return t+=Ma(r),(0,gr.toString)(e.slice(t,t+r))}),(function(e){var t=(0,fr.fromString)(e).byteLength;return Ma(t)+t}))),Ai=function(e){return Ma(e)},Ii=(Ya("uint32",Sa.VARINT,(function(e){var t=new Uint8Array(Ai(e));return Ua(e,t),t}),(function(e,t){return ja(e,t)}),Ai),Ya("uint64",Sa.VARINT,(function(e){var t=new Uint8Array(si(e));return oi(e,t),t}),(function(e,t){return ui(e,t)}),(function(e){return si(e)})));!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(gi||(gi={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(mi||(mi={})),function(e){e.codec=function(){return $a(mi)}}(gi||(gi={})),function(e){e.codec=function(){return yi({1:{name:"Type",codec:gi.codec()},2:{name:"Data",codec:Ja}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(bi||(bi={})),function(e){e.codec=function(){return yi({1:{name:"Type",codec:gi.codec()},2:{name:"Data",codec:Ja}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(wi||(wi={}));__webpack_require__(5049),__webpack_require__(9835);var Ci=__webpack_require__(392),Zi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis,t=e.crypto;if(null==t||null==t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t};var Ri=__webpack_require__(3877);__webpack_require__(3055);function Ti(e,t){var r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,ba.concat)([new Uint8Array(t-r.length),r])}return(0,gr.toString)(r,"base64url")}function Di(e){var t=Pi(e);return new Ci.jsbn.BigInteger((0,gr.toString)(t,"base16"),16)}function Pi(e,t){var r=(0,fr.fromString)(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,ba.concat)([new Uint8Array(t-r.length),r])}return r}var Ni={"P-256":256,"P-384":384,"P-521":521};Object.keys(Ni).join(" / ");function Oi(e){var t,r,n,a,i,s,o=null!==(t=null===e||void 0===e?void 0:e.algorithm)&&void 0!==t?t:"AES-GCM",u=null!==(r=null===e||void 0===e?void 0:e.keyLength)&&void 0!==r?r:16,c=null!==(n=null===e||void 0===e?void 0:e.nonceLength)&&void 0!==n?n:12,l=null!==(a=null===e||void 0===e?void 0:e.digest)&&void 0!==a?a:"SHA-256",f=null!==(i=null===e||void 0===e?void 0:e.saltLength)&&void 0!==i?i:16,p=null!==(s=null===e||void 0===e?void 0:e.iterations)&&void 0!==s?s:32767,h=Zi();function d(){return(d=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,d,v,y;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.getRandomValues(new Uint8Array(f)),a=h.getRandomValues(new Uint8Array(c)),i={name:o,iv:a},"string"===typeof r&&(r=(0,fr.fromString)(r)),s={name:"PBKDF2",salt:n,iterations:p,hash:{name:l}},e.next=7,h.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]);case 7:return d=e.sent,e.next=10,h.subtle.deriveKey(s,d,{name:o,length:u},!0,["encrypt"]);case 10:return v=e.sent,e.next=13,h.subtle.encrypt(i,v,t);case 13:return y=e.sent,e.abrupt("return",(0,ba.concat)([n,i.iv,new Uint8Array(y)]));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,d,v,y,g;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slice(0,f),a=t.slice(f,f+c),i=t.slice(f+c),s={name:o,iv:a},"string"===typeof r&&(r=(0,fr.fromString)(r)),d={name:"PBKDF2",salt:n,iterations:p,hash:{name:l}},e.next=8,h.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]);case 8:return v=e.sent,e.next=11,h.subtle.deriveKey(d,v,{name:o,length:u},!0,["decrypt"]);case 11:return y=e.sent,e.next=14,h.subtle.decrypt(s,y,i);case 14:return g=e.sent,e.abrupt("return",new Uint8Array(g));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u*=8;var y={encrypt:function(e,t){return d.apply(this,arguments)},decrypt:function(e,t){return v.apply(this,arguments)}};return y}function Bi(e,t){return Li.apply(this,arguments)}function Li(){return(Li=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe.base64.decode(t),a=Oi(),e.next=4,a.decrypt(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}__webpack_require__(4770);var Mi=__webpack_require__(5410);function Ui(e){if(isNaN(e)||e<=0)throw Ee(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return Mi(e)}__webpack_require__(5493);function ji(e){var t=Ci.asn1.fromDer((0,gr.toString)(e,"ascii")),r=Ci.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:Ti(r.n),e:Ti(r.e),d:Ti(r.d),p:Ti(r.p),q:Ti(r.q),dp:Ti(r.dP),dq:Ti(r.dQ),qi:Ti(r.qInv),alg:"RS256"}}function Fi(e,t){return t.map((function(t){return Di(e[t])}))}function zi(e){return Vi.apply(this,arguments)}function Vi(){return Vi=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);case 2:return r=e.sent,e.next=5,Qi(r);case 5:return n=e.sent,e.abrupt("return",{privateKey:n[0],publicKey:n[1]});case 7:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function Ki(e){return qi.apply(this,arguments)}function qi(){return qi=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]);case 2:return r=e.sent,e.t0=r,e.next=6,Xi(t);case 6:return e.t1=e.sent,n=[e.t0,e.t1],e.next=10,Qi({privateKey:n[0],publicKey:n[1]});case 10:return a=e.sent,e.abrupt("return",{privateKey:a[0],publicKey:a[1]});case 12:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function Hi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);case 2:return n=e.sent,e.next=5,Zi().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,Uint8Array.from(r));case 5:return a=e.sent,e.abrupt("return",new Uint8Array(a,0,a.byteLength));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(e,t,r){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);case 2:return a=e.sent,e.next=5,Zi().subtle.verify({name:"RSASSA-PKCS1-v1_5"},a,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(e){return Ji.apply(this,arguments)}function Ji(){return Ji=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.privateKey&&null!=t.publicKey){e.next=2;break}throw Ee(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");case 2:return e.next=4,Promise.all([Zi().subtle.exportKey("jwk",t.privateKey),Zi().subtle.exportKey("jwk",t.publicKey)]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Xi(e){return $i.apply(this,arguments)}function $i(){return($i=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t,r,n){var a=t?function(e){var t;return(t=Ci.pki).setRsaPublicKey.apply(t,Vt(Fi(e,["n","e"])))}(e):function(e){var t;return(t=Ci.pki).setRsaPrivateKey.apply(t,Vt(Fi(e,["n","e","d","p","q","dp","dq","qi"])))}(e),i=n((0,gr.toString)(Uint8Array.from(r),"ascii"),a);return(0,fr.fromString)(i,"ascii")}function ts(e,t){return rs.apply(this,arguments)}function rs(){return(rs=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Oi(),e.next=3,n.encrypt(t,r);case 3:return a=e.sent,e.abrupt("return",xe.base64.encode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ns=function(){function e(t){(0,pe.Z)(this,e),this._key=t}return(0,he.Z)(e,[{key:"verify",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gi(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return function(e){if(null==e.n||null==e.e)throw Ee(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");var t=Ci.pki.publicKeyToAsn1({n:Di(e.n),e:Di(e.e)});return(0,fr.fromString)(Ci.asn1.toDer(t).getBytes(),"ascii")}(this._key)}},{key:"bytes",get:function(){return bi.encode({Type:gi.RSA,Data:this.marshal()})}},{key:"encrypt",value:function(e){return es(this._key,!0,e,(function(e,t){return t.encrypt(e)}))}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),as=function(){function e(t,r){(0,pe.Z)(this,e),this._key=t,this._publicKey=r}return(0,he.Z)(e,[{key:"genSecret",value:function(){return Ui(16)}},{key:"sign",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hi(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){if(null==this._publicKey)throw Ee(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new ns(this._publicKey)}},{key:"decrypt",value:function(e){return es(this._key,!1,e,(function(e,t){return t.decrypt(e)}))}},{key:"marshal",value:function(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw Ee(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");var t=Ci.pki.privateKeyToAsn1({n:Di(e.n),e:Di(e.e),d:Di(e.d),p:Di(e.p),q:Di(e.q),dP:Di(e.dp),dQ:Di(e.dq),qInv:Di(e.qi)});return(0,fr.fromString)(Ci.asn1.toDer(t).getBytes(),"ascii")}(this._key)}},{key:"bytes",get:function(){return wi.encode({Type:gi.RSA,Data:this.marshal()})}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.hash();case 2:return t=e.sent,e.abrupt("return",(0,gr.toString)(t,"base58btc"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pkcs-8"!==(r=o.length>1&&void 0!==o[1]?o[1]:"pkcs-8")){e.next=9;break}return n=new Ci.util.ByteBuffer(this.marshal()),a=Ci.asn1.fromDer(n),i=Ci.pki.privateKeyFromAsn1(a),s={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"},e.abrupt("return",Ci.pki.encryptRsaPrivateKey(i,t,s));case 9:if("libp2p-key"!==r){e.next=15;break}return e.next=12,ts(this.bytes,t);case 12:return e.abrupt("return",e.sent);case 15:throw Ee(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function is(e){return ss.apply(this,arguments)}function ss(){return ss=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ji(t),e.next=3,Ki(r);case 3:return n=e.sent,e.abrupt("return",new as(n.privateKey,n.publicKey));case 5:case"end":return e.stop()}}),e)}))),ss.apply(this,arguments)}function os(e){var t=function(e){var t=Ci.asn1.fromDer((0,gr.toString)(e,"ascii")),r=Ci.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:Ti(r.n),e:Ti(r.e)}}(e);return new ns(t)}function us(e){return cs.apply(this,arguments)}function cs(){return(cs=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki(t);case 2:return r=e.sent,e.abrupt("return",new as(r.privateKey,r.publicKey));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(e){return fs.apply(this,arguments)}function fs(){return fs=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(t);case 2:return r=e.sent,e.abrupt("return",new as(r.privateKey,r.publicKey));case 4:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}var ps=__webpack_require__(7420),hs=BigInt(0),ds=BigInt(1),vs=BigInt(2),ys=BigInt(255),gs=Math.pow(vs,BigInt(252))+BigInt("27742317777372353535851937790883648493"),ms={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:Math.pow(vs,ys)-BigInt(19),l:gs,n:gs,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},bs=Math.pow(vs,BigInt(256)),ws=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),ks=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),xs=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),_s=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Es=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Ss=function(){function e(t,r,n,a){(0,pe.Z)(this,e),this.x=t,this.y=r,this.z=n,this.t=a}return(0,he.Z)(e,[{key:"equals",value:function(e){As(e);var t=this.x,r=this.y,n=this.z,a=e.x,i=e.y,s=e.z,o=zs(t*s),u=zs(a*n),c=zs(r*s),l=zs(i*n);return o===u&&c===l}},{key:"negate",value:function(){return new e(zs(-this.x),this.y,this.z,zs(-this.t))}},{key:"double",value:function(){var t=this.x,r=this.y,n=this.z,a=ms.a,i=zs(Math.pow(t,vs)),s=zs(Math.pow(r,vs)),o=zs(vs*zs(Math.pow(n,vs))),u=zs(a*i),c=zs(zs(Math.pow(t+r,vs))-i-s),l=u+s,f=l-o,p=u-s,h=zs(c*f),d=zs(l*p),v=zs(c*p);return new e(h,d,zs(f*l),v)}},{key:"add",value:function(t){As(t);var r=this.x,n=this.y,a=this.z,i=this.t,s=t.x,o=t.y,u=t.z,c=t.t,l=zs((n-r)*(o+s)),f=zs((n+r)*(o-s)),p=zs(f-l);if(p===hs)return this.double();var h=zs(a*vs*c),d=zs(i*vs*u),v=d+h,y=f+l,g=d-h,m=zs(v*p),b=zs(y*g),w=zs(v*g);return new e(m,b,zs(p*y),w)}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"precomputeWindow",value:function(e){for(var t=1+256/e,r=[],n=this,a=n,i=0;i<t;i++){a=n,r.push(a);for(var s=1;s<Math.pow(2,e-1);s++)a=a.add(n),r.push(a);n=a.double()}return r}},{key:"wNAF",value:function(t,r){!r&&this.equals(e.BASE)&&(r=Ts.BASE);var n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var a=r&&Rs.get(r);a||(a=this.precomputeWindow(n),r&&1!==n&&(a=e.normalizeZ(a),Rs.set(r,a)));for(var i=e.ZERO,s=e.ZERO,o=1+256/n,u=Math.pow(2,n-1),c=BigInt(Math.pow(2,n)-1),l=Math.pow(2,n),f=BigInt(n),p=0;p<o;p++){var h=p*u,d=Number(t&c);if(t>>=f,d>u&&(d-=l,t+=ds),0===d){var v=a[h];p%2&&(v=v.negate()),s=s.add(v)}else{var y=a[h+Math.abs(d)-1];d<0&&(y=y.negate()),i=i.add(y)}}return e.normalizeZ([i,s])[0]}},{key:"multiply",value:function(e,t){return this.wNAF(Js(e,ms.l),t)}},{key:"multiplyUnsafe",value:function(t){var r=Js(t,ms.l,!1),n=e.BASE,a=e.ZERO;if(r===hs)return a;if(this.equals(a)||r===ds)return this;if(this.equals(n))return this.wNAF(r);for(var i=a,s=this;r>hs;)r&ds&&(i=i.add(s)),s=s.double(),r>>=ds;return i}},{key:"isSmallOrder",value:function(){return this.multiplyUnsafe(ms.h).equals(e.ZERO)}},{key:"isTorsionFree",value:function(){return this.multiplyUnsafe(ms.l).equals(e.ZERO)}},{key:"toAffine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vs(this.z),t=this.x,r=this.y,n=this.z,a=zs(t*e),i=zs(r*e),s=zs(n*e);if(s!==ds)throw new Error("invZ was invalid");return new Ts(a,i)}},{key:"fromRistrettoBytes",value:function(){Cs()}},{key:"toRistrettoBytes",value:function(){Cs()}},{key:"fromRistrettoHash",value:function(){Cs()}}],[{key:"fromAffine",value:function(t){if(!(t instanceof Ts))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(Ts.ZERO)?e.ZERO:new e(t.x,t.y,ds,zs(t.x*t.y))}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms.P,r=new Array(e.length),n=e.reduce((function(e,n,a){return n===hs?e:(r[a]=e,zs(e*n,t))}),ds),a=Vs(n,t);return e.reduceRight((function(e,n,a){return n===hs?e:(r[a]=zs(e*r[a],t),zs(e*n,t))}),a),r}(e.map((function(e){return e.z})));return e.map((function(e,r){return e.toAffine(t[r])}))}},{key:"normalizeZ",value:function(e){return this.toAffineBatch(e).map(this.fromAffine)}}]),e}();function As(e){if(!(e instanceof Ss))throw new TypeError("ExtendedPoint expected")}function Is(e){if(!(e instanceof Zs))throw new TypeError("RistrettoPoint expected")}function Cs(){throw new Error("Legacy method: switch to RistrettoPoint")}Ss.BASE=new Ss(ms.Gx,ms.Gy,ds,zs(ms.Gx*ms.Gy)),Ss.ZERO=new Ss(hs,ds,ds,hs);var Zs=function(){function e(t){(0,pe.Z)(this,e),this.ep=t}return(0,he.Z)(e,[{key:"toRawBytes",value:function(){var e,t=this.ep,r=t.x,n=t.y,a=t.z,i=t.t,s=zs(zs(a+n)*zs(a-n)),o=zs(r*n),u=Ws(zs(s*Math.pow(o,vs))).value,c=zs(u*s),l=zs(u*o),f=zs(c*l*i);if(Us(i*f)){var p=zs(n*ws),h=zs(r*ws);r=p,n=h,e=zs(c*xs)}else e=l;Us(r*f)&&(n=zs(-n));var d=zs((a-n)*e);return Us(d)&&(d=zs(-d)),Ms(d)}},{key:"toHex",value:function(){return Os(this.toRawBytes())}},{key:"toString",value:function(){return this.toHex()}},{key:"equals",value:function(e){Is(e);var t=this.ep,r=e.ep,n=zs(t.x*r.y)===zs(t.y*r.x),a=zs(t.y*r.y)===zs(t.x*r.x);return n||a}},{key:"add",value:function(t){return Is(t),new e(this.ep.add(t.ep))}},{key:"subtract",value:function(t){return Is(t),new e(this.ep.subtract(t.ep))}},{key:"multiply",value:function(t){return new e(this.ep.multiply(t))}},{key:"multiplyUnsafe",value:function(t){return new e(this.ep.multiplyUnsafe(t))}}],[{key:"calcElligatorRistrettoMap",value:function(e){var t=ms.d,r=zs(ws*e*e),n=zs((r+ds)*_s),a=BigInt(-1),i=zs((a-t*r)*zs(r+t)),s=Hs(n,i),o=s.isValid,u=s.value,c=zs(u*e);Us(c)||(c=zs(-c)),o||(u=c),o||(a=r);var l=zs(a*(r-ds)*Es-i),f=u*u,p=zs((u+u)*i),h=zs(l*ks),d=zs(ds-f),v=zs(ds+f);return new Ss(zs(p*v),zs(d*h),zs(h*v),zs(p*d))}},{key:"hashToCurve",value:function(t){var r=Fs((t=Qs(t,64)).slice(0,32)),n=this.calcElligatorRistrettoMap(r),a=Fs(t.slice(32,64)),i=this.calcElligatorRistrettoMap(a);return new e(n.add(i))}},{key:"fromHex",value:function(t){t=Qs(t,32);var r=ms.a,n=ms.d,a="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=Fs(t);if(!function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(Ms(i),t)||Us(i))throw new Error(a);var s=zs(i*i),o=zs(ds+r*s),u=zs(ds-r*s),c=zs(o*o),l=zs(u*u),f=zs(r*n*c-l),p=Ws(zs(f*l)),h=p.isValid,d=p.value,v=zs(d*u),y=zs(d*v*f),g=zs((i+i)*v);Us(g)&&(g=zs(-g));var m=zs(o*y),b=zs(g*m);if(!h||Us(b)||m===hs)throw new Error(a);return new e(new Ss(g,m,ds,b))}}]),e}();Zs.BASE=new Zs(Ss.BASE),Zs.ZERO=new Zs(Ss.ZERO);var Rs=new WeakMap,Ts=function(){function e(t,r){(0,pe.Z)(this,e),this.x=t,this.y=r}return(0,he.Z)(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,Rs.delete(this)}},{key:"toRawBytes",value:function(){var e=Ms(this.y);return e[31]|=this.x&ds?128:0,e}},{key:"toHex",value:function(){return Os(this.toRawBytes())}},{key:"toX25519",value:function(){var e=this.y;return Ms(zs((ds+e)*Vs(ds-e)))}},{key:"isTorsionFree",value:function(){return Ss.fromAffine(this).isTorsionFree()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(zs(-this.x),this.y)}},{key:"add",value:function(e){return Ss.fromAffine(this).add(Ss.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return Ss.fromAffine(this).multiply(e,this).toAffine()}}],[{key:"fromHex",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=ms.d,a=ms.P,i=(t=Qs(t,32)).slice();i[31]=-129&t[31];var s=js(i);if(r&&s>=a)throw new Error("Expected 0 < hex < P");if(!r&&s>=bs)throw new Error("Expected 0 < hex < 2**256");var o=zs(s*s),u=zs(o-ds),c=zs(n*o+ds),l=Hs(u,c),f=l.isValid,p=l.value;if(!f)throw new Error("Point.fromHex: invalid y coordinate");var h=(p&ds)===ds,d=0!==(128&t[31]);return d!==h&&(p=zs(-p)),new e(p,s)}},{key:"fromPrivateKey",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s(t);case 2:return e.abrupt("return",e.sent.point);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Ts.BASE=new Ts(ms.Gx,ms.Gy),Ts.ZERO=new Ts(hs,ds);var Ds=function(){function e(t,r){(0,pe.Z)(this,e),this.r=t,this.s=r,this.assertValidity()}return(0,he.Z)(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!(e instanceof Ts))throw new Error("Expected Point instance");return Js(t,ms.l,!1),this}},{key:"toRawBytes",value:function(){var e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(Ms(this.s),32),e}},{key:"toHex",value:function(){return Os(this.toRawBytes())}}],[{key:"fromHex",value:function(t){var r=Qs(t,64);return new e(Ts.fromHex(r.slice(0,32),!1),js(r.slice(32,64)))}}]),e}();function Ps(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];for(var n=t.reduce((function(e,t){return e+t.length}),0),a=new Uint8Array(n),i=0,s=0;i<t.length;i++){var o=t[i];a.set(o,s),s+=o.length}return a}var Ns=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function Os(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");for(var t="",r=0;r<e.length;r++)t+=Ns[e[r]];return t}function Bs(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");for(var t=new Uint8Array(e.length/2),r=0;r<t.length;r++){var n=2*r,a=e.slice(n,n+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function Ls(e){return Bs(e.toString(16).padStart(64,"0"))}function Ms(e){return Ls(e).reverse()}function Us(e){return(zs(e)&ds)===ds}function js(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Os(Uint8Array.from(e).reverse()))}function Fs(e){return zs(js(e)&Math.pow(vs,ys)-ds)}function zs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms.P,r=e%t;return r>=hs?r:t+r}function Vs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms.P;if(e===hs||t<=hs)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var r=zs(e,t),n=t,a=hs,i=ds,s=ds,o=hs;r!==hs;){var u=n/r,c=n%r,l=a-s*u,f=i-o*u;n=r,r=c,a=s,i=o,s=l,o=f}var p=n;if(p!==ds)throw new Error("invert: does not exist");return zs(a,t)}function Ks(e,t){for(var r=ms.P,n=e;t-- >hs;)n*=n,n%=r;return n}function qs(e){var t=ms.P,r=BigInt(5),n=BigInt(10),a=BigInt(20),i=BigInt(40),s=BigInt(80),o=e*e%t*e%t,u=Ks(o,vs)*o%t,c=Ks(u,ds)*e%t,l=Ks(c,r)*c%t,f=Ks(l,n)*l%t,p=Ks(f,a)*f%t,h=Ks(p,i)*p%t,d=Ks(h,s)*h%t,v=Ks(d,s)*h%t,y=Ks(v,n)*l%t;return{pow_p_5_8:Ks(y,vs)*e%t,b2:o}}function Hs(e,t){var r=zs(t*t*t),n=zs(r*r*t),a=zs(e*r*qs(e*n).pow_p_5_8),i=zs(t*a*a),s=a,o=zs(a*ws),u=i===e,c=i===zs(-e),l=i===zs(-e*ws);return u&&(a=s),(c||l)&&(a=o),Us(a)&&(a=zs(-a)),{isValid:u||c,value:a}}function Ws(e){return Hs(ds,e)}function Gs(){return Ys.apply(this,arguments)}function Ys(){return Ys=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uo.sha512(Ps.apply(void 0,n));case 2:return t=e.sent,r=js(t),e.abrupt("return",zs(r,ms.l));case 5:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function Qs(e,t){var r=e instanceof Uint8Array?Uint8Array.from(e):Bs(e);if("number"===typeof t&&r.length!==t)throw new Error("Expected ".concat(t," bytes"));return r}function Js(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)throw new TypeError("Specify max value");if("number"===typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"===typeof e&&e<t)if(r){if(hs<e)return e}else if(hs<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Xs(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function $s(e){return eo.apply(this,arguments)}function eo(){return(eo=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(32===(t="bigint"===typeof t||"number"===typeof t?Ls(Js(t,bs)):Qs(t)).length){e.next=3;break}throw new Error("Expected 32 bytes");case 3:return e.next=5,uo.sha512(t);case 5:return r=e.sent,n=Xs(r.slice(0,32)),a=r.slice(32,64),i=zs(js(n),ms.l),s=Ts.BASE.multiply(i),o=s.toRawBytes(),e.abrupt("return",{head:n,prefix:a,scalar:i,point:s,pointBytes:o});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(e){return ro.apply(this,arguments)}function ro(){return(ro=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s(t);case 2:return e.abrupt("return",e.sent.pointBytes);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function no(e,t){return ao.apply(this,arguments)}function ao(){return ao=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Qs(t),e.next=3,$s(r);case 3:return n=e.sent,a=n.prefix,i=n.scalar,s=n.pointBytes,e.next=9,Gs(a,t);case 9:return o=e.sent,u=Ts.BASE.multiply(o),e.next=13,Gs(u.toRawBytes(),s,t);case 13:return c=e.sent,l=zs(o+c*i,ms.l),e.abrupt("return",new Ds(u,l).toRawBytes());case 16:case"end":return e.stop()}}),e)}))),ao.apply(this,arguments)}function io(e,t,r){return so.apply(this,arguments)}function so(){return so=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qs(r),n instanceof Ts||(n=Ts.fromHex(n,!1)),a=t instanceof Ds?t.assertValidity():Ds.fromHex(t),i=a.r,s=a.s,o=Ss.BASE.multiplyUnsafe(s),e.next=6,Gs(i.toRawBytes(),n.toRawBytes(),r);case 6:return u=e.sent,c=Ss.fromAffine(n).multiplyUnsafe(u),l=Ss.fromAffine(i).add(c),e.abrupt("return",l.subtract(o).multiplyUnsafe(ms.h).equals(Ss.ZERO));case 10:case"end":return e.stop()}}),e)}))),so.apply(this,arguments)}Ts.BASE._setWindowSize(8);var oo={node:ps,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},uo={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:Os,getExtendedPublicKey:$s,mod:zs,invert:Vs,hashToPrivateScalar:function(e){if((e=Qs(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");var t=zs(js(e),ms.l);if(t===hs||t===ds)throw new Error("Invalid private key");return t},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(oo.web)return oo.web.getRandomValues(new Uint8Array(e));if(oo.node){var t=oo.node.randomBytes;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return uo.randomBytes(32)},sha512:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oo.web){e.next=7;break}return e.next=3,oo.web.subtle.digest("SHA-512",t.buffer);case 3:return r=e.sent,e.abrupt("return",new Uint8Array(r));case 7:if(!oo.node){e.next=11;break}return e.abrupt("return",Uint8Array.from(oo.node.createHash("sha512").update(t).digest()));case 11:throw new Error("The environment doesn't have sha512 function");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ts.BASE,r=t.equals(Ts.BASE)?t:new Ts(t.x,t.y);return r._setWindowSize(e),r.multiply(vs),r}},co=64,lo=32;function fo(){return po.apply(this,arguments)}function po(){return(po=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=uo.randomPrivateKey(),e.next=3,to(t);case 3:return r=e.sent,n=wo(t,r),e.abrupt("return",{privateKey:n,publicKey:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ho(e){return vo.apply(this,arguments)}function vo(){return vo=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length===lo){e.next=4;break}throw new TypeError('"seed" must be 32 bytes in length.');case 4:if(t instanceof Uint8Array){e.next=6;break}throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');case 6:return r=t,e.next=9,to(r);case 9:return n=e.sent,a=wo(r,n),e.abrupt("return",{privateKey:a,publicKey:n});case 12:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function yo(e,t){return go.apply(this,arguments)}function go(){return(go=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slice(0,lo),e.next=3,no(r,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(e,t,r){return bo.apply(this,arguments)}function bo(){return(bo=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(r,n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t){for(var r=new Uint8Array(co),n=0;n<lo;n++)r[n]=e[n],r[lo+n]=t[n];return r}var ko=function(){function e(t){(0,pe.Z)(this,e),this._key=Zo(t,32)}return(0,he.Z)(e,[{key:"verify",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mo(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return bi.encode({Type:gi.Ed25519,Data:this.marshal()})}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),xo=function(){function e(t,r){(0,pe.Z)(this,e),this._key=Zo(t,co),this._publicKey=Zo(r,32)}return(0,he.Z)(e,[{key:"sign",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){return new ko(this._publicKey)}},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return wi.encode({Type:gi.Ed25519,Data:this.marshal()})}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr.identity.digest(this.public.bytes);case 2:return t=e.sent,e.abrupt("return",we.base58btc.encode(t.bytes).substring(1));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("libp2p-key"!==(r=n.length>1&&void 0!==n[1]?n[1]:"libp2p-key")){e.next=7;break}return e.next=4,ts(this.bytes,t);case 4:return e.abrupt("return",e.sent);case 7:throw Ee(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function _o(e){if(e.length>co){var t=(e=Zo(e,96)).slice(0,co),r=e.slice(co,e.length);return new xo(t,r)}var n=(e=Zo(e,co)).slice(0,co),a=e.slice(32);return new xo(n,a)}function Eo(e){return e=Zo(e,32),new ko(e)}function So(){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fo();case 2:return t=e.sent,r=t.privateKey,n=t.publicKey,e.abrupt("return",new xo(r,n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Io(e){return Co.apply(this,arguments)}function Co(){return Co=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ho(t);case 2:return r=e.sent,n=r.privateKey,a=r.publicKey,e.abrupt("return",new xo(n,a));case 6:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function Zo(e,t){var r;if((e=Uint8Array.from(null!==(r=e)&&void 0!==r?r:[])).length!==t)throw Ee(new Error("Key must be a Uint8Array of length ".concat(t,", got ").concat(e.length)),"ERR_INVALID_KEY_TYPE");return e}var Ro=__webpack_require__(5856),To=__webpack_require__.t(Ro,2),Do=BigInt(0),Po=BigInt(1),No=BigInt(2),Oo=BigInt(3),Bo=BigInt(8),Lo=Math.pow(No,BigInt(256)),Mo={a:Do,b:BigInt(7),P:Lo-Math.pow(No,BigInt(32))-BigInt(977),n:Lo-BigInt("432420386565659656852420866394968145599"),h:Po,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function Uo(e){var t=Mo.a,r=Mo.b,n=iu(e*e),a=iu(n*e);return iu(a+t*e+r)}var jo=Mo.a===Do,Fo=function(){function e(t,r,n){(0,pe.Z)(this,e),this.x=t,this.y=r,this.z=n}return(0,he.Z)(e,[{key:"equals",value:function(t){if(!(t instanceof e))throw new TypeError("JacobianPoint expected");var r=this.x,n=this.y,a=this.z,i=t.x,s=t.y,o=t.z,u=iu(Math.pow(a,No)),c=iu(Math.pow(o,No)),l=iu(r*c),f=iu(i*u),p=iu(iu(n*o)*c),h=iu(iu(s*a)*u);return l===f&&p===h}},{key:"negate",value:function(){return new e(this.x,iu(-this.y),this.z)}},{key:"double",value:function(){var t=this.x,r=this.y,n=this.z,a=iu(Math.pow(t,No)),i=iu(Math.pow(r,No)),s=iu(Math.pow(i,No)),o=iu(No*(iu(Math.pow(t+i,No))-a-s)),u=iu(Oo*a),c=iu(Math.pow(u,No)),l=iu(c-No*o);return new e(l,iu(u*(o-l)-Bo*s),iu(No*r*n))}},{key:"add",value:function(t){if(!(t instanceof e))throw new TypeError("JacobianPoint expected");var r=this.x,n=this.y,a=this.z,i=t.x,s=t.y,o=t.z;if(i===Do||s===Do)return this;if(r===Do||n===Do)return t;var u=iu(Math.pow(a,No)),c=iu(Math.pow(o,No)),l=iu(r*c),f=iu(i*u),p=iu(iu(n*o)*c),h=iu(iu(s*a)*u),d=iu(f-l),v=iu(h-p);if(d===Do)return v===Do?this.double():e.ZERO;var y=iu(Math.pow(d,No)),g=iu(d*y),m=iu(l*y),b=iu(Math.pow(v,No)-g-No*m);return new e(b,iu(v*(m-b)-p*g),iu(a*o*d))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiplyUnsafe",value:function(t){var r=e.ZERO;if("bigint"===typeof t&&t===Do)return r;var n=au(t);if(n===Po)return this;if(!jo){for(var a=r,i=this;n>Do;)n&Po&&(a=a.add(i)),i=i.double(),n>>=Po;return a}for(var s=lu(n),o=s.k1neg,u=s.k1,c=s.k2neg,l=s.k2,f=r,p=r,h=this;u>Do||l>Do;)u&Po&&(f=f.add(h)),l&Po&&(p=p.add(h)),h=h.double(),u>>=Po,l>>=Po;return o&&(f=f.negate()),c&&(p=p.negate()),p=new e(iu(p.x*Mo.beta),p.y,p.z),f.add(p)}},{key:"precomputeWindow",value:function(e){for(var t=jo?128/e+1:256/e+1,r=[],n=this,a=n,i=0;i<t;i++){a=n,r.push(a);for(var s=1;s<Math.pow(2,e-1);s++)a=a.add(n),r.push(a);n=a.double()}return r}},{key:"wNAF",value:function(t,r){!r&&this.equals(e.BASE)&&(r=Vo.BASE);var n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var a=r&&zo.get(r);a||(a=this.precomputeWindow(n),r&&1!==n&&(a=e.normalizeZ(a),zo.set(r,a)));for(var i=e.ZERO,s=e.ZERO,o=1+(jo?128/n:256/n),u=Math.pow(2,n-1),c=BigInt(Math.pow(2,n)-1),l=Math.pow(2,n),f=BigInt(n),p=0;p<o;p++){var h=p*u,d=Number(t&c);if(t>>=f,d>u&&(d-=l,t+=Po),0===d){var v=a[h];p%2&&(v=v.negate()),s=s.add(v)}else{var y=a[h+Math.abs(d)-1];d<0&&(y=y.negate()),i=i.add(y)}}return{p:i,f:s}}},{key:"multiply",value:function(t,r){var n,a,i=au(t);if(jo){var s=lu(i),o=s.k1neg,u=s.k1,c=s.k2neg,l=s.k2,f=this.wNAF(u,r),p=f.p,h=f.f,d=this.wNAF(l,r),v=d.p,y=d.f;o&&(p=p.negate()),c&&(v=v.negate()),v=new e(iu(v.x*Mo.beta),v.y,v.z),n=p.add(v),a=h.add(y)}else{var g=this.wNAF(i,r);n=g.p,a=g.f}return e.normalizeZ([n,a])[0]}},{key:"toAffine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ou(this.z),t=this.x,r=this.y,n=this.z,a=e,i=iu(a*a),s=iu(i*a),o=iu(t*i),u=iu(r*s),c=iu(n*a);if(c!==Po)throw new Error("invZ was invalid");return new Vo(o,u)}}],[{key:"fromAffine",value:function(t){if(!(t instanceof Vo))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new e(t.x,t.y,Po)}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mo.P,r=new Array(e.length),n=e.reduce((function(e,n,a){return n===Do?e:(r[a]=e,iu(e*n,t))}),Po),a=ou(n,t);return e.reduceRight((function(e,n,a){return n===Do?e:(r[a]=iu(e*r[a],t),iu(e*n,t))}),a),r}(e.map((function(e){return e.z})));return e.map((function(e,r){return e.toAffine(t[r])}))}},{key:"normalizeZ",value:function(t){return e.toAffineBatch(t).map(e.fromAffine)}}]),e}();Fo.BASE=new Fo(Mo.Gx,Mo.Gy,Po),Fo.ZERO=new Fo(Do,Po,Do);var zo=new WeakMap,Vo=function(){function e(t,r){(0,pe.Z)(this,e),this.x=t,this.y=r}return(0,he.Z)(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,zo.delete(this)}},{key:"toRawBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return tu(this.toHex(e))}},{key:"toHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Jo(this.x);if(e){var r=this.y&Po?"03":"02";return"".concat(r).concat(t)}return"04".concat(t).concat(Jo(this.y))}},{key:"toHexX",value:function(){return this.toHex(!0).slice(2)}},{key:"toRawX",value:function(){return this.toRawBytes(!0).slice(1)}},{key:"assertValidity",value:function(){var e="Point is not on elliptic curve",t=this.x,r=this.y;if(!du(t)||!du(r))throw new Error(e);var n=iu(r*r);if(iu(n-Uo(t))!==Do)throw new Error(e)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(this.x,iu(-this.y))}},{key:"double",value:function(){return Fo.fromAffine(this).double().toAffine()}},{key:"add",value:function(e){return Fo.fromAffine(this).add(Fo.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return Fo.fromAffine(this).multiply(e,this).toAffine()}},{key:"multiplyAndAddUnsafe",value:function(t,r,n){var a=Fo.fromAffine(this),i=r===Do||r===Po||this!==e.BASE?a.multiplyUnsafe(r):a.multiply(r),s=Fo.fromAffine(t).multiplyUnsafe(n),o=i.add(s);return o.equals(Fo.ZERO)?void 0:o.toAffine()}}],[{key:"fromCompressedHex",value:function(t){var r=32===t.length,n=ru(r?t:t.subarray(1));if(!du(n))throw new Error("Point is not on curve");var a=function(e){var t=Mo.P,r=BigInt(6),n=BigInt(11),a=BigInt(22),i=BigInt(23),s=BigInt(44),o=BigInt(88),u=e*e*e%t,c=u*u*e%t,l=su(c,Oo)*c%t,f=su(l,Oo)*c%t,p=su(f,No)*u%t,h=su(p,n)*p%t,d=su(h,a)*h%t,v=su(d,s)*d%t,y=su(v,o)*v%t,g=su(y,s)*d%t,m=su(g,Oo)*c%t,b=su(m,i)*h%t,w=su(b,r)*u%t;return su(w,No)}(Uo(n)),i=(a&Po)===Po;r?i&&(a=iu(-a)):1===(1&t[0])!==i&&(a=iu(-a));var s=new e(n,a);return s.assertValidity(),s}},{key:"fromUncompressedHex",value:function(t){var r=new e(ru(t.subarray(1,33)),ru(t.subarray(33,65)));return r.assertValidity(),r}},{key:"fromHex",value:function(e){var t=nu(e),r=t.length,n=t[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(t);if(65===r&&4===n)return this.fromUncompressedHex(t);throw new Error("Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ".concat(r))}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(yu(t))}},{key:"fromSignature",value:function(t,r,n){var a=fu(t=nu(t)),i=mu(r),s=i.r,o=i.s;if(0!==n&&1!==n)throw new Error("Cannot recover signature: invalid recovery bit");var u=1&n?"03":"02",c=e.fromHex(u+Jo(s)),l=Mo.n,f=ou(s,l),p=iu(-a*f,l),h=iu(o*f,l),d=e.BASE.multiplyAndAddUnsafe(c,p,h);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}}]),e}();function Ko(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function qo(e){if(e.length<2||2!==e[0])throw new Error("Invalid signature integer tag: ".concat(Qo(e)));var t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:ru(r),left:e.subarray(t+2)}}Vo.BASE=new Vo(Mo.Gx,Mo.Gy),Vo.ZERO=new Vo(Do,Do);var Ho=function(){function e(t,r){(0,pe.Z)(this,e),this.r=t,this.s=r,this.assertValidity()}return(0,he.Z)(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!hu(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!hu(t))throw new Error("Invalid Signature: s must be 0 < s < n")}},{key:"hasHighS",value:function(){var e=Mo.n>>Po;return this.s>e}},{key:"normalizeS",value:function(){return this.hasHighS()?new e(this.r,Mo.n-this.s):this}},{key:"toDERRawBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return tu(this.toDERHex(e))}},{key:"toDERHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Ko($o(this.s));if(e)return t;var r=Ko($o(this.r)),n=$o(r.length/2),a=$o(t.length/2),i=$o(r.length/2+t.length/2+4);return"30".concat(i,"02").concat(n).concat(r,"02").concat(a).concat(t)}},{key:"toRawBytes",value:function(){return this.toDERRawBytes()}},{key:"toHex",value:function(){return this.toDERHex()}},{key:"toCompactRawBytes",value:function(){return tu(this.toCompactHex())}},{key:"toCompactHex",value:function(){return Jo(this.r)+Jo(this.s)}}],[{key:"fromCompact",value:function(t){var r=Go(t),n="Signature.fromCompact";if("string"!==typeof t&&!r)throw new TypeError("".concat(n,": Expected string or Uint8Array"));var a=r?Qo(t):t;if(128!==a.length)throw new Error("".concat(n,": Expected 64-byte hex"));return new e(eu(a.slice(0,64)),eu(a.slice(64,128)))}},{key:"fromDER",value:function(t){var r=Go(t);if("string"!==typeof t&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");var n=function(e){if(e.length<2||48!=e[0])throw new Error("Invalid signature tag: ".concat(Qo(e)));if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");var t=qo(e.subarray(2)),r=t.data,n=qo(t.left),a=n.data,i=n.left;if(i.length)throw new Error("Invalid signature: left bytes after parsing: ".concat(Qo(i)));return{r:r,s:a}}(r?t:tu(t));return new e(n.r,n.s)}},{key:"fromHex",value:function(e){return this.fromDER(e)}}]),e}();function Wo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every(Go))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];for(var n=t.reduce((function(e,t){return e+t.length}),0),a=new Uint8Array(n),i=0,s=0;i<t.length;i++){var o=t[i];a.set(o,s),s+=o.length}return a}function Go(e){return e instanceof Uint8Array}var Yo=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function Qo(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t="",r=0;r<e.length;r++)t+=Yo[e[r]];return t}function Jo(e){if(e>Lo)throw new Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function Xo(e){return tu(Jo(e))}function $o(e){var t=e.toString(16);return 1&t.length?"0".concat(t):t}function eu(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt("0x".concat(e))}function tu(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);for(var t=new Uint8Array(e.length/2),r=0;r<t.length;r++){var n=2*r,a=e.slice(n,n+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function ru(e){return eu(Qo(e))}function nu(e){return e instanceof Uint8Array?Uint8Array.from(e):tu(e)}function au(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&hu(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function iu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mo.P,r=e%t;return r>=Do?r:t+r}function su(e,t){for(var r=Mo.P,n=e;t-- >Do;)n*=n,n%=r;return n}function ou(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mo.P;if(e===Do||t<=Do)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var r=iu(e,t),n=t,a=Do,i=Po,s=Po,o=Do;r!==Do;){var u=n/r,c=n%r,l=a-s*u,f=i-o*u;n=r,r=c,a=s,i=o,s=l,o=f}var p=n;if(p!==Po)throw new Error("invert: does not exist");return iu(a,t)}var uu=function(e,t){return(e+t/No)/t},cu=Math.pow(No,BigInt(128));function lu(e){var t=Mo.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Po*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,s=uu(i*e,t),o=uu(-n*e,t),u=iu(e-s*r-o*a,t),c=iu(-s*n-o*i,t),l=u>cu,f=c>cu;if(l&&(u=t-u),f&&(c=t-c),u>cu||c>cu)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:f,k2:c}}function fu(e){var t=Mo.n,r=8*e.length-256,n=ru(e);return r>0&&(n>>=BigInt(r)),n>=t&&(n-=t),n}var pu=function(){function e(){(0,pe.Z)(this,e),this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}return(0,he.Z)(e,[{key:"hmac",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Tu.hmacSha256.apply(Tu,[this.k].concat(t))}},{key:"hmacSync",value:function(){if("function"!==typeof Tu.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Tu.hmacSha256Sync.apply(Tu,[this.k].concat(t));if(n instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return n}},{key:"incr",value:function(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}},{key:"reseed",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:new Uint8Array,e.next=3,this.hmac(this.v,Uint8Array.from([0]),t);case 3:return this.k=e.sent,e.next=6,this.hmac(this.v);case 6:if(this.v=e.sent,0!==t.length){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.hmac(this.v,Uint8Array.from([1]),t);case 11:return this.k=e.sent,e.next=14,this.hmac(this.v);case 14:this.v=e.sent;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reseedSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}},{key:"generate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.incr(),e.next=3,this.hmac(this.v);case 3:return this.v=e.sent,e.abrupt("return",this.v);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateSync",value:function(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}]),e}();function hu(e){return Do<e&&e<Mo.n}function du(e){return Do<e&&e<Mo.P}function vu(e,t,r){var n=ru(e);if(hu(n)){var a=Mo.n,i=Vo.BASE.multiply(n),s=iu(i.x,a);if(s!==Do){var o=iu(ou(n,a)*iu(t+r*s,a),a);if(o!==Do){var u=new Ho(s,o);return{sig:u,recovery:(i.x===u.r?0:2)|Number(i.y&Po)}}}}}function yu(e){var t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");t=eu(e)}else{if(!Go(e))throw new TypeError("Expected valid private key");if(32!==e.length)throw new Error("Expected 32 bytes of private key");t=ru(e)}if(!hu(t))throw new Error("Expected private key: 0 < key < n");return t}function gu(e){return e instanceof Vo?(e.assertValidity(),e):Vo.fromHex(e)}function mu(e){if(e instanceof Ho)return e.assertValidity(),e;try{return Ho.fromDER(e)}catch(t){return Ho.fromCompact(e)}}function bu(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Vo.fromPrivateKey(e).toRawBytes(t)}function wu(e){return ru(e.length>32?e.slice(0,32):e)}function ku(e){var t=wu(e),r=iu(t,Mo.n);return xu(r<Do?t:r)}function xu(e){if("bigint"!==typeof e)throw new Error("Expected bigint");return tu(Jo(e))}function _u(e,t,r){if(null==e)throw new Error('sign: expected valid message hash, not "'.concat(e,'"'));var n=nu(e),a=yu(t),i=[xu(a),ku(n)];if(null!=r){!0===r&&(r=Tu.randomBytes(32));var s=nu(r);if(32!==s.length)throw new Error("sign: Expected 32 bytes of extra data");i.push(s)}return{seed:Wo.apply(void 0,i),m:wu(n),d:a}}function Eu(e,t){var r=e.sig,n=e.recovery,a=Object.assign({canonical:!0,der:!0},t),i=a.canonical,s=a.der,o=a.recovered;i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);var u=s?r.toDERRawBytes():r.toCompactRawBytes();return o?[u,n]:u}function Su(e,t){return Au.apply(this,arguments)}function Au(){return Au=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:{},a=_u(t,r,n.extraEntropy),i=a.seed,s=a.m,o=a.d,c=new pu,e.next=5,c.reseed(i);case 5:return e.t0=vu,e.next=8,c.generate();case 8:if(e.t1=e.sent,e.t2=s,e.t3=o,u=(0,e.t0)(e.t1,e.t2,e.t3)){e.next=16;break}return e.next=14,c.reseed();case 14:e.next=5;break;case 16:return e.abrupt("return",Eu(u,n));case 17:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}var Iu={strict:!0};function Cu(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Iu;try{n=mu(e),t=nu(t)}catch(y){return!1}var i=n,s=i.r,o=i.s;if(a.strict&&n.hasHighS())return!1;var u,c=fu(t);try{u=gu(r)}catch(y){return!1}var l=Mo.n,f=ou(o,l),p=iu(c*f,l),h=iu(s*f,l),d=Vo.BASE.multiplyAndAddUnsafe(u,p,h);if(!d)return!1;var v=iu(d.x,l);return v===s}Vo.BASE._setWindowSize(8);var Zu={node:To,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Ru={},Tu={isValidPrivateKey:function(e){try{return yu(e),!0}catch(t){return!1}},privateAdd:function(e,t){return Xo(iu(yu(e)+yu(t),Mo.n))},privateNegate:function(e){var t=yu(e);return Xo(Mo.n-t)},pointAddScalar:function(e,t,r){var n=Vo.fromHex(e),a=yu(t),i=Vo.BASE.multiplyAndAddUnsafe(n,a,Po);if(!i)throw new Error("Tweaked point at infinity");return i.toRawBytes(r)},pointMultiply:function(e,t,r){var n=Vo.fromHex(e),a=ru(nu(t));return n.multiply(a).toRawBytes(r)},hashToPrivateKey:function(e){if((e=nu(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return Xo(iu(ru(e),Mo.n-Po)+Po)},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Zu.web)return Zu.web.getRandomValues(new Uint8Array(e));if(Zu.node){var t=Zu.node.randomBytes;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return Tu.hashToPrivateKey(Tu.randomBytes(40))},bytesToHex:Qo,hexToBytes:tu,concatBytes:Wo,mod:iu,invert:ou,sha256:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];if(!Zu.web){e.next=8;break}return e.next=4,Zu.web.subtle.digest("SHA-256",Wo.apply(void 0,r));case 4:return a=e.sent,e.abrupt("return",new Uint8Array(a));case 8:if(!Zu.node){e.next=15;break}return i=Zu.node.createHash,s=i("sha256"),r.forEach((function(e){return s.update(e)})),e.abrupt("return",Uint8Array.from(s.digest()));case 15:throw new Error("The environment doesn't have sha256 function");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hmacSha256:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=l[a];if(!Zu.web){e.next=12;break}return e.next=4,Zu.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);case 4:return i=e.sent,s=Wo.apply(void 0,n),e.next=8,Zu.web.subtle.sign("HMAC",i,s);case 8:return o=e.sent,e.abrupt("return",new Uint8Array(o));case 12:if(!Zu.node){e.next=19;break}return u=Zu.node.createHmac,c=u("sha256",t),n.forEach((function(e){return c.update(e)})),e.abrupt("return",Uint8Array.from(c.digest()));case 19:throw new Error("The environment doesn't have hmac-sha256 function");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=Ru[t])){e.next=7;break}return e.next=4,Tu.sha256(Uint8Array.from(t,(function(e){return e.charCodeAt(0)})));case 4:n=e.sent,r=Wo(n,n),Ru[t]=r;case 7:for(a=o.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=o[s];return e.abrupt("return",Tu.sha256.apply(Tu,[r].concat(i)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taggedHashSync:function(e){if("function"!==typeof Tu.sha256Sync)throw new Error("utils.sha256Sync is undefined, you need to set it");var t=Ru[e];if(void 0===t){var r=Tu.sha256Sync(Uint8Array.from(e,(function(e){return e.charCodeAt(0)})));t=Wo(r,r),Ru[e]=t}for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return Tu.sha256Sync.apply(Tu,[t].concat(a))},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vo.BASE,r=t===Vo.BASE?t:new Vo(t.x,t.y);return r._setWindowSize(e),r.multiply(Oo),r}};function Du(){return Tu.randomPrivateKey()}function Pu(e,t){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(r);case 2:return n=e.sent,a=n.digest,e.prev=4,e.next=7,Su(a,t);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),Ee(e.t0,"ERR_INVALID_INPUT");case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Ou(e,t,r){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn.sha256.digest(n);case 3:return a=e.sent,i=a.digest,e.abrupt("return",Cu(r,i,t));case 8:throw e.prev=8,e.t0=e.catch(0),Ee(e.t0,"ERR_INVALID_INPUT");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Lu(e){try{Vo.fromHex(e)}catch(Dy){throw Ee(Dy,"ERR_INVALID_PUBLIC_KEY")}}var Mu=function(){function e(t){(0,pe.Z)(this,e),Lu(t),this._key=t}return(0,he.Z)(e,[{key:"verify",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ou(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return e=this._key,Vo.fromHex(e).toRawBytes(!0);var e}},{key:"bytes",get:function(){return bi.encode({Type:gi.Secp256k1,Data:this.marshal()})}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Uu=function(){function e(t,r){(0,pe.Z)(this,e),this._key=t,this._publicKey=null!==r&&void 0!==r?r:function(e){try{return bu(e,!0)}catch(Dy){throw Ee(Dy,"ERR_INVALID_PRIVATE_KEY")}}(t),function(e){try{bu(e,!0)}catch(Dy){throw Ee(Dy,"ERR_INVALID_PRIVATE_KEY")}}(this._key),Lu(this._publicKey)}return(0,he.Z)(e,[{key:"sign",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pu(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){return new Mu(this._publicKey)}},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return wi.encode({Type:gi.Secp256k1,Data:this.marshal()})}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.hash();case 2:return t=e.sent,e.abrupt("return",(0,gr.toString)(t,"base58btc"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("libp2p-key"!==(r=n.length>1&&void 0!==n[1]?n[1]:"libp2p-key")){e.next=7;break}return e.next=4,ts(this.bytes,t);case 4:return e.abrupt("return",e.sent);case 7:throw Ee(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ju(e){return new Uu(e)}function Fu(e){return new Mu(e)}function zu(){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du();case 2:return t=e.sent,e.abrupt("return",new Uu(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ku={rsa:n,ed25519:a,secp256k1:i};function qu(e){var t=Object.keys(Ku).join(" / ");return Ee(new Error("invalid or unsupported key type ".concat(e,". Must be ").concat(t)),"ERR_UNSUPPORTED_KEY_TYPE")}function Hu(e){if("rsa"===(e=e.toLowerCase())||"ed25519"===e||"secp256k1"===e)return Ku[e];throw qu(e)}function Wu(e,t){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hu(t).generateKeyPair(null!==r&&void 0!==r?r:2048);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Gu.apply(this,arguments)}function Yu(e){var t=bi.decode(e),r=t.Data;switch(t.Type){case gi.RSA:return Ku.rsa.unmarshalRsaPublicKey(r);case gi.Ed25519:return Ku.ed25519.unmarshalEd25519PublicKey(r);case gi.Secp256k1:return Ku.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw qu(t.Type)}}function Qu(e,t){var r;return Hu(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}function Ju(e){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=wi.decode(t),n=r.Data,e.t0=r.Type,e.next=e.t0===gi.RSA?5:e.t0===gi.Ed25519?8:e.t0===gi.Secp256k1?9:10;break;case 5:return e.next=7,Ku.rsa.unmarshalRsaPrivateKey(n);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",Ku.ed25519.unmarshalEd25519PrivateKey(n));case 9:return e.abrupt("return",Ku.secp256k1.unmarshalSecp256k1PrivateKey(n));case 10:throw qu(r.Type);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(e,t){return ec.apply(this,arguments)}function ec(){return(ec=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bi(t,r);case 3:return n=e.sent,e.next=6,Ju(n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0);case 11:if(null!==(a=Ci.pki.decryptRsaPrivateKey(t,r))){e.next=14;break}throw Ee(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");case 14:return i=Ci.asn1.toDer(Ci.pki.privateKeyToAsn1(a)),i=(0,fr.fromString)(i.getBytes(),"ascii"),e.next=18,Ku.rsa.unmarshalRsaPrivateKey(i);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var tc,rc="ERR_UNRECOGNIZED_VALIDITY",nc="ERR_SIGNATURE_VERIFICATION",ac="ERR_UNDEFINED_PARAMETER";!function(e){var t;!function(e){e.EOL="EOL"}(e.ValidityType||(e.ValidityType={})),function(e){e[e.EOL=0]="EOL"}(t||(t={})),function(e){e.codec=function(){return $a(t)}}(e.ValidityType||(e.ValidityType={})),e.codec=function(){return yi({1:{name:"value",codec:Ja,optional:!0},2:{name:"signature",codec:Ja,optional:!0},3:{name:"validityType",codec:e.ValidityType.codec(),optional:!0},4:{name:"validity",codec:Ja,optional:!0},5:{name:"sequence",codec:Ii,optional:!0},6:{name:"ttl",codec:Ii,optional:!0},7:{name:"pubKey",codec:Ja,optional:!0},8:{name:"signatureV2",codec:Ja,optional:!0},9:{name:"data",codec:Ja,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(tc||(tc={}));var ic=_e("ipns:utils"),sc=(0,fr.fromString)("/ipns/");function oc(e){var t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");var n=parseInt(r[1],10),a=parseInt(r[2],10)-1,i=parseInt(r[3],10),s=parseInt(r[4],10),o=parseInt(r[5],10),u=parseInt(r[6],10),c=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,a,i,s,o,u,c))}var uc=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r&&null!=t){e.next=4;break}throw n=new Error("one or more of the provided parameters are not defined"),ic.error(n),Ee(n,ac);case 4:if(null==r.pubKey){e.next=20;break}e.prev=5,a=Yu(r.pubKey),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(5),ic.error(e.t0),e.t0;case 13:return e.next=15,ta(r.pubKey);case 15:if(e.sent.equals(t)){e.next=18;break}throw Ee(new Error("Embedded public key did not match PeerID"),"ERR_INVALID_EMBEDDED_KEY");case 18:e.next=21;break;case 20:null!=t.publicKey&&(a=Yu(t.publicKey));case 21:if(null==a){e.next=23;break}return e.abrupt("return",a);case 23:throw Ee(new Error("no public key is available"),ac);case 24:case"end":return e.stop()}}),e,null,[[5,9]])})));return function(t,r){return e.apply(this,arguments)}}(),cc=function(e,t,r){var n=(0,fr.fromString)(t);return(0,ba.concat)([e,r,n])},lc=function(e){var t=(0,fr.fromString)("ipns-signature:");return(0,ba.concat)([t,e])},fc=function(e){var t,r,n,a,i,s,o=tc.decode(e);return{value:null!==(t=o.value)&&void 0!==t?t:new Uint8Array(0),signature:null!==(r=o.signature)&&void 0!==r?r:new Uint8Array(0),validityType:null!==(n=o.validityType)&&void 0!==n?n:tc.ValidityType.EOL,validity:null!==(a=o.validity)&&void 0!==a?a:new Uint8Array(0),sequence:null!==(i=o.sequence)&&void 0!==i?i:0n,pubKey:o.pubKey,ttl:null!==(s=o.ttl)&&void 0!==s?s:void 0,signatureV2:o.signatureV2,data:o.data}},pc=function(e){return(0,ba.concat)([sc,e.toBytes()])},hc=function(e){return ea(e.slice(sc.length))},dc=function(e,t,r,n,a){if(r!==tc.ValidityType.EOL)throw Ee(new Error("Unknown validity type"),rc);var i={Value:e,Validity:t,ValidityType:0,Sequence:n,TTL:a};return dt.cv(i)},vc=_e("ipns"),yc=rr.identity.code,gc="/ipns/",mc=gc.length,bc=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new ma(Date.now()+Number(a)),s=tc.ValidityType.EOL,o=a.toString().split("."),u=(0,y.Z)(o,2),c=u[0],l=u[1],f=BigInt(c)*BigInt(1e5)+BigInt(null!==l&&void 0!==l?l:"0"),e.next=6,wc(t,r,n,s,i,f);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),wc=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i,s){var o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=BigInt(n),o=(0,fr.fromString)(i.toString()),null!=t.privateKey){e.next=4;break}throw Ee(new Error("Missing private key"),"ERR_MISSING_PRIVATE_KEY");case 4:return e.next=6,Ju(t.privateKey);case 6:return u=e.sent,e.next=9,xc(u,r,a,o);case 9:return c=e.sent,l=dc(r,o,a,n,s),f=lc(l),e.next=14,u.sign(f);case 14:return p=e.sent,h={value:r,signature:c,validityType:a,validity:o,sequence:n,ttl:s,signatureV2:p,data:l},null!=t.publicKey&&((d=Vn.decode(t.toBytes())).code===yc&&(0,Kn.equals)(t.publicKey,d.digest)||(h.pubKey=t.publicKey)),vc("ipns entry for %b created",r),e.abrupt("return",h);case 19:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,s){return e.apply(this,arguments)}}(),kc=function(e){return new kr("/ipns/".concat(function(e){return ke.base32upper.encode(e).slice(1)}(e)))},xc=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=cc(r,n,a),e.next=4,t.sign(i);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),vc.error("record signature creation failed",e.t0),Ee(new Error("record signature creation failed"),"ERR_SIGNATURE_CREATION");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n,a){return e.apply(this,arguments)}}(),_c=_e("ipfs:ipns:publisher"),Ec=ga().code,Sc=36e5,Ac=function(){function e(t,r){(0,pe.Z)(this,e),this._routing=t,this._datastore=r}return(0,he.Z)(e,[{key:"publishWithEOL",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateOrCreateRecord(t,r,n);case 2:return a=e.sent,e.abrupt("return",this._putRecordToRouting(a,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"publish",value:function(e,t){return this.publishWithEOL(e,t,Sc)}},{key:"_putRecordToRouting",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ha(r)){e.next=4;break}throw n="peerId received is not valid",_c.error(n),Ee(new Error(n),"ERR_INVALID_PEER_ID");case 4:if(null!=r.publicKey){e.next=6;break}throw Ee(new Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");case 6:return a=pc(r),e.next=9,this._publishEntry(a,t);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_publishEntry",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._routing.put(t,r);case 3:return n=e.sent,_c("ipns record for ".concat((0,gr.toString)(t,"base32")," was stored in the routing")),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),a="ipns record for ".concat((0,gr.toString)(t,"base32")," could not be stored in the routing - ").concat(e.t0.stack),_c.error(a),_c.error(e.t0),Ee(new Error(a),"ERR_PUTTING_TO_ROUTING");case 14:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getPublished",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},ha(t)){e.next=5;break}throw n="peerId received is not valid",_c.error(n),Ee(new Error(n),"ERR_INVALID_PEER_ID");case 5:return a=!1!==r.checkRouting,e.prev=6,e.next=9,this._datastore.get(kc(t.toBytes()));case 9:return i=e.sent,e.abrupt("return",this._unmarshalData(i));case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Ec){e.next=19;break}throw s="unexpected error getting the ipns record ".concat(t.toString()," from datastore"),_c.error(s),Ee(new Error(s),"ERR_UNEXPECTED_DATASTORE_RESPONSE");case 19:if(a){e.next=21;break}throw Ee(e.t0,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");case 21:return e.prev=21,o=pc(t),e.next=25,this._routing.get(o);case 25:return u=e.sent,e.abrupt("return",this._unmarshalData(u));case 29:throw e.prev=29,e.t1=e.catch(21),_c.error(e.t1),e.t1;case 33:case"end":return e.stop()}}),e,this,[[6,13],[21,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_unmarshalData",value:function(e){try{return fc(e)}catch(Dy){throw Ee(Dy,"ERR_INVALID_RECORD_DATA")}}},{key:"_updateOrCreateRecord",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ha(t)){e.next=4;break}throw a="peerId received is not valid",_c.error(a),Ee(new Error(a),"ERR_INVALID_PEER_ID");case 4:return i={checkRouting:!0},e.prev=5,e.next=8,this._getPublished(t,i);case 8:s=e.sent,e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(5),e.t0.code===Ec){e.next=17;break}throw o="unexpected error when determining the last published IPNS record for ".concat(t.toString()," ").concat(e.t0.stack),_c.error(o),Ee(new Error(o),"ERR_DETERMINING_PUBLISHED_RECORD");case 17:return u=0n,s&&void 0!==s.sequence&&(u=(0,Kn.equals)(s.value,r)?s.sequence:s.sequence+BigInt(1)),e.prev=19,e.next=22,bc(t,r,u,n);case 22:c=e.sent,e.next=30;break;case 25:throw e.prev=25,e.t1=e.catch(19),l="ipns record for ".concat(r," could not be created"),_c.error(e.t1),Ee(new Error(l),"ERR_CREATING_IPNS_RECORD");case 30:return e.prev=30,h=c,f=tc.encode(h),e.next=34,this._datastore.put(kc(t.toBytes()),f);case 34:return _c("ipns record for ".concat((0,gr.toString)(r,"base32")," was stored in the datastore")),e.abrupt("return",f);case 38:throw e.prev=38,e.t2=e.catch(30),p="ipns record for ".concat(r," could not be stored in the datastore"),_c.error(p),Ee(new Error(p),"ERR_STORING_IN_DATASTORE");case 43:case"end":return e.stop()}var h}),e,this,[[5,11],[19,25],[30,38]])})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}();Ac.defaultRecordLifetime=Sc;var Ic=_e("ipfs:ipns:republisher"),Cc=function(){function e(t,r,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{pass:""};(0,pe.Z)(this,e),this._publisher=t,this._datastore=r,this._peerId=n,this._keychain=a,this._options=i,this._republishHandle=null}return(0,he.Z)(e,[{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._republishHandle){e.next=2;break}throw Ee(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");case 2:t={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:function(e){t._timeoutId=setTimeout((0,fe.Z)((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t._timeoutId=null,r.prev=1,t._inflightTask=t._task(),r.next=5,t._inflightTask;case 5:t._task&&t.runPeriodically(e),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),Ic.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])}))),e())},cancel:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t._timeoutId&&clearTimeout(t._timeoutId),t._task=null,e.next=4,t._inflightTask;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},r=this._options.pass,n=!0,t._task=function(){return a._republishEntries(a._peerId,r)},t.runPeriodically((function(){return n?(n=!1,a._options.initialBroadcastInterval||6e4):a._options.broadcastInterval||144e5})),this._republishHandle=t;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._republishHandle){e.next=3;break}throw Ee(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");case 3:return this._republishHandle=null,e.next=6,t.cancel();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_republishEntries",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._republishEntry(t);case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),"cannot republish entry for the node's private key",Ic.error("cannot republish entry for the node's private key"),e.abrupt("return");case 10:if(!r){e.next=48;break}return e.prev=11,e.next=14,this._keychain.listKeys();case 14:n=e.sent,a=(0,v.Z)(n),e.prev=16,a.s();case 18:if((i=a.n()).done){e.next=35;break}if("self"!==(s=i.value).name){e.next=22;break}return e.abrupt("continue",33);case 22:return e.next=24,this._keychain.exportKey(s.name,r);case 24:return o=e.sent,e.next=27,$u(o,r);case 27:return u=e.sent,e.next=30,ta(u.public.bytes,u.bytes);case 30:return c=e.sent,e.next=33,this._republishEntry(c);case 33:e.next=18;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(16),a.e(e.t1);case 40:return e.prev=40,a.f(),e.finish(40);case 43:e.next=48;break;case 45:e.prev=45,e.t2=e.catch(11),Ic.error(e.t2);case 48:case"end":return e.stop()}}),e,this,[[0,5],[11,45],[16,37,40,43]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_republishEntry",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getPreviousValue(t);case 3:return r=e.sent,e.next=6,this._publisher.publishWithEOL(t,r,864e5);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),"ERR_NO_ENTRY_FOUND"!==e.t0.code){e.next=12;break}return e.abrupt("return");case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPreviousValue",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ha(t)){e.next=2;break}throw Ee(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");case 2:return e.prev=2,e.next=5,this._datastore.get(kc(t.toBytes()));case 5:if((r=e.sent)instanceof Uint8Array){e.next=8;break}throw Ee(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");case 8:return e.prev=8,n=fc(r),e.abrupt("return",n.value);case 13:throw e.prev=13,e.t0=e.catch(8),Ic.error(e.t0),Ee(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD");case 17:e.next=24;break;case 19:if(e.prev=19,e.t1=e.catch(2),!e.t1||!e.t1.notFound){e.next=23;break}throw Ee(new Error("no previous entry for record with id: ".concat(t.toString())),"ERR_NO_ENTRY_FOUND");case 23:throw e.t1;case 24:case"end":return e.stop()}}),e,this,[[2,19],[8,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zc=_e("ipns:validator"),Rc=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.value,a=r.validityType,i=r.validity,null!=r.signatureV2&&null!=r.data?(o=r.signatureV2,s=lc(r.data),Tc(r)):(o=null!==(u=r.signature)&&void 0!==u?u:new Uint8Array(0),s=cc(n,a,i)),e.prev=2,e.next=5,t.verify(s,o);case 5:c=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c=!1;case 11:if(c){e.next=14;break}throw Zc.error("record signature verification failed"),Ee(new Error("record signature verification failed"),nc);case 14:if(null==i||a!==tc.ValidityType.EOL){e.next=28;break}e.prev=15,l=oc((0,gr.toString)(i)),e.next=23;break;case 19:throw e.prev=19,e.t1=e.catch(15),Zc.error("unrecognized validity format (not an rfc3339 format)"),Ee(new Error("unrecognized validity format (not an rfc3339 format)"),"ERR_UNRECOGNIZED_FORMAT");case 23:if(!(l.getTime()<Date.now())){e.next=26;break}throw Zc.error("record has expired"),Ee(new Error("record has expired"),"ERR_IPNS_EXPIRED_RECORD");case 26:e.next=31;break;case 28:if(null==a){e.next=31;break}throw Zc.error("unrecognized validity type"),Ee(new Error("unrecognized validity type"),rc);case 31:Zc("ipns entry for %b is valid",n);case 32:case"end":return e.stop()}}),e,null,[[2,8],[15,19]])})));return function(t,r){return e.apply(this,arguments)}}(),Tc=function(e){if(null==e.data)throw Ee(new Error("Record data is missing"),"ERR_INVALID_RECORD_DATA");var t=function(e){var t=dt.Jx(e);if(0!==t.ValidityType)throw Ee(new Error("Unknown validity type"),rc);return t.ValidityType=tc.ValidityType.EOL,Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t}(e.data);if(!(0,Kn.equals)(t.Value,e.value))throw Ee(new Error('Field "value" did not match between protobuf and CBOR'),nc);if(!(0,Kn.equals)(t.Validity,e.validity))throw Ee(new Error('Field "validity" did not match between protobuf and CBOR'),nc);if(t.ValidityType!==e.validityType)throw Ee(new Error('Field "validityType" did not match between protobuf and CBOR'),nc);if(t.Sequence!==e.sequence)throw Ee(new Error('Field "sequence" did not match between protobuf and CBOR'),nc);if(t.TTL!==e.ttl)throw Ee(new Error('Field "ttl" did not match between protobuf and CBOR'),nc)},Dc=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hc(t),a=fc(r),e.next=4,uc(n,a);case 4:return i=e.sent,e.next=7,Rc(i,a);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Pc=_e("ipfs:ipns:resolver"),Nc=ga().code,Oc=function(){function e(t){(0,pe.Z)(this,e),this._routing=t}return(0,he.Z)(e,[{key:"resolve",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},"string"===typeof t){e.next=3;break}throw Ee(new Error("invalid name"),"ERR_INVALID_NAME");case 3:if(n=r.recursive&&"true"===r.recursive.toString(),3===(a=t.split("/")).length&&""===a[0]){e.next=7;break}throw Ee(new Error("invalid name"),"ERR_INVALID_NAME");case 7:return i=a[2],s=1/0,n&&(s=32),e.next=12,this.resolver(i,s);case 12:return o=e.sent,Pc("".concat(t," was locally resolved correctly")),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resolver",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r){e.next=4;break}throw n="could not resolve name (recursion limit of ".concat(32," exceeded)"),Pc.error(n),Ee(new Error(n),"ERR_RESOLVE_RECURSION_LIMIT");case 4:return e.next=6,this._resolveName(t);case 6:if(a=e.sent,"ipfs"!==(i=a.split("/"))[1]&&r){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",this.resolver(i[2],r-1));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_resolveName",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$n(t),n=pc(r),e.prev=2,e.next=5,this._routing.get(n);case 5:a=e.sent,e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(2),Pc.error("could not get record from routing",e.t0),e.t0.code!==Nc){e.next=13;break}throw Ee(new Error("record requested for ".concat(t," was not found in the network")),"ERR_NO_RECORD_FOUND");case 13:throw Ee(new Error("unexpected error getting the ipns record ".concat(r.toString())),"ERR_UNEXPECTED_ERROR_GETTING_RECORD");case 14:return e.abrupt("return",this._validateRecord(r,a));case 15:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_validateRecord",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dc((0,ba.concat)([(0,fr.fromString)("/ipns/"),t.toBytes()]),r);case 2:return n=fc(r),e.abrupt("return",(0,gr.toString)(n.value));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Bc=function(){function e(t){(0,pe.Z)(this,e),this.lru=Vr(t)}return(0,he.Z)(e,[{key:"get",value:function(e){var t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}},{key:"set",value:function(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}},{key:"has",value:function(e){return!!this.get(e)}},{key:"remove",value:function(e){this.lru.remove(e)}},{key:"clear",value:function(){this.lru.clear()}}]),e}(),Lc=_e("ipfs:ipns"),Mc=6e4,Uc=function(){function e(t,r,n,a,i){(0,pe.Z)(this,e),this.publisher=new Ac(t,r),this.republisher=new Cc(this.publisher,r,n,a,i),this.resolver=new Oc(t),this.cache=new Bc(1e3),this.routing=t}return(0,he.Z)(e,[{key:"publish",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:Ac.defaultRecordLifetime,e.prev=1,e.next=4,this.publisher.publishWithEOL(t,r,n);case 4:return Lc("IPNS value ".concat((0,gr.toString)(r,"base32")," was published correctly")),a=t.toString(),i=parseFloat(n),s=i<Mc?i:Mc,this.cache.set(a,r,s),Lc("IPNS value ".concat((0,gr.toString)(r,"base32")," was cached correctly")),e.abrupt("return",{name:a,value:r});case 13:throw e.prev=13,e.t0=e.catch(1),Lc.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"resolve",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},"string"===typeof t){e.next=3;break}throw Ee(new Error("name received is not valid"),"ERR_INVALID_NAME");case 3:if(r.nocache||r.recursive){e.next=8;break}if(n=t.split("/")[2],!(a=this.cache.get(n))){e.next=8;break}return e.abrupt("return",a);case 8:return e.prev=8,e.next=11,this.resolver.resolve(t,r);case 11:return i=e.sent,Lc("IPNS record from ".concat(t," was resolved correctly")),e.abrupt("return",i);case 16:throw e.prev=16,e.t0=e.catch(8),Lc.error(e.t0),e.t0;case 20:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeKeyspace",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.publish(t,r,Ac.defaultRecordLifetime));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),jc=__webpack_require__(464),Fc=function(e,t){return ye((0,ce.Z)().mark((function r(){var n;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pr(jc(e));case 2:return n=r.sent,r.delegateYield(ia(hr(n.sort(t)),pr),"t0",4);case 4:case"end":return r.stop()}}),r)})))()},zc=__webpack_require__(9272),Vc=__webpack_require__(2393),Kc=__webpack_require__(5959),qc=function(){function e(){(0,pe.Z)(this,e)}return(0,he.Z)(e,[{key:"open",value:function(){return Promise.reject(new Error(".open is not implemented"))}},{key:"close",value:function(){return Promise.reject(new Error(".close is not implemented"))}},{key:"put",value:function(e,t,r){return Promise.reject(new Error(".put is not implemented"))}},{key:"get",value:function(e,t){return Promise.reject(new Error(".get is not implemented"))}},{key:"has",value:function(e,t){return Promise.reject(new Error(".has is not implemented"))}},{key:"delete",value:function(e,t){return Promise.reject(new Error(".delete is not implemented"))}},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,l=c.key,f=c.value,n.next=10,pr(t.put(l,f,r));case 10:return n.next=12,{key:l,value:f};case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,s=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==o.return){n.next=26;break}return n.next=26,pr(o.return());case 26:if(n.prev=26,!i){n.next=29;break}throw s;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,s=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,n.next=10,pr(t.delete(c,r));case 10:return n.next=12,c;case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,s=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==o.return){n.next=26;break}return n.next=26,pr(o.return());case 26:if(n.prev=26,!i){n.next=29;break}throw s;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"batch",value:function(){var e=this,t=[],r=[];return{put:function(e,r){t.push({key:e,value:r})},delete:function(e){r.push(e)},commit:function(){var n=(0,fe.Z)((0,ce.Z)().mark((function n(a){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,zc(e.putMany(t,a));case 2:return t=[],n.next=5,zc(e.deleteMany(r,a));case 5:r=[];case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}},{key:"_all",value:function(e,t){return ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._all is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"_allKeys",value:function(e,t){return ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._allKeys is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"query",value:function(e,t){var r=this._all(e,t);if(null!=e.prefix&&(r=Vc(r,(function(t){return t.key.toString().startsWith(e.prefix)}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return Vc(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return Fc(e,t)}),r)),null!=e.offset){var n=0;r=Vc(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=Kc(r,e.limit)),r}},{key:"queryKeys",value:function(e,t){var r=this._allKeys(e,t);if(null!=e.prefix&&(r=Vc(r,(function(t){return t.toString().startsWith(e.prefix)}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return Vc(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return Fc(e,t)}),r)),null!=e.offset){var n=0;r=Vc(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=Kc(r,e.limit)),r}}]),e}(),Hc=__webpack_require__(7067),Wc=be("datastore:core:tiered"),Gc=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this)).stores=e.slice(),n}return(0,he.Z)(r,[{key:"open",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.open()})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),da();case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.put(t,r,n)})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),ya();case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,v.Z)(this.stores),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=18;break}return i=a.value,e.prev=5,e.next=8,i.get(t,r);case 8:if(!(s=e.sent)){e.next=11;break}return e.abrupt("return",s);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),Wc(e.t0);case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),n.e(e.t1);case 23:return e.prev=23,n.f(),e.finish(23);case 26:throw ga();case 27:case"end":return e.stop()}}),e,this,[[1,20,23,26],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,v.Z)(this.stores),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=11;break}return i=a.value,e.next=7,i.has(t,r);case 7:if(!e.sent){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.delete(t,r)})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),va();case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.stores.map((function(e){var t=Hc();return zc(e.putMany(t,r)).catch((function(e){a=e})),t})),n.prev=1,s=!1,o=!1,n.prev=4,c=(0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,!a){e.next=3;break}throw a;case 3:return i.forEach((function(e){return e.push(t)})),e.next=6,t;case 6:case"end":return e.stop()}}),e)})),l=hr(e);case 7:return n.next=9,pr(l.next());case 9:if(!(s=!(f=n.sent).done)){n.next=14;break}return n.delegateYield(c(),"t0",11);case 11:s=!1,n.next=7;break;case 14:n.next=20;break;case 16:n.prev=16,n.t1=n.catch(4),o=!0,u=n.t1;case 20:if(n.prev=20,n.prev=21,!s||null==l.return){n.next=25;break}return n.next=25,pr(l.return());case 25:if(n.prev=25,!o){n.next=28;break}throw u;case 28:return n.finish(25);case 29:return n.finish(20);case 30:return n.prev=30,i.forEach((function(e){return e.end()})),n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[1,,30,33],[4,16,20,30],[21,,25,29]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.stores.map((function(e){var t=Hc();return zc(e.deleteMany(t,r)).catch((function(e){a=e})),t})),n.prev=1,s=!1,o=!1,n.prev=4,c=(0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,!a){e.next=3;break}throw a;case 3:return i.forEach((function(e){return e.push(t)})),e.next=6,t;case 6:case"end":return e.stop()}}),e)})),l=hr(e);case 7:return n.next=9,pr(l.next());case 9:if(!(s=!(f=n.sent).done)){n.next=14;break}return n.delegateYield(c(),"t0",11);case 11:s=!1,n.next=7;break;case 14:n.next=20;break;case 16:n.prev=16,n.t1=n.catch(4),o=!0,u=n.t1;case 20:if(n.prev=20,n.prev=21,!s||null==l.return){n.next=25;break}return n.next=25,pr(l.return());case 25:if(n.prev=25,!o){n.next=28;break}throw u;case 28:return n.finish(25);case 29:return n.finish(20);case 30:return n.prev=30,i.forEach((function(e){return e.end()})),n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[1,,30,33],[4,16,20,30],[21,,25,29]])})))()}},{key:"close",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.stores.map((function(e){return e.close()})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"batch",value:function(){var e=this.stores.map((function(e){return e.batch()}));return{put:function(t,r){e.forEach((function(e){return e.put(t,r)}))},delete:function(t){e.forEach((function(e){return e.delete(t)}))},commit:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,v.Z)(e),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=9;break}return i=a.value,t.next=7,i.commit(r);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()}}},{key:"query",value:function(e,t){return this.stores[this.stores.length-1].query(e,t)}},{key:"queryKeys",value:function(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}}]),r}(qc),Yc=__webpack_require__(5157),Qc=function(e,t){var r=t.map((function(e,t){return{entry:tc.decode(e),index:t}}));return r.sort((function(e,t){var r,n,a,i;if(null!=e.entry.signatureV2&&null==t.entry.signatureV2)return-1;if(null==e.entry.signatureV2&&null!=t.entry.signatureV2)return 1;var s=null!==(r=e.entry.sequence)&&void 0!==r?r:0n,o=null!==(n=t.entry.sequence)&&void 0!==n?n:0n;if(s>o)return-1;if(s<o)return 1;var u=null!==(a=e.entry.validity)&&void 0!==a?a:new Uint8Array(0),c=null!==(i=t.entry.validity)&&void 0!==i?i:new Uint8Array(0),l=oc((0,gr.toString)(u)),f=oc((0,gr.toString)(c));return l.getTime()>f.getTime()?-1:l.getTime()<f.getTime()?1:0})),r[0].index},Jc="SHARDING";var Xc=function(e){St(r,e);var t=Rt(r);function r(){var e;return(0,pe.Z)(this,r),(e=t.call(this)).data={},e}return(0,he.Z)(r,[{key:"open",value:function(){return Promise.resolve()}},{key:"close",value:function(){return Promise.resolve()}},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.data[t.toString()]=r;case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.has(t);case 2:if(e.sent){e.next=5;break}throw ga();case 5:return e.abrupt("return",this.data[t.toString()]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0!==this.data[t.toString()]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.data[t.toString()];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_all",value:function(){var e=this;return ye((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(ia(hr(Object.entries(e.data).map((function(e){var t=(0,y.Z)(e,2),r=t[0],n=t[1];return{key:new kr(r),value:n}}))),pr),"t0",1);case 1:case"end":return t.stop()}}),t)})))()}},{key:"_allKeys",value:function(){var e=this;return ye((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(ia(hr(Object.entries(e.data).map((function(e){var t=(0,y.Z)(e,1)[0];return new kr(t)}))),pr),"t0",1);case 1:case"end":return t.stop()}}),t)})))()}}]),r}(qc),$c=__webpack_require__(7889),el=(__webpack_require__(7241),new kr(Jc),new kr("_README"),__webpack_require__(6155)),tl="/record/";function rl(e){return(0,gr.toString)(e,"base32")}function nl(e){("string"===typeof e||e instanceof String)&&(e=(0,fr.fromString)(e.toString()));var t=(0,gr.toString)(e,"base64url");return"".concat(tl).concat(t)}function al(e){if(e.substring(0,tl.length)!==tl)throw Ee(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");var t=e.substring(tl.length);return(0,fr.fromString)(t,"base64url")}var il,sl=_e("datastore-pubsub:publisher"),ol=function(e){St(r,e);var t=Rt(r);function r(e,n,a,i,s,o){var u;if((0,pe.Z)(this,r),u=t.call(this),!i)throw Ee(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if("function"!==typeof i)throw Ee(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if("function"!==typeof s)throw Ee(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(o&&"function"!==typeof o)throw Ee(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");return u._pubsub=e,u._datastore=n,u._peerId=a,u._validator=i,u._selector=s,u._handleSubscriptionKeyFn=o,u._onMessage=u._onMessage.bind(Ct(u)),u._pubsub.addEventListener("message",u._onMessage),u}return(0,he.Z)(r,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=4;break}throw n="datastore key does not have a valid format",sl.error(n),Ee(new Error(n),"ERR_INVALID_DATASTORE_KEY");case 4:if(r instanceof Uint8Array){e.next=8;break}throw a="received value is not a Uint8Array",sl.error(a),Ee(new Error(a),"ERR_INVALID_VALUE_RECEIVED");case 8:return i=nl(t),sl("publish value for topic ".concat(i)),e.next=12,this._pubsub.publish(i,r);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=4;break}throw r="datastore key does not have a valid format",sl.error(r),Ee(new Error(r),"ERR_INVALID_DATASTORE_KEY");case 4:return n=nl(t),e.next=7,this._pubsub.getTopics();case 7:if(!((a=e.sent)&&Array.isArray(a)&&a.indexOf(n)>-1)){e.next=10;break}return e.abrupt("return",this._getLocal(t));case 10:return e.prev=10,e.next=13,this._pubsub.subscribe(n);case 13:e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(10),i="cannot subscribe topic ".concat(n),sl.error(i),Ee(new Error(i),"ERR_SUBSCRIBING_TOPIC");case 20:return sl("subscribed values for key ".concat(n)),e.abrupt("return",this._getLocal(t));case 22:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(e){var t=nl(e);return this._pubsub.unsubscribe(t)}},{key:"_getLocal",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new kr("/"+rl(t),!1),e.prev=1,e.next=4,this._datastore.get(r);case 4:n=e.sent,e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(1),"ERR_NOT_FOUND"===e.t0.code){e.next=13;break}throw a="unexpected error getting the ipns record for ".concat(r.toString()),sl.error(a),Ee(new Error(a),"ERR_UNEXPECTED_ERROR_GETTING_RECORD");case 13:throw i="local record requested was not found for ".concat(r.toString()),sl.error(i),Ee(new Error(i),"ERR_NOT_FOUND");case 16:if(n instanceof Uint8Array){e.next=20;break}throw s="found record that we couldn't convert to a value",sl.error(s),Ee(new Error(s),"ERR_INVALID_RECORD_RECEIVED");case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_onMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.detail,n=r.data,a=r.from,i=r.topic,e.prev=2,s=al(i),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(2),sl.error(e.t0),e.abrupt("return");case 10:if(sl("message received for topic ".concat(i)),!this._peerId.equals(a)){e.next=14;break}return sl("message discarded as it is from the same peer"),e.abrupt("return");case 14:if(!this._handleSubscriptionKeyFn){e.next=26;break}return e.prev=15,e.next=18,this._handleSubscriptionKeyFn(s);case 18:o=e.sent,e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(15),sl.error("message discarded by the subscriptionKeyFn"),e.abrupt("return");case 25:s=o;case 26:return e.prev=26,e.next=29,this._storeIfSubscriptionIsBetter(s,n);case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(26),sl.error(e.t2);case 34:case"end":return e.stop()}}),e,this,[[2,6],[15,21],[26,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_storeIfSubscriptionIsBetter",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.prev=1,e.next=4,this._isBetter(t,r);case 4:n=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),"ERR_NOT_VALID_RECORD"===e.t0.code){e.next=11;break}throw e.t0;case 11:if(!n){e.next=14;break}return e.next=14,this._storeRecord(t,r);case 14:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_validateRecord",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._validator(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_selectRecord",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._selector(t,r);case 2:return n=e.sent,e.abrupt("return",0===n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_isBetter",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._validateRecord(t,r);case 3:e.next=10;break;case 5:throw e.prev=5,e.t0=e.catch(0),n="record received through pubsub is not valid",sl.error(n),Ee(new Error(n),"ERR_NOT_VALID_RECORD");case 10:return a=new kr(t),e.prev=11,e.next=14,this._getLocal(a.uint8Array());case 14:i=e.sent,e.next=20;break;case 17:return e.prev=17,e.t1=e.catch(11),e.abrupt("return",!0);case 20:if(!(0,Kn.equals)(i,r)){e.next=22;break}return e.abrupt("return",!1);case 22:return e.abrupt("return",this._selectRecord(t,[i,r]));case 23:case"end":return e.stop()}}),e,this,[[0,5],[11,17]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_storeRecord",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new kr("/"+rl(t),!1),e.next=3,this._datastore.put(n,r);case 3:sl("record for ".concat(nl(t)," was stored in the datastore"));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(qc),ul=_e("ipfs:ipns:pubsub"),cl=function(){function e(t,r,n){(0,pe.Z)(this,e),this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new ol(t,r,n,Dc,Qc,this._handleSubscriptionKey)}return(0,he.Z)(e,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._pubsubDs.put(t,r);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),ul.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._pubsubDs.get(t);case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n=e.t0;case 9:if(a=t.slice(0,mc),(0,gr.toString)(a)===gc&&(i=we.base58btc.encode(t).substring(1),s=we.base58btc.encode(t.slice(mc)).substring(1),this._subscriptions[i]=s,ul("subscribed to pubsub topic ".concat(i,", id ").concat(s))),!n){e.next=13;break}throw n;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_handleSubscriptionKey",value:function(e){e instanceof Uint8Array&&(e=(0,gr.toString)(e,"base58btc"));var t=this._subscriptions[e];if(!t)throw Ee(new Error("key ".concat(e," does not correspond to a subscription")),"ERR_INVALID_KEY");try{return pc($n(t))}catch(Dy){throw ul.error(Dy),Dy}}},{key:"getSubscriptions",value:function(){return Object.values(this._subscriptions).filter(Boolean).map((function(e){return"".concat(gc).concat(e)}))}},{key:"cancel",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t){e.next=2;break}throw Ee(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");case 2:if(t.startsWith(gc)&&(t=t.substring(mc)),r=Object.keys(this._subscriptions).find((function(e){return a._subscriptions[e]===t}))){e.next=6;break}return e.abrupt("return",{canceled:!1});case 6:return n=(0,fr.fromString)(r),this._pubsubDs.unsubscribe(n),delete this._subscriptions[r],ul("unsubscribed pubsub ".concat(r,": ").concat(t)),e.abrupt("return",{canceled:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ll(e){var t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),n=String(e.getUTCDate()).padStart(2,"0"),a=String(e.getUTCHours()).padStart(2,"0"),i=String(e.getUTCMinutes()).padStart(2,"0"),s=String(e.getUTCSeconds()).padStart(2,"0"),o=e.getUTCMilliseconds(),u=String(1e3*o*1e3).padStart(9,"0");return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(i,":").concat(s,".").concat(u,"Z")}!function(e){e.codec=function(){return yi({1:{name:"key",codec:Ja},2:{name:"value",codec:Ja},5:{name:"timeReceived",codec:Si}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(il||(il={}));var fl=function(){function e(t,r,n){if((0,pe.Z)(this,e),!(t instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=t,this.value=r,this.timeReceived=n}return(0,he.Z)(e,[{key:"serialize",value:function(){return il.encode(this.prepareSerialize())}},{key:"prepareSerialize",value:function(){return{key:this.key,value:this.value,timeReceived:ll(this.timeReceived)}}}],[{key:"deserialize",value:function(t){var r=il.decode(t);return new e(r.key,r.value,new Date(r.timeReceived))}},{key:"fromDeserialized",value:function(t){var r=function(e){var t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");var n=parseInt(r[1],10),a=parseInt(r[2],10)-1,i=parseInt(r[3],10),s=parseInt(r[4],10),o=parseInt(r[5],10),u=parseInt(r[6],10),c=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,a,i,s,o,u,c))}(t.timeReceived);if(null==t.key)throw new Error("key missing from deserialized object");if(null==t.value)throw new Error("value missing from deserialized object");return new e(t.key,t.value,r)}}]),e}(),pl=_e("ipfs:ipns:offline-datastore"),hl=function(){function e(t){(0,pe.Z)(this,e),this._datastore=t,this.stores=[]}return(0,he.Z)(e,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw Ee(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");case 2:if(r instanceof Uint8Array){e.next=4;break}throw Ee(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");case 4:e.prev=4,n=this._routingKey(t),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(4),pl.error(e.t0),Ee(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY");case 12:return a=new fl(t,r,new Date),e.next=15,this._datastore.put(n,a.serialize());case 15:case"end":return e.stop()}}),e,this,[[4,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw Ee(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");case 2:e.prev=2,r=this._routingKey(t),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(2),pl.error(e.t0),Ee(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY");case 10:return e.next=12,this._datastore.get(r);case 12:n=e.sent,e.prev=13,a=fl.deserialize(n),e.next=21;break;case 17:throw e.prev=17,e.t1=e.catch(13),pl.error(e.t1),e.t1;case 21:return e.abrupt("return",a.value);case 22:case"end":return e.stop()}}),e,this,[[2,6],[13,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_routingKey",value:function(e){return new kr("/dht/record/"+(0,gr.toString)(e,"base32"),!1)}}]),e}(),dl=_e("ipfs:ipns:dht-datastore"),vl=function(){function e(t){(0,pe.Z)(this,e),this._dht=t}return(0,he.Z)(e,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zc(this._dht.put(t,r));case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),dl.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(this._dht.get(t));case 4:return e.next=6,i.next();case 6:if(!(r=!(s=e.sent).done)){e.next=13;break}if("VALUE"!==(o=s.value).name){e.next=10;break}return e.abrupt("return",o.value);case 10:r=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),n=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==i.return){e.next=24;break}return e.next=24,i.return();case 24:if(e.prev=24,!n){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:throw ga();case 30:case"end":return e.stop()}}),e,this,[[2,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function yl(e){var t,r=e.libp2p,n=e.repo,a=e.peerId,i=e.options,s=[];if(Yc(i,"EXPERIMENTAL.ipnsPubsub",!1)&&(t=new cl(r.pubsub,n.datastore,a),s.push(t)),!0!==Yc(i,"offline",!1)&&["dht","dhtclient","dhtserver"].includes(Yc(i,"config.Routing.Type","none"))&&s.push(new vl(r.dht)),Yc(i,"offline",!1)||0===s.length){var o=new hl(n.datastore);s.push(o)}return new Gc(s)}var gl=_e("ipfs:components:ipns"),ml=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pass:""};(0,pe.Z)(this,e),this.options=t,this.offline=null,this.online=null}return(0,he.Z)(e,[{key:"getIPNS",value:function(){var e=this.online||this.offline;if(e)return e;throw new ar}},{key:"routing",get:function(){return this.getIPNS().routing}},{key:"startOffline",value:function(e){var t=e.repo,r=e.peerId,n=e.keychain;if(null!=this.offline)throw new sr;gl("initializing IPNS keyspace (offline)");var a=new hl(t.datastore),i=new Uc(a,t.datastore,r,n,this.options);this.offline=i}},{key:"startOnline",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.libp2p,n=t.repo,a=t.peerId,i=t.keychain,null==this.online){e.next=3;break}throw new sr;case 3:return s=yl({libp2p:r,repo:n,peerId:a,options:this.options}),o=new Uc(s,n.datastore,a,i,this.options),e.next=7,o.republisher.start();case 7:this.online=o;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.online)){e.next=5;break}return e.next=4,t.republisher.stop();case 4:this.online=null;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publish",value:function(e,t,r){return this.getIPNS().publish(e,t,r)}},{key:"resolve",value:function(e,t){return this.getIPNS().resolve(e,t)}},{key:"initializeKeyspace",value:function(e,t){return this.getIPNS().initializeKeyspace(e,t)}}]),e}();function bl(e,t,r){return wl.apply(this,arguments)}function wl(){return(wl=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.ipns,i=t.repo,s=t.codecs,!vr.ipnsPath(r)){e.next=3;break}return e.abrupt("return",a.resolve(r));case 3:return o=Dr(r),u=o.cid,c=o.path,e.next=6,zc(Fr(u,c||"",s,i,n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kl=_e("ipfs:name:publish");var xl=__webpack_require__(5645),_l=__webpack_require__(819),El=ge.bind({ignoreUndefined:!0}),Sl=_e("ipfs:name:resolve"),Al=function(e,t){return t.length>0?e+"/"+t.join("/"):e};function Il(e,t){if(!e||!t||!t.ipnsPubsub)throw Ee(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(e.routing instanceof cl)return e.routing;var r=(e.routing.stores||[]).find((function(e){return e instanceof cl}));if(!r)throw Ee(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return r}var Cl=(0,he.Z)((function e(t){var r=t.ipns,n=t.options;(0,pe.Z)(this,e),this.cancel=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(n){var a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},i=Il(t,r),e.abrupt("return",i.cancel(n,a));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({ipns:r,options:n}),this.state=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(){var n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.prev=1,e.abrupt("return",{enabled:Boolean(Il(t,r))});case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",{enabled:!1});case 8:case"end":return e.stop()}}),e,null,[[1,5]])}))),n.apply(this,arguments)}return Rr((function(){return n.apply(this,arguments)}))}({ipns:r,options:n}),this.subs=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},a=Il(t,r),e.abrupt("return",a.getSubscriptions(n));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(){return n.apply(this,arguments)}))}({ipns:r,options:n})})),Zl=(0,he.Z)((function e(t){var r=t.dns,n=t.ipns,a=t.repo,i=t.codecs,s=t.peerId,o=t.isOnline,u=t.keychain,c=t.options;(0,pe.Z)(this,e),this.publish=function(e){var t=e.ipns,r=e.repo,n=e.codecs,a=e.peerId,i=e.isOnline,s=e.keychain,o=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("self"!==t||null==a.privateKey){e.next=6;break}return e.next=3,Ju(a.privateKey);case 3:case 12:r=e.sent,e.next=19;break;case 6:return e.prev=6,e.next=9,s.exportKey(t,"temp");case 9:return n=e.sent,e.next=12,$u(n,"temp");case 15:throw e.prev=15,e.t0=e.catch(6),kl.error(e.t0),Ee(e.t0,"ERR_CANNOT_GET_KEY");case 19:return e.abrupt("return",ta(r.public.bytes,r.bytes));case 20:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();function u(){return u=(0,fe.Z)((0,ce.Z)().mark((function e(a){var s,u,c,l,f,p,h,d,v=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>1&&void 0!==v[1]?v[1]:{},u=!(!1===s.resolve),c=s.lifetime||"24h",l=s.key||"self",i()){e.next=6;break}throw Ee(new Error(Pr),"OFFLINE_ERROR");case 6:e.prev=6,a=Br(a),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(6),kl.error(e.t0),e.t0;case 14:f=0,e.prev=15,f=Cr(c)||0,f=parseFloat(f.toFixed(6)),e.next=24;break;case 20:throw e.prev=20,e.t1=e.catch(15),kl.error(e.t1),e.t1;case 24:return e.next=26,Promise.all([o(l),u?bl({ipns:t,repo:r,codecs:n},a):Promise.resolve()]);case 26:return p=e.sent,h=(0,fr.fromString)(a),e.next=30,t.publish(p[0],h,f);case 30:return d=e.sent,e.abrupt("return",{name:d.name,value:(0,gr.toString)(d.value)});case 32:case"end":return e.stop()}}),e,null,[[6,10],[15,20]])}))),u.apply(this,arguments)}return Rr((function(e){return u.apply(this,arguments)}))}({ipns:n,repo:a,codecs:i,peerId:s,isOnline:o,keychain:u}),this.resolve=function(e){var t=e.dns,r=e.ipns,n=e.isOnline,a=e.options.offline;function i(){return i=ye((0,ce.Z)().mark((function e(i){var s,o,u,c,l,f,p,h,d,v,y,g,m=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=m.length>1&&void 0!==m[1]?m[1]:{},s=El({nocache:!1,recursive:!0},s),!(a&&s&&s.nocache)){e.next=4;break}throw Ee(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");case 4:if(n()||a){e.next=6;break}throw Ee(new Error(Pr),"OFFLINE_ERROR");case 6:(o=i.toString()).startsWith("/ipns/")||(o="/ipns/".concat(o)),u=o.slice(1).split("/"),c=zn(u),l=c[0],f=c[1],p=c.slice(2),e.prev=9,"1"===f.substring(0,1)?(h=$n(f),d=Vn.decode(h.toBytes()),v=Ue.CID.createV1(114,d),f=v.toString(xl.base36)):1===(y=Ue.CID.parse(f)).version&&(f=y.toString(xl.base36)),e.next=26;break;case 13:if(e.prev=13,e.t0=e.catch(9),!_l(f)){e.next=24;break}return e.t1=Al,e.next=19,pr(t(f,s));case 19:return e.t2=e.sent,e.t3=p,e.next=23,(0,e.t1)(e.t2,e.t3);case 23:return e.abrupt("return");case 24:throw Sl.error(e.t0),Ee(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME");case 26:return e.next=28,pr(r.resolve("/".concat(l,"/").concat(f),s));case 28:return g=e.sent,e.next=31,Al(g instanceof Uint8Array?(0,gr.toString)(g):g,p);case 31:case"end":return e.stop()}}),e,null,[[9,13]])}))),i.apply(this,arguments)}return Rr((function(e){return i.apply(this,arguments)}))}({dns:r,ipns:n,isOnline:o,options:c}),this.pubsub=new Cl({ipns:n,options:c})})),Rl=ga().code,Tl="<dst>",Dl="<src> -> <dst>";function Pl(e,t,r){var n=Dr(t),a=n.cid,i=n.path;return!1!==r.preload&&e(a),"/ipfs/".concat(a).concat(i||"")}function Nl(e,t,r,n,a){return Ol.apply(this,arguments)}function Ol(){return Ol=ye((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o,u,c,l,f,p,h,d,v,y;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(t(a,i));case 2:s=e.sent,o=Dr(s),u=o.cid,c=null!=i.maxDepth?i.maxDepth:1/0,l=i.unique||!1,f=!1,p=!1,e.prev=8,d=hr(Ll(r,n,u,c,l,i));case 10:return e.next=12,pr(d.next());case 12:if(!(f=!(v=e.sent).done)){e.next=23;break}if((y=v.value).parent){e.next=16;break}return e.abrupt("continue",20);case 16:if(!y.isDuplicate){e.next=18;break}return e.abrupt("continue",20);case 18:return e.next=20,{ref:Bl(y.parent.cid,y.node.cid,y.node.name,i.format)};case 20:f=!1,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),p=!0,h=e.t0;case 29:if(e.prev=29,e.prev=30,!f||null==d.return){e.next=34;break}return e.next=34,pr(d.return());case 34:if(e.prev=34,!p){e.next=37;break}throw h;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[8,25,29,39],[30,,34,38]])}))),Ol.apply(this,arguments)}function Bl(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Tl,a=n.replace(/<src>/g,e.toString());return a=(a=a.replace(/<dst>/g,t.toString())).replace(/<linkname>/g,r)}function Ll(e,t,r,n,a,i){return Ml.apply(this,arguments)}function Ml(){return Ml=ye((0,ce.Z)().mark((function e(t,r,n,a,i,s){var o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return(c=ye((0,ce.Z)().mark((function e(n,c){var l,f,p,h,d,v,y;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((l=c+1)>a)){e.next=3;break}return e.abrupt("return");case 3:e.prev=3,f=!1,p=!1,e.prev=6,d=hr(Ul(t,r,n.cid,s));case 8:return e.next=10,pr(d.next());case 10:if(!(f=!(v=e.sent).done)){e.next=19;break}return y=v.value,e.next=14,{parent:n,node:y,isDuplicate:i&&o.has(y.cid.toString())};case 14:return i&&o.add(y.cid.toString()),e.delegateYield(ia(hr(u(y,l)),pr),"t0",16);case 16:f=!1,e.next=8;break;case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(6),p=!0,h=e.t1;case 25:if(e.prev=25,e.prev=26,!f||null==d.return){e.next=30;break}return e.next=30,pr(d.return());case 30:if(e.prev=30,!p){e.next=33;break}throw h;case 33:return e.finish(30);case 34:return e.finish(25);case 35:e.next=41;break;case 37:throw e.prev=37,e.t2=e.catch(3),e.t2.code===Rl&&(e.t2.message="Could not find object with CID: ".concat(n.cid)),e.t2;case 41:case"end":return e.stop()}}),e,null,[[3,37],[6,21,25,35],[26,,30,34]])})))).apply(this,arguments)},u=function(e,t){return c.apply(this,arguments)},o=new Set,e.delegateYield(ia(hr(u({cid:n},0)),pr),"t0",4);case 4:case"end":return e.stop()}}),e)}))),Ml.apply(this,arguments)}function Ul(e,t,r,n){return jl.apply(this,arguments)}function jl(){return jl=ye((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p,h,d,g,m;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(t.blocks.get(n,a));case 2:return i=e.sent,e.next=5,pr(r.getCodec(n.code));case 5:s=e.sent,o=s.decode(i),u=n.code===ft,c=[],l=(0,v.Z)(Fl(o,c)),e.prev=10,l.s();case 12:if((f=l.n()).done){e.next=26;break}if(p=(0,y.Z)(f.value,2),h=p[0],d=p[1],!u){e.next=22;break}if(!(g=h.match(/^Links\/(\d+)\/Hash$/))){e.next=22;break}if(!((m=Number(g[1]))<o.Links.length)){e.next=22;break}return e.next=21,{name:o.Links[m].Name,cid:d};case 21:return e.abrupt("continue",24);case 22:return e.next=24,{name:h,cid:d};case 24:e.next=12;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),l.e(e.t0);case 31:return e.prev=31,l.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[10,28,31,34]])}))),jl.apply(this,arguments)}var Fl=(0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h,d,g,m;return(0,ce.Z)().wrap((function(b){for(;;)switch(b.prev=b.next){case 0:if(null!=t){b.next=2;break}return b.abrupt("return");case 2:if(!(t instanceof Uint8Array)){b.next=4;break}return b.abrupt("return");case 4:n=0,a=Object.entries(t);case 5:if(!(n<a.length)){b.next=46;break}if(i=(0,y.Z)(a[n],2),s=i[0],o=i[1],u=[].concat(Vt(r),[s]),null==o||"object"!==typeof o){b.next=43;break}if(!Array.isArray(o)){b.next=36;break}c=(0,v.Z)(o.entries()),b.prev=11,c.s();case 13:if((l=c.n()).done){b.next=26;break}if(f=(0,y.Z)(l.value,2),p=f[0],h=f[1],d=[].concat(Vt(u),[p]),!(g=Ue.CID.asCID(h))){b.next=22;break}return b.next=20,[d.join("/"),g];case 20:b.next=24;break;case 22:if("object"!==typeof h){b.next=24;break}return b.delegateYield(e(h,d),"t0",24);case 24:b.next=13;break;case 26:b.next=31;break;case 28:b.prev=28,b.t1=b.catch(11),c.e(b.t1);case 31:return b.prev=31,c.f(),b.finish(31);case 34:b.next=43;break;case 36:if(!(m=Ue.CID.asCID(o))){b.next=42;break}return b.next=40,[u.join("/"),m];case 40:b.next=43;break;case 42:return b.delegateYield(e(o,u),"t2",43);case 43:n++,b.next=5;break;case 46:return b.abrupt("return",[]);case 47:case"end":return b.stop()}}),e,null,[[11,28,31,34]])}));function zl(e){var t=e.repo;function r(){return r=ye((0,ce.Z)().mark((function e(){var r,n,a,i,s,o,u,c=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>0&&void 0!==c[0]?c[0]:{},n=!1,a=!1,e.prev=3,s=hr(t.blocks.queryKeys({},{signal:r.signal}));case 5:return e.next=7,pr(s.next());case 7:if(!(n=!(o=e.sent).done)){e.next=14;break}return u=o.value,e.next=11,{ref:u.toString()};case 11:n=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==s.return){e.next=25;break}return e.next=25,pr(s.return());case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}function Vl(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.use(r);case 3:return n=e.sent.bitswap,a=n.stat().snapshot,e.abrupt("return",{provideBufLen:parseInt(a.providesBufferLength.toString()),blocksReceived:BigInt(a.blocksReceived.toString()),wantlist:Array.from(n.getWantlist()).map((function(e){return e[1].cid})),peers:n.peers(),dupBlksReceived:BigInt(a.dupBlksReceived.toString()),dupDataReceived:BigInt(a.dupDataReceived.toString()),dataReceived:BigInt(a.dataReceived.toString()),blocksSent:BigInt(a.blocksSent.toString()),dataSent:BigInt(a.dataSent.toString())});case 6:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}var Kl=(0,he.Z)((function e(t){var r=t.network;(0,pe.Z)(this,e),this.wantlist=function(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,t.use(r);case 3:return n=e.sent,a=n.bitswap,i=a.getWantlist(),e.abrupt("return",Array.from(i).map((function(e){return e[1].cid})));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({network:r}),this.wantlistForPeer=function(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.bitswap,s=i.wantlistForPeer(r),e.abrupt("return",Array.from(s).map((function(e){return e[1].cid})));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({network:r}),this.unwant=function(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.bitswap,Array.isArray(r)||(r=[r]),e.abrupt("return",i.unwant(r));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({network:r}),this.stat=Vl({network:r})})),ql="[a-fA-F\\d:]",Hl=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(ql,")|(?<=").concat(ql,")(?=\\s|$))"):""},Wl="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Gl="[a-fA-F\\d]{1,4}",Yl="\n(?:\n(?:".concat(Gl,":){7}(?:").concat(Gl,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(Gl,":){6}(?:").concat(Wl,"|:").concat(Gl,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(Gl,":){5}(?::").concat(Wl,"|(?::").concat(Gl,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(Gl,":){4}(?:(?::").concat(Gl,"){0,1}:").concat(Wl,"|(?::").concat(Gl,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(Gl,":){3}(?:(?::").concat(Gl,"){0,2}:").concat(Wl,"|(?::").concat(Gl,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(Gl,":){2}(?:(?::").concat(Gl,"){0,3}:").concat(Wl,"|(?::").concat(Gl,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(Gl,":){1}(?:(?::").concat(Gl,"){0,4}:").concat(Wl,"|(?::").concat(Gl,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(Gl,"){0,5}:").concat(Wl,"|(?::").concat(Gl,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Ql=new RegExp("(?:^".concat(Wl,"$)|(?:^").concat(Yl,"$)")),Jl=new RegExp("^".concat(Wl,"$")),Xl=new RegExp("^".concat(Yl,"$")),$l=function(e){return e&&e.exact?Ql:new RegExp("(?:".concat(Hl(e)).concat(Wl).concat(Hl(e),")|(?:").concat(Hl(e)).concat(Yl).concat(Hl(e),")"),"g")};$l.v4=function(e){return e&&e.exact?Jl:new RegExp("".concat(Hl(e)).concat(Wl).concat(Hl(e)),"g")},$l.v6=function(e){return e&&e.exact?Xl:new RegExp("".concat(Hl(e)).concat(Yl).concat(Hl(e)),"g")};var ef=$l;function tf(e){return ef({exact:!0}).test(e)}function rf(e){return ef.v6({exact:!0}).test(e)}var nf=function(e){return ef.v4({exact:!0}).test(e)},af=rf,sf=function e(t){var r,n=0;if(nf(t))r=new Uint8Array(n+4),t.split(/\./g).forEach((function(e){r[n++]=255&parseInt(e,10)}));else if(af(t)){var a,i=t.split(":",8);for(a=0;a<i.length;a++){var s=void 0;nf(i[a])&&(s=e(i[a]),i[a]=(0,gr.toString)(s.slice(0,2),"base16")),null!=s&&++a<8&&i.splice(a,0,(0,gr.toString)(s.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(a=0;a<i.length&&""!==i[a];a++);var o=[a,1];for(a=9-i.length;a>0;a--)o.push("0");i.splice.apply(i,o)}for(r=new Uint8Array(n+16),a=0;a<i.length;a++){var u=parseInt(i[a],16);r[n++]=u>>8&255,r[n++]=255&u}}if(null==r)throw Error("Invalid ip address: "+t);return r},of=-1,uf={},cf={};function lf(e,t,r,n,a){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(a)}}function ff(e){if("number"===typeof e){if(null!=cf[e])return cf[e];throw new Error("no protocol with code: ".concat(e))}if("string"===typeof e){if(null!=uf[e])return uf[e];throw new Error("no protocol with name: ".concat(e))}throw new Error("invalid protocol id type: ".concat(typeof e))}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,of,"ip6zone"],[53,of,"dns",!0],[54,of,"dns4",!0],[55,of,"dns6",!0],[56,of,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,of,"unix",!1,!0],[421,of,"ipfs"],[421,of,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,of,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,of,"memory"]].forEach((function(e){var t=lf.apply(void 0,Vt(e));cf[t.code]=t,uf[t.name]=t}));var pf=__webpack_require__(4561);function hf(e,t){switch(ff(e).code){case 4:case 41:return function(e){var t=function(e,t,r){var n;t=~~t,r=null!==(n=r)&&void 0!==n?n:e.length-t;var a=[],i="",s=new DataView(e.buffer);if(4===r){for(var o=0;o<r;o++)a.push(e[t+o]);i=a.join(".")}else if(16===r){for(var u=0;u<r;u+=2)a.push(s.getUint16(t+u).toString(16));i=(i=(i=a.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return i}(e,0,e.length);if(null==t||!tf(t))throw new Error("invalid ip address");return t}(t);case 6:case 273:case 33:case 132:return gf(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function(e){var t=pf.decode(e);if((e=e.slice(pf.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return(0,gr.toString)(e)}(t);case 421:return function(e){var t=pf.decode(e),r=e.slice(pf.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return(0,gr.toString)(r,"base58btc")}(t);case 444:case 445:return mf(t);default:return(0,gr.toString)(t,"base16")}}function df(e,t){switch(ff(e).code){case 4:case 41:return vf(t);case 6:case 273:case 33:case 132:return yf(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return function(e){var t=(0,fr.fromString)(e),r=Uint8Array.from(pf.encode(t.length));return(0,ba.concat)([r,t],r.length+t.length)}(t);case 421:return function(e){var t;t="Q"===e[0]||"1"===e[0]?Vn.decode(we.base58btc.decode("z".concat(e))).bytes:Ue.CID.parse(e).multihash.bytes;var r=Uint8Array.from(pf.encode(t.length));return(0,ba.concat)([r,t],r.length+t.length)}(t);case 444:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(16!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion address."));var r=ke.base32.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=yf(n);return(0,ba.concat)([r,a],r.length+a.length)}(t);case 445:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(56!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion3 address."));var r=ke.base32.decode("b".concat(t[0])),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=yf(n);return(0,ba.concat)([r,a],r.length+a.length)}(t);default:return(0,fr.fromString)(t,"base16")}}function vf(e){if(!tf(e))throw new Error("invalid ip address");return sf(e)}function yf(e){var t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function gf(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function mf(e){var t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=(0,gr.toString)(t,"base32"),a=gf(r);return"".concat(n,":").concat(a)}function bf(e){return e.map((function(e){var t=Zf(e);return null!=e[1]?[t.code,hf(t.code,e[1])]:[t.code]}))}function wf(e){return Sf((0,ba.concat)(e.map((function(e){var t=Zf(e),r=Uint8Array.from(pf.encode(t.code));return e.length>1&&null!=e[1]&&(r=(0,ba.concat)([r,e[1]])),r}))))}function kf(e,t){return e.size>0?e.size/8:0===e.size?0:pf.decode(t)+pf.decode.bytes}function xf(e){for(var t=[],r=0;r<e.length;){var n=pf.decode(e,r),a=pf.decode.bytes,i=kf(ff(n),e.slice(r+a));if(0!==i){var s=e.slice(r+a,r+a+i);if((r+=i+a)>e.length)throw Cf("Invalid address Uint8Array: "+(0,gr.toString)(e,"base16"));t.push([n,s])}else t.push([n]),r+=a}return t}function _f(e){return function(e){var t=[];return e.map((function(e){var r=Zf(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),If(t.join("/"))}(bf(xf(e)))}function Ef(e){var t=function(e){var t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(var n=0;n<r.length;n++){var a=r[n],i=ff(a);if(0!==i.size){if(++n>=r.length)throw Cf("invalid address: "+e);if(!0===i.path){t.push([a,If(r.slice(n).join("/"))]);break}t.push([a,r[n]])}else t.push([a])}return t}(e=If(e));return wf(t.map((function(e){Array.isArray(e)||(e=[e]);var t=Zf(e);return e.length>1?[t.code,df(t.code,e[1])]:[t.code]})))}function Sf(e){var t=Af(e);if(null!=t)throw t;return Uint8Array.from(e)}function Af(e){try{xf(e)}catch(Dy){return Dy}}function If(e){return"/"+e.trim().split("/").filter((function(e){return e})).join("/")}function Cf(e){return new Error("Error parsing address: "+e)}function Zf(e){return ff(e[0])}var Rf=Symbol.for("nodejs.util.inspect.custom"),Tf=[ff("ip4").code,ff("ip6").code],Df=[ff("dns").code,ff("dns4").code,ff("dns6").code,ff("dnsaddr").code],Pf=[ff("p2p").code,ff("ipfs").code],Nf=[ff("tcp").code,ff("udp").code],Of=new Map,Bf=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Lf=function(){function e(t){if((0,pe.Z)(this,e),null==t&&(t=""),Object.defineProperty(this,Bf,{value:!0}),t instanceof Uint8Array)this.bytes=Sf(t);else if("string"===typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error('multiaddr "'.concat(t,'" must start with a "/"'));this.bytes=Ef(t)}else{if(!e.isMultiaddr(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=Sf(t.bytes)}}return(0,he.Z)(e,[{key:"toString",value:function(){return _f(this.bytes)}},{key:"toJSON",value:function(){return this.toString()}},{key:"toOptions",value:function(){var e,t,r=this.protoCodes(),n=this.toString().split("/").slice(1);if(n.length>2)Df.includes(r[0])&&Pf.includes(r[1])?(e=ff("tcp").name,t=443):(e=ff(n[2]).name,t=parseInt(n[3]));else{if(!Df.includes(r[0]))throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');e=ff("tcp").name,t=443}return{family:41===r[0]||55===r[0]?6:4,host:n[1],transport:e,port:t}}},{key:"protos",value:function(){return this.protoCodes().map((function(e){return Object.assign({},ff(e))}))}},{key:"protoCodes",value:function(){for(var e=[],t=this.bytes,r=0;r<t.length;){var n=pf.decode(t,r),a=pf.decode.bytes;r+=kf(ff(n),t.slice(r+a))+a,e.push(n)}return e}},{key:"protoNames",value:function(){return this.protos().map((function(e){return e.name}))}},{key:"tuples",value:function(){return xf(this.bytes)}},{key:"stringTuples",value:function(){return bf(xf(this.bytes))}},{key:"encapsulate",value:function(t){return t=new e(t),new e(this.toString()+t.toString())}},{key:"decapsulate",value:function(t){var r=t.toString(),n=this.toString(),a=n.lastIndexOf(r);if(a<0)throw new Error("Address ".concat(this.toString()," does not contain subaddress: ").concat(t.toString()));return new e(n.slice(0,a))}},{key:"decapsulateCode",value:function(t){for(var r=this.tuples(),n=r.length-1;n>=0;n--)if(r[n][0]===t)return new e(wf(r.slice(0,n)));return this}},{key:"getPeerId",value:function(){try{var e=this.stringTuples().filter((function(e){return e[0]===uf.ipfs.code})),t=e.pop();if(null!=(null===t||void 0===t?void 0:t[1])){var r=t[1];return"Q"===r[0]||"1"===r[0]?(0,gr.toString)(we.base58btc.decode("z".concat(r)),"base58btc"):(0,gr.toString)(Ue.CID.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}},{key:"getPath",value:function(){var e=null;try{null==(e=this.stringTuples().filter((function(e){return!0===ff(e[0]).path}))[0][1])&&(e=null)}catch(t){e=null}return e}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"resolve",value:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=this.protos().find((function(e){return e.resolvable})))){t.next=3;break}return t.abrupt("return",[this]);case 3:if(null!=(a=Of.get(n.name))){t.next=6;break}throw Ee(new Error("no available resolver for ".concat(n.name)),"ERR_NO_AVAILABLE_RESOLVER");case 6:return t.next=8,a(this,r);case 8:return i=t.sent,t.abrupt("return",i.map((function(t){return new e(t)})));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"nodeAddress",value:function(){var e=this.protoCodes(),t=this.protoNames(),r=this.toString().split("/").slice(1),n=ff(r[2]).code,a=parseInt(r[3]);if(Df.includes(e[0])&&Pf.includes(e[1])&&(n=ff("tcp").code,a=443),r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');if(!Tf.includes(e[0])&&!Df.includes(e[0]))throw new Error("no protocol with name: \"'".concat(t[0],'\'". Must have a valid family name: "{ip4, ip6, dns, dns4, dns6, dnsaddr}".'));if(!Nf.includes(n))throw new Error("no protocol with name: \"'".concat(t[1],'\'". Must have a valid transport protocol: "{tcp, udp}".'));return{family:41===e[0]||55===e[0]?6:4,address:r[1],port:a}}},{key:"isThinWaistAddress",value:function(e){var t=(null!==e&&void 0!==e?e:this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}},{key:Rf,value:function(){return"<Multiaddr "+(0,gr.toString)(this.bytes,"base16")+" - "+_f(this.bytes)+">"}},{key:"inspect",value:function(){return"<Multiaddr "+(0,gr.toString)(this.bytes,"base16")+" - "+_f(this.bytes)+">"}}],[{key:"fromNodeAddress",value:function(t,r){if(null==t)throw new Error("requires node address object");if(null==r)throw new Error("requires transport protocol");var n;switch(t.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new e("/"+[n,t.address,r,t.port].join("/"))}},{key:"isName",value:function(t){return!!e.isMultiaddr(t)&&t.protos().some((function(e){return e.resolvable}))}},{key:"isMultiaddr",value:function(e){return Boolean(null===e||void 0===e?void 0:e[Bf])}}]),e}();Lf.resolvers=Of;var Mf=up("dns4"),Uf=up("dns6"),jf=up("dnsaddr"),Ff=op(up("dns"),jf,Mf,Uf),zf=op(up("ip4"),up("ip6")),Vf=op(sp(zf,up("tcp")),sp(Ff,up("tcp"))),Kf=sp(zf,up("udp")),qf=sp(Kf,up("utp")),Hf=sp(Kf,up("quic")),Wf=op(sp(Vf,up("ws")),sp(Ff,up("ws"))),Gf=op(sp(Vf,up("wss")),sp(Ff,up("wss"))),Yf=op(sp(Vf,up("http")),sp(zf,up("http")),sp(Ff,up("http"))),Qf=op(sp(Vf,up("https")),sp(zf,up("https")),sp(Ff,up("https"))),Jf=op(sp(Wf,up("p2p-webrtc-star"),up("p2p")),sp(Gf,up("p2p-webrtc-star"),up("p2p")),sp(Wf,up("p2p-webrtc-star")),sp(Gf,up("p2p-webrtc-star"))),Xf=(op(sp(Wf,up("p2p-websocket-star"),up("p2p")),sp(Gf,up("p2p-websocket-star"),up("p2p")),sp(Wf,up("p2p-websocket-star")),sp(Gf,up("p2p-websocket-star"))),op(sp(Yf,up("p2p-webrtc-direct"),up("p2p")),sp(Qf,up("p2p-webrtc-direct"),up("p2p")),sp(Yf,up("p2p-webrtc-direct")),sp(Qf,up("p2p-webrtc-direct")))),$f=op(Wf,Gf,Yf,Qf,Jf,Xf,Vf,qf,Hf,Ff),ep=(op(sp($f,up("p2p-stardust"),up("p2p")),sp($f,up("p2p-stardust"))),op(sp($f,up("p2p")),Jf,Xf,up("p2p"))),tp=op(sp(ep,up("p2p-circuit"),ep),sp(ep,up("p2p-circuit")),sp(up("p2p-circuit"),ep),sp($f,up("p2p-circuit")),sp(up("p2p-circuit"),$f),up("p2p-circuit")),rp=function e(){return op(sp(tp,e),tp)}(),np=op(sp(rp,ep,rp),sp(ep,rp),sp(rp,ep),rp,ep),ap=np;function ip(e){return function(t){var r;try{r=new Lf(t)}catch(Dy){return!1}var n=e(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function sp(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){if(e.length<t.length)return null;var r=e;return t.some((function(t){return r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:ip(n),partialMatch:n}}function op(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){var r=null;return t.some((function(t){var n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}var a={toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:ip(n),partialMatch:n};return a}function up(e){var t=e;return{toString:function(){return t},matches:function(e){var r;try{r=new Lf(e)}catch(Dy){return!1}var n=r.protoNames();return 1===n.length&&n[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}function cp(e){try{return ap.matches(e)}catch(Dy){return!1}}var lp=(0,he.Z)((function e(t){var r=t.repo;(0,pe.Z)(this,e),this.add=function(e){var t=e.repo;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:{},cp(r)){e.next=3;break}throw new Error("".concat(r," is not a valid Multiaddr"));case 3:return e.next=5,t.config.getAll(n);case 5:return a=e.sent,(i=a.Bootstrap||[]).push(r.toString()),a.Bootstrap=Array.from(new Set(i)).sort((function(e,t){return e.localeCompare(t)})),e.next=11,t.config.replace(a);case 11:return e.abrupt("return",{Peers:[r]});case 12:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({repo:r}),this.list=function(e){var t=e.repo;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t.config.get("Bootstrap",r);case 3:return n=e.sent,e.abrupt("return",{Peers:(n||[]).map((function(e){return new Lf(e)}))});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({repo:r}),this.rm=function(e){var t=e.repo;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},cp(r)){e.next=3;break}throw new Error("".concat(r," is not a valid Multiaddr"));case 3:return e.next=5,t.config.getAll(n);case 5:return(a=e.sent).Bootstrap=(a.Bootstrap||[]).filter((function(e){return e.toString()!==r.toString()})),e.next=9,t.config.replace(a);case 9:return e.abrupt("return",{Peers:[r]});case 10:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({repo:r}),this.clear=function(e){var t=e.repo;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.config.getAll(r);case 3:return n=e.sent,a=n.Bootstrap||[],n.Bootstrap=[],e.next=8,t.config.replace(n);case 8:return e.abrupt("return",{Peers:a.map((function(e){return new Lf(e)}))});case 9:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({repo:r}),this.reset=function(e){var t=e.repo;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t.config.getAll(r);case 3:return(n=e.sent).Bootstrap=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],e.next=7,t.config.replace(n);case 7:return e.abrupt("return",{Peers:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"].map((function(e){return new Lf(e)}))});case 8:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({repo:r})}));var fp=__webpack_require__(1254);function pp(e,t){for(var r in t){(i=t[r]).configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r,i)}if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(t),a=0;a<n.length;a++){var i,s=n[a];(i=t[s]).configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s,i)}return e}var hp=__webpack_require__(4942),dp=function(){function e(t){if((0,pe.Z)(this,e),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}return(0,he.Z)(e,[{key:"push",value:function(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}},{key:"shift",value:function(){var e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}},{key:"isEmpty",value:function(){return void 0===this.buffer[this.btm]}}]),e}(),vp=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,e),this.hwm=null!==(t=r.splitLimit)&&void 0!==t?t:16,this.head=new dp(this.hwm),this.tail=this.head,this.size=0}return(0,he.Z)(e,[{key:"calculateSize",value:function(e){return null!=(null===e||void 0===e?void 0:e.byteLength)?e.byteLength:1}},{key:"push",value:function(e){if(null!=(null===e||void 0===e?void 0:e.value)&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){var t=this.head;this.head=t.next=new dp(2*this.head.buffer.length),this.head.push(e)}}},{key:"shift",value:function(){var e,t=this.tail.shift();if(void 0===t&&null!=this.tail.next){var r=this.tail.next;this.tail.next=null,this.tail=r,t=this.tail.shift()}return null!=(null===(e=t)||void 0===e?void 0:e.value)&&(this.size-=this.calculateSize(t.value)),t}},{key:"isEmpty",value:function(){return this.head.isEmpty()}}]),e}();function yp(e,t){var r,n,a,i,s,o,u,c,l=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,f=new vp,p=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f.isEmpty()){t.next=2;break}return t.abrupt("return",e(f));case 2:if(!c){t.next=4;break}return t.abrupt("return",{done:!0});case 4:return t.next=6,new Promise((function(t,r){u=function(n){u=null,f.push(n);try{t(e(f))}catch(Dy){r(Dy)}return o}}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(e){return null!=u?u(e):(f.push(e),o)},d=function(e){var r;if(c)return o;if(!0!==(null===(r=t)||void 0===r?void 0:r.objectMode)&&null==(null===e||void 0===e?void 0:e.byteLength))throw new Error("objectMode was not true but tried to push non-Uint8Array value");return h({done:!1,value:e})},v=function(e){return c?o:(c=!0,null!=e?function(e){return f=new vp,null!=u?u({error:e}):(f.push({error:e}),o)}(e):h({done:!0}))};if(n={},(0,hp.Z)(n,Symbol.asyncIterator,(function(){return this})),(0,hp.Z)(n,"next",p),(0,hp.Z)(n,"return",(function(){return f=new vp,v(),{done:!0}})),(0,hp.Z)(n,"throw",(function(e){return v(e),{done:!0}})),(0,hp.Z)(n,"push",d),(0,hp.Z)(n,"end",v),"readableLength",(a={}).readableLength=a.readableLength||{},a.readableLength.get=function(){return f.size},pp(n,a),o=n,null==l)return o;var y=o;return i={},(0,hp.Z)(i,Symbol.asyncIterator,(function(){return this})),(0,hp.Z)(i,"next",(function(){return y.next()})),(0,hp.Z)(i,"throw",(function(e){return y.throw(e),null!=l&&(l(e),l=void 0),{done:!0}})),(0,hp.Z)(i,"return",(function(){return y.return(),null!=l&&(l(),l=void 0),{done:!0}})),(0,hp.Z)(i,"push",d),(0,hp.Z)(i,"end",(function(e){return y.end(e),null!=l&&(l(e),l=void 0),o})),"readableLength",(s={}).readableLength=s.readableLength||{},s.readableLength.get=function(){return y.readableLength},pp(i,s),o=i}var gp=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length>0;)e=r.shift()(e);return e},mp=function(e){return null!=e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next)},bp=function(e){return null!=e&&"function"===typeof e.sink&&mp(e.source)},wp=function(e){return function(t){var r=e.sink(t);if(null!=r.then){var n=function(){return yp((function(e){var t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({objectMode:!0});r.then((function(){n.end()}),(function(e){n.end(e)}));var a=function(){var t=ye((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(ia(hr(e.source),pr),"t0",1);case 1:n.end();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return el(n,a())}return e.source}};function kp(e){if(bp(e)){var t=e;e=function(){return t.source}}else if(mp(e)){var r=e;e=function(){return r}}for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var s=[e].concat(a);if(s.length>1&&bp(s[s.length-1])&&(s[s.length-1]=s[s.length-1].sink),s.length>2)for(var o=1;o<s.length-1;o++)bp(s[o])&&(s[o]=wp(s[o]));return gp.apply(void 0,Vt(s))}function xp(e){return e instanceof Uint8Array?Ue.CID.decode(e):Ue.CID.parse(e.toString())}var _p=(0,he.Z)((function e(t){var r=t.codecs,n=t.hashers,a=t.preload,i=t.repo;(0,pe.Z)(this,e),this.get=function(e){var t=e.preload,r=e.repo;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(n){var a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1!==(a=i.length>1&&void 0!==i[1]?i[1]:{}).preload&&t(n),e.abrupt("return",r.blocks.get(n,a));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({preload:a,repo:i}),this.put=function(e){var t=e.codecs,r=e.hashers,n=e.repo,a=e.preload;function i(){return i=(0,fe.Z)((0,ce.Z)().mark((function e(i){var s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=d.length>1&&void 0!==d[1]?d[1]:{}).pin){e.next=7;break}return e.next=4,n.gcLock.readLock();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return o=e.t0,e.prev=9,u=null!=s.version?s.version:0,c=s.format||(0===u?"dag-pb":"raw"),e.next=14,r.getHasher(s.mhtype||"sha2-256");case 14:return l=e.sent,e.next=17,l.digest(i);case 17:return f=e.sent,e.next=20,t.getCodec(c);case 20:return p=e.sent,h=Ue.CID.create(u,p.code,f),e.next=24,n.blocks.put(h,i,{signal:s.signal});case 24:if(!1!==s.preload&&a(h),!0!==s.pin){e.next=28;break}return e.next=28,n.pins.pinRecursively(h,{signal:s.signal});case 28:return e.abrupt("return",h);case 29:return e.prev=29,o&&o(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[9,,29,32]])}))),i.apply(this,arguments)}return Rr((function(e){return i.apply(this,arguments)}))}({codecs:r,hashers:n,preload:a,repo:i}),this.rm=function(e){var t=e.repo;function r(){return r=ye((0,ce.Z)().mark((function e(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},Array.isArray(r)||(r=[r]),e.next=4,pr(t.gcLock.writeLock());case 4:return a=e.sent,e.prev=5,e.delegateYield(ia(hr(kp(r,(function(e){return $c(e,(function(e){return(0,fe.Z)((0,ce.Z)().mark((function r(){var a;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=xp(e),a={cid:e},r.prev=2,r.next=5,t.blocks.has(e);case 5:if(r.sent){r.next=8;break}throw Ee(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");case 8:return r.next=10,t.blocks.delete(e);case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(2),n.force||(r.t0.message="cannot remove ".concat(e,": ").concat(r.t0.message),a.error=r.t0);case 15:return r.abrupt("return",a);case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))}))}),(function(e){return fp(e,{concurrency:8})}),(function(e){return Vc(e,(function(){return!n.quiet}))}))),pr),"t0",7);case 7:return e.prev=7,a(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[5,,7,10]])}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({repo:i}),this.stat=function(e){var t=e.repo,r=e.preload;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(n){var a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},n=xp(n),!1!==a.preload&&r(n),e.next=5,t.blocks.get(n);case 5:return i=e.sent,e.abrupt("return",{cid:n,size:i.length});case 7:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({preload:a,repo:i})})),Ep=__webpack_require__(6314),Sp=__webpack_require__(2017),Ap=__webpack_require__(8217);function Ip(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Cp(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function Zp(e){return"object"===typeof e&&(e.path||e.content)}var Rp=function(e){return e&&"function"===typeof e.getReader};function Tp(e){return Dp.apply(this,arguments)}function Dp(){return(Dp=ye((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pp(e){return Np.apply(this,arguments)}function Np(){return Np=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ip(t)){e.next=2;break}return e.abrupt("return",Tp(Op(t)));case 2:if(!("string"===typeof t||t instanceof String)){e.next=4;break}return e.abrupt("return",Tp(Op(t.toString())));case 4:if(!Cp(t)){e.next=6;break}return e.abrupt("return",Sp(t));case 6:if(Rp(t)&&(t=Ep(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=27;break}return r=Ap(t),e.next=11,r.peek();case 11:if(n=e.sent,a=n.value,!n.done){e.next=16;break}return e.abrupt("return",Tp(new Uint8Array(0)));case 16:if(r.push(a),!Number.isInteger(a)){e.next=25;break}return e.t0=Tp,e.t1=Uint8Array,e.next=22,jc(r);case 22:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 25:if(!(Ip(a)||"string"===typeof a||a instanceof String)){e.next=27;break}return e.abrupt("return",$c(r,Op));case 27:throw Ee(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 28:case"end":return e.stop()}}),e)}))),Np.apply(this,arguments)}function Op(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):(0,fr.fromString)(e.toString())}function Bp(){return Bp=ye((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t){e.next=2;break}throw Ee(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 2:if(!("string"===typeof t||t instanceof String)){e.next=6;break}return e.next=5,Lp(t.toString(),r);case 5:case 9:case 21:case 26:case 31:return e.abrupt("return");case 6:if(!Ip(t)&&!Cp(t)){e.next=10;break}return e.next=9,Lp(t,r);case 10:if(Rp(t)&&(t=Ep(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=28;break}return n=Ap(t),e.next=15,pr(n.peek());case 15:if(a=e.sent,i=a.value,!a.done){e.next=22;break}return e.next=21,{content:[]};case 22:if(n.push(i),!(Number.isInteger(i)||Ip(i)||"string"===typeof i||i instanceof String)){e.next=27;break}return e.next=26,Lp(n,r);case 27:throw Ee(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT");case 28:if(!Zp(t)){e.next=32;break}return e.next=31,Lp(t,r);case 32:throw Ee(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");case 33:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function Lp(e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,a=t.mode,i=t.mtime,s=t.content,o={path:n||"",mode:Be(a),mtime:Le(i)},!s){e.next=8;break}return e.next=5,r(s);case 5:o.content=e.sent,e.next=12;break;case 8:if(n){e.next=12;break}return e.next=11,r(t);case 11:o.content=e.sent;case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function Up(e){return function(e,t){return Bp.apply(this,arguments)}(e,Pp)}var jp=__webpack_require__(857),Fp=__webpack_require__(2231),zp=__webpack_require__(2165);(0,Fp.D)({name:"murmur3-32",code:35,encode:function(e){return function(e){for(var t=new Array(4),r=0;r<4;r++)t[r]=255&e,e>>=8;return new Uint8Array(t)}(zp.x86.hash32(e))}});var Vp=(0,Fp.D)({name:"murmur3-128",code:34,encode:function(e){return Tt.aI.fromHex(zp.x64.hash128(e))}});function Kp(){return(Kp=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vp.encode(t);case 2:return e.abrupt("return",e.sent.slice(0,8).reverse());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qp={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:qn.sha256,leafType:"file",cidVersion:0,progress:function(){return function(){}},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:function(e){return Kp.apply(this,arguments)},hamtHashCode:34,hamtBucketBits:8},Hp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ge.bind({ignoreUndefined:!0});return t(qp,e)},Wp=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n,a){var i,s;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.codec||(a.codec=e),a.hasher||(a.hasher=qn.sha256),void 0===a.cidVersion&&(a.cidVersion=1),a.codec===e&&a.hasher!==qn.sha256&&(a.cidVersion=1),t.next=6,a.hasher.digest(r);case 6:if(i=t.sent,s=Ue.CID.create(a.cidVersion,a.codec.code,i),a.onlyHash){t.next=11;break}return t.next=11,n.put(s,r,{signal:a.signal});case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),Gp=Wp,Yp=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Me({type:"directory",mtime:t.mtime,mode:t.mode}),i=pt(st({Data:a.marshal()})),e.next=4,Gp(i,r,n);case 4:return s=e.sent,o=t.path,e.abrupt("return",{cid:s,path:o,unixfs:a,size:i.length});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Qp=Yp,Jp=__webpack_require__(2710);function Xp(){return Xp=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,jc(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}var $p=function(e,t){return Xp.apply(this,arguments)},eh=__webpack_require__(817);function th(e,t,r){return rh.apply(this,arguments)}function rh(){return rh=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=!1,s=!1,e.prev=3,u=hr(eh(t,n.maxChildrenPerNode));case 5:return e.next=7,u.next();case 7:if(!(i=!(c=e.sent).done)){e.next=17;break}return l=c.value,e.t0=a,e.next=12,r(l);case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 14:i=!1,e.next=5;break;case 17:e.next=23;break;case 19:e.prev=19,e.t2=e.catch(3),s=!0,o=e.t2;case 23:if(e.prev=23,e.prev=24,!i||null==u.return){e.next=28;break}return e.next=28,u.return();case 28:if(e.prev=28,!s){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(23);case 33:if(!(a.length>1)){e.next=35;break}return e.abrupt("return",th(a,r,n));case 35:return e.abrupt("return",a[0]);case 36:case"end":return e.stop()}}),e,null,[[3,19,23,33],[24,,28,32]])}))),rh.apply(this,arguments)}var nh=function(e,t,r){return th(e,t,r)};function ah(){return ah=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new oh(n.layerRepeat),i=0,s=1,o=a,u=!1,c=!1,e.prev=6,f=hr(eh(t,n.maxChildrenPerNode));case 8:return e.next=10,f.next();case 10:if(!(u=!(p=e.sent).done)){e.next=26;break}if(h=p.value,!o.isFull()){e.next=22;break}if(o===a){e.next=19;break}return e.t0=a,e.next=17,o.reduce(r);case 17:e.t1=e.sent,e.t0.addChild.call(e.t0,e.t1);case 19:i&&i%n.layerRepeat===0&&s++,o=new sh(s,n.layerRepeat,i),i++;case 22:o.append(h);case 23:u=!1,e.next=8;break;case 26:e.next=32;break;case 28:e.prev=28,e.t2=e.catch(6),c=!0,l=e.t2;case 32:if(e.prev=32,e.prev=33,!u||null==f.return){e.next=37;break}return e.next=37,f.return();case 37:if(e.prev=37,!c){e.next=40;break}throw l;case 40:return e.finish(37);case 41:return e.finish(32);case 42:if(!o||o===a){e.next=48;break}return e.t3=a,e.next=46,o.reduce(r);case 46:e.t4=e.sent,e.t3.addChild.call(e.t3,e.t4);case 48:return e.abrupt("return",a.reduce(r));case 49:case"end":return e.stop()}}),e,null,[[6,28,32,42],[33,,37,41]])}))),ah.apply(this,arguments)}var ih=function(e,t,r){return ah.apply(this,arguments)},sh=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,pe.Z)(this,e),this.maxDepth=t,this.layerRepeat=r,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:t,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}return(0,he.Z)(e,[{key:"isFull",value:function(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;var e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}},{key:"_addNextNodeToParent",value:function(e){this.parent=e;var t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}},{key:"append",value:function(e){this.node.data=e}},{key:"reduce",value:function(e){return this._reduce(this.root,e)}},{key:"_reduce",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!t.children.length){e.next=5;break}return e.next=4,Promise.all(t.children.filter((function(e){return e.data})).map((function(e){return a._reduce(e,r)})));case 4:n=e.sent;case 5:return e.abrupt("return",r((t.data||[]).concat(n)));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_findParent",value:function(e,t){var r=e.parent;if(r&&0!==r.depth)return r.children.length!==r.maxChildren&&r.maxChildren?r:this._findParent(r,t)}}]),e}(),oh=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,0,e)).root.depth=0,n.currentDepth=1,n}return(0,he.Z)(r,[{key:"addChild",value:function(e){this.root.children.push(e)}},{key:"reduce",value:function(e){return e((this.root.data||[]).concat(this.root.children))}}]),r}(sh);function uh(){return uh=ye((0,ce.Z)().mark((function t(r,n,a){var i,s,o,u,c,l;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=!1,s=!1,t.prev=2,u=(0,ce.Z)().mark((function t(){var i;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=l.value,t.next=3,(0,fe.Z)((0,ce.Z)().mark((function t(){var s,o;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.progress(i.length,r.path),o={codec:e,cidVersion:a.cidVersion,hasher:a.hasher,onlyHash:a.onlyHash},a.rawLeaves?(o.codec=Jp,o.cidVersion=1):(s=new Me({type:a.leafType,data:i}),i=pt({Data:s.marshal(),Links:[]})),t.next=5,Gp(i,n,o);case 5:return t.t0=t.sent,t.t1=s,t.t2=i.length,t.abrupt("return",{cid:t.t0,unixfs:t.t1,size:t.t2});case 9:case"end":return t.stop()}}),t)})));case 3:case"end":return t.stop()}}),t)})),c=hr(r.content);case 5:return t.next=7,pr(c.next());case 7:if(!(i=!(l=t.sent).done)){t.next=12;break}return t.delegateYield(u(),"t0",9);case 9:i=!1,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t1=t.catch(2),s=!0,o=t.t1;case 18:if(t.prev=18,t.prev=19,!i||null==c.return){t.next=23;break}return t.next=23,pr(c.return());case 23:if(t.prev=23,!s){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(18);case 28:case"end":return t.stop()}}),t,null,[[2,14,18,28],[19,,23,27]])}))),uh.apply(this,arguments)}var ch=function(e,t,r){return uh.apply(this,arguments)},lh={flat:$p,balanced:nh,trickle:ih};function fh(){return fh=ye((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=-1,s="function"===typeof n.bufferImporter?n.bufferImporter:ch,o=!1,u=!1,e.prev=4,l=hr(jp(s(t,r,n),n.blockWriteConcurrency));case 6:return e.next=8,pr(l.next());case 8:if(!(o=!(f=e.sent).done)){e.next=25;break}if(p=f.value,0!==++a){e.next=16;break}return i=p,e.abrupt("continue",22);case 16:if(1!==a||!i){e.next=20;break}return e.next=19,i;case 19:i=null;case 20:return e.next=22,p;case 22:o=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),u=!0,c=e.t0;case 31:if(e.prev=31,e.prev=32,!o||null==l.return){e.next=36;break}return e.next=36,pr(l.return());case 36:if(e.prev=36,!u){e.next=39;break}throw c;case 39:return e.finish(36);case 40:return e.finish(31);case 41:if(!i){e.next=45;break}return i.single=!0,e.next=45,i;case 45:case"end":return e.stop()}}),e,null,[[4,27,31,41],[32,,36,40]])}))),fh.apply(this,arguments)}var ph=function(t,r,n){var a=lh[n.strategy];if(!a)throw Ee(new Error("Unknown importer build strategy name: ".concat(n.strategy)),"ERR_BAD_STRATEGY");return a(function(e,t,r){return fh.apply(this,arguments)}(t,r,n),function(t,r,n){function a(){return a=(0,fe.Z)((0,ce.Z)().mark((function a(i){var s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(1!==i.length||!i[0].single||!n.reduceSingleLeafToSelf){a.next=13;break}if(s=i[0],void 0===t.mtime&&void 0===t.mode){a.next=12;break}return a.next=5,r.get(s.cid);case 5:return o=a.sent,s.unixfs=new Me({type:"file",mtime:t.mtime,mode:t.mode,data:o}),o=pt(st({Data:s.unixfs.marshal()})),a.next=10,Gp(o,r,(0,le.Z)((0,le.Z)({},n),{},{codec:e,hasher:n.hasher,cidVersion:n.cidVersion}));case 10:s.cid=a.sent,s.size=o.length;case 12:return a.abrupt("return",{cid:s.cid,path:t.path,unixfs:s.unixfs,size:s.size});case 13:return u=new Me({type:"file",mtime:t.mtime,mode:t.mode}),c=i.filter((function(e){return!(e.cid.code!==Jp.code||!e.size)||!(!e.unixfs||e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)})).map((function(e){return e.cid.code===Jp.code?(u.addBlockSize(e.size),{Name:"",Tsize:e.size,Hash:e.cid}):(e.unixfs&&e.unixfs.data?u.addBlockSize(e.unixfs.data.length):u.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0),{Name:"",Tsize:e.size,Hash:e.cid})})),l={Data:u.marshal(),Links:c},f=pt(st(l)),a.next=19,Gp(f,r,n);case 19:return p=a.sent,a.abrupt("return",{cid:p,path:t.path,unixfs:u,size:f.length+l.Links.reduce((function(e,t){return e+t.Tsize}),0)});case 21:case"end":return a.stop()}}),a)}))),a.apply(this,arguments)}return function(e){return a.apply(this,arguments)}}(t,r,n),n)},hh=__webpack_require__(1976),dh=__webpack_require__(8729);function vh(){return vh=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.minChunkSize&&r.maxChunkSize&&r.avgChunkSize)){e.next=6;break}i=r.avgChunkSize,n=r.minChunkSize,a=r.maxChunkSize,e.next=13;break;case 6:if(r.avgChunkSize){e.next=10;break}throw Ee(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");case 10:i=r.avgChunkSize,n=i/3,a=i+i/2;case 13:if(!(n<16)){e.next=15;break}throw Ee(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");case 15:a<n&&(a=n),i<n&&(i=n),s=Math.floor(Math.log2(i)),o=!1,u=!1,e.prev=20,l=hr(gh(t,{min:n,max:a,bits:s,window:r.window,polynomial:r.polynomial}));case 22:return e.next=24,pr(l.next());case 24:if(!(o=!(f=e.sent).done)){e.next=31;break}return p=f.value,e.next=28,p;case 28:o=!1,e.next=22;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(20),u=!0,c=e.t0;case 37:if(e.prev=37,e.prev=38,!o||null==l.return){e.next=42;break}return e.next=42,pr(l.return());case 42:if(e.prev=42,!u){e.next=45;break}throw c;case 45:return e.finish(42);case 46:return e.finish(37);case 47:case"end":return e.stop()}}),e,null,[[20,33,37,47],[38,,42,46]])}))),vh.apply(this,arguments)}var yh=function(e,t){return vh.apply(this,arguments)};function gh(e,t){return mh.apply(this,arguments)}function mh(){return mh=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr((0,dh.create)(r.bits,r.min,r.max,r.window));case 2:n=e.sent,a=new hh,i=!1,s=!1,e.prev=6,u=hr(t);case 8:return e.next=10,pr(u.next());case 10:if(!(i=!(c=e.sent).done)){e.next=27;break}l=c.value,a.append(l),f=n.fingerprint(l),p=0;case 15:if(!(p<f.length)){e.next=24;break}return h=f[p],d=a.slice(0,h),a.consume(h),e.next=21,d;case 21:p++,e.next=15;break;case 24:i=!1,e.next=8;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(6),s=!0,o=e.t0;case 33:if(e.prev=33,e.prev=34,!i||null==u.return){e.next=38;break}return e.next=38,pr(u.return());case 38:if(e.prev=38,!s){e.next=41;break}throw o;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(!a.length){e.next=46;break}return e.next=46,a.slice(0);case 46:case"end":return e.stop()}}),e,null,[[6,29,33,43],[34,,38,42]])}))),mh.apply(this,arguments)}function bh(){return bh=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new hh,a=0,i=!1,s=r.maxChunkSize,o=!1,u=!1,e.prev=6,l=hr(t);case 8:return e.next=10,pr(l.next());case 10:if(!(o=!(f=e.sent).done)){e.next=24;break}p=f.value,n.append(p),a+=p.length;case 14:if(!(a>=s)){e.next=21;break}return e.next=17,n.slice(0,s);case 17:i=!0,s===n.length?(n=new hh,a=0):((h=new hh).append(n.shallowSlice(s)),n=h,a-=s),e.next=14;break;case 21:o=!1,e.next=8;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(6),u=!0,c=e.t0;case 30:if(e.prev=30,e.prev=31,!o||null==l.return){e.next=35;break}return e.next=35,pr(l.return());case 35:if(e.prev=35,!u){e.next=38;break}throw c;case 38:return e.finish(35);case 39:return e.finish(30);case 40:if(i&&!a){e.next=43;break}return e.next=43,n.slice(0,a);case 43:case"end":return e.stop()}}),e,null,[[6,26,30,40],[31,,35,39]])}))),bh.apply(this,arguments)}var wh=function(e,t){return bh.apply(this,arguments)};function kh(){return kh=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t);case 4:return e.next=6,pr(i.next());case 6:if(!(r=!(s=e.sent).done)){e.next=29;break}if(void 0!==(o=s.value).length){e.next=10;break}throw Ee(new Error("Content was invalid"),"ERR_INVALID_CONTENT");case 10:if(!("string"===typeof o||o instanceof String)){e.next=15;break}return e.next=13,(0,fr.fromString)(o.toString());case 13:e.next=26;break;case 15:if(!Array.isArray(o)){e.next=20;break}return e.next=18,Uint8Array.from(o);case 18:e.next=26;break;case 20:if(!(o instanceof Uint8Array)){e.next=25;break}return e.next=23,o;case 23:e.next=26;break;case 25:throw Ee(new Error("Content was invalid"),"ERR_INVALID_CONTENT");case 26:r=!1,e.next=4;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(2),n=!0,a=e.t0;case 35:if(e.prev=35,e.prev=36,!r||null==i.return){e.next=40;break}return e.next=40,pr(i.return());case 40:if(e.prev=40,!n){e.next=43;break}throw a;case 43:return e.finish(40);case 44:return e.finish(35);case 45:case"end":return e.stop()}}),e,null,[[2,31,35,45],[36,,40,44]])}))),kh.apply(this,arguments)}var xh=function(e){return kh.apply(this,arguments)};function _h(e){try{if(e instanceof Uint8Array)return ye((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t)})))();if(t=e,Symbol.iterator in t)return ye((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(ia(hr(e),pr),"t0",1);case 1:case"end":return t.stop()}}),t)})))();if(function(e){return Symbol.asyncIterator in e}(e))return e}catch(r){throw Ee(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}var t;throw Ee(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function Eh(){return Eh=ye((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,o=hr(t);case 4:return e.next=6,pr(o.next());case 6:if(!(a=!(u=e.sent).done)){e.next=21;break}if((c=u.value).path&&("./"===c.path.substring(0,2)&&(n.wrapWithDirectory=!0),c.path=c.path.split("/").filter((function(e){return e&&"."!==e})).join("/")),!c.content){e.next=13;break}return e.delegateYield((0,ce.Z)().mark((function e(){var t,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,t="function"===typeof n.chunker?n.chunker:"rabin"===n.chunker?yh:wh,a=void 0,a="function"===typeof n.chunkValidator?n.chunkValidator:xh,i={path:c.path,mtime:c.mtime,mode:c.mode,content:t(a(_h(c.content),n),n)},e.next=7,function(){return ph(i,r,n)};case 7:case"end":return e.stop()}}),e)}))(),"t0",11);case 11:e.next=18;break;case 13:if(!c.path){e.next=17;break}return e.delegateYield((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={path:c.path,mtime:c.mtime,mode:c.mode},e.next=3,function(){return Qp(t,r,n)};case 3:case"end":return e.stop()}}),e)}))(),"t1",15);case 15:e.next=18;break;case 17:throw new Error("Import candidate must have content or path or both");case 18:a=!1,e.next=4;break;case 21:e.next=27;break;case 23:e.prev=23,e.t2=e.catch(2),i=!0,s=e.t2;case 27:if(e.prev=27,e.prev=28,!a||null==o.return){e.next=32;break}return e.next=32,pr(o.return());case 32:if(e.prev=32,!i){e.next=35;break}throw s;case 35:return e.finish(32);case 36:return e.finish(27);case 37:case"end":return e.stop()}}),e,null,[[2,23,27,37],[28,,32,36]])}))),Eh.apply(this,arguments)}var Sh=function(e,t,r){return Eh.apply(this,arguments)},Ah=function(){function e(t,r){(0,pe.Z)(this,e),this.options=r||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}return(0,he.Z)(e,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this)}},{key:"eachChildSeries",value:function(){return ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},{key:"flush",value:function(e){return ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}]),e}(),Ih=Ah,Ch=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this,e,n))._children={},a}return(0,he.Z)(r,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cid=void 0,this.size=void 0,this._children[t]=r;case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this._children[e])}},{key:"childCount",value:function(){return Object.keys(this._children).length}},{key:"directChildrenCount",value:function(){return this.childCount()}},{key:"onlyChild",value:function(){return this._children[Object.keys(this._children)[0]]}},{key:"eachChildSeries",value:function(){var e=this;return ye((0,ce.Z)().mark((function t(){var r,n,a;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object.keys(e._children),n=0;case 2:if(!(n<r.length)){t.next=9;break}return a=r[n],t.next=6,{key:a,child:e._children[a]};case 6:n++,t.next=2;break;case 9:case"end":return t.stop()}}),t)})))()}},{key:"flush",value:function(e){var t=this;return ye((0,ce.Z)().mark((function r(){var n,a,i,s,o,u,c,l,f,p,h,d,v,y,g;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=Object.keys(t._children),a=[],i=0;case 3:if(!(i<n.length)){r.next=40;break}if(!((s=t._children[n[i]])instanceof Ih)){r.next=36;break}o=!1,u=!1,r.prev=8,l=hr(s.flush(e));case 10:return r.next=12,pr(l.next());case 12:if(!(o=!(f=r.sent).done)){r.next=20;break}return p=f.value,s=p,r.next=17,s;case 17:o=!1,r.next=10;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(8),u=!0,c=r.t0;case 26:if(r.prev=26,r.prev=27,!o||null==l.return){r.next=31;break}return r.next=31,pr(l.return());case 31:if(r.prev=31,!u){r.next=34;break}throw c;case 34:return r.finish(31);case 35:return r.finish(26);case 36:null!=s.size&&s.cid&&a.push({Name:n[i],Tsize:s.size,Hash:s.cid});case 37:i++,r.next=3;break;case 40:return h=new Me({type:"directory",mtime:t.mtime,mode:t.mode}),d={Data:h.marshal(),Links:a},v=pt(st(d)),r.next=45,pr(Gp(v,e,t.options));case 45:return y=r.sent,g=v.length+d.Links.reduce((function(e,t){return e+(null==t.Tsize?0:t.Tsize)}),0),t.cid=y,t.size=g,r.next=51,{cid:y,unixfs:h,path:t.path,size:g};case 51:case"end":return r.stop()}}),r,null,[[8,22,26,36],[27,,31,35]])})))()}}]),r}(Ih),Zh=Ch,Rh=__webpack_require__(7431),Th=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this,e,n))._bucket=(0,Rh.createHAMT)({hashFn:n.hamtHashFn,bits:n.hamtBucketBits}),a}return(0,he.Z)(r,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bucket.put(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return this._bucket.get(e)}},{key:"childCount",value:function(){return this._bucket.leafCount()}},{key:"directChildrenCount",value:function(){return this._bucket.childrenCount()}},{key:"onlyChild",value:function(){return this._bucket.onlyChild()}},{key:"eachChildSeries",value:function(){var e=this;return ye((0,ce.Z)().mark((function t(){var r,n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=hr(e._bucket.eachLeafSeries());case 4:return t.next=6,pr(i.next());case 6:if(!(r=!(s=t.sent).done)){t.next=13;break}return o=s.value,u=o.key,c=o.value,t.next=10,{key:u,child:c};case 10:r=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),n=!0,a=t.t0;case 19:if(t.prev=19,t.prev=20,!r||null==i.return){t.next=24;break}return t.next=24,pr(i.return());case 24:if(t.prev=24,!n){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"flush",value:function(e){var t=this;return ye((0,ce.Z)().mark((function r(){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,s=hr(Ph(t._bucket,e,t,t.options));case 4:return r.next=6,pr(s.next());case 6:if(!(n=!(o=r.sent).done)){r.next=13;break}return u=o.value,r.next=10,(0,le.Z)((0,le.Z)({},u),{},{path:t.path});case 10:n=!1,r.next=4;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(2),a=!0,i=r.t0;case 19:if(r.prev=19,r.prev=20,!n||null==s.return){r.next=24;break}return r.next=24,pr(s.return());case 24:if(r.prev=24,!a){r.next=27;break}throw i;case 27:return r.finish(24);case 28:return r.finish(19);case 29:case"end":return r.stop()}}),r,null,[[2,15,19,29],[20,,24,28]])})))()}}]),r}(Ih),Dh=Th;function Ph(e,t,r,n){return Nh.apply(this,arguments)}function Nh(){return Nh=ye((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A,I,C,Z,R,T,D,P,N,O;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t._children,s=[],o=0,u=0;case 4:if(!(u<i.length)){e.next=97;break}if(c=i.get(u)){e.next=8;break}return e.abrupt("continue",94);case 8:if(l=u.toString(16).toUpperCase().padStart(2,"0"),!(c instanceof Rh.Bucket)){e.next=49;break}return f=void 0,p=!1,h=!1,e.prev=13,e.t0=hr,e.next=17,pr(Ph(c,r,null,a));case 17:e.t1=e.sent,v=(0,e.t0)(e.t1);case 19:return e.next=21,pr(v.next());case 21:if(!(p=!(y=e.sent).done)){e.next=27;break}g=y.value,f=g;case 24:p=!1,e.next=19;break;case 27:e.next=33;break;case 29:e.prev=29,e.t2=e.catch(13),h=!0,d=e.t2;case 33:if(e.prev=33,e.prev=34,!p||null==v.return){e.next=38;break}return e.next=38,pr(v.return());case 38:if(e.prev=38,!h){e.next=41;break}throw d;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(f){e.next=45;break}throw new Error("Could not flush sharded directory, no subshard found");case 45:s.push({Name:l,Tsize:f.size,Hash:f.cid}),o+=f.size,e.next=94;break;case 49:if("function"!==typeof c.value.flush){e.next=87;break}m=c.value,b=void 0,w=!1,k=!1,e.prev=54,_=hr(m.flush(r));case 56:return e.next=58,pr(_.next());case 58:if(!(w=!(E=e.sent).done)){e.next=66;break}return S=E.value,b=S,e.next=63,b;case 63:w=!1,e.next=56;break;case 66:e.next=72;break;case 68:e.prev=68,e.t3=e.catch(54),k=!0,x=e.t3;case 72:if(e.prev=72,e.prev=73,!w||null==_.return){e.next=77;break}return e.next=77,pr(_.return());case 77:if(e.prev=77,!k){e.next=80;break}throw x;case 80:return e.finish(77);case 81:return e.finish(72);case 82:A=l+c.key,s.push({Name:A,Tsize:b.size,Hash:b.cid}),o+=b.size,e.next=94;break;case 87:if((I=c.value).cid){e.next=90;break}return e.abrupt("continue",94);case 90:C=l+c.key,Z=I.size,s.push({Name:C,Tsize:Z,Hash:I.cid}),o+=Z;case 94:u++,e.next=4;break;case 97:return R=Uint8Array.from(i.bitField().reverse()),T=new Me({type:"hamt-sharded-directory",data:R,fanout:t.tableSize(),hashType:a.hamtHashCode,mtime:n&&n.mtime,mode:n&&n.mode}),D={Data:T.marshal(),Links:s},P=pt(st(D)),e.next=103,pr(Gp(P,r,a));case 103:return N=e.sent,O=P.length+o,e.next=107,{cid:N,unixfs:T,size:O};case 107:case"end":return e.stop()}}),e,null,[[13,29,33,43],[34,,38,42],[54,68,72,82],[73,,77,81]])}))),Nh.apply(this,arguments)}function Oh(e,t,r,n){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r,!(r instanceof Zh&&r.directChildrenCount()>=n)){e.next=5;break}return e.next=4,Lh(r,a);case 4:i=e.sent;case 5:if(!(s=i.parent)){e.next=14;break}if(i===r){e.next=13;break}if(t&&(t.parent=i),i.parentKey){e.next=11;break}throw new Error("No parent key found");case 11:return e.next=13,s.put(i.parentKey,i);case 13:return e.abrupt("return",Oh(i,s,n,a));case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lh(e,t){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Dh({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},r),a=!1,i=!1,e.prev=3,o=hr(t.eachChildSeries());case 5:return e.next=7,o.next();case 7:if(!(a=!(u=e.sent).done)){e.next=14;break}return c=u.value,l=c.key,f=c.child,e.next=11,n.put(l,f);case 11:a=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),i=!0,s=e.t0;case 20:if(e.prev=20,e.prev=21,!a||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!i){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}var Uh=Oh,jh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean)};function Fh(e,t,r){return zh.apply(this,arguments)}function zh(){return zh=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=jh(t.path||""),i=a.length-1,s=r,o="",u=0;case 5:if(!(u<a.length)){e.next=30;break}if(c=a[u],o+="".concat(o?"/":"").concat(c),l=u===i,s.dirty=!0,s.cid=void 0,s.size=void 0,!l){e.next=20;break}return e.next=15,s.put(c,t);case 15:return e.next=17,Uh(null,s,n.shardSplitThreshold,n);case 17:r=e.sent,e.next=27;break;case 20:return e.next=22,s.get(c);case 22:return(f=e.sent)&&f instanceof Ih||(f=new Zh({root:!1,dir:!0,parent:s,parentKey:c,path:o,dirty:!0,flat:!0,mtime:f&&f.unixfs&&f.unixfs.mtime,mode:f&&f.unixfs&&f.unixfs.mode},n)),e.next=26,s.put(c,f);case 26:s=f;case 27:u++,e.next=5;break;case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e)}))),zh.apply(this,arguments)}function Vh(e,t){return Kh.apply(this,arguments)}function Kh(){return(Kh=ye((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Ih){e.next=5;break}if(!(t&&t.unixfs&&t.unixfs.isDirectory())){e.next=4;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:return e.delegateYield(ia(hr(t.flush(r)),pr),"t0",6);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qh(){return qh=ye((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p,h,d,v,y;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Zh({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n),i=!1,s=!1,e.prev=3,u=hr(t);case 5:return e.next=7,pr(u.next());case 7:if(!(i=!(c=e.sent).done)){e.next=20;break}if(l=c.value){e.next=11;break}return e.abrupt("continue",17);case 11:return e.next=13,pr(Fh(l,a,n));case 13:if(a=e.sent,l.unixfs&&l.unixfs.isDirectory()){e.next=17;break}return e.next=17,l;case 17:i=!1,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),s=!0,o=e.t0;case 26:if(e.prev=26,e.prev=27,!i||null==u.return){e.next=31;break}return e.next=31,pr(u.return());case 31:if(e.prev=31,!s){e.next=34;break}throw o;case 34:return e.finish(31);case 35:return e.finish(26);case 36:if(!n.wrapWithDirectory){e.next=40;break}return e.delegateYield(ia(hr(Vh(a,r)),pr),"t1",38);case 38:e.next=70;break;case 40:f=!1,p=!1,e.prev=42,d=hr(a.eachChildSeries());case 44:return e.next=46,pr(d.next());case 46:if(!(f=!(v=e.sent).done)){e.next=54;break}if(y=v.value){e.next=50;break}return e.abrupt("continue",51);case 50:return e.delegateYield(ia(hr(Vh(y.child,r)),pr),"t2",51);case 51:f=!1,e.next=44;break;case 54:e.next=60;break;case 56:e.prev=56,e.t3=e.catch(42),p=!0,h=e.t3;case 60:if(e.prev=60,e.prev=61,!f||null==d.return){e.next=65;break}return e.next=65,pr(d.return());case 65:if(e.prev=65,!p){e.next=68;break}throw h;case 68:return e.finish(65);case 69:return e.finish(60);case 70:case"end":return e.stop()}}),e,null,[[3,22,26,36],[27,,31,35],[42,56,60,70],[61,,65,69]])}))),qh.apply(this,arguments)}var Hh=function(e,t,r){return qh.apply(this,arguments)};function Wh(e,t){return Gh.apply(this,arguments)}function Gh(){return Gh=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>2&&void 0!==d[2]?d[2]:{},a=Hp(n),i="function"===typeof n.dagBuilder?n.dagBuilder:Sh,s="function"===typeof n.treeBuilder?n.treeBuilder:Hh,o=Symbol.asyncIterator in t||Symbol.iterator in t?t:[t],u=!1,c=!1,e.prev=7,f=hr(s(jp(i(o,r,a),a.fileImportConcurrency),r,a));case 9:return e.next=11,pr(f.next());case 11:if(!(u=!(p=e.sent).done)){e.next=18;break}return h=p.value,e.next=15,{cid:h.cid,path:h.path,unixfs:h.unixfs,size:h.size};case 15:u=!1,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),c=!0,l=e.t0;case 24:if(e.prev=24,e.prev=25,!u||null==f.return){e.next=29;break}return e.next=29,pr(f.return());case 29:if(e.prev=29,!c){e.next=32;break}throw l;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[7,20,24,34],[25,,29,33]])}))),Gh.apply(this,arguments)}function Yh(e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=ye((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"===typeof t||t instanceof String||Ip(t)||Cp(t)||t._readableState)){e.next=2;break}throw Ee(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 2:if(Rp(t)&&(t=Ep(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=26;break}return n=Ap(t),e.next=7,pr(n.peek());case 7:if(a=e.sent,i=a.value,!a.done){e.next=13;break}return e.delegateYield(ia(hr([]),pr),"t0",12);case 12:case 18:case 22:case 25:return e.abrupt("return");case 13:if(n.push(i),!Number.isInteger(i)){e.next=16;break}throw Ee(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 16:if(!i._readableState){e.next=19;break}return e.delegateYield(ia(hr($c(n,(function(e){return Jh({content:e},r)}))),pr),"t1",18);case 19:if(!Ip(i)){e.next=23;break}return e.next=22,Jh({content:n},r);case 23:if(!(Zp(i)||i[Symbol.iterator]||i[Symbol.asyncIterator]||Rp(i)||Cp(i))){e.next=26;break}return e.delegateYield(ia(hr($c(n,(function(e){return Jh(e,r)}))),pr),"t2",25);case 26:if(!Zp(t)){e.next=28;break}throw Ee(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 28:throw Ee(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 29:case"end":return e.stop()}}),e)}))),Qh.apply(this,arguments)}function Jh(e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,a=t.mode,i=t.mtime,s=t.content,o={path:n||"",mode:Be(a),mtime:Le(i)},!s){e.next=8;break}return e.next=5,r(s);case 5:o.content=e.sent,e.next=12;break;case 8:if(n){e.next=12;break}return e.next=11,r(t);case 11:o.content=e.sent;case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),Xh.apply(this,arguments)}function $h(e){return Yh(e,Pp)}var ed=function(e){if(e){if(e.startsWith("size-")){var t=e.split("-")[1],r=parseInt(t);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:r}}if(e.startsWith("rabin"))return(0,le.Z)({chunker:"rabin"},td(e));throw new Error("Unrecognized chunker option: ".concat(e))}return{chunker:"fixed"}},td=function(e){var t={},r=e.split("-");switch(r.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=rd(r[1],"avg");break;case 4:t.minChunkSize=rd(r[1],"min"),t.avgChunkSize=rd(r[2],"avg"),t.maxChunkSize=rd(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},rd=function(e,t){var r=parseInt(e);if(isNaN(r))throw new Error("Chunker parameter ".concat(t," must be an integer"));return r},nd=ge.bind({ignoreUndefined:!0});function ad(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,s=hr(r);case 4:return t.next=6,pr(s.next());case 6:if(!(n=!(o=t.sent).done)){t.next=17;break}return u=o.value,c=u.cid,1===e.cidVersion&&(c=c.toV1()),l=u.path?u.path:c.toString(),e.wrapWithDirectory&&!u.path&&(l=""),t.next=14,{path:l,cid:c,size:u.size,mode:u.unixfs&&u.unixfs.mode,mtime:u.unixfs&&u.unixfs.mtime};case 14:n=!1,t.next=4;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),a=!0,i=t.t0;case 23:if(t.prev=23,t.prev=24,!n||null==s.return){t.next=28;break}return t.next=28,pr(s.return());case 28:if(t.prev=28,!a){t.next=31;break}throw i;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[2,19,23,33],[24,,28,32]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function id(e,t){function r(){return r=ye((0,ce.Z)().mark((function r(n){var a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,o=hr(n);case 4:return r.next=6,pr(o.next());case 6:if(!(a=!(u=r.sent).done)){r.next=16;break}return c=u.value,l=!c.path||t.wrapWithDirectory?""===c.path:!c.path.includes("/"),l&&!t.onlyHash&&!1!==t.preload&&e(c.cid),r.next=13,c;case 13:a=!1,r.next=4;break;case 16:r.next=22;break;case 18:r.prev=18,r.t0=r.catch(2),i=!0,s=r.t0;case 22:if(r.prev=22,r.prev=23,!a||null==o.return){r.next=27;break}return r.next=27,pr(o.return());case 27:if(r.prev=27,!i){r.next=30;break}throw s;case 30:return r.finish(27);case 31:return r.finish(22);case 32:case"end":return r.stop()}}),r,null,[[2,18,22,32],[23,,27,31]])}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}function sd(e,t){function r(){return r=ye((0,ce.Z)().mark((function r(n){var a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,o=hr(n);case 4:return r.next=6,pr(o.next());case 6:if(!(a=!(u=r.sent).done)){r.next=18;break}if(c=u.value,l=!(c.path&&c.path.includes("/")),!((null==t.pin||t.pin)&&l&&!t.onlyHash)){r.next=13;break}return r.next=13,pr(e.pins.pinRecursively(c.cid));case 13:return r.next=15,c;case 15:a=!1,r.next=4;break;case 18:r.next=24;break;case 20:r.prev=20,r.t0=r.catch(2),i=!0,s=r.t0;case 24:if(r.prev=24,r.prev=25,!a||null==o.return){r.next=29;break}return r.next=29,pr(o.return());case 29:if(r.prev=29,!i){r.next=32;break}throw s;case 32:return r.finish(29);case 33:return r.finish(24);case 34:case"end":return r.stop()}}),r,null,[[2,20,24,34],[25,,29,33]])}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}var od=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vp.encode(t);case 2:return e.abrupt("return",e.sent.slice(0,8).reverse());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ud=function(e,t,r){return Promise.all(e.map((function(e){if(null==e.Name)throw new Error("Unexpected Link without a Name");if(2===e.Name.length){var n=parseInt(e.Name,16);return t._putObjectAt(n,new Rh.Bucket({hash:r._options.hash,bits:r._options.bits},t,n))}return r.put(e.Name.substring(2),!0)})))},cd=function(e){return e.toString(16).toUpperCase().padStart(2,"0").substring(0,2)},ld=function(e){for(var t=e.bucket,r=[];t._parent;)r.push(t),t=t._parent;return r.push(t),r.reverse()},fd=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(s=(0,Rh.createHAMT)({hashFn:od}),a={rootBucket:s,hamtDepth:1,lastBucket:s}),e.next=3,ud(t.Links,a.lastBucket,a.rootBucket);case 3:return e.next=5,a.rootBucket._findNewBucketAndPos(r);case 5:if(o=e.sent,u=cd(o.pos),(c=ld(o)).length>a.hamtDepth&&(a.lastBucket=c[a.hamtDepth],u=cd(a.lastBucket._posAtParent)),l=t.Links.find((function(e){if(null==e.Name)return!1;var t=e.Name.substring(0,2),n=e.Name.substring(2);return t===u&&(!n||n===r)}))){e.next=12;break}return e.abrupt("return",null);case 12:if(null==l.Name||l.Name.substring(2)!==r){e.next=14;break}return e.abrupt("return",l.Hash);case 14:return a.hamtDepth++,e.next=17,n.get(l.Hash,i);case 17:return f=e.sent,t=ht(f),e.abrupt("return",fd(t,r,n,a,i));case 20:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),pd=fd;var hd=function(e,t,r,n){var a=t+e.length;return r>=a||n<t?new Uint8Array(0):(n>=t&&n<a&&(e=e.slice(0,n-t)),r>=t&&r<a&&(e=e.slice(r-t)),e)},dd=function(e,t,r){if(t||(t=0),t<0)throw Ee(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw Ee(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(r||0===r||(r=e-t),r<0)throw Ee(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+r>e&&(r=e-t),{offset:t,length:r}};function vd(e,t,r,n){return yd.apply(this,arguments)}function yd(){return yd=ye((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=x.length>4&&void 0!==x[4]?x[4]:0,s=x.length>5?x[5]:void 0,!(r instanceof Uint8Array)){e.next=9;break}if(!(o=hd(r,i,n,a)).length){e.next=7;break}return e.next=7,o;case 7:return i+=o.length,e.abrupt("return",i);case 9:if(null!=r.Data){e.next=11;break}throw Ee(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");case 11:e.prev=11,u=Me.unmarshal(r.Data),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(11),Ee(e.t0,"ERR_NOT_UNIXFS");case 18:if(!u.data||!u.data.length){e.next=24;break}if(!(c=hd(u.data,i,n,a)).length){e.next=23;break}return e.next=23,c;case 23:i+=u.data.length;case 24:l=i,f=0;case 26:if(!(f<r.Links.length)){e.next=83;break}if(p=r.Links[f],h=i+u.blockSizes[f],!(n>=l&&n<h||a>l&&a<=h||n<l&&a>h)){e.next=78;break}return e.next=32,pr(t.get(p.Hash,{signal:s.signal}));case 32:d=e.sent,v=void 0,e.t1=p.Hash.code,e.next=e.t1===ft?37:e.t1===Jp.code?41:e.t1===mt?43:47;break;case 37:return e.next=39,pr(ht(d));case 39:return v=e.sent,e.abrupt("break",48);case 41:return v=d,e.abrupt("break",48);case 43:return e.next=45,pr(wt(d));case 45:return v=e.sent,e.abrupt("break",48);case 47:throw Error("Unsupported codec: ".concat(p.Hash.code));case 48:y=!1,g=!1,e.prev=50,b=hr(vd(t,v,n,a,i,s));case 52:return e.next=54,pr(b.next());case 54:if(!(y=!(w=e.sent).done)){e.next=62;break}return k=w.value,i+=k.length,e.next=59,k;case 59:y=!1,e.next=52;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(50),g=!0,m=e.t2;case 68:if(e.prev=68,e.prev=69,!y||null==b.return){e.next=73;break}return e.next=73,pr(b.return());case 73:if(e.prev=73,!g){e.next=76;break}throw m;case 76:return e.finish(73);case 77:return e.finish(68);case 78:i=h,l=h+1;case 80:f++,e.next=26;break;case 83:case"end":return e.stop()}}),e,null,[[11,15],[50,64,68,78],[69,,73,77]])}))),yd.apply(this,arguments)}var gd=function(e,t,r,n,a,i,s){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.fileSize();if(void 0===n)throw new Error("File was a directory");var a=dd(n,e.offset,e.length),i=a.offset,o=a.length,u=i,c=i+o;return vd(s,t,u,c,0,e)}},md=function(e,t,r,n,a,i,s){function o(){return o=ye((0,ce.Z)().mark((function e(){var r,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>0&&void 0!==d[0]?d[0]:{},o=r.offset||0,u=r.length||t.Links.length,c=t.Links.slice(o,u),l=(0,v.Z)(c),e.prev=5,l.s();case 7:if((f=l.n()).done){e.next=17;break}return p=f.value,e.next=11,pr(a(p.Hash,p.Name||"","".concat(n,"/").concat(p.Name||""),[],i+1,s,r));case 11:if(!(h=e.sent).entry){e.next=15;break}return e.next=15,h.entry;case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),l.e(e.t0);case 22:return e.prev=22,l.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[5,19,22,25]])}))),o.apply(this,arguments)}return function(){return o.apply(this,arguments)}};function bd(e,t,r,n,a,i){return wd.apply(this,arguments)}function wd(){return wd=ye((0,ce.Z)().mark((function e(t,r,n,a,i,s){var o,u,c,l,f,p,h,d,y,g,m,b,w;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.Links,u=(0,v.Z)(o),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=50;break}if(l=c.value,!(f=null!=l.Name?l.Name.substring(2):null)){e.next=15;break}return e.next=10,pr(n(l.Hash,f,"".concat(r,"/").concat(f),[],a+1,i,s));case 10:return p=e.sent,e.next=13,p.entry;case 13:e.next=48;break;case 15:return e.next=17,pr(i.get(l.Hash));case 17:h=e.sent,t=ht(h),d=!1,y=!1,e.prev=21,m=hr(bd(t,r,n,a,i,s));case 23:return e.next=25,pr(m.next());case 25:if(!(d=!(b=e.sent).done)){e.next=32;break}return w=b.value,e.next=29,w;case 29:d=!1,e.next=23;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(21),y=!0,g=e.t0;case 38:if(e.prev=38,e.prev=39,!d||null==m.return){e.next=43;break}return e.next=43,pr(m.return());case 43:if(e.prev=43,!y){e.next=46;break}throw g;case 46:return e.finish(43);case 47:return e.finish(38);case 48:e.next=4;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(2),u.e(e.t1);case 55:return e.prev=55,u.f(),e.finish(55);case 58:case"end":return e.stop()}}),e,null,[[2,52,55,58],[21,34,38,48],[39,,43,47]])}))),wd.apply(this,arguments)}var kd,xd=function(e,t,r,n,a,i,s){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return bd(t,n,a,i,s,e)}},_d=function(e,t){var r=e.Links.find((function(e){return e.Name===t}));return r&&r.Hash},Ed={raw:gd,file:gd,directory:md,"hamt-sharded-directory":xd,metadata:function(e,t,r,n,a,i,s){return function(){return[]}},symlink:function(e,t,r,n,a,i,s){return function(){return[]}}},Sd=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i,s,o,u){var c,l,f,p,h,d,v;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get(t,u);case 2:if(c=e.sent,l=ht(c),r||(r=t.toString()),null!=l.Data){e.next=7;break}throw Ee(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");case 7:e.prev=7,f=Me.unmarshal(l.Data),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(7),Ee(e.t0,"ERR_NOT_UNIXFS");case 14:if(n||(n=r),!a.length){e.next=28;break}if(!f||"hamt-sharded-directory"!==f.type){e.next=22;break}return e.next=19,pd(l,a[0],o);case 19:h=e.sent,e.next=23;break;case 22:h=_d(l,a[0]);case 23:if(h){e.next=25;break}throw Ee(new Error("file does not exist"),"ERR_NOT_FOUND");case 25:d=a.shift(),v="".concat(n,"/").concat(d),p={cid:h,toResolve:a,name:d||"",path:v};case 28:return e.abrupt("return",{entry:{type:f.isDirectory()?"directory":"file",name:r,path:n,cid:t,content:Ed[f.type](t,l,f,n,i,s,o),unixfs:f,depth:s,node:l,size:f.fileSize()},next:p});case 29:case"end":return e.stop()}}),e,null,[[7,11]])})));return function(t,r,n,a,i,s,o,u){return e.apply(this,arguments)}}(),Ad=Sd,Id=function(e){function t(){return t=ye((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},n=dd(e.length,r.offset,r.length),a=n.offset,i=n.length,t.next=4,hd(e,0,a,a+i);case 4:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}},Cd=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i,s,o,u){var c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=2;break}throw Ee(new Error("No link named ".concat(n," found in raw node ").concat(t)),"ERR_NOT_FOUND");case 2:return e.next=4,o.get(t,u);case 4:return c=e.sent,e.abrupt("return",{entry:{type:"raw",name:r,path:n,cid:t,content:Id(c),depth:s,size:c.length,node:c}});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,s,o,u){return e.apply(this,arguments)}}(),Zd=Cd,Rd=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i,s,o,u){var c,l,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get(t);case 2:c=e.sent,l=wt(c),f=l,p=n;case 6:if(!a.length){e.next=20;break}if(!((h=a[0])in f)){e.next=17;break}if(a.shift(),p="".concat(p,"/").concat(h),!(d=Ue.CID.asCID(f[h]))){e.next=14;break}return e.abrupt("return",{entry:{type:"object",name:r,path:n,cid:t,node:c,depth:s,size:c.length,content:function(){var e=ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},next:{cid:d,name:h,path:p,toResolve:a}});case 14:f=f[h],e.next=18;break;case 17:throw Ee(new Error("No property named ".concat(h," found in cbor node ").concat(t)),"ERR_NO_PROP");case 18:e.next=6;break;case 20:return e.abrupt("return",{entry:{type:"object",name:r,path:n,cid:t,node:c,depth:s,size:c.length,content:function(){var e=ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}});case 21:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,s,o,u){return e.apply(this,arguments)}}(),Td=Rd,Dd=function(e){function t(){return t=ye((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},n=dd(e.length,r.offset,r.length),a=n.offset,i=n.length,t.next=4,hd(e,0,a,a+i);case 4:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}},Pd=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i,s,o,u){var c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=2;break}throw Ee(new Error("No link named ".concat(n," found in raw node ").concat(t)),"ERR_NOT_FOUND");case 2:return e.next=4,Vn.decode(t.multihash.bytes);case 4:return c=e.sent,e.abrupt("return",{entry:{type:"identity",name:r,path:n,cid:t,content:Dd(c.digest),depth:s,size:c.digest.length,node:c.digest}});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,s,o,u){return e.apply(this,arguments)}}(),Nd=Pd,Od=(kd={},(0,hp.Z)(kd,ft,Ad),(0,hp.Z)(kd,Jp.code,Zd),(0,hp.Z)(kd,mt,Td),(0,hp.Z)(kd,rr.identity.code,Nd),kd);var Bd=function e(t,r,n,a,i,s,o){var u=Od[t.code];if(!u)throw Ee(new Error("No resolver for code ".concat(t.code)),"ERR_NO_RESOLVER");return u(t,r,n,a,e,i,s,o)},Ld=function(e){if(e instanceof Uint8Array)return{cid:Ue.CID.decode(e),toResolve:[]};var t=Ue.CID.asCID(e);if(t)return{cid:t,toResolve:[]};if("string"===typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));var r=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}(e);return{cid:Ue.CID.parse(r[0]),toResolve:r.slice(1)}}throw Ee(new Error("Unknown path type ".concat(e)),"ERR_BAD_PATH")};function Md(e,t){return Ud.apply(this,arguments)}function Ud(){return Ud=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f.length>2&&void 0!==f[2]?f[2]:{},a=Ld(t),i=a.cid,s=a.toResolve,o=i.toString(),u=o,c=s.length;case 5:return e.next=8,pr(Bd(i,o,u,s,c,r,n));case 8:if((l=e.sent).entry||l.next){e.next=11;break}throw Ee(new Error("Could not resolve ".concat(t)),"ERR_NOT_FOUND");case 11:if(!l.entry){e.next=14;break}return e.next=14,l.entry;case 14:if(l.next){e.next=16;break}return e.abrupt("return");case 16:s=l.next.toResolve,i=l.next.cid,o=l.next.name,u=l.next.path,e.next=5;break;case 22:case"end":return e.stop()}}),e)}))),Ud.apply(this,arguments)}function jd(e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,aa(Md(t,r,n));case 3:if(a=e.sent){e.next=6;break}throw Ee(new Error("Could not resolve ".concat(t)),"ERR_NOT_FOUND");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}function zd(e,t){return Vd.apply(this,arguments)}function Vd(){return Vd=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=function(){return p=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,s=hr(t.content(r));case 4:return e.next=6,pr(s.next());case 6:if(!(n=!(o=e.sent).done)){e.next=17;break}return u=o.value,e.next=10,u;case 10:if(!(u instanceof Uint8Array)){e.next=12;break}return e.abrupt("continue",14);case 12:if("directory"!==u.type){e.next=14;break}return e.delegateYield(ia(hr(f(u,r)),pr),"t0",14);case 14:n=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(2),a=!0,i=e.t1;case 23:if(e.prev=23,e.prev=24,!n||null==s.return){e.next=28;break}return e.next=28,pr(s.return());case 28:if(e.prev=28,!a){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])}))),p.apply(this,arguments)},f=function(e,t){return p.apply(this,arguments)},n=h.length>2&&void 0!==h[2]?h[2]:{},e.next=5,pr(jd(t,r,n));case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,a;case 10:if("directory"!==a.type){e.next=40;break}i=!1,s=!1,e.prev=13,u=hr(f(a,n));case 15:return e.next=17,pr(u.next());case 17:if(!(i=!(c=e.sent).done)){e.next=24;break}return l=c.value,e.next=21,l;case 21:i=!1,e.next=15;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(13),s=!0,o=e.t0;case 30:if(e.prev=30,e.prev=31,!i||null==u.return){e.next=35;break}return e.next=35,pr(u.return());case 35:if(e.prev=35,!s){e.next=38;break}throw o;case 38:return e.finish(35);case 39:return e.finish(30);case 40:case"end":return e.stop()}}),e,null,[[13,26,30,40],[31,,35,39]])}))),Vd.apply(this,arguments)}"0".charCodeAt(0),(0,fr.fromString)("ustar\0","binary"),(0,fr.fromString)("ustar ","binary"),(0,fr.fromString)(" \0","binary");function Kd(e){var t=ye((0,ce.Z)().mark((function t(){var r,n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void(t.next=2);case 2:r=t.sent,n=new _a,a=!1,i=!1,t.prev=6,o=hr(e);case 8:return t.next=10,pr(o.next());case 10:if(!(a=!(u=t.sent).done)){t.next=38;break}if(c=u.value,null!=r){t.next=19;break}return n.append(c),t.next=16,n;case 16:return r=t.sent,n=new _a,t.abrupt("continue",35);case 19:n.append(c);case 20:if(!(n.length>=r)){t.next=35;break}return l=n.subarray(0,r),n.consume(r),t.next=25,l;case 25:if(null!=(r=t.sent)){t.next=33;break}if(!(n.length>0)){t.next=32;break}return t.next=30,n;case 30:r=t.sent,n=new _a;case 32:return t.abrupt("break",35);case 33:t.next=20;break;case 35:a=!1,t.next=8;break;case 38:t.next=44;break;case 40:t.prev=40,t.t0=t.catch(6),i=!0,s=t.t0;case 44:if(t.prev=44,t.prev=45,!a||null==o.return){t.next=49;break}return t.next=49,pr(o.return());case 49:if(t.prev=49,!i){t.next=52;break}throw s;case 52:return t.finish(49);case 53:return t.finish(44);case 54:if(null==r){t.next=56;break}throw Object.assign(new Error("stream ended before ".concat(r," bytes became available")),{code:"ERR_UNDER_READ",buffer:n});case 56:case"end":return t.stop()}}),t,null,[[6,40,44,54],[45,,49,53]])})))();return t.next(),t}var qd=__webpack_require__(1926),Hd=__webpack_require__(9765),Wd="0".charCodeAt(0),Gd=(0,fr.fromString)("ustar\0","binary"),Yd=(0,fr.fromString)("00","binary"),Qd=parseInt("7777",8),Jd=function(e,t){var r=e.toString(8);return r.length>t?(0,fr.fromString)("7777777777777777777".slice(0,t)+" "):(0,fr.fromString)("0000000000000000000".slice(0,t-r.length)+r+" ")},Xd=function(e){var t=(0,fr.fromString)(e).byteLength,r=Math.floor(Math.log(t)/Math.log(10))+1;return t+r>=Math.pow(10,r)&&r++,"".concat(t+r).concat(e)};function $d(e){var t,r,n=new Uint8Array(512),a=e.name,i="";if(5===e.typeflag&&"/"!==a[a.length-1]&&(a+="/"),(0,fr.fromString)(a).byteLength!==a.length)return null;for(;(0,fr.fromString)(a).byteLength>100;){var s=a.indexOf("/");if(-1===s)return null;i+=""!==i?"/"+a.slice(0,s):a.slice(0,s),a=a.slice(s+1)}return(0,fr.fromString)(a).byteLength>100||(0,fr.fromString)(i).byteLength>155||null!=e.linkname&&(0,fr.fromString)(e.linkname).byteLength>100?null:(n.set((0,fr.fromString)(a),0),n.set(Jd(e.mode&Qd,6),100),n.set(Jd(e.uid,6),108),n.set(Jd(e.gid,6),116),n.set(Jd(e.size,11),124),n.set(Jd(e.mtime.getTime()/1e3|0,11),136),n[156]=Wd+function(e){switch(e){case"file":default:return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}}(e.type),null!=e.linkname&&n.set((0,fr.fromString)(e.linkname),157),n.set(Gd,257),n.set(Yd,263),null!=e.uname&&n.set((0,fr.fromString)(e.uname),265),null!=e.gname&&n.set((0,fr.fromString)(e.gname),297),n.set(Jd(null!==(t=e.devmajor)&&void 0!==t?t:0,6),329),n.set(Jd(null!==(r=e.devminor)&&void 0!==r?r:0,6),337),null!=i&&n.set((0,fr.fromString)(i),345),n.set(Jd(function(e){for(var t=256,r=0;r<148;r++)t+=e[r];for(var n=156;n<512;n++)t+=e[n];return t}(n),6),148),n)}var ev=qd.S_IFMT,tv=qd.S_IFBLK,rv=qd.S_IFCHR,nv=qd.S_IFDIR,av=qd.S_IFIFO,iv=qd.S_IFLNK,sv=parseInt("755",8),ov=parseInt("644",8),uv=new Uint8Array(1024);function cv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e&ev){case tv:return"block-device";case rv:return"character-device";case nv:return"directory";case av:return"fifo";case iv:return"symlink";default:return"file"}}function lv(e){return 0!==(e&=511)?uv.slice(0,512-e):new Uint8Array(0)}function fv(e){if(null==e.pax){var t=$d(e);if(null!=t)return t}return function(e){var t,r,n=function(e){var t="";null!=e.name&&(t+=Xd(" path="+e.name+"\n")),null!=e.linkname&&(t+=Xd(" linkpath="+e.linkname+"\n"));var r=e.pax;if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t+=Xd(" "+n+"="+r[n]+"\n"));return(0,fr.fromString)(t)}(e),a={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname,uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};return new _a(null!==(t=$d(a))&&void 0!==t?t:new Uint8Array(0),n,lv(n.length),null!==(r=$d((0,le.Z)((0,le.Z)({},a),{},{size:e.size,type:e.type})))&&void 0!==r?r:new Uint8Array(0)).slice()}(e)}function pv(){return function(){var e=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t);case 4:return e.next=6,pr(i.next());case 6:if(!(r=!(s=e.sent).done)){e.next=72;break}if(h=s.value,d=h.header,v=h.body,y=(0,le.Z)((0,le.Z)({},d),{},{size:"symlink"===d.type?0:null!==(o=d.size)&&void 0!==o?o:0,type:null!==(u=d.type)&&void 0!==u?u:cv(d.mode),mode:null!==(c=d.mode)&&void 0!==c?c:"directory"===d.type?sv:ov,uid:null!==(l=d.uid)&&void 0!==l?l:0,gid:null!==(f=d.gid)&&void 0!==f?f:0,mtime:null!==(p=d.mtime)&&void 0!==p?p:new Date}),"string"===typeof v&&(v=(0,fr.fromString)(v)),!(v instanceof Uint8Array||xa(v))){e.next=19;break}return y.size=v.length,e.next=14,fv(y);case 14:return e.next=16,xa(v)?v.slice():v;case 16:return e.next=18,lv(y.size);case 18:return e.abrupt("continue",69);case 19:if("symlink"!==y.type||null!=y.linkname){e.next=30;break}if(null!=v){e.next=22;break}throw new Error("type was symlink but no linkname or body specified");case 22:return e.t0=gr.toString,e.next=25,pr(Hd(v));case 25:return e.t1=e.sent,y.linkname=(0,e.t0)(e.t1),e.next=29,fv(y);case 29:return e.abrupt("continue",69);case 30:return e.next=32,fv(y);case 32:if("file"===y.type||"contiguous-file"===y.type){e.next=34;break}return e.abrupt("continue",69);case 34:g=0,m=!1,b=!1,e.prev=37,k=hr(null!==(_=v)&&void 0!==_?_:[]);case 39:return e.next=41,pr(k.next());case 41:if(!(m=!(x=e.sent).done)){e.next=49;break}return E=x.value,g+=E.length,e.next=46,xa(E)?E.slice():E;case 46:m=!1,e.next=39;break;case 49:e.next=55;break;case 51:e.prev=51,e.t2=e.catch(37),b=!0,w=e.t2;case 55:if(e.prev=55,e.prev=56,!m||null==k.return){e.next=60;break}return e.next=60,pr(k.return());case 60:if(e.prev=60,!b){e.next=63;break}throw w;case 63:return e.finish(60);case 64:return e.finish(55);case 65:if(g===y.size){e.next=67;break}throw new Error("size mismatch, wrote ".concat(g," of ").concat(y.size," bytes"));case 67:return e.next=69,lv(y.size);case 69:r=!1,e.next=4;break;case 72:e.next=78;break;case 74:e.prev=74,e.t3=e.catch(2),n=!0,a=e.t3;case 78:if(e.prev=78,e.prev=79,!r||null==i.return){e.next=83;break}return e.next=83,pr(i.return());case 83:if(e.prev=83,!n){e.next=86;break}throw a;case 86:return e.finish(83);case 87:return e.finish(78);case 88:return e.next=90,uv;case 90:case"end":return e.stop()}}),e,null,[[2,74,78,88],[37,51,55,65],[56,,60,64],[79,,83,87]])})));return function(t){return e.apply(this,arguments)}}()}function hv(e){for(var t=e.length;--t>=0;)e[t]=0}var dv=256,vv=286,yv=30,gv=15,mv=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),bv=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),wv=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),kv=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xv=new Array(576);hv(xv);var _v=new Array(60);hv(_v);var Ev=new Array(512);hv(Ev);var Sv=new Array(256);hv(Sv);var Av=new Array(29);hv(Av);var Iv,Cv,Zv,Rv=new Array(yv);function Tv(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function Dv(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}hv(Rv);var Pv=function(e){return e<256?Ev[e]:Ev[256+(e>>>7)]},Nv=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Ov=function(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Nv(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Bv=function(e,t,r){Ov(e,r[2*t],r[2*t+1])},Lv=function(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},Mv=function(e,t,r){var n,a,i=new Array(16),s=0;for(n=1;n<=gv;n++)i[n]=s=s+r[n-1]<<1;for(a=0;a<=t;a++){var o=e[2*a+1];0!==o&&(e[2*a]=Lv(i[o]++,o))}},Uv=function(e){var t;for(t=0;t<vv;t++)e.dyn_ltree[2*t]=0;for(t=0;t<yv;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},jv=function(e){e.bi_valid>8?Nv(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Fv=function(e,t,r,n){var a=2*t,i=2*r;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},zv=function(e,t,r){for(var n=e.heap[r],a=r<<1;a<=e.heap_len&&(a<e.heap_len&&Fv(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!Fv(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},Vv=function(e,t,r){var n,a,i,s,o=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],a=e.pending_buf[e.l_buf+o],o++,0===n?Bv(e,a,t):(i=Sv[a],Bv(e,i+dv+1,t),0!==(s=mv[i])&&(a-=Av[i],Ov(e,a,s)),n--,i=Pv(n),Bv(e,i,r),0!==(s=bv[i])&&(n-=Rv[i],Ov(e,n,s)))}while(o<e.last_lit);Bv(e,256,t)},Kv=function(e,t){var r,n,a,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)zv(e,i,r);a=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],zv(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*a]=i[2*r]+i[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=a,e.heap[1]=a++,zv(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,a,i,s,o,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,d=t.stat_desc.max_length,v=0;for(i=0;i<=gv;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(i=u[2*u[2*(n=e.heap[r])+1]+1]+1)>d&&(i=d,v++),u[2*n+1]=i,n>c||(e.bl_count[i]++,s=0,n>=h&&(s=p[n-h]),o=u[2*n],e.opt_len+=o*(i+s),f&&(e.static_len+=o*(l[2*n+1]+s)));if(0!==v){do{for(i=d-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[d]--,v-=2}while(v>0);for(i=d;0!==i;i--)for(n=e.bl_count[i];0!==n;)(a=e.heap[--r])>c||(u[2*a+1]!==i&&(e.opt_len+=(i-u[2*a+1])*u[2*a],u[2*a+1]=i),n--)}}(e,t),Mv(i,c,e.bl_count)},qv=function(e,t,r){var n,a,i=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)a=s,s=t[2*(n+1)+1],++o<u&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=a,0===s?(u=138,c=3):a===s?(u=6,c=3):(u=7,c=4))},Hv=function(e,t,r){var n,a,i=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(a=s,s=t[2*(n+1)+1],!(++o<u&&a===s)){if(o<c)do{Bv(e,a,e.bl_tree)}while(0!==--o);else 0!==a?(a!==i&&(Bv(e,a,e.bl_tree),o--),Bv(e,16,e.bl_tree),Ov(e,o-3,2)):o<=10?(Bv(e,17,e.bl_tree),Ov(e,o-3,3)):(Bv(e,18,e.bl_tree),Ov(e,o-11,7));o=0,i=a,0===s?(u=138,c=3):a===s?(u=6,c=3):(u=7,c=4)}},Wv=!1,Gv=function(e,t,r,n){Ov(e,0+(n?1:0),3),function(e,t,r,n){jv(e),n&&(Nv(e,r),Nv(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r}(e,t,r,!0)},Yv=function(e){Wv||(!function(){var e,t,r,n,a,i=new Array(16);for(r=0,n=0;n<28;n++)for(Av[n]=r,e=0;e<1<<mv[n];e++)Sv[r++]=n;for(Sv[r-1]=n,a=0,n=0;n<16;n++)for(Rv[n]=a,e=0;e<1<<bv[n];e++)Ev[a++]=n;for(a>>=7;n<yv;n++)for(Rv[n]=a<<7,e=0;e<1<<bv[n]-7;e++)Ev[256+a++]=n;for(t=0;t<=gv;t++)i[t]=0;for(e=0;e<=143;)xv[2*e+1]=8,e++,i[8]++;for(;e<=255;)xv[2*e+1]=9,e++,i[9]++;for(;e<=279;)xv[2*e+1]=7,e++,i[7]++;for(;e<=287;)xv[2*e+1]=8,e++,i[8]++;for(Mv(xv,287,i),e=0;e<yv;e++)_v[2*e+1]=5,_v[2*e]=Lv(e,5);Iv=new Tv(xv,mv,257,vv,gv),Cv=new Tv(_v,bv,0,yv,gv),Zv=new Tv(new Array(0),wv,0,19,7)}(),Wv=!0),e.l_desc=new Dv(e.dyn_ltree,Iv),e.d_desc=new Dv(e.dyn_dtree,Cv),e.bl_desc=new Dv(e.bl_tree,Zv),e.bi_buf=0,e.bi_valid=0,Uv(e)},Qv=function(e,t,r,n){var a,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<dv;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),Kv(e,e.l_desc),Kv(e,e.d_desc),s=function(e){var t;for(qv(e,e.dyn_ltree,e.l_desc.max_code),qv(e,e.dyn_dtree,e.d_desc.max_code),Kv(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*kv[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=r+5,r+4<=a&&-1!==t?Gv(e,t,r,n):4===e.strategy||i===a?(Ov(e,2+(n?1:0),3),Vv(e,xv,_v)):(Ov(e,4+(n?1:0),3),function(e,t,r,n){var a;for(Ov(e,t-257,5),Ov(e,r-1,5),Ov(e,n-4,4),a=0;a<n;a++)Ov(e,e.bl_tree[2*kv[a]+1],3);Hv(e,e.dyn_ltree,t-1),Hv(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Vv(e,e.dyn_ltree,e.dyn_dtree)),Uv(e),n&&jv(e)},Jv=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(Sv[r]+dv+1)]++,e.dyn_dtree[2*Pv(t)]++),e.last_lit===e.lit_bufsize-1},Xv={_tr_init:Yv,_tr_stored_block:Gv,_tr_flush_block:Qv,_tr_tally:Jv,_tr_align:function(e){Ov(e,2,3),Bv(e,256,xv),function(e){16===e.bi_valid?(Nv(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},$v=function(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{i=i+(a=a+t[n++]|0)|0}while(--s);a%=65521,i%=65521}return a|i<<16|0},ey=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}()),ty=function(e,t,r,n){var a=ey,i=n+r;e^=-1;for(var s=n;s<i;s++)e=e>>>8^a[255&(e^t[s])];return-1^e},ry={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ny={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},ay=Xv._tr_init,iy=Xv._tr_stored_block,sy=Xv._tr_flush_block,oy=Xv._tr_tally,uy=Xv._tr_align,cy=ny.Z_NO_FLUSH,ly=ny.Z_PARTIAL_FLUSH,fy=ny.Z_FULL_FLUSH,py=ny.Z_FINISH,hy=ny.Z_BLOCK,dy=ny.Z_OK,vy=ny.Z_STREAM_END,yy=ny.Z_STREAM_ERROR,gy=ny.Z_DATA_ERROR,my=ny.Z_BUF_ERROR,by=ny.Z_DEFAULT_COMPRESSION,wy=ny.Z_FILTERED,ky=ny.Z_HUFFMAN_ONLY,xy=ny.Z_RLE,_y=ny.Z_FIXED,Ey=ny.Z_DEFAULT_STRATEGY,Sy=ny.Z_UNKNOWN,Ay=ny.Z_DEFLATED,Iy=258,Cy=262,Zy=103,Ry=113,Ty=666,Dy=function(e,t){return e.msg=ry[t],t},Py=function(e){return(e<<1)-(e>4?9:0)},Ny=function(e){for(var t=e.length;--t>=0;)e[t]=0},Oy=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},By=function(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},Ly=function(e,t){sy(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,By(e.strm)},My=function(e,t){e.pending_buf[e.pending++]=t},Uy=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},jy=function(e,t,r,n){var a=e.avail_in;return a>n&&(a=n),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=$v(e.adler,t,a,r):2===e.state.wrap&&(e.adler=ty(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},Fy=function(e,t){var r,n,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-Cy?e.strstart-(e.w_size-Cy):0,c=e.window,l=e.w_mask,f=e.prev,p=e.strstart+Iy,h=c[i+s-1],d=c[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+s]===d&&c[r+s-1]===h&&c[r]===c[i]&&c[++r]===c[i+1]){i+=2,r++;do{}while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<p);if(n=Iy-(p-i),i=p-Iy,n>s){if(e.match_start=t,s=n,n>=o)break;h=c[i+s-1],d=c[i+s]}}}while((t=f[t&l])>u&&0!==--a);return s<=e.lookahead?s:e.lookahead},zy=function(e){var t,r,n,a,i,s=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-Cy)){e.window.set(e.window.subarray(s,s+s),0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=s?n-s:0}while(--r);t=r=s;do{n=e.prev[--t],e.prev[t]=n>=s?n-s:0}while(--r);a+=s}if(0===e.strm.avail_in)break;if(r=jy(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Oy(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Oy(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Cy&&0!==e.strm.avail_in)},Vy=function(e,t){for(var r,n;;){if(e.lookahead<Cy){if(zy(e),e.lookahead<Cy&&t===cy)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Oy(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-Cy&&(e.match_length=Fy(e,r)),e.match_length>=3)if(n=oy(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Oy(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Oy(e,e.ins_h,e.window[e.strstart+1]);else n=oy(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ly(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===py?(Ly(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ly(e,!1),0===e.strm.avail_out)?1:2},Ky=function(e,t){for(var r,n,a;;){if(e.lookahead<Cy){if(zy(e),e.lookahead<Cy&&t===cy)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Oy(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Cy&&(e.match_length=Fy(e,r),e.match_length<=5&&(e.strategy===wy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=oy(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=Oy(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Ly(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=oy(e,0,e.window[e.strstart-1]))&&Ly(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=oy(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===py?(Ly(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ly(e,!1),0===e.strm.avail_out)?1:2};function qy(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}var Hy=[new qy(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(zy(e),0===e.lookahead&&t===cy)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Ly(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-Cy&&(Ly(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===py?(Ly(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Ly(e,!1),e.strm.avail_out),1)})),new qy(4,4,8,4,Vy),new qy(4,5,16,8,Vy),new qy(4,6,32,32,Vy),new qy(4,4,16,16,Ky),new qy(8,16,32,32,Ky),new qy(8,16,128,128,Ky),new qy(8,32,128,256,Ky),new qy(32,128,258,1024,Ky),new qy(32,258,258,4096,Ky)];function Wy(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ay,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ny(this.dyn_ltree),Ny(this.dyn_dtree),Ny(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ny(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ny(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Gy=function(e){if(!e||!e.state)return Dy(e,yy);e.total_in=e.total_out=0,e.data_type=Sy;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:Ry,e.adler=2===t.wrap?0:1,t.last_flush=cy,ay(t),dy},Yy=function(e){var t,r=Gy(e);return r===dy&&((t=e.state).window_size=2*t.w_size,Ny(t.head),t.max_lazy_match=Hy[t.level].max_lazy,t.good_match=Hy[t.level].good_length,t.nice_match=Hy[t.level].nice_length,t.max_chain_length=Hy[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r},Qy=function(e,t,r,n,a,i){if(!e)return yy;var s=1;if(t===by&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>9||r!==Ay||n<8||n>15||t<0||t>9||i<0||i>_y)return Dy(e,yy);8===n&&(n=9);var o=new Wy;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=i,o.method=r,Yy(e)},Jy=function(e,t){var r,n;if(!e||!e.state||t>hy||t<0)return e?Dy(e,yy):yy;var a=e.state;if(!e.output||!e.input&&0!==e.avail_in||a.status===Ty&&t!==py)return Dy(e,0===e.avail_out?my:yy);a.strm=e;var i=a.last_flush;if(a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,My(a,31),My(a,139),My(a,8),a.gzhead?(My(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),My(a,255&a.gzhead.time),My(a,a.gzhead.time>>8&255),My(a,a.gzhead.time>>16&255),My(a,a.gzhead.time>>24&255),My(a,9===a.level?2:a.strategy>=ky||a.level<2?4:0),My(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(My(a,255&a.gzhead.extra.length),My(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=ty(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(My(a,0),My(a,0),My(a,0),My(a,0),My(a,0),My(a,9===a.level?2:a.strategy>=ky||a.level<2?4:0),My(a,3),a.status=Ry);else{var s=Ay+(a.w_bits-8<<4)<<8;s|=(a.strategy>=ky||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(s|=32),s+=31-s%31,a.status=Ry,Uy(a,s),0!==a.strstart&&(Uy(a,e.adler>>>16),Uy(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(r=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>r&&(e.adler=ty(e.adler,a.pending_buf,a.pending-r,r)),By(e),r=a.pending,a.pending!==a.pending_buf_size));)My(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>r&&(e.adler=ty(e.adler,a.pending_buf,a.pending-r,r)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(e.adler=ty(e.adler,a.pending_buf,a.pending-r,r)),By(e),r=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,My(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>r&&(e.adler=ty(e.adler,a.pending_buf,a.pending-r,r)),0===n&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(e.adler=ty(e.adler,a.pending_buf,a.pending-r,r)),By(e),r=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,My(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>r&&(e.adler=ty(e.adler,a.pending_buf,a.pending-r,r)),0===n&&(a.status=Zy)}else a.status=Zy;if(a.status===Zy&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&By(e),a.pending+2<=a.pending_buf_size&&(My(a,255&e.adler),My(a,e.adler>>8&255),e.adler=0,a.status=Ry)):a.status=Ry),0!==a.pending){if(By(e),0===e.avail_out)return a.last_flush=-1,dy}else if(0===e.avail_in&&Py(t)<=Py(i)&&t!==py)return Dy(e,my);if(a.status===Ty&&0!==e.avail_in)return Dy(e,my);if(0!==e.avail_in||0!==a.lookahead||t!==cy&&a.status!==Ty){var o=a.strategy===ky?function(e,t){for(var r;;){if(0===e.lookahead&&(zy(e),0===e.lookahead)){if(t===cy)return 1;break}if(e.match_length=0,r=oy(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Ly(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===py?(Ly(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ly(e,!1),0===e.strm.avail_out)?1:2}(a,t):a.strategy===xy?function(e,t){for(var r,n,a,i,s=e.window;;){if(e.lookahead<=Iy){if(zy(e),e.lookahead<=Iy&&t===cy)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=s[a=e.strstart-1])===s[++a]&&n===s[++a]&&n===s[++a]){i=e.strstart+Iy;do{}while(n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&a<i);e.match_length=Iy-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=oy(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=oy(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Ly(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===py?(Ly(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ly(e,!1),0===e.strm.avail_out)?1:2}(a,t):Hy[a.level].func(a,t);if(3!==o&&4!==o||(a.status=Ty),1===o||3===o)return 0===e.avail_out&&(a.last_flush=-1),dy;if(2===o&&(t===ly?uy(a):t!==hy&&(iy(a,0,0,!1),t===fy&&(Ny(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),By(e),0===e.avail_out))return a.last_flush=-1,dy}return t!==py?dy:a.wrap<=0?vy:(2===a.wrap?(My(a,255&e.adler),My(a,e.adler>>8&255),My(a,e.adler>>16&255),My(a,e.adler>>24&255),My(a,255&e.total_in),My(a,e.total_in>>8&255),My(a,e.total_in>>16&255),My(a,e.total_in>>24&255)):(Uy(a,e.adler>>>16),Uy(a,65535&e.adler)),By(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?dy:vy)},Xy=function(e,t){var r=t.length;if(!e||!e.state)return yy;var n=e.state,a=n.wrap;if(2===a||1===a&&42!==n.status||n.lookahead)return yy;if(1===a&&(e.adler=$v(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(Ny(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(t.subarray(r-n.w_size,r),0),t=i,r=n.w_size}var s=e.avail_in,o=e.next_in,u=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,zy(n);n.lookahead>=3;){var c=n.strstart,l=n.lookahead-2;do{n.ins_h=Oy(n,n.ins_h,n.window[c+3-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++}while(--l);n.strstart=c,n.lookahead=2,zy(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=u,e.avail_in=s,n.wrap=a,dy},$y={deflateInit:function(e,t){return Qy(e,t,Ay,15,8,Ey)},deflateInit2:Qy,deflateReset:Yy,deflateResetKeep:Gy,deflateSetHeader:function(e,t){return e&&e.state?2!==e.state.wrap?yy:(e.state.gzhead=t,dy):yy},deflate:Jy,deflateEnd:function(e){if(!e||!e.state)return yy;var t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==Zy&&t!==Ry&&t!==Ty?Dy(e,yy):(e.state=null,t===Ry?Dy(e,gy):dy)},deflateSetDictionary:Xy,deflateInfo:"pako deflate (from Nodeca project)"},eg=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},tg=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var n in r)eg(r,n)&&(e[n]=r[n])}}return e},rg=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var a=new Uint8Array(t),i=0,s=0,o=e.length;i<o;i++){var u=e[i];a.set(u,s),s+=u.length}return a},ng=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(vK){ng=!1}for(var ag=new Uint8Array(256),ig=0;ig<256;ig++)ag[ig]=ig>=252?6:ig>=248?5:ig>=240?4:ig>=224?3:ig>=192?2:1;ag[254]=ag[254]=1;var sg=function(e){if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,a,i,s=e.length,o=0;for(a=0;a<s;a++)55296===(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320===(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),i=0,a=0;i<o;a++)55296===(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320===(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},og=function(e,t){var r,n,a=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(n=0,r=0;r<a;){var s=e[r++];if(s<128)i[n++]=s;else{var o=ag[s];if(o>4)i[n++]=65533,r+=o-1;else{for(s&=2===o?31:3===o?15:7;o>1&&r<a;)s=s<<6|63&e[r++],o--;o>1?i[n++]=65533:s<65536?i[n++]=s:(s-=65536,i[n++]=55296|s>>10&1023,i[n++]=56320|1023&s)}}}return function(e,t){if(t<65534&&e.subarray&&ng)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}(i,n)},ug=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128===(192&e[r]);)r--;return r<0||0===r?t:r+ag[e[r]]>t?r:t};var cg=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},lg=Object.prototype.toString,fg=ny.Z_NO_FLUSH,pg=ny.Z_SYNC_FLUSH,hg=ny.Z_FULL_FLUSH,dg=ny.Z_FINISH,vg=ny.Z_OK,yg=ny.Z_STREAM_END,gg=ny.Z_DEFAULT_COMPRESSION,mg=ny.Z_DEFAULT_STRATEGY,bg=ny.Z_DEFLATED;function wg(e){this.options=tg({level:gg,method:bg,chunkSize:16384,windowBits:15,memLevel:8,strategy:mg},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cg,this.strm.avail_out=0;var r=$y.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==vg)throw new Error(ry[r]);if(t.header&&$y.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"===typeof t.dictionary?sg(t.dictionary):"[object ArrayBuffer]"===lg.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=$y.deflateSetDictionary(this.strm,n))!==vg)throw new Error(ry[r]);this._dict_set=!0}}function kg(e,t){var r=new wg(t);if(r.push(e,!0),r.err)throw r.msg||ry[r.err];return r.result}wg.prototype.push=function(e,t){var r,n,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?dg:fg,"string"===typeof e?a.input=sg(e):"[object ArrayBuffer]"===lg.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(n===pg||n===hg)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((r=$y.deflate(a,n))===yg)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),r=$y.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===vg;if(0!==a.avail_out){if(n>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},wg.prototype.onData=function(e){this.chunks.push(e)},wg.prototype.onEnd=function(e){e===vg&&(this.result=rg(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var xg={Deflate:wg,deflate:kg,deflateRaw:function(e,t){return(t=t||{}).raw=!0,kg(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,kg(e,t)},constants:ny},_g=function(e,t){var r,n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A=e.state;r=e.next_in,E=e.input,n=r+(e.avail_in-5),a=e.next_out,S=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),o=A.dmax,u=A.wsize,c=A.whave,l=A.wnext,f=A.window,p=A.hold,h=A.bits,d=A.lencode,v=A.distcode,y=(1<<A.lenbits)-1,g=(1<<A.distbits)-1;e:do{h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),m=d[p&y];t:for(;;){if(p>>>=b=m>>>24,h-=b,0===(b=m>>>16&255))S[a++]=65535&m;else{if(!(16&b)){if(0===(64&b)){m=d[(65535&m)+(p&(1<<b)-1)];continue t}if(32&b){A.mode=12;break e}e.msg="invalid literal/length code",A.mode=30;break e}w=65535&m,(b&=15)&&(h<b&&(p+=E[r++]<<h,h+=8),w+=p&(1<<b)-1,p>>>=b,h-=b),h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),m=v[p&g];r:for(;;){if(p>>>=b=m>>>24,h-=b,!(16&(b=m>>>16&255))){if(0===(64&b)){m=v[(65535&m)+(p&(1<<b)-1)];continue r}e.msg="invalid distance code",A.mode=30;break e}if(k=65535&m,h<(b&=15)&&(p+=E[r++]<<h,(h+=8)<b&&(p+=E[r++]<<h,h+=8)),(k+=p&(1<<b)-1)>o){e.msg="invalid distance too far back",A.mode=30;break e}if(p>>>=b,h-=b,k>(b=a-i)){if((b=k-b)>c&&A.sane){e.msg="invalid distance too far back",A.mode=30;break e}if(x=0,_=f,0===l){if(x+=u-b,b<w){w-=b;do{S[a++]=f[x++]}while(--b);x=a-k,_=S}}else if(l<b){if(x+=u+l-b,(b-=l)<w){w-=b;do{S[a++]=f[x++]}while(--b);if(x=0,l<w){w-=b=l;do{S[a++]=f[x++]}while(--b);x=a-k,_=S}}}else if(x+=l-b,b<w){w-=b;do{S[a++]=f[x++]}while(--b);x=a-k,_=S}for(;w>2;)S[a++]=_[x++],S[a++]=_[x++],S[a++]=_[x++],w-=3;w&&(S[a++]=_[x++],w>1&&(S[a++]=_[x++]))}else{x=a-k;do{S[a++]=S[x++],S[a++]=S[x++],S[a++]=S[x++],w-=3}while(w>2);w&&(S[a++]=S[x++],w>1&&(S[a++]=S[x++]))}break}}break}}while(r<n&&a<s);r-=w=h>>3,p&=(1<<(h-=w<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<s?s-a+257:257-(a-s),A.hold=p,A.bits=h},Eg=15,Sg=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ag=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ig=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Cg=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Zg=function(e,t,r,n,a,i,s,o){var u,c,l,f,p,h,d,v,y,g=o.bits,m=0,b=0,w=0,k=0,x=0,_=0,E=0,S=0,A=0,I=0,C=null,Z=0,R=new Uint16Array(16),T=new Uint16Array(16),D=null,P=0;for(m=0;m<=Eg;m++)R[m]=0;for(b=0;b<n;b++)R[t[r+b]]++;for(x=g,k=Eg;k>=1&&0===R[k];k--);if(x>k&&(x=k),0===k)return a[i++]=20971520,a[i++]=20971520,o.bits=1,0;for(w=1;w<k&&0===R[w];w++);for(x<w&&(x=w),S=1,m=1;m<=Eg;m++)if(S<<=1,(S-=R[m])<0)return-1;if(S>0&&(0===e||1!==k))return-1;for(T[1]=0,m=1;m<Eg;m++)T[m+1]=T[m]+R[m];for(b=0;b<n;b++)0!==t[r+b]&&(s[T[t[r+b]]++]=b);if(0===e?(C=D=s,h=19):1===e?(C=Sg,Z-=257,D=Ag,P-=257,h=256):(C=Ig,D=Cg,h=-1),I=0,b=0,m=w,p=i,_=x,E=0,l=-1,f=(A=1<<x)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){d=m-E,s[b]<h?(v=0,y=s[b]):s[b]>h?(v=D[P+s[b]],y=C[Z+s[b]]):(v=96,y=0),u=1<<m-E,w=c=1<<_;do{a[p+(I>>E)+(c-=u)]=d<<24|v<<16|y|0}while(0!==c);for(u=1<<m-1;I&u;)u>>=1;if(0!==u?(I&=u-1,I+=u):I=0,b++,0===--R[m]){if(m===k)break;m=t[r+s[b]]}if(m>x&&(I&f)!==l){for(0===E&&(E=x),p+=w,S=1<<(_=m-E);_+E<k&&!((S-=R[_+E])<=0);)_++,S<<=1;if(A+=1<<_,1===e&&A>852||2===e&&A>592)return 1;a[l=I&f]=x<<24|_<<16|p-i|0}}return 0!==I&&(a[p+I]=m-E<<24|64<<16|0),o.bits=x,0},Rg=ny.Z_FINISH,Tg=ny.Z_BLOCK,Dg=ny.Z_TREES,Pg=ny.Z_OK,Ng=ny.Z_STREAM_END,Og=ny.Z_NEED_DICT,Bg=ny.Z_STREAM_ERROR,Lg=ny.Z_DATA_ERROR,Mg=ny.Z_MEM_ERROR,Ug=ny.Z_BUF_ERROR,jg=ny.Z_DEFLATED,Fg=12,zg=30,Vg=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function Kg(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var qg,Hg,Wg=function(e){if(!e||!e.state)return Bg;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Pg},Gg=function(e){if(!e||!e.state)return Bg;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Wg(e)},Yg=function(e,t){var r;if(!e||!e.state)return Bg;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Bg:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Gg(e))},Qg=function(e,t){if(!e)return Bg;var r=new Kg;e.state=r,r.window=null;var n=Yg(e,t);return n!==Pg&&(e.state=null),n},Jg=!0,Xg=function(e){if(Jg){qg=new Int32Array(512),Hg=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Zg(1,e.lens,0,288,qg,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Zg(2,e.lens,0,32,Hg,0,e.work,{bits:5}),Jg=!1}e.lencode=qg,e.lenbits=9,e.distcode=Hg,e.distbits=5},$g=function(e,t,r,n){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},em=function(e,t){var r,n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A=0,I=new Uint8Array(4),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Bg;(r=e.state).mode===Fg&&(r.mode=13),s=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,c=r.hold,l=r.bits,f=o,p=u,_=Pg;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,I[0]=255&c,I[1]=c>>>8&255,r.check=ty(r.check,I,2,0),c=0,l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=zg;break}if((15&c)!==jg){e.msg="unknown compression method",r.mode=zg;break}if(l-=4,x=8+(15&(c>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){e.msg="invalid window size",r.mode=zg;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&c?10:Fg,c=0,l=0;break;case 2:for(;l<16;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==jg){e.msg="unknown compression method",r.mode=zg;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=zg;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(I[0]=255&c,I[1]=c>>>8&255,r.check=ty(r.check,I,2,0)),c=0,l=0,r.mode=3;case 3:for(;l<32;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(I[0]=255&c,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,r.check=ty(r.check,I,4,0)),c=0,l=0,r.mode=4;case 4:for(;l<16;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(I[0]=255&c,I[1]=c>>>8&255,r.check=ty(r.check,I,2,0)),c=0,l=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(I[0]=255&c,I[1]=c>>>8&255,r.check=ty(r.check,I,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((h=r.length)>o&&(h=o),h&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),x)),512&r.flags&&(r.check=ty(r.check,n,h,i)),o-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break e;h=0;do{x=n[i+h++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&h<o);if(512&r.flags&&(r.check=ty(r.check,n,h,i)),o-=h,i+=h,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break e;h=0;do{x=n[i+h++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&h<o);if(512&r.flags&&(r.check=ty(r.check,n,h,i)),o-=h,i+=h,x)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=zg;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Fg;break;case 10:for(;l<32;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}e.adler=r.check=Vg(c),c=0,l=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=o,r.hold=c,r.bits=l,Og;e.adler=r.check=1,r.mode=Fg;case Fg:if(t===Tg||t===Dg)break e;case 13:if(r.last){c>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=14;break;case 1:if(Xg(r),r.mode=20,t===Dg){c>>>=2,l-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=zg}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=zg;break}if(r.length=65535&c,c=0,l=0,r.mode=15,t===Dg)break e;case 15:r.mode=16;case 16:if(h=r.length){if(h>o&&(h=o),h>u&&(h=u),0===h)break e;a.set(n.subarray(i,i+h),s),o-=h,i+=h,u-=h,s+=h,r.length-=h;break}r.mode=Fg;break;case 17:for(;l<14;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=zg;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}r.lens[C[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},_=Zg(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,_){e.msg="invalid code lengths set",r.mode=zg;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(A=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,m=65535&A,!((y=A>>>24)<=l);){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(m<16)c>>>=y,l-=y,r.lens[r.have++]=m;else{if(16===m){for(S=y+2;l<S;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(c>>>=y,l-=y,0===r.have){e.msg="invalid bit length repeat",r.mode=zg;break}x=r.lens[r.have-1],h=3+(3&c),c>>>=2,l-=2}else if(17===m){for(S=y+3;l<S;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}l-=y,x=0,h=3+(7&(c>>>=y)),c>>>=3,l-=3}else{for(S=y+7;l<S;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}l-=y,x=0,h=11+(127&(c>>>=y)),c>>>=7,l-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=zg;break}for(;h--;)r.lens[r.have++]=x}}if(r.mode===zg)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=zg;break}if(r.lenbits=9,E={bits:r.lenbits},_=Zg(1,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,_){e.msg="invalid literal/lengths set",r.mode=zg;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},_=Zg(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,_){e.msg="invalid distances set",r.mode=zg;break}if(r.mode=20,t===Dg)break e;case 20:r.mode=21;case 21:if(o>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=o,r.hold=c,r.bits=l,_g(e,p),s=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,c=r.hold,l=r.bits,r.mode===Fg&&(r.back=-1);break}for(r.back=0;g=(A=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,m=65535&A,!((y=A>>>24)<=l);){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(g&&0===(240&g)){for(b=y,w=g,k=m;g=(A=r.lencode[k+((c&(1<<b+w)-1)>>b)])>>>16&255,m=65535&A,!(b+(y=A>>>24)<=l);){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}c>>>=b,l-=b,r.back+=b}if(c>>>=y,l-=y,r.back+=y,r.length=m,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=Fg;break}if(64&g){e.msg="invalid literal/length code",r.mode=zg;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(S=r.extra;l<S;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(A=r.distcode[c&(1<<r.distbits)-1])>>>16&255,m=65535&A,!((y=A>>>24)<=l);){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(0===(240&g)){for(b=y,w=g,k=m;g=(A=r.distcode[k+((c&(1<<b+w)-1)>>b)])>>>16&255,m=65535&A,!(b+(y=A>>>24)<=l);){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}c>>>=b,l-=b,r.back+=b}if(c>>>=y,l-=y,r.back+=y,64&g){e.msg="invalid distance code",r.mode=zg;break}r.offset=m,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(S=r.extra;l<S;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=zg;break}r.mode=25;case 25:if(0===u)break e;if(h=p-u,r.offset>h){if((h=r.offset-h)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=zg;break}h>r.wnext?(h-=r.wnext,d=r.wsize-h):d=r.wnext-h,h>r.length&&(h=r.length),v=r.window}else v=a,d=s-r.offset,h=r.length;h>u&&(h=u),u-=h,r.length-=h;do{a[s++]=v[d++]}while(--h);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;a[s++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break e;o--,c|=n[i++]<<l,l+=8}if(p-=u,e.total_out+=p,r.total+=p,p&&(e.adler=r.check=r.flags?ty(r.check,a,p,s-p):$v(r.check,a,p,s-p)),p=u,(r.flags?c:Vg(c))!==r.check){e.msg="incorrect data check",r.mode=zg;break}c=0,l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break e;o--,c+=n[i++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=zg;break}c=0,l=0}r.mode=29;case 29:_=Ng;break e;case zg:_=Lg;break e;case 31:return Mg;default:return Bg}return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=o,r.hold=c,r.bits=l,(r.wsize||p!==e.avail_out&&r.mode<zg&&(r.mode<27||t!==Rg))&&$g(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&&p&&(e.adler=r.check=r.flags?ty(r.check,a,p,e.next_out-p):$v(r.check,a,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Fg?128:0)+(20===r.mode||15===r.mode?256:0),(0===f&&0===p||t===Rg)&&_===Pg&&(_=Ug),_},tm={inflateReset:Gg,inflateReset2:Yg,inflateResetKeep:Wg,inflateInit:function(e){return Qg(e,15)},inflateInit2:Qg,inflate:em,inflateEnd:function(e){if(!e||!e.state)return Bg;var t=e.state;return t.window&&(t.window=null),e.state=null,Pg},inflateGetHeader:function(e,t){if(!e||!e.state)return Bg;var r=e.state;return 0===(2&r.wrap)?Bg:(r.head=t,t.done=!1,Pg)},inflateSetDictionary:function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?Bg:11===r.mode&&$v(1,t,n,0)!==r.check?Lg:$g(e,t,n,n)?(r.mode=31,Mg):(r.havedict=1,Pg):Bg},inflateInfo:"pako inflate (from Nodeca project)"};var rm=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},nm=Object.prototype.toString,am=ny.Z_NO_FLUSH,im=ny.Z_FINISH,sm=ny.Z_OK,om=ny.Z_STREAM_END,um=ny.Z_NEED_DICT,cm=ny.Z_STREAM_ERROR,lm=ny.Z_DATA_ERROR,fm=ny.Z_MEM_ERROR;function pm(e){this.options=tg({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cg,this.strm.avail_out=0;var r=tm.inflateInit2(this.strm,t.windowBits);if(r!==sm)throw new Error(ry[r]);if(this.header=new rm,tm.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=sg(t.dictionary):"[object ArrayBuffer]"===nm.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=tm.inflateSetDictionary(this.strm,t.dictionary))!==sm))throw new Error(ry[r])}function hm(e,t){var r=new pm(t);if(r.push(e),r.err)throw r.msg||ry[r.err];return r.result}pm.prototype.push=function(e,t){var r,n,a,i=this.strm,s=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?im:am,"[object ArrayBuffer]"===nm.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(r=tm.inflate(i,n))===um&&o&&((r=tm.inflateSetDictionary(i,o))===sm?r=tm.inflate(i,n):r===lm&&(r=um));i.avail_in>0&&r===om&&i.state.wrap>0&&0!==e[i.next_in];)tm.inflateReset(i),r=tm.inflate(i,n);switch(r){case cm:case lm:case um:case fm:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===om))if("string"===this.options.to){var u=ug(i.output,i.next_out),c=i.next_out-u,l=og(i.output,u);i.next_out=c,i.avail_out=s-c,c&&i.output.set(i.output.subarray(u,u+c),0),this.onData(l)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==sm||0!==a){if(r===om)return r=tm.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},pm.prototype.onData=function(e){this.chunks.push(e)},pm.prototype.onEnd=function(e){e===sm&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=rg(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var dm={Inflate:pm,inflate:hm,inflateRaw:function(e,t){return(t=t||{}).raw=!0,hm(e,t)},ungzip:hm,constants:ny},vm={Deflate:xg.Deflate,deflate:xg.deflate,deflateRaw:xg.deflateRaw,gzip:xg.gzip,Inflate:dm.Inflate,inflate:dm.inflate,inflateRaw:dm.inflateRaw,ungzip:dm.ungzip,constants:ny};var ym=(0,he.Z)((function e(t){var r=t.preload,n=t.repo,a=t.hashers,i=t.options;(0,pe.Z)(this,e);var s=function(e){var t=e.repo,r=e.preload,n=e.hashers,a=e.options,i=a&&a.sharding;function s(){return s=ye((0,ce.Z)().mark((function e(a){var s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=k.length>1&&void 0!==k[1]?k[1]:{},(o=nd({shardSplitThreshold:i?1e3:1/0,strategy:"balanced"},s,(0,le.Z)({},ed(s.chunker)))).hashAlg&&"sha2-256"!==o.hashAlg&&1!==o.cidVersion&&(o.cidVersion=1),o.trickle&&(o.strategy="trickle"),"trickle"===o.strategy&&(o.leafType="raw",o.reduceSingleLeafToSelf=!1),o.cidVersion>0&&void 0===o.rawLeaves&&(o.rawLeaves=!0),void 0!==o.hashAlg&&void 0===o.rawLeaves&&(o.rawLeaves=!0),delete o.trickle,u={},o.progress&&(c=o.progress,o.progress=function(e,t){u[t]||(u[t]=0),u[t]+=e,c(u[t],t)}),null==o.hashAlg){e.next=14;break}return e.next=13,pr(n.getHasher(o.hashAlg));case 13:l=e.sent;case 14:return f=kp($h(a),(function(e){return Wh(e,t.blocks,(0,le.Z)((0,le.Z)({},o),{},{hasher:l,pin:!1}))}),ad(o),id(r,o),sd(t,o)),e.next=17,pr(t.gcLock.readLock());case 17:p=e.sent,e.prev=18,h=!1,d=!1,e.prev=21,y=hr(f);case 23:return e.next=25,pr(y.next());case 25:if(!(h=!(g=e.sent).done)){e.next=34;break}return b=g.value,w=null!==(m=b.path)&&void 0!==m?m:b.cid.toString(),delete u[w],e.next=31,(0,le.Z)((0,le.Z)({},b),{},{path:w});case 31:h=!1,e.next=23;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(21),d=!0,v=e.t0;case 40:if(e.prev=40,e.prev=41,!h||null==y.return){e.next=45;break}return e.next=45,pr(y.return());case 45:if(e.prev=45,!d){e.next=48;break}throw v;case 48:return e.finish(45);case 49:return e.finish(40);case 50:return e.prev=50,p(),e.finish(50);case 53:case"end":return e.stop()}}),e,null,[[18,,50,53],[21,36,40,50],[41,,45,49]])}))),s.apply(this,arguments)}return Rr((function(e){return s.apply(this,arguments)}))}({preload:r,repo:n,options:i,hashers:a});this.addAll=s,this.add=function(e){var t=e.addAll;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,aa(t(Up(r),n));case 3:if(null!=(a=e.sent)){e.next=6;break}throw Error("Failed to add a file, if you see this please report a bug");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}({addAll:s}),this.cat=function(e){var t=e.repo,r=e.preload;function n(){return n=ye((0,ce.Z)().mark((function e(n){var a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},n=Lr(n),!1!==a.preload&&(i=n.split("/"),r(Ue.CID.parse(i[0]))),e.next=5,pr(jd(n,t.blocks,a));case 5:if("directory"!==(s=e.sent).type){e.next=8;break}throw new Error("this dag node is a directory");case 8:if(s.content){e.next=10;break}throw new Error("this dag node has no content");case 10:return e.delegateYield(ia(hr(s.content(a)),pr),"t0",11);case 11:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r}),this.get=function(e){var t=e.repo,r=e.preload;function n(){return n=ye((0,ce.Z)().mark((function e(n){var a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(a=l.length>1&&void 0!==l[1]?l[1]:{}).compressionLevel||!(a.compressionLevel<-1||a.compressionLevel>9)){e.next=3;break}throw Ee(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");case 3:if(!1===a.preload){e.next=12;break}e.prev=4,i=Lr(n).split("/"),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(4),Ee(e.t0,"ERR_INVALID_PATH");case 11:r(Ue.CID.parse(i[0]));case 12:return s=Ue.CID.asCID(n)||n,e.next=15,pr(jd(s,t.blocks,a));case 15:if("file"!==(o=e.sent).type&&"raw"!==o.type){e.next=22;break}return u=[],a.compress&&!0!==a.archive?u.push(o.content):u.push([{header:{name:o.path,mode:"file"===o.type&&o.unixfs.mode,mtime:"file"===o.type&&o.unixfs.mtime?new Date(1e3*o.unixfs.mtime.secs):void 0,size:o.size,type:"file"},body:o.content()}],pv(),(function(e){return $c(e,(function(e){return e.slice()}))})),a.compress&&u.push(function(){var e=ye((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(Hd(t));case 2:return r=e.sent,e.next=5,vm.gzip(r,{level:a.compressionLevel||6});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.delegateYield(ia(hr(kp.apply(void 0,u)),pr),"t1",21);case 21:return e.abrupt("return");case 22:if("directory"!==o.type){e.next=30;break}if(c=[zd(s,t.blocks,a),function(){var e=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t);case 4:return e.next=6,pr(i.next());case 6:if(!(r=!(s=e.sent).done)){e.next=33;break}if(o=s.value,u={header:{name:o.path,size:o.size}},"file"!==o.type){e.next=16;break}u.header.type="file",u.header.mode=null!=o.unixfs.mode?o.unixfs.mode:void 0,u.header.mtime=o.unixfs.mtime?new Date(1e3*o.unixfs.mtime.secs):void 0,u.body=o.content(),e.next=28;break;case 16:if("raw"!==o.type){e.next=21;break}u.header.type="file",u.body=o.content(),e.next=28;break;case 21:if("directory"!==o.type){e.next=27;break}u.header.type="directory",u.header.mode=null!=o.unixfs.mode?o.unixfs.mode:void 0,u.header.mtime=o.unixfs.mtime?new Date(1e3*o.unixfs.mtime.secs):void 0,e.next=28;break;case 27:throw Ee(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");case 28:return e.next=30,u;case 30:r=!1,e.next=4;break;case 33:e.next=39;break;case 35:e.prev=35,e.t0=e.catch(2),n=!0,a=e.t0;case 39:if(e.prev=39,e.prev=40,!r||null==i.return){e.next=44;break}return e.next=44,pr(i.return());case 44:if(e.prev=44,!n){e.next=47;break}throw a;case 47:return e.finish(44);case 48:return e.finish(39);case 49:case"end":return e.stop()}}),e,null,[[2,35,39,49],[40,,44,48]])})));return function(t){return e.apply(this,arguments)}}(),pv(),function(e){return $c(e,(function(e){return e.slice()}))}],!a.compress){e.next=28;break}if(a.archive){e.next=27;break}throw Ee(new Error("file is not regular"),"ERR_INVALID_PATH");case 27:a.compress&&c.push(function(){var e=ye((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(Hd(t));case 2:return r=e.sent,e.next=5,vm.gzip(r,{level:a.compressionLevel||6});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 28:return e.delegateYield(ia(hr(kp.apply(void 0,c)),pr),"t2",29);case 29:return e.abrupt("return");case 30:throw Ee(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");case 31:case"end":return e.stop()}}),e,null,[[4,8]])}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r}),this.ls=function(e){var t=e.repo,r=e.preload;function n(){return n=ye((0,ce.Z)().mark((function e(n){var a,i,s,o,u,c,l,f,p,h,d,v=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>1&&void 0!==v[1]?v[1]:{},i=Lr(n),s=i.split("/"),!1!==a.preload&&r(Ue.CID.parse(s[0])),o=Ue.CID.asCID(i)||i,e.next=7,pr(jd(o,t.blocks,a));case 7:if("file"!==(u=e.sent).type){e.next=12;break}return e.next=11,Ur(u);case 11:return e.abrupt("return");case 12:if("directory"!==u.type){e.next=43;break}c=!1,l=!1,e.prev=15,p=hr(u.content());case 17:return e.next=19,pr(p.next());case 19:if(!(c=!(h=e.sent).done)){e.next=26;break}return d=h.value,e.next=23,Ur(d);case 23:c=!1,e.next=17;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(15),l=!0,f=e.t0;case 32:if(e.prev=32,e.prev=33,!c||null==p.return){e.next=37;break}return e.next=37,pr(p.return());case 37:if(e.prev=37,!l){e.next=40;break}throw f;case 40:return e.finish(37);case 41:return e.finish(32);case 42:return e.abrupt("return");case 43:throw Ee(new Error("Unknown UnixFS type ".concat(u.type)),"ERR_UNKNOWN_UNIXFS_TYPE");case 44:case"end":return e.stop()}}),e,null,[[15,28,32,42],[33,,37,41]])}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r})})),gm="0.15.4",mm="965f5a4e00254cee48fca2127d95209deaee09cf",bm="^0.155.2";var wm=_e("ipfs:components:id");function km(e,t,r){return xm.apply(this,arguments)}function xm(){return(xm=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.peerStore.get(t);case 2:if(a=e.sent){e.next=7;break}return e.next=6,_m(t,r,n);case 6:a=e.sent;case 7:if(!t.publicKey){e.next=11;break}e.t0=t.publicKey,e.next=14;break;case 11:return e.next=13,r.peerStore.keyBook.get(t);case 13:e.t0=e.sent;case 14:if(null!=(i=e.t0)){e.next=25;break}return e.prev=16,e.next=19,r.getPublicKey(t,n);case 19:i=e.sent,e.next=25;break;case 22:e.prev=22,e.t1=e.catch(16),wm.error("Could not load public key for",t.toString(),e.t1);case 25:return e.abrupt("return",(0,le.Z)((0,le.Z)({},a),{},{publicKey:i,metadata:a.metadata||new Map,addresses:a.addresses.map((function(e){return e.multiaddr}))}));case 26:case"end":return e.stop()}}),e,null,[[16,22]])})))).apply(this,arguments)}function _m(e,t,r){return Em.apply(this,arguments)}function Em(){return(Em=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.dht){e.next=2;break}throw Ee(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 2:a=!1,i=!1,e.prev=4,o=hr(r.dht.findPeer(t,n));case 6:return e.next=8,o.next();case 8:if(!(a=!(u=e.sent).done)){e.next=15;break}if("FINAL_PEER"!==u.value.name){e.next=12;break}return e.abrupt("break",15);case 12:a=!1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),i=!0,s=e.t0;case 21:if(e.prev=21,e.prev=22,!a||null==o.return){e.next=26;break}return e.next=26,o.return();case 26:if(e.prev=26,!i){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.next=33,r.peerStore.get(t);case 33:if(c=e.sent){e.next=36;break}throw Ee(new Error("Could not find peer"),"ERR_NOT_FOUND");case 36:return e.abrupt("return",c);case 37:case"end":return e.stop()}}),e,null,[[4,17,21,31],[22,,26,30]])})))).apply(this,arguments)}var Sm=function(e,t,r){var n,a,i;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(!(a=n.pop()))return!1;Am(a);for(;i=n.shift();)if(Am(i),"undefined"==typeof e[i]&&(e[i]={}),!(e=e[i])||"object"!=typeof e)return!1;return e[a]=r,!0};function Am(e){if("__proto__"==e||"constructor"==e||"prototype"==e)throw new Error("setting of prototype values not supported")}var Im={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:function(e){return Sm(e,"Discovery.MDNS.Enabled",!1),Sm(e,"Discovery.webRTCStar.Enabled",!1),e.Swarm=(0,le.Z)((0,le.Z)({},e.Swarm||{}),{},{DisableNatPortMap:!0}),e}},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:function(e){return Sm(e,"Discovery.MDNS.Enabled",!0),Sm(e,"Discovery.webRTCStar.Enabled",!0),Sm(e,"Swarm",(0,le.Z)((0,le.Z)({},e.Swarm||{}),{},{DisableNatPortMap:!1})),e}},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:function(e){var t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return Sm(e,"Addresses.API",t.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),Sm(e,"Addresses.Gateway",t.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),Sm(e,"Addresses.Swarm",t.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),Sm(e,"Addresses.Delegates",[]),Sm(e,"Bootstrap",[]),Sm(e,"Discovery.MDNS.Enabled",!1),Sm(e,"Discovery.webRTCStar.Enabled",!1),Sm(e,"Swarm",(0,le.Z)((0,le.Z)({},e.Swarm||{}),{},{DisableNatPortMap:!0})),e}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:function(e){var t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return Sm(e,"Addresses.API",t.Addresses.API),Sm(e,"Addresses.Gateway",t.Addresses.Gateway),Sm(e,"Addresses.Swarm",t.Addresses.Swarm),Sm(e,"Addresses.Delegates",t.Addresses.Delegates),Sm(e,"Bootstrap",t.Bootstrap),Sm(e,"Discovery.MDNS.Enabled",t.Discovery.MDNS.Enabled),Sm(e,"Discovery.webRTCStar.Enabled",t.Discovery.webRTCStar.Enabled),Sm(e,"Swarm",(0,le.Z)((0,le.Z)({},e.Swarm||{}),{},{DisableNatPortMap:!1})),e}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:function(e){var t=e.Swarm||{},r=t.ConnMgr||{};return r.LowWater=20,r.HighWater=40,t.ConnMgr=r,e.Swarm=t,e}},"default-power":{description:'Inverse of "lowpower" profile.',transform:function(e){var t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return e.Swarm=t.Swarm,e}}},Cm=_e("ipfs:core:config");function Zm(e){return Rm.apply(this,arguments)}function Rm(){return(Rm=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.keys(Im).map((function(e){return{name:e,description:Im[e].description}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enumerable,r=void 0===t||t,n=e.configurable,a=void 0!==n&&n;return{enumerable:r,configurable:a,writable:!1}},Dm=(0,ce.Z)().mark((function(e,t){var r,n,a,i,s,o,u,c,l,f,p,h,d,g;return(0,ce.Z)().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(null!=e){m.next=2;break}return m.abrupt("return");case 2:if(!(e instanceof Uint8Array)){m.next=4;break}return m.abrupt("return");case 4:r=0,n=Object.entries(e);case 5:if(!(r<n.length)){m.next=46;break}if(a=(0,y.Z)(n[r],2),i=a[0],s=a[1],o=[].concat(Vt(t),[i]),null==s||"object"!==typeof s){m.next=43;break}if(!Array.isArray(s)){m.next=36;break}u=(0,v.Z)(s.entries()),m.prev=11,u.s();case 13:if((c=u.n()).done){m.next=26;break}if(l=(0,y.Z)(c.value,2),f=l[0],p=l[1],h=[].concat(Vt(o),[f]),!(d=Tt.k0.asCID(p))){m.next=22;break}return m.next=20,[h.join("/"),d];case 20:m.next=24;break;case 22:if("object"!==typeof p){m.next=24;break}return m.delegateYield(Dm(p,h),"t0",24);case 24:m.next=13;break;case 26:m.next=31;break;case 28:m.prev=28,m.t1=m.catch(11),u.e(m.t1);case 31:return m.prev=31,u.f(),m.finish(31);case 34:m.next=43;break;case 36:if(!(g=Tt.k0.asCID(s))){m.next=42;break}return m.next=40,[o.join("/"),g];case 40:m.next=43;break;case 42:return m.delegateYield(Dm(s,o),"t2",43);case 43:r++,m.next=5;break;case 46:case"end":return m.stop()}}),Dm,null,[[11,28,31,34]])})),Pm=(0,ce.Z)().mark((function(e,t){var r,n,a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(null!=e){d.next=2;break}return d.abrupt("return");case 2:r=0,n=Object.entries(e);case 3:if(!(r<n.length)){d.next=36;break}return a=(0,y.Z)(n[r],2),i=a[0],s=a[1],o=[].concat(Vt(t),[i]),d.next=8,o.join("/");case 8:if(null==s||s instanceof Uint8Array||"object"!==typeof s||Tt.k0.asCID(s)){d.next=33;break}if(!Array.isArray(s)){d.next=32;break}u=(0,v.Z)(s.entries()),d.prev=11,u.s();case 13:if((c=u.n()).done){d.next=22;break}return l=(0,y.Z)(c.value,2),f=l[0],p=l[1],h=[].concat(Vt(o),[f]),d.next=18,h.join("/");case 18:if("object"!==typeof p||Tt.k0.asCID(p)){d.next=20;break}return d.delegateYield(Pm(p,h),"t0",20);case 20:d.next=13;break;case 22:d.next=27;break;case 24:d.prev=24,d.t1=d.catch(11),u.e(d.t1);case 27:return d.prev=27,u.f(),d.finish(27);case 30:d.next=33;break;case 32:return d.delegateYield(Pm(s,o),"t2",33);case 33:r++,d.next=3;break;case 36:case"end":return d.stop()}}),Pm,null,[[11,24,27,30]])})),Nm=function(e,t){var r,n=e,a=(0,v.Z)(t.entries());try{for(a.s();!(r=a.n()).done;){var i=(0,y.Z)(r.value,2),s=i[0];if(null==(n=n[i[1]]))throw new Error("Object has no property at ".concat(t.slice(0,s+1).map((function(e){return"[".concat(JSON.stringify(e),"]")})).join("")));var o=Tt.k0.asCID(n);if(o)return{value:o,remaining:t.slice(s+1).join("/")}}}catch(Dy){a.e(Dy)}finally{a.f()}return{value:n}},Om=function(){function e(t){var r=t.cid,n=t.bytes,a=t.value;if((0,pe.Z)(this,e),!r||!n||"undefined"===typeof a)throw new Error("Missing required argument");this.cid=r,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:Tm(),bytes:Tm(),value:Tm(),asBlock:Tm()})}return(0,he.Z)(e,[{key:"links",value:function(){return Dm(this.value,[])}},{key:"tree",value:function(){return Pm(this.value,[])}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return Nm(this.value,e.split("/").filter(Boolean))}}]),e}(),Bm=function(e){var t=e.bytes,r=e.cid,n=e.value,a=e.codec,i=void 0!==n?n:a&&a.decode(t);if(void 0===i)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Om({cid:r,bytes:t,value:i})};function Lm(e){var t=bt({version:1,roots:e}),r=pf.encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n}function Mm(){}var Um={Null:function(e){return null===e},Int:function(e){return Number.isInteger(e)},Float:function(e){return"number"===typeof e&&Number.isFinite(e)},String:function(e){return"string"===typeof e},Bool:function(e){return"boolean"===typeof e},Bytes:function(e){return e instanceof Uint8Array},Link:function(e){return!Um.Null(e)&&"object"===typeof e&&e.asCID===e},List:function(e){return Array.isArray(e)},Map:function(e){return!Um.Null(e)&&"object"===typeof e&&e.asCID!==e&&!Um.List(e)&&!Um.Bytes(e)}},jm={Int:Um.Int,"CarHeader > version":function(e){return jm.Int(e)},"CarHeader > roots (anon) > valueType (anon)":Um.Link,"CarHeader > roots (anon)":function(e){return Um.List(e)&&Array.prototype.every.call(e,jm["CarHeader > roots (anon) > valueType (anon)"])},"CarHeader > roots":function(e){return jm["CarHeader > roots (anon)"](e)},CarHeader:function(e){var t=e&&Object.keys(e);return Um.Map(e)&&["version"].every((function(e){return t.includes(e)}))&&Object.entries(e).every((function(e){var t=(0,y.Z)(e,2),r=t[0],n=t[1];return jm["CarHeader > "+r]&&jm["CarHeader > "+r](n)}))}},Fm=jm.CarHeader,zm=18,Vm=32,Km=112;function qm(e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.upTo(8);case 2:if((r=e.sent).length){e.next=5;break}throw new Error("Unexpected end of data");case 5:return n=pf.decode(r),t.seek(pf.decode.bytes),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),Hm.apply(this,arguments)}function Wm(e){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exactly(40);case 2:return r=e.sent,n=new DataView(r.buffer,r.byteOffset,r.byteLength),a=0,i={version:2,characteristics:[n.getBigUint64(a,!0),n.getBigUint64(a+=8,!0)],dataOffset:Number(n.getBigUint64(a+=8,!0)),dataSize:Number(n.getBigUint64(a+=8,!0)),indexOffset:Number(n.getBigUint64(a+=8,!0))},t.seek(40),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),Gm.apply(this,arguments)}function Ym(e,t){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qm(t);case 2:if(0!==(n=e.sent)){e.next=5;break}throw new Error("Invalid CAR header (zero length)");case 5:return e.next=7,t.exactly(n);case 7:if(a=e.sent,t.seek(n),i=wt(a),Fm(i)){e.next=12;break}throw new Error("Invalid CAR header format");case 12:if(!(1!==i.version&&2!==i.version||void 0!==r&&i.version!==r)){e.next=14;break}throw new Error("Invalid CAR version: ".concat(i.version).concat(void 0!==r?" (expected ".concat(r,")"):""));case 14:if(s=Array.isArray(i.roots),!(1===i.version&&!s||2===i.version&&s)){e.next=17;break}throw new Error("Invalid CAR header format");case 17:if(1!==i.version){e.next=19;break}return e.abrupt("return",i);case 19:return e.next=21,Wm(t);case 21:return o=e.sent,t.seek(o.dataOffset-t.pos),e.next=25,Ym(t,1);case 25:return u=e.sent,e.abrupt("return",Object.assign(u,o));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jm(e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.upTo(8);case 2:return r=e.sent,pf.decode(r),n=pf.decode.bytes,a=pf.decode(r.subarray(pf.decode.bytes)),i=pf.decode.bytes,s=n+i+a,e.next=10,t.exactly(s);case 10:return o=e.sent,t.seek(s),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),Xm.apply(this,arguments)}function $m(e){return eb.apply(this,arguments)}function eb(){return eb=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exactly(2);case 2:if((r=e.sent)[0]!==zm||r[1]!==Vm){e.next=10;break}return e.next=6,t.exactly(34);case 6:return n=e.sent,t.seek(34),a=Vn.decode(n),e.abrupt("return",Ue.CID.create(0,Km,a));case 10:return e.next=12,qm(t);case 12:if(1===(i=e.sent)){e.next=15;break}throw new Error("Unexpected CID version (".concat(i,")"));case 15:return e.next=17,qm(t);case 17:return s=e.sent,e.next=20,Jm(t);case 20:return o=e.sent,u=Vn.decode(o),e.abrupt("return",Ue.CID.create(i,s,u));case 23:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e){return rb.apply(this,arguments)}function rb(){return rb=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pos,e.next=3,qm(t);case 3:if(0!==(n=e.sent)){e.next=6;break}throw new Error("Invalid CAR section (zero length)");case 6:return n+=t.pos-r,e.next=9,$m(t);case 9:return a=e.sent,i=n-Number(t.pos-r),e.abrupt("return",{cid:a,length:n,blockLength:i});case 12:case"end":return e.stop()}}),e)}))),rb.apply(this,arguments)}function nb(e){return ab.apply(this,arguments)}function ab(){return ab=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tb(t);case 2:return r=e.sent,n=r.cid,a=r.blockLength,e.next=7,t.exactly(a);case 7:return i=e.sent,t.seek(a),e.abrupt("return",{bytes:i,cid:n});case 10:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ib(e){return sb.apply(this,arguments)}function sb(){return(sb=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pos,e.next=3,tb(t);case 3:return n=e.sent,a=n.cid,i=n.length,s=n.blockLength,o={cid:a,length:i,blockLength:s,offset:r,blockOffset:t.pos},t.seek(o.blockLength),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ob(e){var t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ym(e);case 2:return 2===(r=t.sent).version&&(n=e.pos-r.dataOffset,e=lb(e,r.dataSize-n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))();return{header:function(){return t},blocks:function(){return ye((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pr(t);case 2:return r.next=4,pr(e.upTo(8));case 4:if(r.t0=r.sent.length,!(r.t0>0)){r.next=12;break}return r.next=8,pr(nb(e));case 8:return r.next=10,r.sent;case 10:r.next=2;break;case 12:case"end":return r.stop()}}),r)})))()},blocksIndex:function(){return ye((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pr(t);case 2:return r.next=4,pr(e.upTo(8));case 4:if(r.t0=r.sent.length,!(r.t0>0)){r.next=12;break}return r.next=8,pr(ib(e));case 8:return r.next=10,r.sent;case 10:r.next=2;break;case 12:case"end":return r.stop()}}),r)})))()}}}function ub(e){var t=0;return{upTo:function(r){return(0,fe.Z)((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.subarray(t,t+Math.min(r,e.length-t)));case 1:case"end":return n.stop()}}),n)})))()},exactly:function(r){return(0,fe.Z)((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r>e.length-t)){n.next=2;break}throw new Error("Unexpected end of data");case 2:return n.abrupt("return",e.subarray(t,t+r));case 3:case"end":return n.stop()}}),n)})))()},seek:function(e){t+=e},get pos(){return t}}}function cb(e){var t=e[Symbol.asyncIterator]();function r(){return(r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.next();case 2:if(!(r=e.sent).done){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e){var t=0,r=0,n=0,a=new Uint8Array(0),i=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(i){var s,o,u,c,l,f;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.length-n,s=[a.subarray(n)];case 2:if(!(r<i)){t.next=12;break}return t.next=5,e();case 5:if(null!=(o=t.sent)){t.next=8;break}return t.abrupt("break",12);case 8:r<0?o.length>r&&s.push(o.subarray(-r)):s.push(o),r+=o.length,t.next=2;break;case 12:for(a=new Uint8Array(s.reduce((function(e,t){return e+t.length}),0)),u=0,c=0,l=s;c<l.length;c++)f=l[c],a.set(f,u),u+=f.length;n=0;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{upTo:function(e){return(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length-n<e)){t.next=3;break}return t.next=3,i(e);case 3:return t.abrupt("return",a.subarray(n,n+Math.min(a.length-n,e)));case 4:case"end":return t.stop()}}),t)})))()},exactly:function(e){return(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length-n<e)){t.next=3;break}return t.next=3,i(e);case 3:if(!(a.length-n<e)){t.next=5;break}throw new Error("Unexpected end of data");case 5:return t.abrupt("return",a.subarray(n,n+e));case 6:case"end":return t.stop()}}),t)})))()},seek:function(e){t+=e,n+=e},get pos(){return t}}}((function(){return r.apply(this,arguments)}))}function lb(e,t){var r=0;return{upTo:function(n){return(0,fe.Z)((0,ce.Z)().mark((function a(){var i;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.upTo(n);case 2:return(i=a.sent).length+r>t&&(i=i.subarray(0,t-r)),a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},exactly:function(n){return(0,fe.Z)((0,ce.Z)().mark((function a(){var i;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.exactly(n);case 2:if(!((i=a.sent).length+r>t)){a.next=5;break}throw new Error("Unexpected end of data");case 5:return a.abrupt("return",i);case 6:case"end":return a.stop()}}),a)})))()},seek:function(t){r+=t,e.seek(t)},get pos(){return e.pos}}}var fb=function(){function e(t,r){(0,pe.Z)(this,e),this._encoder=r,this._mutex=r.setRoots(t),this._ended=!1}return(0,he.Z)(e,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bytes instanceof Uint8Array&&t.cid){e.next=2;break}throw new TypeError("Can only write {cid, bytes} objects");case 2:if(!this._ended){e.next=4;break}throw new Error("Already closed");case 4:if(r=Ue.CID.asCID(t.cid)){e.next=7;break}throw new TypeError("Can only write {cid, bytes} objects");case 7:return this._mutex=this._mutex.then((function(){return n._encoder.writeBlock({cid:r,bytes:t.bytes})})),e.abrupt("return",this._mutex);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ended){e.next=2;break}throw new Error("Already closed");case 2:return e.next=4,this._mutex;case 4:return this._ended=!0,e.abrupt("return",this._encoder.close());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"create",value:function(t){t=function(e){if(void 0===e)return[];if(!Array.isArray(e)){var t=Ue.CID.asCID(e);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}var r,n=[],a=(0,v.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,s=Ue.CID.asCID(i);if(!s)throw new TypeError("roots must be a single CID or an array of CIDs");n.push(s)}}catch(Dy){a.e(Dy)}finally{a.f()}return n}(t);var r=hb(),n=r.encoder,a=r.iterator;return{writer:new e(t,n),out:new pb(a)}}},{key:"createAppender",value:function(){var t=hb(),r=t.encoder,n=t.iterator;return r.setRoots=function(){return Promise.resolve()},{writer:new e([],r),out:new pb(n)}}},{key:"updateRootsInBytes",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ub(t),e.next=3,Ym(n);case 3:if(a=Lm(r),Number(n.pos)===a.length){e.next=6;break}throw new Error("updateRoots() can only overwrite a header of the same length (old header is ".concat(n.pos," bytes, new header is ").concat(a.length," bytes)"));case 6:return t.set(a,0),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),pb=function(e){function t(e){(0,pe.Z)(this,t),this._iterator=e}return(0,he.Z)(t,[{key:e,value:function(){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}]),t}(Symbol.asyncIterator);function hb(){var e=function(){var e=[],t=null,r=Mm,n=!1,a=null,i=Mm,s=function(){return t||(t=new Promise((function(e){r=function(){t=null,r=Mm,e()}}))),t},o={write:function(t){e.push(t);var r=s();return i(),r},end:function(){return(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,t=s(),i(),e.next=5,t;case 5:case"end":return e.stop()}}),e)})))()}},u={next:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){var s;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s=e.shift())){t.next=4;break}return 0===e.length&&r(),t.abrupt("return",{done:!1,value:s});case 4:if(!n){t.next=7;break}return r(),t.abrupt("return",{done:!0,value:void 0});case 7:return a||(a=new Promise((function(e){i=function(){return a=null,i=Mm,e(u.next())}}))),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))()}};return{writer:o,iterator:u}}(),t=e.writer,r=e.iterator,n=function(e){return{setRoots:function(t){return(0,fe.Z)((0,ce.Z)().mark((function r(){var n;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=Lm(t),r.next=3,e.write(n);case 3:case"end":return r.stop()}}),r)})))()},writeBlock:function(t){return(0,fe.Z)((0,ce.Z)().mark((function r(){var n,a;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.cid,a=t.bytes,r.next=3,e.write(new Uint8Array(pf.encode(n.bytes.length+a.length)));case 3:return r.next=5,e.write(n.bytes);case 5:if(!a.length){r.next=8;break}return r.next=8,e.write(a);case 8:case"end":return r.stop()}}),r)})))()},close:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.end();case 2:case"end":return t.stop()}}),t)})))()}}}(t);return{encoder:n,iterator:r}}var db=__webpack_require__(7512),vb=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.cid,n=t.load,a=(a=t.seen)||new Set,i=r.toString(we.base58btc),!a.has(i)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n(r);case 7:if(s=e.sent,a.add(i),null!==s){e.next=11;break}return e.abrupt("return");case 11:o=(0,v.Z)(s.links()),e.prev=12,o.s();case 14:if((u=o.n()).done){e.next=20;break}return c=(0,y.Z)(u.value,2),l=c[1],e.next=18,vb({cid:l,load:n,seen:a});case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),yb=_e("ipfs:components:dag:import"),gb=[Jp.code,db.code];function mb(e,t,r,n){return function(){var a=(0,fe.Z)((0,ce.Z)().mark((function a(i){var s,o;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.getCodec(i.code);case 2:if(s=a.sent){a.next=5;break}throw new Error("Can't decode links in block with codec 0x".concat(i.code.toString(16)," to form complete DAG"));case 5:return a.next=7,e.blocks.get(i,r);case 7:return o=a.sent,yb("Adding block ".concat(i," to car")),a.next=11,t.put({cid:i,bytes:o});case 11:if(!gb.includes(i.code)){a.next=13;break}return a.abrupt("return",null);case 13:return a.abrupt("return",Bm({bytes:o,cid:i,codec:s}));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}var bb=__webpack_require__(4744);var wb=function(){function e(t,r,n){(0,pe.Z)(this,e),this._version=t,this._roots=r,this._iterable=n,this._decoded=!1}return(0,he.Z)(e,[{key:"version",get:function(){return this._version}},{key:"getRoots",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._roots);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),kb=function(e,t){St(n,e);var r=Rt(n);function n(){return(0,pe.Z)(this,n),r.apply(this,arguments)}return(0,he.Z)(n,[{key:t,value:function(){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}}],[{key:"fromBytes",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xb(t);case 2:return r=e.sent,a=r.version,i=r.roots,s=r.iterator,e.abrupt("return",new n(a,i,s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromIterable",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eb(t);case 2:return r=e.sent,a=r.version,i=r.roots,s=r.iterator,e.abrupt("return",new n(a,i,s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(wb,Symbol.asyncIterator);Symbol.asyncIterator;function xb(e){return _b.apply(this,arguments)}function _b(){return _b=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw new TypeError("fromBytes() requires a Uint8Array");case 2:return e.abrupt("return",Ab(ub(t)));case 3:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function Eb(e){return Sb.apply(this,arguments)}function Sb(){return(Sb=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"function"===typeof t[Symbol.asyncIterator]){e.next=2;break}throw new TypeError("fromIterable() requires an async iterable");case 2:return e.abrupt("return",Ab(cb(t)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ab(e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ob(t),e.next=3,r.header();case 3:return n=e.sent,a=n.version,i=n.roots,e.abrupt("return",{version:a,roots:i,iterator:r.blocks()});case 7:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}var Cb=_e("ipfs:components:dag:import");function Zb(e,t,r){return Rb.apply(this,arguments)}function Rb(){return Rb=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kb.fromIterable(n);case 2:return a=e.sent,e.next=5,a.getRoots();case 5:return i=e.sent,e.next=8,zc(t.blocks.putMany($c(a,(function(e){var t=e.cid,r=e.bytes;return Cb("Import block ".concat(t)),{key:t,value:r}})),{signal:r.signal}));case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}var Tb=(0,he.Z)((function e(t){var r=t.repo,n=t.codecs,a=t.hashers,i=t.preload;(0,pe.Z)(this,e),this.export=function(e){var t=e.repo,r=e.preload,n=e.codecs;function a(){return a=ye((0,ce.Z)().mark((function e(a){var i,s,o,u,c,l,f,p,h,d,v,y,g=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(i=g.length>1&&void 0!==g[1]?g[1]:{}).preload&&r(a),s=Ue.CID.asCID(a)){e.next=5;break}throw new Error("Unexpected error converting CID type: ".concat(a));case 5:return yb("Exporting ".concat(s," as car")),e.next=8,pr(fb.create([s]));case 8:o=e.sent,u=o.writer,c=o.out,l=null,(0,fe.Z)((0,ce.Z)().mark((function e(){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=mb(t,u,{signal:i.signal,timeout:i.timeout},n),e.next=4,vb({cid:s,load:r});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l=e.t0;case 9:return e.prev=9,u.close(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))(),f=!1,p=!1,e.prev=15,d=hr(c);case 17:return e.next=19,pr(d.next());case 19:if(!(f=!(v=e.sent).done)){e.next=28;break}if(y=v.value,!l){e.next=23;break}return e.abrupt("break",28);case 23:return e.next=25,y;case 25:f=!1,e.next=17;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(15),p=!0,h=e.t0;case 34:if(e.prev=34,e.prev=35,!f||null==d.return){e.next=39;break}return e.next=39,pr(d.return());case 39:if(e.prev=39,!p){e.next=42;break}throw h;case 42:return e.finish(39);case 43:return e.finish(34);case 44:if(!l){e.next=46;break}throw l;case 46:case"end":return e.stop()}}),e,null,[[15,30,34,44],[35,,39,43]])}))),a.apply(this,arguments)}return Rr((function(e){return a.apply(this,arguments)}))}({repo:r,preload:i,codecs:n}),this.get=function(e){var t=e.codecs,r=e.repo,n=e.preload,a=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(a){var i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(i=f.length>1&&void 0!==f[1]?f[1]:{}).preload&&n(a),!i.path){e.next=17;break}if(!i.localResolve){e.next=9;break}return e.next=6,bb(Fr(a,i.path,t,r,i));case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,aa(Fr(a,i.path,t,r,i));case 11:e.t0=e.sent;case 12:if(s=e.t0,o=s){e.next=16;break}throw Ee(new Error("Not found"),"ERR_NOT_FOUND");case 16:return e.abrupt("return",o);case 17:return e.next=19,t.getCodec(a.code);case 19:return u=e.sent,e.next=22,r.blocks.get(a,i);case 22:return c=e.sent,l=u.decode(c),e.abrupt("return",{value:l,remainderPath:""});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Rr(a)}({codecs:n,repo:r,preload:i}),this.import=function(e){var t=e.repo;function r(){return r=ye((0,ce.Z)().mark((function e(r){var n,a,i,s,o,u,c,l,f,p,h,d,y,g,m,b,w,k,x=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.length>1&&void 0!==x[1]?x[1]:{},e.next=3,pr(t.gcLock.readLock());case 3:return a=e.sent,e.prev=4,i={signal:n.signal,timeout:n.timeout},s=Ap(r),e.next=9,pr(s.peek());case 9:if(o=e.sent,u=o.value,!o.done){e.next=14;break}return e.abrupt("return");case 14:u&&s.push(u),c=u instanceof Uint8Array?[s]:s,l=!1,f=!1,e.prev=18,h=hr(c);case 20:return e.next=22,pr(h.next());case 22:if(!(l=!(d=e.sent).done)){e.next=64;break}return y=d.value,e.next=26,pr(Zb(t,i,y));case 26:if(g=e.sent,!1===n.pinRoots){e.next=61;break}m=(0,v.Z)(g),e.prev=29,m.s();case 31:if((b=m.n()).done){e.next=53;break}return w=b.value,k="",e.prev=34,e.next=37,pr(t.blocks.has(w));case 37:if(!e.sent){e.next=43;break}return Cb("Pinning root ".concat(w)),e.next=41,pr(t.pins.pinRecursively(w));case 41:e.next=44;break;case 43:k="blockstore: block not found";case 44:e.next=49;break;case 46:e.prev=46,e.t0=e.catch(34),k=e.t0.message;case 49:return e.next=51,{root:{cid:w,pinErrorMsg:k}};case 51:e.next=31;break;case 53:e.next=58;break;case 55:e.prev=55,e.t1=e.catch(29),m.e(e.t1);case 58:return e.prev=58,m.f(),e.finish(58);case 61:l=!1,e.next=20;break;case 64:e.next=70;break;case 66:e.prev=66,e.t2=e.catch(18),f=!0,p=e.t2;case 70:if(e.prev=70,e.prev=71,!l||null==h.return){e.next=75;break}return e.next=75,pr(h.return());case 75:if(e.prev=75,!f){e.next=78;break}throw p;case 78:return e.finish(75);case 79:return e.finish(70);case 80:return e.prev=80,a(),e.finish(80);case 83:case"end":return e.stop()}}),e,null,[[4,,80,83],[18,66,70,80],[29,55,58,61],[34,46],[71,,75,79]])}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({repo:r}),this.resolve=function(e){var t=e.repo,r=e.codecs,n=e.preload;function a(){return a=(0,fe.Z)((0,ce.Z)().mark((function e(a){var i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>1&&void 0!==u[1]?u[1]:{},s=Dr(a),o=s.cid,!1!==i.preload&&n(o),e.abrupt("return",Mr(t,r,a,i));case 4:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return Rr((function(e){return a.apply(this,arguments)}))}({repo:r,codecs:n,preload:i}),this.put=function(e){var t=e.repo,r=e.codecs,n=e.hashers,a=e.preload;function i(){return i=(0,fe.Z)((0,ce.Z)().mark((function e(i){var s,o,u,c,l,f,p,h,d,v=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=v.length>1&&void 0!==v[1]?v[1]:{}).pin){e.next=7;break}return e.next=4,t.gcLock.readLock();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return o=e.t0,e.prev=9,e.next=12,r.getCodec(s.storeCodec||"dag-cbor");case 12:if(u=e.sent){e.next=15;break}throw new Error("Unknown storeCodec ".concat(s.storeCodec,", please configure additional BlockCodecs for this IPFS instance"));case 15:if(!s.inputCodec){e.next=24;break}if(i instanceof Uint8Array){e.next=18;break}throw new Error("Can only inputCodec on raw bytes that can be decoded");case 18:return e.next=20,r.getCodec(s.inputCodec);case 20:if(c=e.sent){e.next=23;break}throw new Error("Unknown inputCodec ".concat(s.inputCodec,", please configure additional BlockCodecs for this IPFS instance"));case 23:i=c.decode(i);case 24:return l=null!=s.version?s.version:1,e.next=27,n.getHasher(s.hashAlg||"sha2-256");case 27:if(f=e.sent){e.next=30;break}throw new Error("Unknown hash algorithm ".concat(s.hashAlg,", please configure additional MultihashHashers for this IPFS instance"));case 30:return p=u.encode(i),e.next=33,f.digest(p);case 33:return h=e.sent,d=Ue.CID.create(l,u.code,h),e.next=37,t.blocks.put(d,p,{signal:s.signal});case 37:if(!s.pin){e.next=40;break}return e.next=40,t.pins.pinRecursively(d);case 40:return!1!==s.preload&&a(d),e.abrupt("return",d);case 42:return e.prev=42,o&&o(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[9,,42,45]])}))),i.apply(this,arguments)}return Rr((function(e){return i.apply(this,arguments)}))}({repo:r,codecs:n,hashers:a,preload:i})})),Db=function(e,t){return t},Pb={ip4:Db,ip6:function(e,t,r,n){return 1===n.length&&"ip6"===n[0].protocol?t:"[".concat(t,"]")},tcp:function(e,t,r,n,a){return n.some((function(e){return["http","https","ws","wss"].includes(e.protocol)}))?"".concat(e,":").concat(t):function(e,t,r,n){if(null!=n&&!1===n.assumeHttp)return"tcp://".concat(e,":").concat(t);var a="tcp",i=":".concat(t);return"tcp"===r[r.length-1].protocol&&(a="443"===t?"https":"http",i="443"===t||"80"===t?"":i),"".concat(a,"://").concat(e).concat(i)}(e,t,n,a)},udp:function(e,t){return"udp://".concat(e,":").concat(t)},dnsaddr:Db,dns4:Db,dns6:Db,ipfs:function(e,t){return"".concat(e,"/ipfs/").concat(t)},p2p:function(e,t){return"".concat(e,"/p2p/").concat(t)},http:function(e){return"http://".concat(e)},https:function(e){return"https://".concat(e)},ws:function(e){return"ws://".concat(e)},wss:function(e){return"wss://".concat(e)},"p2p-websocket-star":function(e){return"".concat(e,"/p2p-websocket-star")},"p2p-webrtc-star":function(e){return"".concat(e,"/p2p-webrtc-star")},"p2p-webrtc-direct":function(e){return"".concat(e,"/p2p-webrtc-direct")}};function Nb(e,t){var r=new Lf(e),n=e.toString().split("/").slice(1);return r.tuples().map((function(e){var t,r;return{protocol:null!==(t=n.shift())&&void 0!==t?t:"",content:null!=e[1]&&null!==(r=n.shift())&&void 0!==r?r:""}})).reduce((function(e,r,n,a){var i=Pb[r.protocol];if(null==i)throw new Error("Unsupported protocol ".concat(r.protocol));return i(e,r.content,n,a,t)}),"")}function Ob(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got ".concat(typeof e));for(var t=(e=Vt(e)).length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=[e[r],e[t]];e[t]=n[0],e[r]=n[1]}return e}var Bb=_e("ipfs:preload"),Lb=new(Tn.default?Tn.default:Tn)({concurrency:4});function Mb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Bb(e),Lb.add((0,fe.Z)((0,ce.Z)().mark((function r(){var n,a,i;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Dn.post(e,{signal:t.signal});case 2:n=r.sent,a=n.body.getReader(),r.prev=4;case 5:return r.next=8,a.read();case 8:if(i=r.sent,!i.done){r.next=12;break}return r.abrupt("return");case 12:r.next=5;break;case 14:return r.prev=14,a.releaseLock(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[4,,14,17]])}))))}var Ub=_e("ipfs:preload");function jb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.enabled=Boolean(e.enabled),e.addresses=e.addresses||[],e.cache=e.cache||1e3,!e.enabled||!e.addresses.length){Ub("preload disabled");var t=function(){};return Object.assign(t,{start:function(){},stop:function(){}})}var r=!0,n=[],a=e.addresses.map((function(e){return Nb(e)})),i=Vr(e.cache),s=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=3;break}throw new Error("preload ".concat(t," but preloader is not started"));case 3:if(s=t.toString(),!i.has(s)){e.next=6;break}return e.abrupt("return");case 6:i.set(s,!0),o=Ob(a),u=!1,c=Date.now(),l=(0,v.Z)(o),e.prev=11,p=(0,ce.Z)().mark((function e(){var t,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,!r){e.next=3;break}throw new Error("preload aborted for ".concat(s));case 3:return a=void 0,e.prev=4,a=new AbortController,n=n.concat(a),e.next=9,Mb("".concat(t,"/api/v0/refs?r=true&arg=").concat(encodeURIComponent(s)),{signal:a.signal});case 9:u=!0,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),"aborted"!==e.t0.type&&Ub.error(e.t0);case 15:return e.prev=15,n=n.filter((function(e){return e!==a})),e.finish(15);case 18:if(!u){e.next=20;break}return e.abrupt("return","break");case 20:case"end":return e.stop()}}),e,null,[[4,12,15,18]])})),l.s();case 14:if((f=l.n()).done){e.next=21;break}return e.delegateYield(p(),"t0",16);case 16:if("break"!==e.t0){e.next=19;break}return e.abrupt("break",21);case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(11),l.e(e.t1);case 26:return e.prev=26,l.f(),e.finish(26);case 29:Ub("".concat(u?"":"un","successfully preloaded ").concat(s," in ").concat(Date.now()-c,"ms")),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),Ub.error(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,32],[11,23,26,29]])})));return function(t){return e.apply(this,arguments)}}();return s.start=function(){r=!1},s.stop=function(){r=!0,Ub("aborting ".concat(n.length," pending preload request(s)")),n.forEach((function(e){return e.abort()})),n=[]},s}var Fb=_e("ipfs:mfs-preload");var zb="lock:worker:request-read",Vb="lock:worker:release-read",Kb="lock:master:grant-read",qb="lock:worker:request-write",Hb="lock:worker:release-write",Wb="lock:master:grant-write",Gb={},Yb=function e(t){t.addEventListener("message",(function(r){e.dispatchEvent("message",t,r)})),null!=t.port&&t.port.addEventListener("message",(function(r){e.dispatchEvent("message",t,r)}))};Yb.addEventListener=function(e,t){null==Gb[e]&&(Gb[e]=[]),Gb[e].push(t)},Yb.removeEventListener=function(e,t){null!=Gb[e]&&(Gb[e]=Gb[e].filter((function(e){return e===t})))},Yb.dispatchEvent=function(e,t,r){null!=Gb[e]&&Gb[e].forEach((function(e){return e(t,r)}))};var Qb,Jb=Yb,Xb=function(e,t,r,n,a){return function(i,s){if(s.data.type===r){var o={type:s.data.type,name:s.data.name,identifier:s.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:o.name,handler:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.postMessage({type:a,name:o.name,identifier:o.identifier}),e.next=3,new Promise((function(e){i.addEventListener("message",(function t(r){if(null!=r&&null!=r.data){var a=r.data.type,s=(r.data.name,r.data.identifier);a===n&&s===o.identifier&&(i.removeEventListener("message",t),e())}}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))}}},$b=function(e,t,r,n){return(0,fe.Z)((0,ce.Z)().mark((function a(){var i;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=(0,yr.nanoid)(),globalThis.postMessage({type:t,identifier:i,name:e}),a.next=4,new Promise((function(t){globalThis.addEventListener("message",(function a(s){if(null!=s&&null!=s.data){var o=s.data.type,u=s.data.identifier;o===r&&u===i&&(globalThis.removeEventListener("message",a),t((function(){globalThis.postMessage({type:n,identifier:i,name:e})})))}}))}));case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}}),a)})))},ew={singleProcess:!1},tw={};function rw(e,t){return nw.apply(this,arguments)}function nw(){return nw=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(e){n=e})),t.add((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){n((function(){e()}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))(),r.timeout);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),nw.apply(this,arguments)}var aw,iw={name:"lock",concurrency:1/0,timeout:846e5,global:globalThis,singleProcess:!1};function sw(e){var t=Object.assign({},iw,e);return null==Qb&&(Qb=function(e){if(e=Object.assign({},ew,e),Boolean(globalThis.document)||e.singleProcess){var t=new EventTarget;return Jb.addEventListener("message",Xb(t,"requestReadLock",zb,Vb,Kb)),Jb.addEventListener("message",Xb(t,"requestWriteLock",qb,Hb,Wb)),t}return{isWorker:!0,readLock:function(e){return $b(e,zb,Kb,Vb)},writeLock:function(e){return $b(e,qb,Wb,Hb)}}}(t),!0!==Qb.isWorker&&(Qb.addEventListener("requestReadLock",(function(e){null!=tw[e.data.name]&&tw[e.data.name].readLock().then(function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.data.handler().finally((function(){return r()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),Qb.addEventListener("requestWriteLock",function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=tw[t.data.name]){e.next=2;break}return e.abrupt("return");case 2:tw[t.data.name].writeLock().then(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data.handler().finally((function(){return r()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))),null==tw[t.name]&&(tw[t.name]=function(e,t){if(!0===Qb.isWorker)return{readLock:Qb.readLock(e,t),writeLock:Qb.writeLock(e,t)};var r,n=new Tn({concurrency:1});return{readLock:function(){return(0,fe.Z)((0,ce.Z)().mark((function e(){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r){e.next=4;break}return e.next=3,rw(r,t);case 3:case 10:return e.abrupt("return",e.sent);case 4:return r=new Tn({concurrency:t.concurrency,autoStart:!1}),a=r,i=rw(r,t),n.add((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.start(),e.next=3,a.onIdle().then((function(){r===a&&(r=null)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),e.next=10,i;case 11:case"end":return e.stop()}}),e)})))()},writeLock:function(){return(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,rw(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()}}}(t.name,t)),tw[t.name]}function ow(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(aw)return aw;var t=sw({singleProcess:e});return aw={readLock:function(e){return(0,fe.Z)((0,ce.Z)().mark((function r(){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.readLock();case 2:for(n=r.sent,r.prev=3,a=o.length,i=new Array(a),s=0;s<a;s++)i[s]=o[s];return r.next=7,e.apply(null,i);case 7:return r.abrupt("return",r.sent);case 8:return r.prev=8,n(),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[3,,8,11]])})))},writeLock:function(e){return(0,fe.Z)((0,ce.Z)().mark((function r(){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.writeLock();case 2:for(n=r.sent,r.prev=3,a=o.length,i=new Array(a),s=0;s<a;s++)i[s]=o[s];return r.next=7,e.apply(null,i);case 7:return r.abrupt("return",r.sent);case 8:return r.prev=8,n(),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[3,,8,11]])})))}},aw}var uw=_e("ipfs:mfs:utils:with-mfs-root");function cw(e,t){return lw.apply(this,arguments)}function lw(){return lw=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&r.signal&&r.signal.aborted)){e.next=2;break}throw Ee(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 2:return e.next=4,t.repo.datastore.open();case 4:return e.prev=4,e.next=7,t.repo.datastore.get(Nr);case 7:a=e.sent,n=Ue.CID.decode(a),e.next=27;break;case 11:if(e.prev=11,e.t0=e.catch(4),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:return uw("Creating new MFS root"),i=pt({Data:new Me({type:"directory"}).marshal(),Links:[]}),e.next=19,qn.sha256.digest(i);case 19:return s=e.sent,n=Ue.CID.createV0(s),e.next=23,t.repo.blocks.put(n,i);case 23:if(!(r&&r.signal&&r.signal.aborted)){e.next=25;break}throw Ee(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 25:return e.next=27,t.repo.datastore.put(Nr,n.bytes);case 27:return uw("Loaded MFS root /ipfs/".concat(n)),e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,null,[[4,11]])}))),lw.apply(this,arguments)}function fw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}var pw="ipfs",hw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cw(t,n);case 2:if(a=e.sent,i={entryType:"file"},s="",(s=(s=(s=Ue.CID.asCID(r)?"/ipfs/".concat(r):r.toString()).trim()).replace(/(\/\/+)/g,"/")).endsWith("/")&&s.length>1&&(s=s.substring(0,s.length-1)),s){e.next=11;break}throw Ee(new Error("paths must not be empty"),"ERR_NO_PATH");case 11:if("/"===s.substring(0,1)){e.next=13;break}throw Ee(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");case 13:return"/"===s.substring(s.length-1)&&(s=s.substring(0,s.length-1)),(o=fw(s))[0]===pw?(u=2===o.length?"/".concat(o.join("/")):"/".concat(o.slice(0,o.length-1).join("/")),i={type:"ipfs",depth:o.length-2,entryType:"file",mfsPath:"/".concat(o.join("/")),mfsDirectory:u,parts:o,path:"/".concat(o.join("/")),name:o[o.length-1]}):(c="/".concat(pw,"/").concat(a).concat(o.length?"/"+o.join("/"):""),l="/".concat(pw,"/").concat(a,"/").concat(o.slice(0,o.length-1).join("/")),i={type:"mfs",depth:o.length,entryType:"file",mfsDirectory:l,mfsPath:c,parts:o,path:"/".concat(o.join("/")),name:o[o.length-1]}),f="mfs"===i.type?i.mfsPath:i.path,e.prev=17,e.next=20,jd(f,t.repo.blocks,n);case 20:p=e.sent,i.cid=p.cid,i.mfsPath="/ipfs/".concat(p.path),i.entryType=p.type,i.content=p.content,"file"!==i.entryType&&"directory"!==i.entryType||"file"!==p.type&&"directory"!==p.type||(i.unixfs=p.unixfs),e.next=32;break;case 28:if(e.prev=28,e.t0=e.catch(17),"ERR_NOT_FOUND"===e.t0.code){e.next=32;break}throw e.t0;case 32:return i.exists=Boolean(i.cid),e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,null,[[17,28]])})));return function(t,r,n){return e.apply(this,arguments)}}(),dw=ge.bind({ignoreUndefined:!0}),vw=_e("ipfs:mfs:stat"),yw={withLocal:!1};function gw(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},n=dw(yw,n),vw("Fetching stats for ".concat(r)),t.next=5,hw(e,r,n);case 5:return a=t.sent,i=a.type,s=a.cid,o=a.mfsPath,u="ipfs"===i&&s?s:o,t.prev=10,t.next=13,jd(u,e.repo.blocks);case 13:c=t.sent,t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(10),"ERR_NOT_FOUND"!==t.t0.code){t.next=20;break}throw Ee(new Error("".concat(r," does not exist")),"ERR_NOT_FOUND");case 20:throw t.t0;case 21:if(mw[c.type]){t.next=23;break}throw new Error("Cannot stat codec ".concat(c.cid.code));case 23:return t.abrupt("return",mw[c.type](c));case 24:case"end":return t.stop()}}),t,null,[[10,16]])}))),t.apply(this,arguments)}return Rr((function(e){return t.apply(this,arguments)}))}var mw={raw:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}},file:function(e){var t={cid:e.cid,type:"file",size:e.unixfs.fileSize(),cumulativeSize:pt(e.node).length+(e.node.Links||[]).reduce((function(e,t){return e+(t.Tsize||0)}),0),blocks:e.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},directory:function(e){var t={cid:e.cid,type:"directory",size:0,cumulativeSize:pt(e.node).length+(e.node.Links||[]).reduce((function(e,t){return e+(t.Tsize||0)}),0),blocks:e.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},object:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}},identity:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}}},bw=_e("ipfs:mfs:utils:to-trail");function ww(e,t){return kw.apply(this,arguments)}function kw(){return(kw=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bw("Creating trail for path ".concat(r)),n=[],a=!1,i=!1,e.prev=4,o=hr(Md(r,t.repo.blocks));case 6:return e.next=8,o.next();case 8:if(!(a=!(u=e.sent).done)){e.next=14;break}c=u.value,n.push({name:c.name,cid:c.cid,size:c.size,type:c.type});case 11:a=!1,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),i=!0,s=e.t0;case 20:if(e.prev=20,e.prev=21,!a||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!i){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[4,16,20,30],[21,,25,29]])})))).apply(this,arguments)}var xw=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n,a){var i,s;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.codec||(a.codec=e),a.hasher||(a.hasher=qn.sha256),void 0===a.cidVersion&&(a.cidVersion=1),a.codec===e&&a.hasher!==qn.sha256&&(a.cidVersion=1),t.next=6,a.hasher.digest(r);case 6:if(i=t.sent,s=Ue.CID.create(a.cidVersion,a.codec.code,i),a.onlyHash){t.next=11;break}return t.next=11,n.put(s,r,{signal:a.signal});case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),_w=Vp.code;function Ew(e){return Sw.apply(this,arguments)}function Sw(){return(Sw=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vp.encode(t);case 2:return e.abrupt("return",e.sent.slice(0,8).reverse());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Aw=function(){function e(t,r){(0,pe.Z)(this,e),this.options=r||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}return(0,he.Z)(e,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this)}},{key:"eachChildSeries",value:function(){return ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},{key:"flush",value:function(e){return ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}]),e}(),Iw=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this,e,n))._bucket=(0,Rh.createHAMT)({hashFn:Ew,bits:8}),a}return(0,he.Z)(r,[{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bucket.put(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return this._bucket.get(e)}},{key:"childCount",value:function(){return this._bucket.leafCount()}},{key:"directChildrenCount",value:function(){return this._bucket.childrenCount()}},{key:"onlyChild",value:function(){return this._bucket.onlyChild()}},{key:"eachChildSeries",value:function(){var e=this;return ye((0,ce.Z)().mark((function t(){var r,n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=hr(e._bucket.eachLeafSeries());case 4:return t.next=6,pr(i.next());case 6:if(!(r=!(s=t.sent).done)){t.next=13;break}return o=s.value,u=o.key,c=o.value,t.next=10,{key:u,child:c};case 10:r=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),n=!0,a=t.t0;case 19:if(t.prev=19,t.prev=20,!r||null==i.return){t.next=24;break}return t.next=24,pr(i.return());case 24:if(t.prev=24,!n){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"flush",value:function(e){var t=this;return ye((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(ia(hr(Cw(t._bucket,e,t,t.options)),pr),"t0",1);case 1:case"end":return r.stop()}}),r)})))()}}]),r}(Aw);function Cw(e,t,r,n){return Zw.apply(this,arguments)}function Zw(){return Zw=ye((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A,I,C,Z,R,T,D,P,N,O;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t._children,s=[],o=0,u=0;case 4:if(!(u<i.length)){e.next=97;break}if(c=i.get(u)){e.next=8;break}return e.abrupt("continue",94);case 8:if(l=u.toString(16).toUpperCase().padStart(2,"0"),!(c instanceof Rh.Bucket)){e.next=49;break}return f=void 0,p=!1,h=!1,e.prev=13,e.t0=hr,e.next=17,pr(Cw(c,r,null,a));case 17:e.t1=e.sent,v=(0,e.t0)(e.t1);case 19:return e.next=21,pr(v.next());case 21:if(!(p=!(y=e.sent).done)){e.next=27;break}g=y.value,f=g;case 24:p=!1,e.next=19;break;case 27:e.next=33;break;case 29:e.prev=29,e.t2=e.catch(13),h=!0,d=e.t2;case 33:if(e.prev=33,e.prev=34,!p||null==v.return){e.next=38;break}return e.next=38,pr(v.return());case 38:if(e.prev=38,!h){e.next=41;break}throw d;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(f){e.next=45;break}throw new Error("Could not flush sharded directory, no subshard found");case 45:s.push({Name:l,Tsize:f.size,Hash:f.cid}),o+=f.size,e.next=94;break;case 49:if("function"!==typeof c.value.flush){e.next=87;break}m=c.value,b=void 0,w=!1,k=!1,e.prev=54,_=hr(m.flush(r));case 56:return e.next=58,pr(_.next());case 58:if(!(w=!(E=e.sent).done)){e.next=66;break}return S=E.value,b=S,e.next=63,b;case 63:w=!1,e.next=56;break;case 66:e.next=72;break;case 68:e.prev=68,e.t3=e.catch(54),k=!0,x=e.t3;case 72:if(e.prev=72,e.prev=73,!w||null==_.return){e.next=77;break}return e.next=77,pr(_.return());case 77:if(e.prev=77,!k){e.next=80;break}throw x;case 80:return e.finish(77);case 81:return e.finish(72);case 82:A=l+c.key,s.push({Name:A,Tsize:b.size,Hash:b.cid}),o+=b.size,e.next=94;break;case 87:if((I=c.value).cid){e.next=90;break}return e.abrupt("continue",94);case 90:C=l+c.key,Z=I.size,s.push({Name:C,Tsize:Z,Hash:I.cid}),o+=Z;case 94:u++,e.next=4;break;case 97:return R=Uint8Array.from(i.bitField().reverse()),T=new Me({type:"hamt-sharded-directory",data:R,fanout:t.tableSize(),hashType:_w,mtime:n&&n.mtime,mode:n&&n.mode}),D={Data:T.marshal(),Links:s},P=pt(st(D)),e.next=103,pr(xw(P,r,a));case 103:return N=e.sent,O=P.length+o,e.next=107,{cid:N,node:D,size:O};case 107:case"end":return e.stop()}}),e,null,[[13,29,33,43],[34,,38,42],[54,68,72,82],[73,,77,81]])}))),Zw.apply(this,arguments)}var Rw=_e("ipfs:mfs:core:utils:hamt-utils"),Tw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.parent.Data){e.next=2;break}throw new Error("Could not update HAMT directory because parent had no data");case 2:return i=Uint8Array.from(n._children.bitField().reverse()),s=Me.unmarshal(a.parent.Data),o=new Me({type:"hamt-sharded-directory",data:i,fanout:n.tableSize(),hashType:_w,mode:s.mode,mtime:s.mtime}),e.next=7,t.hashers.getHasher(a.hashAlg);case 7:return u=e.sent,c={Data:o.marshal(),Links:r.sort((function(e,t){return(e.Name||"").localeCompare(t.Name||"")}))},l=pt(c),e.next=12,u.digest(l);case 12:if(f=e.sent,p=Ue.CID.create(a.cidVersion,ft,f),!a.flush){e.next=17;break}return e.next=17,t.repo.blocks.put(p,l);case 17:return e.abrupt("return",{node:c,cid:p,size:r.reduce((function(e,t){return e+(t.Tsize||0)}),l.length)});case 18:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Dw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i){var s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Rh.Bucket({hash:n._options.hash,bits:n._options.bits},a,i),a._putObjectAt(i,s),e.next=4,Nw(t,r,s,n);case 4:return e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),Pw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,Rh.createHAMT)({hashFn:Ew,bits:8}),e.next=3,Promise.all(t.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(n=t.Name||"").length){e.next=6;break}return a=parseInt(n,16),i=new Rh.Bucket({hash:r._options.hash,bits:r._options.bits},r,a),r._putObjectAt(a,i),e.abrupt("return",Promise.resolve());case 6:return e.abrupt("return",r.put(n.substring(2),{size:t.Tsize,cid:t.Hash}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(i=r.Name||"").length){e.next=13;break}return Rw("Populating sub bucket",i),s=parseInt(i,16),e.next=6,t.repo.blocks.get(r.Hash);case 6:return o=e.sent,u=ht(o),c=new Rh.Bucket({hash:a._options.hash,bits:a._options.bits},n,s),n._putObjectAt(s,c),e.next=12,Nw(t,u.Links,c,a);case 12:return e.abrupt("return",Promise.resolve());case 13:return e.abrupt("return",a.put(i.substring(2),{size:r.Tsize,cid:r.Hash}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Ow=function(e){return e.toString(16).toUpperCase().padStart(2,"0").substring(0,2)},Bw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pw(n.Links);case 2:return a=e.sent,e.next=5,a._findNewBucketAndPos(r);case 5:for(i=e.sent,s=[{bucket:i.bucket,prefix:Ow(i.pos)}],o=i.bucket;o!==a;)s.push({bucket:o,prefix:Ow(o._posAtParent)}),o=o._parent;s.reverse(),s[0].node=n,u=(0,ce.Z)().mark((function e(n){var i,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=s[n]).node){e.next=3;break}throw new Error("Could not generate HAMT path");case 3:if(o=i.node.Links.filter((function(e){return(e.Name||"").substring(0,2)===i.prefix})).pop()){e.next=7;break}return Rw("Link ".concat(i.prefix).concat(r," will be added")),e.abrupt("return","continue");case 7:if(o.Name!=="".concat(i.prefix).concat(r)){e.next=10;break}return Rw("Link ".concat(i.prefix).concat(r," will be replaced")),e.abrupt("return","continue");case 10:return Rw("Found subshard ".concat(i.prefix)),e.next=13,t.repo.blocks.get(o.Hash);case 13:if(u=e.sent,c=ht(u),s[n+1]){e.next=24;break}return Rw("Loaded new subshard ".concat(i.prefix)),e.next=19,Dw(t,c.Links,a,i.bucket,parseInt(i.prefix,16));case 19:return e.next=21,a._findNewBucketAndPos(r);case 21:return l=e.sent,s.push({bucket:l.bucket,prefix:Ow(l.pos),node:c}),e.abrupt("return","continue");case 24:return f=s[n+1],e.next=27,Nw(t,c.Links,f.bucket,a);case 27:f.node=c;case 28:case"end":return e.stop()}}),e)})),c=0;case 13:if(!(c<s.length)){e.next=21;break}return e.delegateYield(u(c),"t0",15);case 15:if("continue"!==e.t0){e.next=18;break}return e.abrupt("continue",18);case 18:c++,e.next=13;break;case 21:return e.next=23,a.put(r,!0);case 23:return s.reverse(),e.abrupt("return",{rootBucket:a,path:s});case 25:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Lw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>2&&void 0!==o[2]?o[2]:{},a=new Iw({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:n.mtime,mode:n.mode},n),i=0;case 3:if(!(i<r.length)){e.next=9;break}return e.next=6,a._bucket.put(r[i].name,{size:r[i].size,cid:r[i].cid});case 6:i++,e.next=3;break;case 9:return e.next=11,aa(a.flush(t.repo.blocks));case 11:if(s=e.sent){e.next=14;break}throw new Error("Flushing shard yielded no result");case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Mw=_e("ipfs:mfs:core:utils:add-link");function Uw(e,t){return jw.apply(this,arguments)}function jw(){return(jw=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.parent,!r.parentCid){e.next=12;break}if(null!==(a=Ue.CID.asCID(r.parentCid))){e.next=5;break}throw Ee(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");case 5:if(a.code===ft){e.next=7;break}throw Ee(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");case 7:return Mw("Loading parent node ".concat(a)),e.next=10,t.repo.blocks.get(a);case 10:i=e.sent,n=ht(i);case 12:if(n){e.next=14;break}throw Ee(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");case 14:if(r.cid){e.next=16;break}throw Ee(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");case 16:if(r.name){e.next=18;break}throw Ee(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");case 18:if(r.size||0===r.size){e.next=20;break}throw Ee(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");case 20:if(n.Data){e.next=22;break}throw Ee(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");case 22:if("hamt-sharded-directory"!==(s=Me.unmarshal(n.Data)).type){e.next=26;break}return Mw("Adding link to sharded directory"),e.abrupt("return",Vw(t,(0,le.Z)((0,le.Z)({},r),{},{parent:n})));case 26:if(!(n.Links.length>=r.shardSplitThreshold)){e.next=29;break}return Mw("Converting directory to sharded directory"),e.abrupt("return",Fw(t,(0,le.Z)((0,le.Z)({},r),{},{parent:n,mtime:s.mtime,mode:s.mode})));case 29:return Mw("Adding ".concat(r.name," (").concat(r.cid,") to regular directory")),e.abrupt("return",zw(t,(0,le.Z)((0,le.Z)({},r),{},{parent:n})));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lw(t,r.parent.Links.map((function(e){return{name:e.Name||"",size:e.Tsize||0,cid:e.Hash}})).concat({name:r.name,size:r.size,cid:r.cid}),r);case 2:return n=e.sent,Mw("Converted directory to sharded directory ".concat(n.cid)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),zw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=r.parent.Links.filter((function(e){return e.Name!==r.name}))).push({Name:r.name,Tsize:r.size,Hash:r.cid}),r.parent.Data){e.next=4;break}throw Ee(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");case 4:return(a=Me.unmarshal(r.parent.Data)).mtime?(s=Date.now(),o=Math.floor(s/1e3),a.mtime={secs:o,nsecs:1e3*(s-1e3*o)},i=a.marshal()):i=r.parent.Data,r.parent=st({Data:i,Links:n}),e.next=9,t.hashers.getHasher(r.hashAlg);case 9:return u=e.sent,c=pt(r.parent),e.next=13,u.digest(c);case 13:if(l=e.sent,f=Ue.CID.create(r.cidVersion,ft,l),!r.flush){e.next=18;break}return e.next=18,t.repo.blocks.put(f,c);case 18:return e.abrupt("return",{node:r.parent,cid:f,size:c.length});case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Vw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kw(t,r);case 2:return n=e.sent,a=n.shard,i=n.path,e.next=7,aa(a.flush(t.repo.blocks));case 7:if(s=e.sent){e.next=10;break}throw new Error("No result from flushing shard");case 10:return e.next=12,t.repo.blocks.get(s.cid);case 12:if(o=e.sent,u=ht(o),c=r.parent.Links.filter((function(e){return(e.Name||"").substring(0,2)!==i[0].prefix})),l=u.Links.find((function(e){return(e.Name||"").substring(0,2)===i[0].prefix}))){e.next=18;break}throw new Error("No link found with prefix ".concat(i[0].prefix));case 18:return c.push(l),e.abrupt("return",Tw(t,c,i[0].bucket,r));case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Kw=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:r.name,cid:r.cid,size:r.size},r.parent.Data){e.next=3;break}throw Ee(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");case 3:return e.next=5,Pw(r.parent.Links);case 5:return a=e.sent,i=Me.unmarshal(r.parent.Data),(s=new Iw({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:i.mode},r))._bucket=a,i.mtime&&(s.mtime={secs:Math.round(Date.now()/1e3)}),e.next=12,a._findNewBucketAndPos(n.name);case 12:o=e.sent,(u=qw(o))[0].node=r.parent,c=0,l=(0,ce.Z)().mark((function e(){var r,i,s,o,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u[c],c++,i=r.node){e.next=5;break}throw new Error("Segment had no node");case 5:if(s=i.Links.find((function(e){return(e.Name||"").substring(0,2)===r.prefix}))){e.next=10;break}return Mw("Link ".concat(r.prefix).concat(n.name," will be added")),c=u.length,e.abrupt("return","break");case 10:if(s.Name!=="".concat(r.prefix).concat(n.name)){e.next=14;break}return Mw("Link ".concat(r.prefix).concat(n.name," will be replaced")),c=u.length,e.abrupt("return","break");case 14:if(!((s.Name||"").length>2)){e.next=18;break}return Mw("Link ".concat(s.Name," ").concat(s.Hash," will be replaced with a subshard")),c=u.length,e.abrupt("return","break");case 18:return Mw("Found subshard ".concat(r.prefix)),e.next=21,t.repo.blocks.get(s.Hash);case 21:if(o=e.sent,l=ht(o),u[c]){e.next=32;break}return Mw("Loaded new subshard ".concat(r.prefix)),e.next=27,Dw(t,l.Links,a,r.bucket,parseInt(r.prefix,16));case 27:return e.next=29,a._findNewBucketAndPos(n.name);case 29:return f=e.sent,u.push({bucket:f.bucket,prefix:Ow(f.pos),node:l}),e.abrupt("return","break");case 32:return p=u[c],e.next=35,Nw(t,l.Links,p.bucket,a);case 35:p.node=l;case 36:case"end":return e.stop()}}),e)}));case 17:if(!(c<u.length)){e.next=24;break}return e.delegateYield(l(),"t0",19);case 19:if("break"!==e.t0){e.next=22;break}return e.abrupt("break",24);case 22:e.next=17;break;case 24:return e.next=26,s._bucket.put(n.name,{size:n.size,cid:n.cid});case 26:return e.abrupt("return",{shard:s,path:u});case 27:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),qw=function(e){for(var t=[{bucket:e.bucket,prefix:Ow(e.pos)}],r=e.bucket._parent,n=e.bucket._posAtParent;r;)t.push({bucket:r,prefix:Ow(n)}),n=r._posAtParent,r=r._parent;return t.reverse(),t},Hw=_e("ipfs:mfs:utils:update-tree"),Ww={shardSplitThreshold:1e3};function Gw(e,t,r){return Yw.apply(this,arguments)}function Yw(){return(Yw=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p,h,d,v,y;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.assign({},Ww,n),Hw("Trail",r),r=r.slice().reverse(),a=0,s=!1,o=!1,e.prev=6,c=hr(t.repo.blocks.getMany(r.map((function(e){return e.cid}))));case 8:return e.next=10,c.next();case 10:if(!(s=!(l=e.sent).done)){e.next=26;break}if(f=l.value,p=ht(f),h=r[a].cid,d=r[a].name,a++,i){e.next=19;break}return i={cid:h,name:d,size:f.length},e.abrupt("continue",23);case 19:return e.next=21,Uw(t,{parent:p,name:i.name,cid:i.cid,size:i.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});case 21:v=e.sent,i={cid:v.cid,name:d,size:v.size};case 23:s=!1,e.next=8;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(6),o=!0,u=e.t0;case 32:if(e.prev=32,e.prev=33,!s||null==c.return){e.next=37;break}return e.next=37,c.return();case 37:if(e.prev=37,!o){e.next=40;break}throw u;case 40:return e.finish(37);case 41:return e.finish(32);case 42:return y=i.cid,Hw("Final CID ".concat(y)),e.abrupt("return",y);case 45:case"end":return e.stop()}}),e,null,[[6,28,32,42],[33,,37,41]])})))).apply(this,arguments)}var Qw=_e("ipfs:mfs:utils:update-mfs-root");function Jw(e,t,r){return Xw.apply(this,arguments)}function Xw(){return(Xw=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.signal&&n.signal.aborted)){e.next=2;break}throw Ee(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 2:return Qw("New MFS root will be ".concat(r)),e.next=5,t.repo.datastore.put(Nr,r.bytes);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $w(e,t,r){return ek.apply(this,arguments)}function ek(){return ek=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Me({type:r,mode:n.mode,mtime:n.mtime}),e.next=3,t.hashers.getHasher(n.hashAlg);case 3:return i=e.sent,s={Data:a.marshal(),Links:[]},o=pt(s),e.next=8,i.digest(o);case 8:if(u=e.sent,c=Ue.CID.create(n.cidVersion,ft,u),!n.flush){e.next=13;break}return e.next=13,t.repo.blocks.put(c,o);case 13:return e.abrupt("return",{cid:c,node:s});case 14:case"end":return e.stop()}}),e)}))),ek.apply(this,arguments)}var tk=ge.bind({ignoreUndefined:!0}),rk=_e("ipfs:mfs:mkdir"),nk={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function ak(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:{},a=tk(nk,n),r){t.next=4;break}throw new Error("no path given to Mkdir");case 4:if("/"!==(r=r.trim())){t.next=9;break}if(!a.parents){t.next=8;break}return t.abrupt("return");case 8:throw Ee(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH");case 9:if("/"===r.substring(0,1)){t.next=11;break}throw Ee(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");case 11:if(rk("Creating ".concat(r)),"ipfs"!==(i=fw(r))[0]){t.next=15;break}throw Ee(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");case 15:return t.next=17,cw(e,a);case 17:return s=t.sent,u=[],t.next=21,$w(e,"directory",a);case 21:c=t.sent,l=0;case 23:if(!(l<=i.length)){t.next=52;break}return f=i.slice(0,l),p="/ipfs/".concat(s,"/").concat(f.join("/")),t.prev=26,t.next=29,jd(p,e.repo.blocks);case 29:if("file"===(o=t.sent).type||"directory"===o.type){t.next=32;break}throw Ee(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 32:if(l!==i.length){t.next=36;break}if(!a.parents){t.next=35;break}return t.abrupt("return");case 35:throw Ee(new Error("file already exists"),"ERR_ALREADY_EXISTS");case 36:u.push({name:o.name,cid:o.cid}),t.next=49;break;case 39:if(t.prev=39,t.t0=t.catch(26),"ERR_NOT_FOUND"!==t.t0.code){t.next=48;break}if(!(l<i.length)||a.parents){t.next=44;break}throw Ee(new Error("Intermediate directory path ".concat(p," does not exist, use the -p flag to create it")),"ERR_NOT_FOUND");case 44:return t.next=46,ik(e,f[f.length-1],c,u[u.length-1],u,a);case 46:t.next=49;break;case 48:throw t.t0;case 49:l++,t.next=23;break;case 52:return t.next=54,Gw(e,u,a);case 54:return h=t.sent,t.next=57,Jw(e,h,a);case 57:case"end":return t.stop()}}),t,null,[[26,39]])}))),t.apply(this,arguments)}return Rr((function(e){return t.apply(this,arguments)}))}var ik=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i,s){var o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rk("Adding empty dir called ".concat(r," to ").concat(a.cid)),e.next=3,Uw(t,{parent:a.node,parentCid:a.cid,size:0,cid:n.cid,name:r,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});case 3:o=e.sent,i[i.length-1].cid=o.cid,i.push({name:r,cid:n.cid});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,s){return e.apply(this,arguments)}}(),sk=ge.bind({ignoreUndefined:!0}),ok=_e("ipfs:mfs:cp"),uk={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function ck(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u,c,l,f,p,h,d,v=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=v.length>2&&void 0!==v[2]?v[2]:{},i=sk(uk,a),Array.isArray(r)||(r=[r]),t.next=5,Promise.all(r.map((function(t){return hw(e,t,i)})));case 5:return s=t.sent,t.next=8,hw(e,n,i);case 8:if(o=t.sent,s.length&&o){t.next=11;break}throw Ee(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");case 11:if(u=s.find((function(e){return!e.exists})),!u){t.next=14;break}throw Ee(new Error("".concat(u.path," does not exist")),"ERR_INVALID_PARAMS");case 14:if(c=lk(o),!o.exists){t.next=21;break}if(ok("Destination exists"),1!==s.length||c){t.next=19;break}throw Ee(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS");case 19:t.next=50;break;case 21:if(ok("Destination does not exist"),!(s.length>1)){t.next=32;break}if(i.parents){t.next=25;break}throw Ee(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");case 25:return t.next=27,ak(e)(o.path,i);case 27:return t.next=29,hw(e,o.path,i);case 29:o=t.sent,t.next=50;break;case 32:if(!(o.parts.length>1)){t.next=50;break}return l="/".concat(o.parts.slice(0,-1).join("/")),t.prev=34,t.next=37,gw(e)(l,i);case 37:t.next=50;break;case 39:if(t.prev=39,t.t0=t.catch(34),"ERR_NOT_FOUND"===t.t0.code){t.next=43;break}throw t.t0;case 43:if(i.parents){t.next=45;break}throw Ee(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");case 45:return t.next=47,ak(e)(l,i);case 47:return t.next=49,hw(e,o.path,i);case 49:o=t.sent;case 50:return f=lk(o)?o.mfsPath:o.mfsDirectory,t.next=53,ww(e,f);case 53:if(p=t.sent,1!==s.length){t.next=61;break}if(h=s.pop()){t.next=58;break}throw Ee(new Error("could not find source"),"ERR_INVALID_PARAMS");case 58:return d=c?h.name:o.name,ok("Only one source, copying to destination ".concat(c?"directory":"file"," ").concat(d)),t.abrupt("return",fk(e,h,d,p,i));case 61:return ok("Multiple sources, wrapping in a directory"),t.abrupt("return",pk(e,s,o,p,i));case 63:case"end":return t.stop()}}),t,null,[[34,39]])}))),t.apply(this,arguments)}return Rr((function(e,r){return t.apply(this,arguments)}))}var lk=function(e){return e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory")},fk=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.pop()){e.next=3;break}throw Ee(new Error("destination had no parent"),"ERR_INVALID_PARAMS");case 3:return e.next=5,hk(t,r,n,s,i);case 5:return s=e.sent,a.push(s),e.next=9,Gw(t,a,i);case 9:return o=e.sent,e.next=12,Jw(t,o,i);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),pk=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<r.length)){e.next=9;break}return o=r[s],e.next=5,hk(t,o,o.name,n,i);case 5:n=e.sent;case 6:s++,e.next=1;break;case 9:return a[a.length-1]=n,e.next=12,Gw(t,a,i);case 12:return u=e.sent,e.next=15,Jw(t,u,i);case 15:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),hk=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.repo.blocks.get(r.cid);case 2:return s=e.sent,e.next=5,Uw(t,{parentCid:a.cid,size:s.length,cid:r.cid,name:n,hashAlg:i.hashAlg,cidVersion:i.cidVersion,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold});case 5:return o=e.sent,u=o.node,c=o.cid,l=o.size,a.node=u,a.cid=c,a.size=l,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),dk=_e("ipfs:mfs:core:utils:remove-link");function vk(e,t){return yk.apply(this,arguments)}function yk(){return(yk=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.parent,!r.parentCid){e.next=10;break}if(null!==(a=Ue.CID.asCID(r.parentCid))){e.next=5;break}throw Ee(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");case 5:return dk("Loading parent node ".concat(a)),e.next=8,t.repo.blocks.get(a);case 8:i=e.sent,n=ht(i);case 10:if(n){e.next=12;break}throw Ee(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");case 12:if(r.name){e.next=14;break}throw Ee(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");case 14:if(n.Data){e.next=16;break}throw Ee(new Error("Parent node had no data"),"ERR_INVALID_NODE");case 16:if("hamt-sharded-directory"!==Me.unmarshal(n.Data).type){e.next=20;break}return dk("Removing ".concat(r.name," from sharded directory")),e.abrupt("return",mk(t,(0,le.Z)((0,le.Z)({},r),{},{parent:n})));case 20:return dk("Removing link ".concat(r.name," regular directory")),e.abrupt("return",gk(t,(0,le.Z)((0,le.Z)({},r),{},{parent:n})));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gk=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.parent.Links=r.parent.Links.filter((function(e){return e.Name!==r.name})),e.next=3,pt(r.parent);case 3:return n=e.sent,e.next=6,t.hashers.getHasher(r.hashAlg);case 6:return a=e.sent,e.next=9,a.digest(n);case 9:return i=e.sent,s=Ue.CID.create(r.cidVersion,ft,i),e.next=13,t.repo.blocks.put(s,n);case 13:return dk("Updated regular directory ".concat(s)),e.abrupt("return",{node:r.parent,cid:s});case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),mk=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bw(t,r.name,r.parent);case 2:return n=e.sent,a=n.rootBucket,i=n.path,e.next=7,a.del(r.name);case 7:return e.next=9,bk(t,i,r.name,r);case 9:return s=e.sent,o=s.node,e.abrupt("return",Tw(t,o.Links,a,r));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),bk=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p,h,d,v;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.pop()){e.next=3;break}throw Ee(new Error("Could not find parent"),"EINVALIDPARENT");case 3:if(s=i.bucket,o=i.prefix,u=i.node){e.next=6;break}throw Ee(new Error("Could not find parent"),"EINVALIDPARENT");case 6:if(c=u.Links.find((function(e){return(e.Name||"").substring(0,2)===o}))){e.next=9;break}throw Ee(new Error("No link found with prefix ".concat(o," for file ").concat(n)),"ERR_NOT_FOUND");case 9:if(c.Name!=="".concat(o).concat(n)){e.next=15;break}return dk("Removing existing link ".concat(c.Name)),l=u.Links.filter((function(e){return e.Name!==c.Name})),e.next=14,s.del(n);case 14:return e.abrupt("return",Tw(t,l,s,a));case 15:return dk("Descending into sub-shard ".concat(c.Name," for ").concat(o).concat(n)),e.next=18,bk(t,r,n,a);case 18:return f=e.sent,p=f.cid,h=f.size,d=o,1===f.node.Links.length&&(dk("Removing subshard for ".concat(o)),v=f.node.Links[0],d="".concat(o).concat((v.Name||"").substring(2)),p=v.Hash,h=v.Tsize||0),dk("Updating shard ".concat(o," with name ").concat(d)),e.abrupt("return",wk(t,s,u,o,d,h,p,a));case 25:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),wk=function(e,t,r,n,a,i,s,o){var u=r.Links.filter((function(e){return e.Name!==n}));return u.push({Name:a,Tsize:i,Hash:s}),Tw(e,u,t,o)},kk=ge.bind({ignoreUndefined:!0}),xk={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function _k(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=kk(xk,n),Array.isArray(r)||(r=[r]),t.next=5,Promise.all(r.map((function(t){return hw(e,t,a)})));case 5:if((i=t.sent).length){t.next=8;break}throw Ee(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");case 8:i.forEach((function(e){if("/"===e.path)throw Ee(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")})),s=(0,v.Z)(i),t.prev=10,s.s();case 12:if((o=s.n()).done){t.next=18;break}return u=o.value,t.next=16,Ek(e,u.path,a);case 16:t.next=12;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),s.e(t.t0);case 23:return t.prev=23,s.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[10,20,23,26]])}))),t.apply(this,arguments)}return Rr((function(e){return t.apply(this,arguments)}))}var Ek=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hw(t,r,n);case 2:return a=e.sent,e.next=5,ww(t,a.mfsPath);case 5:if(i=e.sent,s=i[i.length-1],i.pop(),o=i[i.length-1]){e.next=11;break}throw Ee(new Error("".concat(r," does not exist")),"ERR_NOT_FOUND");case 11:if("directory"!==s.type||n.recursive){e.next=13;break}throw Ee(new Error("".concat(r," is a directory, use -r to remove directories")),"ERR_WAS_DIR");case 13:return e.next=15,vk(t,{parentCid:o.cid,name:s.name,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});case 15:return u=e.sent,c=u.cid,o.cid=c,e.next=20,Gw(t,i,n);case 20:return l=e.sent,e.next=23,Jw(t,l,n);case 23:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Sk=ge.bind({ignoreUndefined:!0}),Ak=_e("ipfs:mfs:touch"),Ik={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function Ck(e,t,r){t||(t=0);var n=e.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!n)throw new Error("Invalid file mode: ".concat(e));var a=(0,y.Z)(n,4),i=a[1],s=a[2],o=a[3];"a"!==i&&i||(i="ugo");var u=function(e,t,r){var n=0;return(e.includes("x")||e.includes("X")&&(r||1&t||8&t||64&t))&&(n+=1),e.includes("w")&&(n+=2),e.includes("r")&&(n+=4),n}(o,t,r);return u=function(e,t){var r=0;return e.includes("u")&&(r+=t<<6),e.includes("g")&&(r+=t<<3),e.includes("o")&&(r+=t),r}(i,u),u=function(e,t,r){return t.includes("t")&&(r+=parseInt("1000",8)),t.includes("s")&&(e.includes("u")&&(r+=parseInt("4000",8)),e.includes("g")&&(r+=parseInt("2000",8))),r}(i,o,u),"="===s?(i.includes("u")&&(t&=parseInt("7077",8),t|=u),i.includes("g")&&(t&=parseInt("7707",8),t|=u),i.includes("o")&&(t&=parseInt("7770",8),t|=u),t):"+"===s?u|t:"-"===s?u^t:t}function Zk(e,t){if(e instanceof String||"string"===typeof e){var r="".concat(e);e=r.match(/^\d+$/g)?parseInt(r,8):0+r.split(",").reduce((function(e,r){return Ck(r,e,t.isDirectory())}),t.mode||0)}return e}var Rk=ge.bind({ignoreUndefined:!0}),Tk={};var Dk=ge.bind({ignoreUndefined:!0}),Pk={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};var Nk=ge.bind({ignoreUndefined:!0}),Ok=_e("ipfs:mfs:touch"),Bk={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};var Lk=ge.bind({ignoreUndefined:!0}),Mk={offset:0,length:1/0};var Uk=_e("ipfs:mfs:utils:to-async-iterator");function jk(e){if(!e)throw Ee(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if(("string"===typeof e||e instanceof String)&&(Uk("Content was a string"),e=(0,fr.fromString)(e.toString())),e.length)return Uk("Content was array-like"),(0,hp.Z)({},Symbol.asyncIterator,(0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t)})));if(e[Symbol.asyncIterator])return Uk("Content was an async iterator"),e;if(e[Symbol.iterator])return Uk("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob){Uk("Content was an HTML5 Blob");var t=0,r={next:function(){return t>e.size?{done:!0}:new Promise((function(r,n){var a=e.slice(t,Or);t+=Or;var i=new global.FileReader;i.addEventListener("loadend",(function e(t){if(i.removeEventListener("loadend",e,!1),t.error)return n(t.error);r({done:!1,value:new Uint8Array(i.result)})})),i.readAsArrayBuffer(a)}))}};return(0,hp.Z)({},Symbol.asyncIterator,(function(){return r}))}throw Ee(new Error("Don't know how to convert ".concat(e," into an async iterator")),"ERR_INVALID_PARAMS")}var Fk=ge.bind({ignoreUndefined:!0}),zk=_e("ipfs:mfs:write"),Vk={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:function(e,t){},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};var Kk=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i){var s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qk(t,n,a,i);case 2:return s=e.sent,e.next=5,ow().writeLock((0,fe.Z)((0,ce.Z)().mark((function e(){var n,a,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=fw(r),null!=(a=n.pop())){e.next=4;break}throw Ee(new Error("source does not exist"),"ERR_NO_EXIST");case 4:return o=!1,e.prev=5,e.next=8,gw(t)("/".concat(n.join("/")),i);case 8:o=!0,e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(5),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:if(o){e.next=18;break}return e.next=18,ak(t)("/".concat(n.join("/")),i);case 18:return e.next=20,hw(t,r,i);case 20:return u=e.sent,e.next=23,ww(t,u.mfsDirectory);case 23:if(c=e.sent,l=c[c.length-1]){e.next=27;break}throw Ee(new Error("directory does not exist"),"ERR_NO_EXIST");case 27:if(l.type&&l.type.includes("directory")){e.next=29;break}throw Ee(new Error("cannot write to ".concat(l.name,": Not a directory")),"ERR_NOT_A_DIRECTORY");case 29:return e.next=31,t.repo.blocks.get(l.cid);case 31:return f=e.sent,p=ht(f),e.next=35,Uw(t,{parent:p,name:a,cid:s.cid,size:s.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,hashAlg:i.hashAlg,cidVersion:i.cidVersion});case 35:return h=e.sent,l.cid=h.cid,e.next=39,Gw(t,c,i);case 39:return d=e.sent,e.next=42,Jw(t,d,i);case 42:case"end":return e.stop()}}),e,null,[[5,11]])}))))();case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),qk=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.exists?zk("Overwriting file ".concat(n.cid," offset ").concat(a.offset," length ").concat(a.length)):zk("Writing file offset ".concat(a.offset," length ").concat(a.length)),i=[],a.offset>0&&(n.unixfs?(zk("Writing first ".concat(a.offset," bytes of original file")),i.push((function(){return n.content({offset:0,length:a.offset})})),n.unixfs.fileSize()<a.offset&&(s=a.offset-n.unixfs.fileSize(),zk("Writing zeros for extra ".concat(s," bytes")),i.push(Wk(s)))):(zk("Writing zeros for first ".concat(a.offset," bytes")),i.push(Wk(a.offset)))),i.push(Hk(r,a.length)),o=Yk(Gk(i),(function(e){if(n.unixfs&&!a.truncate){var t=n.unixfs.fileSize();if(t>e)return zk("Writing last ".concat(t-e," of ").concat(t," bytes from original file starting at offset ").concat(e)),n.content({offset:e});zk("Not writing last bytes from original file")}return(0,hp.Z)({},Symbol.asyncIterator,ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))})),void 0!==a.mode&&null!==a.mode?u=Be(a.mode):n&&n.unixfs&&(u=n.unixfs.mode),null!=a.mtime?c=Le(a.mtime):n&&n.unixfs&&(c=n.unixfs.mtime),e.next=9,t.hashers.getHasher(a.hashAlg);case 9:return l=e.sent,e.next=12,aa(Wh([{content:o,mode:u,mtime:c}],t.repo.blocks,{progress:a.progress,hasher:l,cidVersion:a.cidVersion,strategy:a.strategy,rawLeaves:a.rawLeaves,reduceSingleLeafToSelf:a.reduceSingleLeafToSelf,leafType:a.leafType}));case 12:if(f=e.sent){e.next=15;break}throw Ee(new Error("cannot write to ".concat(parent.name)),"ERR_COULD_NOT_WRITE");case 15:return zk("Wrote ".concat(f.cid)),e.abrupt("return",{cid:f.cid,size:f.size});case 17:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Hk=function(e,t){return function(){var r=ye((0,ce.Z)().mark((function r(){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0,a=!1,i=!1,r.prev=3,o=hr(e);case 5:return r.next=7,pr(o.next());case 7:if(!(a=!(u=r.sent).done)){r.next=19;break}if(c=u.value,!((n+=c.length)>t)){r.next=14;break}return r.next=13,c.slice(0,t-n);case 13:return r.abrupt("return");case 14:return r.next=16,c;case 16:a=!1,r.next=5;break;case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(3),i=!0,s=r.t0;case 25:if(r.prev=25,r.prev=26,!a||null==o.return){r.next=30;break}return r.next=30,pr(o.return());case 30:if(r.prev=30,!i){r.next=33;break}throw s;case 33:return r.finish(30);case 34:return r.finish(25);case 35:case"end":return r.stop()}}),r,null,[[3,21,25,35],[26,,30,34]])})));return function(){return r.apply(this,arguments)}}()},Wk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or,r=new Uint8Array(t);function n(){return a.apply(this,arguments)}function a(){return(a=ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,r.slice();case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Hk(n(),e)},Gk=function(){var e=ye((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=6;break}return e.delegateYield(ia(hr(t[r]()),pr),"t0",3);case 3:r++,e.next=1;break;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yk=function(){var e=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h,d,v;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=!1,i=!1,e.prev=3,o=hr(t);case 5:return e.next=7,pr(o.next());case 7:if(!(a=!(u=e.sent).done)){e.next=15;break}return c=u.value,n+=c.length,e.next=12,c;case 12:a=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),i=!0,s=e.t0;case 21:if(e.prev=21,e.prev=22,!a||null==o.return){e.next=26;break}return e.next=26,pr(o.return());case 26:if(e.prev=26,!i){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(21);case 31:l=!1,f=!1,e.prev=33,h=hr(r(n));case 35:return e.next=37,pr(h.next());case 37:if(!(l=!(d=e.sent).done)){e.next=45;break}return v=d.value,n+=v.length,e.next=42,v;case 42:l=!1,e.next=35;break;case 45:e.next=51;break;case 47:e.prev=47,e.t1=e.catch(33),f=!0,p=e.t1;case 51:if(e.prev=51,e.prev=52,!l||null==h.return){e.next=56;break}return e.next=56,pr(h.return());case 56:if(e.prev=56,!f){e.next=59;break}throw p;case 59:return e.finish(56);case 60:return e.finish(51);case 61:case"end":return e.stop()}}),e,null,[[3,17,21,31],[22,,26,30],[33,47,51,61],[52,,56,60]])})));return function(t,r){return e.apply(this,arguments)}}(),Qk=function(e){var t={cid:e.cid,name:e.name,type:"directory"===e.type?"directory":"file",size:e.size};return"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,t.mtime=e.unixfs.mtime),t};var Jk={stat:gw},Xk={chmod:function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=A.length>2&&void 0!==A[2]?A[2]:{},i=Sk(Ik,a),Ak("Fetching stats for ".concat(r)),t.next=5,hw(e,r,i);case 5:if(s=t.sent,o=s.cid,u=s.mfsDirectory,c=s.name,o.code===ft){t.next=11;break}throw Ee(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 11:if(!i.recursive){t.next=22;break}return t.next=14,kp(ye((0,ce.Z)().mark((function t(){var a,i,s,u,c,l,f;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=!1,i=!1,t.prev=2,u=hr(zd(o,e.repo.blocks));case 4:return t.next=6,pr(u.next());case 6:if(!(a=!(c=t.sent).done)){t.next=17;break}if("file"===(l=c.value).type||"directory"===l.type){t.next=10;break}throw Ee(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 10:return l.unixfs.mode=Zk(n,l.unixfs),f=st({Data:l.unixfs.marshal(),Links:l.node.Links}),t.next=14,{path:l.path,content:f};case 14:a=!1,t.next=4;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),i=!0,s=t.t0;case 23:if(t.prev=23,t.prev=24,!a||null==u.return){t.next=28;break}return t.next=28,pr(u.return());case 28:if(t.prev=28,!i){t.next=31;break}throw s;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[2,19,23,33],[24,,28,32]])}))),(function(t){return Wh(t,e.repo.blocks,(0,le.Z)((0,le.Z)({},i),{},{pin:!1,dagBuilder:function(){var e=ye((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,o=(0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,e.next=3,(0,fe.Z)((0,ce.Z)().mark((function e(){var a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.content,i=pt(a),e.next=4,xw(i,r,n);case 4:if(s=e.sent,a.Data){e.next=7;break}throw Ee(new Error("".concat(s," had no data")),"ERR_INVALID_NODE");case 7:return o=Me.unmarshal(a.Data),e.abrupt("return",{cid:s,size:i.length,path:t.path,unixfs:o});case 9:case"end":return e.stop()}}),e)})));case 3:case"end":return e.stop()}}),e)})),u=hr(t);case 5:return e.next=7,pr(u.next());case 7:if(!(a=!(c=e.sent).done)){e.next=12;break}return e.delegateYield(o(),"t0",9);case 9:a=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),i=!0,s=e.t1;case 18:if(e.prev=18,e.prev=19,!a||null==u.return){e.next=23;break}return e.next=23,pr(u.return());case 23:if(e.prev=23,!i){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t,r,n){return e.apply(this,arguments)}}()}))}),(function(e){return aa(e)}));case 14:if(l=t.sent){t.next=17;break}throw Ee(new Error("Could not chmod ".concat(r)),"ERR_COULD_NOT_CHMOD");case 17:return t.next=19,_k(e)(r,i);case 19:return t.next=21,ck(e)("/ipfs/".concat(l.cid),r,i);case 21:return t.abrupt("return");case 22:return t.next=24,e.repo.blocks.get(o);case 24:if(f=t.sent,(p=ht(f)).Data){t.next=28;break}throw Ee(new Error("".concat(o," had no data")),"ERR_INVALID_NODE");case 28:return(h=Me.unmarshal(p.Data)).mode=Zk(n,h),d=pt({Data:h.marshal(),Links:p.Links}),v=i.hashAlg||Ik.hashAlg,t.next=34,e.hashers.getHasher(v);case 34:return y=t.sent,t.next=37,y.digest(d);case 37:if(g=t.sent,m=Ue.CID.create(i.cidVersion,ft,g),!i.flush){t.next=42;break}return t.next=42,e.repo.blocks.put(m,d);case 42:return t.next=44,ww(e,u);case 44:return b=t.sent,w=b[b.length-1],k=Ue.CID.decode(w.cid.bytes),t.next=49,e.repo.blocks.get(k);case 49:return x=t.sent,_=ht(x),t.next=53,Uw(e,{parent:_,name:c,cid:m,size:d.length,flush:i.flush,hashAlg:v,cidVersion:o.version,shardSplitThreshold:1/0});case 53:return E=t.sent,w.cid=E.cid,t.next=57,Gw(e,b,i);case 57:return S=t.sent,t.next=60,Jw(e,S,i);case 60:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return Rr((function(e,r){return t.apply(this,arguments)}))},cp:ck,flush:function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},n=Rk(Tk,n),t.next=4,gw(e)(r,n);case 4:return a=t.sent,i=a.cid,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return Rr((function(e){return t.apply(this,arguments)}))},mkdir:ak,mv:function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},i=Dk(Pk,a),t.next=4,ck(e)(r,n,i);case 4:return t.next=6,_k(e)(r,(0,le.Z)((0,le.Z)({},i),{},{recursive:!0}));case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return Rr((function(e,r){return t.apply(this,arguments)}))},rm:_k,touch:function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A,I,C=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=C.length>1&&void 0!==C[1]?C[1]:{},(a=Nk(Bk,n)).mtime=a.mtime||new Date,Ok("Touching ".concat(r," mtime: ").concat(a.mtime)),t.next=6,hw(e,r,a);case 6:return i=t.sent,s=i.cid,o=i.mfsDirectory,u=i.name,c=i.exists,l=n.hashAlg||Bk.hashAlg,t.next=14,e.hashers.getHasher(l);case 14:if(f=t.sent,d=a.cidVersion,c){t.next=28;break}return v=new Me({type:"file",mtime:a.mtime}),p=pt({Data:v.marshal(),Links:[]}),t.next=21,f.digest(p);case 21:if(y=t.sent,h=Ue.CID.create(a.cidVersion,ft,y),!a.flush){t.next=26;break}return t.next=26,e.repo.blocks.put(h,p);case 26:t.next=47;break;case 28:if(s.code===ft){t.next=30;break}throw Ee(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 30:return d=s.version,t.next=33,e.repo.blocks.get(s);case 33:if(g=t.sent,(m=ht(g)).Data){t.next=37;break}throw Ee(new Error("".concat(r," had no data")),"ERR_INVALID_NODE");case 37:return(b=Me.unmarshal(m.Data)).mtime=a.mtime,p=pt({Data:b.marshal(),Links:m.Links}),t.next=42,f.digest(p);case 42:if(w=t.sent,h=Ue.CID.create(a.cidVersion,ft,w),!a.flush){t.next=47;break}return t.next=47,e.repo.blocks.put(h,p);case 47:return t.next=49,ww(e,o);case 49:return k=t.sent,x=k[k.length-1],_=x.cid,t.next=54,e.repo.blocks.get(_);case 54:return E=t.sent,S=ht(E),t.next=58,Uw(e,{parent:S,name:u,cid:h,size:p.length,flush:a.flush,shardSplitThreshold:a.shardSplitThreshold,hashAlg:a.hashAlg,cidVersion:d});case 58:return A=t.sent,x.cid=A.cid,t.next=62,Gw(e,k,a);case 62:return I=t.sent,t.next=65,Jw(e,I,a);case 65:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return Rr((function(e){return t.apply(this,arguments)}))}},$k={write:function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u,c=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:{},i=Fk(Vk,a),zk("Reading source, destination and parent"),t.next=5,ow().readLock((0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jk(n);case 2:return s=t.sent,t.next=5,hw(e,r,i);case 5:return o=t.sent,t.next=8,hw(e,o.mfsDirectory,i);case 8:u=t.sent;case 9:case"end":return t.stop()}}),t)}))))();case 5:if(zk("Read source, destination and parent"),i.parents||u.exists){t.next=8;break}throw Ee(new Error("directory does not exist"),"ERR_NO_EXIST");case 8:if(null!=s){t.next=10;break}throw Ee(new Error("could not create source"),"ERR_NO_SOURCE");case 10:if(null!=o){t.next=12;break}throw Ee(new Error("could not create destination"),"ERR_NO_DESTINATION");case 12:if(i.create||o.exists){t.next=14;break}throw Ee(new Error("file does not exist"),"ERR_NO_EXIST");case 14:if("file"===o.entryType){t.next=16;break}throw Ee(new Error("not a file"),"ERR_NOT_A_FILE");case 16:return t.abrupt("return",Kk(e,r,s,o,i));case 17:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return Rr((function(e,r){return t.apply(this,arguments)}))},read:function(e){return Rr((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=Lk(Mk,r),(0,hp.Z)({},Symbol.asyncIterator,function(){var n=ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,pr(hw(e,t,r));case 2:return a=n.sent,n.next=5,pr(jd(a.mfsPath,e.repo.blocks));case 5:if("file"===(i=n.sent).type){n.next=8;break}throw Ee(new Error("".concat(t," was not a file")),"ERR_NOT_FILE");case 8:if(i.content){n.next=10;break}throw Ee(new Error("Could not load content stream from ".concat(t)),"ERR_NO_CONTENT");case 10:s=!1,o=!1,n.prev=12,c=hr(i.content({offset:r.offset,length:r.length}));case 14:return n.next=16,pr(c.next());case 16:if(!(s=!(l=n.sent).done)){n.next=23;break}return f=l.value,n.next=20,f;case 20:s=!1,n.next=14;break;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n.catch(12),o=!0,u=n.t0;case 29:if(n.prev=29,n.prev=30,!s||null==c.return){n.next=34;break}return n.next=34,pr(c.return());case 34:if(n.prev=34,!o){n.next=37;break}throw u;case 37:return n.finish(34);case 38:return n.finish(29);case 39:case"end":return n.stop()}}),n,null,[[12,25,29,39],[30,,34,38]])})));return function(){return n.apply(this,arguments)}}())}))},ls:function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,pr(hw(e,r,n));case 3:return a=t.sent,t.next=6,pr(jd(a.mfsPath,e.repo.blocks));case 6:if("directory"!==(i=t.sent).type){t.next=10;break}return t.delegateYield(ia(hr($c(i.content(n),Qk)),pr),"t0",9);case 9:return t.abrupt("return");case 10:return t.next=12,Qk(i);case 12:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return Rr((function(e){return t.apply(this,arguments)}))}},ex=function(e){var t=e.options,r=e.mfs,n=e.operations,a=e.lock;Object.keys(n).forEach((function(e){r[e]=a(n[e](t))}))},tx={repoOwner:!0,repo:null};function rx(e){var t=e.repo,r=e.preload,n=e.hashers,a=function(e){var t=ow(Object.assign({},tx||{},e).repoOwner),r={};return ex({options:e,mfs:r,operations:Jk,lock:function(e){return t.readLock(e)}}),ex({options:e,mfs:r,operations:Xk,lock:function(e){return t.writeLock(e)}}),Object.keys($k).forEach((function(t){r[t]=$k[t](e)})),r}({repo:t,repoOwner:!1!==e.options.repoOwner,hashers:n}),i=function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=n.filter((function(e){return vr.ipfsPath(e)||vr.cid(e)}));if(i.length){var s=n[n.length-1];s&&!1!==s.preload&&i.forEach((function(e){return r(e)}))}return e.apply(void 0,n)}};return(0,le.Z)((0,le.Z)({},a),{},{chmod:a.chmod,cp:i(a.cp),mkdir:a.mkdir,stat:i(a.stat),rm:a.rm,read:i(a.read),touch:a.touch,write:a.write,mv:i(a.mv),flush:a.flush,ls:i(ye((0,ce.Z)().mark((function e(){var t,r,n,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,r=!1,e.prev=2,i=hr(a.ls.apply(a,u));case 4:return e.next=6,pr(i.next());case 6:if(!(t=!(s=e.sent).done)){e.next=13;break}return o=s.value,e.next=10,(0,le.Z)((0,le.Z)({},o),{},{size:o.size||0});case 10:t=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),r=!0,n=e.t0;case 19:if(e.prev=19,e.prev=20,!t||null==i.return){e.next=24;break}return e.next=24,pr(i.return());case 24:if(e.prev=24,!r){e.next=27;break}throw n;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))))})}var nx="Ed25519",ax=2048;var ix=(0,he.Z)((function e(t){var r=t.keychain;(0,pe.Z)(this,e),this.gen=function(e){var t=e.keychain;return Rr((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:nx,size:ax};return t.createKey(e,r.type||nx,r.size||ax)}))}({keychain:r}),this.list=function(e){var t=e.keychain;return Rr((function(){return t.listKeys()}))}({keychain:r}),this.rm=function(e){var t=e.keychain;return Rr((function(e){return t.removeKey(e)}))}({keychain:r}),this.rename=function(e){var t=e.keychain,r=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r,n){var a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.renameKey(r,n);case 2:return a=e.sent,e.abrupt("return",{was:r,now:a.name,id:a.id,overwrite:!1});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Rr(r)}({keychain:r}),this.export=function(e){var t=e.keychain;return Rr((function(e,r){return t.exportKey(e,r)}))}({keychain:r}),this.import=function(e){var t=e.keychain;return Rr((function(e,r,n){return t.importKey(e,r,n)}))}({keychain:r}),this.info=function(e){var t=e.keychain;return Rr((function(e){return t.findKeyByName(e)}))}({keychain:r})}));function sx(e){var t=e.repo,r=e.preload;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(n){var a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1!==(a=s.length>1&&void 0!==s[1]?s[1]:{}).preload&&r(n),e.next=4,t.blocks.get(n,a);case 4:return i=e.sent,e.abrupt("return",ht(i));case 6:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}function ox(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(var r in e){var n=e[r];if("/"===r&&1===Object.keys(e).length)try{t.push({Name:"",Tsize:0,Hash:Ue.CID.parse(n)});continue}catch(i){}var a=Ue.CID.asCID(n);a?t.push({Name:"",Tsize:0,Hash:a}):(Array.isArray(n)&&ox(n,t),n&&"object"===typeof n&&ox(n,t))}return t}function ux(e){var t=e.repo,r=e.preload;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(n){var a,i,s,o,u,c=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,t.gcLock.readLock();case 3:return i=e.sent,e.prev=4,s=pt(n),e.next=8,qn.sha256.digest(s);case 8:return o=e.sent,u=Ue.CID.createV1(ft,o),e.next=12,t.blocks.put(u,s,{signal:a.signal});case 12:if(!1!==a.preload&&r(u),!a.pin){e.next=16;break}return e.next=16,t.pins.pinRecursively(u,{signal:a.signal});case 16:return e.abrupt("return",u);case 17:return e.prev=17,i(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,,17,20]])}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}var cx=(0,he.Z)((function e(t){var r=t.repo,n=t.preload;(0,pe.Z)(this,e),this.addLink=function(e){var t=e.repo,r=e.preload,n=sx({repo:t,preload:r}),a=ux({repo:t,preload:r});function i(){return i=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=3,n(t,i);case 3:return s=e.sent,e.abrupt("return",a((0,le.Z)((0,le.Z)({},s),{},{Links:s.Links.concat([r])}),i));case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return Rr((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.appendData=function(e){var t=e.repo,r=e.preload,n=sx({repo:t,preload:r}),a=ux({repo:t,preload:r});function i(){return i=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,n(t,i);case 3:return s=e.sent,o=(0,ba.concat)([s.Data||[],r]),e.abrupt("return",a((0,le.Z)((0,le.Z)({},s),{},{Data:o}),i));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return Rr((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.rmLink=function(e){var t=e.repo,r=e.preload,n=sx({repo:t,preload:r}),a=ux({repo:t,preload:r});function i(){return i=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,n(t,i);case 3:return s=e.sent,o=("string"===typeof r?r:r.Name)||"",s.Links=s.Links.filter((function(e){return e.Name!==o})),e.abrupt("return",a(s,i));case 7:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return Rr((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.setData=function(e){var t=e.repo,r=e.preload,n=sx({repo:t,preload:r}),a=ux({repo:t,preload:r});function i(){return i=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=3,n(t,i);case 3:return s=e.sent,e.abrupt("return",a((0,le.Z)((0,le.Z)({},s),{},{Data:r}),i));case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return Rr((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n})})),lx=(0,he.Z)((function e(t){var r=t.repo,n=t.codecs,a=t.preload;(0,pe.Z)(this,e),this.data=function(e){var t=sx({repo:e.repo,preload:e.preload});function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,t(r,n);case 3:return a=e.sent,e.abrupt("return",a.Data||new Uint8Array(0));case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({repo:r,preload:a}),this.get=sx({repo:r,preload:a}),this.links=function(e){var t=e.repo,r=e.codecs;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(n){var a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,r.getCodec(n.code);case 3:return i=e.sent,e.next=6,t.blocks.get(n,a);case 6:s=e.sent,o=i.decode(s),e.t0=n.code,e.next=e.t0===Jp.code?11:e.t0===ft?12:e.t0===mt||e.t0===Jt?13:14;break;case 11:return e.abrupt("return",[]);case 12:return e.abrupt("return",o.Links);case 13:return e.abrupt("return",ox(o));case 14:throw new Error("Cannot resolve links from codec ".concat(n.code));case 15:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(e){return n.apply(this,arguments)}))}({repo:r,codecs:n}),this.new=function(e){var t=e.repo,r=e.preload;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(){var n,a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=u.length>0&&void 0!==u[0]?u[0]:{}).template){e.next=7;break}if("unixfs-dir"!==n.template){e.next=6;break}a=new Me({type:"directory"}).marshal(),e.next=7;break;case 6:throw new Error("unknown template");case 7:return i=pt({Data:a,Links:[]}),e.next=10,qn.sha256.digest(i);case 10:return s=e.sent,o=Ue.CID.createV0(s),e.next=14,t.blocks.put(o,i,{signal:n.signal});case 14:return!1!==n.preload&&r(o),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(){return n.apply(this,arguments)}))}({repo:r,preload:a}),this.put=ux({repo:r,preload:a}),this.stat=function(e){var t=sx({repo:e.repo,preload:e.preload});function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,t(r,n);case 3:return a=e.sent,i=pt(a),s=i.length,o=a.Links.reduce((function(e,t){return e+(t.Tsize||0)}),0),e.abrupt("return",{Hash:r,NumLinks:a.Links.length,BlockSize:s,LinksSize:s-(a.Data||[]).length,DataSize:(a.Data||[]).length,CumulativeSize:s+o});case 8:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({repo:r,preload:a}),this.patch=new cx({repo:r,preload:a})})),fx=_e("ipfs:repo:gc");function px(e){var t=e.repo;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,t.stat();case 3:return r=e.sent,e.abrupt("return",{numObjects:BigInt(r.numObjects.toString()),repoSize:BigInt(r.repoSize.toString()),repoPath:r.repoPath,version:"".concat(r.version),storageMax:BigInt(r.storageMax.toString())});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}var hx=12;var dx=(0,he.Z)((function e(t){var r=t.repo,n=t.hashers;(0,pe.Z)(this,e),this.gc=function(e){var t=e.repo,r=e.hashers;function n(){return n=ye((0,ce.Z)().mark((function e(){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:{},a=Date.now(),e.prev=2,e.next=5,pr(cw({repo:t,hashers:r},n));case 5:return i=e.sent,e.next=8,pr(t.pins.pinRecursively(i));case 8:return e.delegateYield(ia(hr(t.gc()),pr),"t0",9);case 9:if(e.prev=9,!i){e.next=13;break}return e.next=13,pr(t.pins.unpin(i));case 13:return e.finish(9);case 14:fx("Complete (".concat(Date.now()-a,"ms)"));case 15:case"end":return e.stop()}}),e,null,[[2,,9,14]])}))),n.apply(this,arguments)}return Rr((function(){return n.apply(this,arguments)}))}({repo:r,hashers:n}),this.stat=px({repo:r}),this.version=function(e){var t=e.repo;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,t._checkInitialized(r);case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),![/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((function(t){return t.test(e.t0.message)}))){e.next=11;break}return e.abrupt("return",hx);case 11:throw e.t0;case 12:return e.abrupt("return",t.version.get());case 13:case"end":return e.stop()}}),e,null,[[1,6]])}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({repo:r}),this.setApiAddr=function(e){return r.apiAddr.set(e)}}));function vx(e,t){var r;if(!(r=e.metrics?t.peer?e.metrics.forPeer(t.peer):t.proto?e.metrics.forProtocol(t.proto):e.metrics.getGlobal():void 0))return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};var n=r.getMovingAverages(),a=r.getSnapshot();return{totalIn:a.dataReceived,totalOut:a.dataSent,rateIn:n.dataReceived[6e4].movingAverage/60,rateOut:n.dataSent[6e4].movingAverage/60}}var yx=(0,he.Z)((function e(t){var r=t.repo,n=t.network;(0,pe.Z)(this,e),this.repo=px({repo:r}),this.bw=function(e){var t=e.network,r=function(){var e=ye((0,ce.Z)().mark((function e(){var r,n,a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,pr(t.use(r));case 3:if(n=e.sent,a=n.libp2p,r.poll){e.next=9;break}return e.next=8,vx(a,r);case 8:return e.abrupt("return");case 9:if(i=r.interval||1e3,s=-1,e.prev=11,(s="string"===typeof i?Cr(i)||-1:i)&&!(s<0)){e.next=15;break}throw new Error("invalid duration");case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(11),Ee(e.t0,"ERR_INVALID_POLL_INTERVAL");case 20:e.prev=20;case 21:return e.next=24,vx(a,r);case 24:return e.next=26,pr(new Promise((function(e){o=setTimeout(e,s)})));case 26:e.next=21;break;case 28:return e.prev=28,clearTimeout(o),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[11,17],[20,,28,31]])})));return function(){return e.apply(this,arguments)}}();return Rr(r)}({network:n}),this.bitswap=Vl({network:n})})),gx=__webpack_require__(3003),mx=__webpack_require__(1463),bx=be("ipfs:repo:migrator:migration-8");function wx(e){return e.child?wx(e.child):e}function kx(e){try{var t=ke.base32.decode("b".concat(e.toString().toLowerCase().slice(1))),r=Ue.CID.decode(t).multihash.bytes,n=ke.base32.encode(r).slice(1).toUpperCase();return new kr("/".concat(n),!1)}catch(Dy){return e}}function xx(e){try{var t=ke.base32.decode("b".concat(e.toString().toLowerCase().slice(1))),r=Vn.decode(t),n=ke.base32.encode(Ue.CID.createV1(Jp.code,r).bytes).slice(1);return new kr("/".concat(n.toUpperCase()),!1)}catch(a){return e}}function _x(e,t,r){return Ex.apply(this,arguments)}function Ex(){return(Ex=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.blocks,e.next=3,a.open();case 3:return i=wx(a),e.next=6,mx(i.queryKeys({filters:[function(e){return n(e).toString()!==e.toString()}]}));case 6:s=e.sent,e.prev=7,o=0,u=!1,c=!1,e.prev=11,f=hr(i.query({}));case 13:return e.next=15,f.next();case 15:if(!(u=!(p=e.sent).done)){e.next=34;break}if(h=p.value,(d=n(h.key)).toString()===h.key.toString()){e.next=31;break}return o+=1,e.t0=bx,e.t1="Migrating Block from ".concat(h.key," to ").concat(d),e.next=24,i.has(h.key);case 24:return e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=28,i.delete(h.key);case 28:return e.next=30,i.put(d,h.value);case 30:r(o/s*100,"Migrated Block from ".concat(h.key," to ").concat(d));case 31:u=!1,e.next=13;break;case 34:e.next=40;break;case 36:e.prev=36,e.t3=e.catch(11),c=!0,l=e.t3;case 40:if(e.prev=40,e.prev=41,!u||null==f.return){e.next=45;break}return e.next=45,f.return();case 45:if(e.prev=45,!c){e.next=48;break}throw l;case 48:return e.finish(45);case 49:return e.finish(40);case 50:return e.prev=50,e.next=53,a.close();case 53:return e.finish(50);case 54:case"end":return e.stop()}}),e,null,[[7,,50,54],[11,36,40,50],[41,,45,49]])})))).apply(this,arguments)}var Sx={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return _x(e,t,kx)},revert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return _x(e,t,xx)}},Ax=Se.Reader,Ix=Se.Writer,Cx=(Se.util,Se.roots.default||(Se.roots.default={})),Zx=Cx.ipfs=function(){var e={};return e.pin=function(){var e={};return e.Set=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.version=0,e.prototype.fanout=0,e.prototype.seed=0,e.encode=function(e,t){return t||(t=Ix.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(16).uint32(e.fanout),null!=e.seed&&Object.hasOwnProperty.call(e,"seed")&&t.uint32(29).fixed32(e.seed),t},e.decode=function(e,t){e instanceof Ax||(e=Ax.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Cx.ipfs.pin.Set;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.version=e.uint32();break;case 2:n.fanout=e.uint32();break;case 3:n.seed=e.fixed32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Cx.ipfs.pin.Set)return e;var t=new Cx.ipfs.pin.Set;return null!=e.version&&(t.version=e.version>>>0),null!=e.fanout&&(t.fanout=e.fanout>>>0),null!=e.seed&&(t.seed=e.seed>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.version=0,r.fanout=0,r.seed=0),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),null!=e.fanout&&e.hasOwnProperty("fanout")&&(r.fanout=e.fanout),null!=e.seed&&e.hasOwnProperty("seed")&&(r.seed=e.seed),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),e}(),e}(),Rx=__webpack_require__(5187),Tx=new kr("/local/pins"),Dx=256,Px=Ue.CID.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),Nx="direct",Ox="recursive";function Bx(e){return new kr("/".concat(ke.base32.encode(e.multihash.bytes).toUpperCase().substring(1)))}function Lx(e,t){for(var r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}var Mx=Zx.pin.Set;function Ux(e){var t=e.Data;if(!t)throw new Error("No data present");var r=pf.decode(t),n=pf.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");var a=t.slice(n,r+n),i=Mx.toObject(Mx.decode(a),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==i.version)throw new Error("Unsupported Set version: ".concat(i.version));if(i.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:i,data:t.slice(r+n)}}function jx(e,t){var r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e,!0);var n=(0,fr.fromString)(t.toString()),a=(0,ba.concat)([r,n],r.byteLength+n.byteLength);return Rx((0,gr.toString)(a))}function Fx(e,t){return zx.apply(this,arguments)}function zx(){return(zx=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ux(r),a=0,i=(0,v.Z)(r.Links),e.prev=3,i.s();case 5:if((s=i.n()).done){e.next=22;break}if(o=s.value,!(a<n.header.fanout)){e.next=17;break}if(u=o.Hash,Px.equals(u)){e.next=15;break}return e.next=12,pr(t.get(u));case 12:return c=e.sent,l=ht(c),e.delegateYield(ia(hr(Fx(t,l)),pr),"t0",15);case 15:e.next=19;break;case 17:return e.next=19,o.Hash;case 19:a++;case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(3),i.e(e.t1);case 27:return e.prev=27,i.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[3,24,27,30]])})))).apply(this,arguments)}function Vx(e,t,r){return Kx.apply(this,arguments)}function Kx(){return(Kx=ye((0,ce.Z)().mark((function e(t,r,n){var a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.Links.find((function(e){return e.Name===n}))){e.next=3;break}throw new Error("No link found with name "+n);case 3:return e.next=5,pr(t.get(a.Hash));case 5:return i=e.sent,s=ht(i),e.delegateYield(ia(hr(Fx(t,s)),pr),"t0",8);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qx(e,t){return r(t,0);function r(e,t){return n.apply(this,arguments)}function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function t(n,a){var i,s,o,u,c,l,f,p,h,d,y,g,m,b,w,k;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(k=function(){return k=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=pt(r),t.next=3,qn.sha256.digest(a);case 3:return i=t.sent,s=Ue.CID.createV0(i),t.next=7,e.put(s,a);case 7:o=r.Links.reduce((function(e,t){return e+(t.Tsize||0)}),0)+a.length,u[n]={Name:"",Tsize:o,Hash:s};case 9:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)},w=function(e,t){return k.apply(this,arguments)},i=Mx.encode({version:1,fanout:Dx,seed:a}).finish(),s=pf.encode(i.length),o=(0,ba.concat)([s,i]),u=[],c=0;c<Dx;c++)u.push({Name:"",Tsize:1,Hash:Px});if(!(n.length<=8192)){t.next=14;break}return l=n.map((function(e){return{link:{Name:"",Tsize:1,Hash:e.key},data:e.data||new Uint8Array}})).sort((function(e,t){return Lx(e.link.Hash.bytes,t.link.Hash.bytes)})),f=u.concat(l.map((function(e){return e.link}))),p=(0,ba.concat)([o].concat(Vt(l.map((function(e){return e.data}))))),t.abrupt("return",{Data:p,Links:f});case 14:h=n.reduce((function(e,t){var r=jx(a,t.key)%Dx;return e[r]=r in e?e[r].concat([t]):[t],e}),[]),d=0,y=(0,v.Z)(h),t.prev=17,y.s();case 19:if((g=y.n()).done){t.next=29;break}return m=g.value,t.next=23,r(m,a+1);case 23:return b=t.sent,t.next=26,w(b,d);case 26:d++;case 27:t.next=19;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t.catch(17),y.e(t.t0);case 34:return t.prev=34,y.f(),t.finish(34);case 37:return t.abrupt("return",{Data:o,Links:u});case 38:case"end":return t.stop()}}),t,null,[[17,31,34,37]])}))),n.apply(this,arguments)}}function Hx(e,t,r){return Wx.apply(this,arguments)}function Wx(){return(Wx=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qx(t,n.map((function(e){return{key:e}})));case 2:return a=e.sent,i=pt(a),e.next=6,qn.sha256.digest(i);case 6:return s=e.sent,o=Ue.CID.createV0(s),e.next=10,t.put(o,i);case 10:return u=a.Links.reduce((function(e,t){return e+t.Tsize}),0)+i.length,e.abrupt("return",{Name:r,Tsize:u,Hash:o});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gx(e,t,r,n){return Yx.apply(this,arguments)}function Yx(){return(Yx=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.has(Tx);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.get(Tx);case 6:return i=e.sent,s=Ue.CID.decode(i),e.next=10,t.get(s);case 10:return o=e.sent,u=ht(o),c=0,e.next=15,mx(Vx(t,u,Ox));case 15:return e.t0=e.sent,e.next=18,mx(Vx(t,u,Nx));case 18:e.t1=e.sent,l=e.t0+e.t1,f=!1,p=!1,e.prev=22,d=hr(Vx(t,u,Ox));case 24:return e.next=26,d.next();case 26:if(!(f=!(v=e.sent).done)){e.next=38;break}return y=v.value,c++,g={depth:1/0},0!==y.version&&(g.version=y.version),y.code!==ft&&(g.codec=y.code),e.next=34,n.put(Bx(y),dt.cv(g));case 34:a(c/l*100,"Migrated recursive pin ".concat(y));case 35:f=!1,e.next=24;break;case 38:e.next=44;break;case 40:e.prev=40,e.t2=e.catch(22),p=!0,h=e.t2;case 44:if(e.prev=44,e.prev=45,!f||null==d.return){e.next=49;break}return e.next=49,d.return();case 49:if(e.prev=49,!p){e.next=52;break}throw h;case 52:return e.finish(49);case 53:return e.finish(44);case 54:m=!1,b=!1,e.prev=56,k=hr(Vx(t,u,Nx));case 58:return e.next=60,k.next();case 60:if(!(m=!(x=e.sent).done)){e.next=72;break}return _=x.value,c++,E={depth:0},0!==_.version&&(E.version=_.version),_.code!==ft&&(E.codec=_.code),e.next=68,n.put(Bx(_),dt.cv(E));case 68:a(c/l*100,"Migrated direct pin ".concat(_));case 69:m=!1,e.next=58;break;case 72:e.next=78;break;case 74:e.prev=74,e.t3=e.catch(56),b=!0,w=e.t3;case 78:if(e.prev=78,e.prev=79,!m||null==k.return){e.next=83;break}return e.next=83,k.return();case 83:if(e.prev=83,!b){e.next=86;break}throw w;case 86:return e.finish(83);case 87:return e.finish(78);case 88:return e.next=90,t.delete(s);case 90:return e.next=92,r.delete(Tx);case 92:case"end":return e.stop()}}),e,null,[[22,40,44,54],[45,,49,53],[56,74,78,88],[79,,83,87]])})))).apply(this,arguments)}function Qx(e,t,r,n){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],s=[],o=0,e.next=5,mx(n.queryKeys({}));case 5:u=e.sent,c=!1,l=!1,e.prev=8,p=hr(n.query({}));case 10:return e.next=12,p.next();case 12:if(!(c=!(h=e.sent).done)){e.next=21;break}d=h.value,v=d.key,y=d.value,o++,g=dt.Jx(y),m=Ue.CID.create(g.version||0,g.codec||ft,Vn.decode(ke.base32.decode("b"+v.toString().toLowerCase().split("/").pop()))),0===g.depth?(a(o/u*100,"Reverted direct pin ".concat(m)),s.push(m)):(a(o/u*100,"Reverted recursive pin ".concat(m)),i.push(m));case 18:c=!1,e.next=10;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(8),l=!0,f=e.t0;case 27:if(e.prev=27,e.prev=28,!c||null==p.return){e.next=32;break}return e.next=32,p.return();case 32:if(e.prev=32,!l){e.next=35;break}throw f;case 35:return e.finish(32);case 36:return e.finish(27);case 37:return a(100,"Updating pin root"),e.next=40,Hx(t,Nx,s);case 40:return e.t1=e.sent,e.next=43,Hx(t,Ox,i);case 43:return e.t2=e.sent,e.t3=[e.t1,e.t2],b={Links:e.t3},w=pt(b),e.next=49,qn.sha256.digest(w);case 49:return k=e.sent,x=Ue.CID.createV0(k),e.next=53,t.put(x,w);case 53:return e.next=55,r.put(Tx,x.bytes);case 55:case"end":return e.stop()}}),e,null,[[8,23,27,37],[28,,32,36]])}))),Jx.apply(this,arguments)}function Xx(e,t,r){return $x.apply(this,arguments)}function $x(){return($x=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.blocks,i=t.datastore,s=t.pins,e.next=5,a.open();case 5:return e.next=7,i.open();case 7:return e.next=9,s.open();case 9:return e.prev=9,e.next=12,n(a,i,s,r);case 12:return e.prev=12,e.next=15,s.close();case 15:return e.next=17,i.close();case 17:return e.next=19,a.close();case 19:return e.finish(12);case 20:case"end":return e.stop()}}),e,null,[[9,,12,20]])})))).apply(this,arguments)}var e_={version:9,description:"Migrates pins to datastore",migrate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Xx(e,t,Gx)},revert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Xx(e,t,Qx)}},t_=new kr("/config"),r_=new kr("/version");function n_(e){for(var t=e;t.db||t.child;)if("level-js"===(t=t.db||t.child).type||"Level"===t.constructor.name)return t}function a_(){return a_=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:if(i=n_(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){e(Boolean(n.result))}})));case 9:case"end":return e.stop()}}),e)}))),a_.apply(this,arguments)}function i_(){return i_=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",r(t));case 4:if(i=n_(a)){e.next=7;break}throw ga();case 7:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){if(n.result)return e(n.result);r(ga())}})));case 8:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function s_(e){var t=e.get.bind(e),r=e.has.bind(e);return e.get=function(n){return function(e,t,r,n){return i_.apply(this,arguments)}(n,t,r,e)},e.has=function(t){return function(e,t,r){return a_.apply(this,arguments)}(t,r,e)},e}function o_(e){return(0,le.Z)((0,le.Z)({},e),{},{root:s_(e.root),datastore:s_(e.datastore),pins:s_(e.pins),keys:s_(e.keys)})}function u_(e,t){return c_.apply(this,arguments)}function c_(){return c_=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>2&&void 0!==s[2]?s[2]:function(){},a=n_(r)){e.next=5;break}return n("".concat(t," did not need an upgrade")),e.abrupt("return");case 5:return n("Upgrading ".concat(t)),i=function(e,t){return[{type:"del",key:e},{type:"put",key:(0,fr.fromString)(e),value:t}]},e.next=9,y_(a,i);case 9:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e,t){return f_.apply(this,arguments)}function f_(){return f_=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>2&&void 0!==s[2]?s[2]:function(){},a=n_(r)){e.next=5;break}return n("".concat(t," did not need a downgrade")),e.abrupt("return");case 5:return n("Downgrading ".concat(t)),i=function(e,t){return[{type:"del",key:e},{type:"put",key:(0,gr.toString)(e),value:t}]},e.next=9,y_(a,i);case 9:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}function p_(e){return e.child?p_(e.child):e}function h_(e,t,r){return d_.apply(this,arguments)}function d_(){return d_=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object.entries(t).map((function(e){var t=(0,y.Z)(e,2);return{key:t[0],backend:p_(t[1])}})).filter((function(e){e.key;return"LevelDatastore"===e.backend.constructor.name})).map((function(e){return{name:e.key,store:e.backend}})),r(0,"Migrating ".concat(a.length," dbs")),i=0,s=function(e){r(Math.round(i/a.length*100),e)},o=(0,v.Z)(a),e.prev=5,o.s();case 7:if((u=o.n()).done){e.next=21;break}return c=u.value,l=c.name,f=c.store,e.next=11,f.open();case 11:return e.prev=11,e.next=14,n(l,f,s);case 14:return e.prev=14,i++,e.next=18,f.close();case 18:return e.finish(14);case 19:e.next=7;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:r(100,"Migrated ".concat(a.length," dbs"));case 30:case"end":return e.stop()}}),e,null,[[5,23,26,29],[11,,14,19]])}))),d_.apply(this,arguments)}var v_={version:10,description:"Migrates datastore-level keys to binary",migrate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return h_(e,t,u_)},revert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return h_(e,t,l_)}};function y_(e,t){return new Promise((function(r,n){var a=e.iterator();a._deserializeKey=a._deserializeValue=function(e){return e},function i(){var s=function(s,o,u){if(s||void 0===o){a.end((function(e){e?n(e):r()}))}else!function(t,r){var n,a=e.store("readwrite"),i=a.transaction,o=0;i.onabort=function(){return r(n||i.error||new Error("aborted by user"))},i.oncomplete=function(){return r()},function e(){var r,u=t[o++],c=u.key;try{r="del"===u.type?a.delete(c):a.put(u.value,c)}catch(s){return n=s,void i.abort()}o<t.length&&(r.onsuccess=e)}()}(t(o,u),i)};a.next(s)}()}))}var g_=new kr("/local/filesroot");function m_(){return m_=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.length>1&&void 0!==a[1]?a[1]:function(){})(100,"Migrating MFS root to repo datastore"),e.next=4,t.root.open();case 4:return e.next=6,t.datastore.open();case 6:return e.next=8,t.root.has(g_);case 8:if(!e.sent){e.next=16;break}return e.next=11,t.root.get(g_);case 11:return n=e.sent,e.next=14,t.datastore.put(g_,n);case 14:return e.next=16,t.root.delete(g_);case 16:return e.next=18,t.datastore.close();case 18:return e.next=20,t.root.close();case 20:r(100,"Stored MFS root in repo datastore");case 21:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function b_(){return b_=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.length>1&&void 0!==a[1]?a[1]:function(){})(100,"Migrating MFS root to repo root datastore"),e.next=4,t.root.open();case 4:return e.next=6,t.datastore.open();case 6:return e.next=8,t.datastore.has(g_);case 8:if(!e.sent){e.next=16;break}return e.next=11,t.datastore.get(g_);case 11:return n=e.sent,e.next=14,t.root.put(g_,n);case 14:return e.next=16,t.datastore.delete(g_);case 16:return e.next=18,t.datastore.close();case 18:return e.next=20,t.root.close();case 20:r(100,"Stored MFS root in repo root datastore");case 21:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}var w_={version:11,description:"Store mfs root in the datastore",migrate:function(e){return m_.apply(this,arguments)},revert:function(e){return b_.apply(this,arguments)}},k_=Se.Reader,x_=Se.Writer,__=Se.util,E_=Se.roots.default||(Se.roots.default={}),S_=E_.Protocols=function(){function e(e){if(this.protocols=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.protocols=__.emptyArray,e.encode=function(e,t){if(t||(t=x_.create()),null!=e.protocols&&e.protocols.length)for(var r=0;r<e.protocols.length;++r)t.uint32(10).string(e.protocols[r]);return t},e.decode=function(e,t){e instanceof k_||(e=k_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new E_.Protocols;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof E_.Protocols)return e;var t=new E_.Protocols;if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.protocols=[]),e.protocols&&e.protocols.length){r.protocols=[];for(var n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),A_=Se.Reader,I_=Se.Writer,C_=Se.util,Z_=Se.roots.default||(Se.roots.default={}),R_=Z_.Addresses=function(){function e(e){if(this.addrs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.addrs=C_.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(e,t){if(t||(t=I_.create()),null!=e.addrs&&e.addrs.length)for(var r=0;r<e.addrs.length;++r)Z_.Addresses.Address.encode(e.addrs[r],t.uint32(10).fork()).ldelim();return null!=e.certifiedRecord&&Object.hasOwnProperty.call(e,"certifiedRecord")&&Z_.Addresses.CertifiedRecord.encode(e.certifiedRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof A_||(e=A_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Z_.Addresses;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.addrs&&n.addrs.length||(n.addrs=[]),n.addrs.push(Z_.Addresses.Address.decode(e,e.uint32()));break;case 2:n.certifiedRecord=Z_.Addresses.CertifiedRecord.decode(e,e.uint32());break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Z_.Addresses)return e;var t=new Z_.Addresses;if(e.addrs){if(!Array.isArray(e.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var r=0;r<e.addrs.length;++r){if("object"!==typeof e.addrs[r])throw TypeError(".Addresses.addrs: object expected");t.addrs[r]=Z_.Addresses.Address.fromObject(e.addrs[r])}}if(null!=e.certifiedRecord){if("object"!==typeof e.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=Z_.Addresses.CertifiedRecord.fromObject(e.certifiedRecord)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addrs=[]),t.defaults&&(r.certifiedRecord=null),e.addrs&&e.addrs.length){r.addrs=[];for(var n=0;n<e.addrs.length;++n)r.addrs[n]=Z_.Addresses.Address.toObject(e.addrs[n],t)}return null!=e.certifiedRecord&&e.hasOwnProperty("certifiedRecord")&&(r.certifiedRecord=Z_.Addresses.CertifiedRecord.toObject(e.certifiedRecord,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e.Address=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.multiaddr=C_.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:C_.oneOfGetter(t=["isCertified"]),set:C_.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=I_.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof A_||(e=A_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Z_.Addresses.Address;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Z_.Addresses.Address)return e;var t=new Z_.Addresses.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?C_.base64.decode(e.multiaddr,t.multiaddr=C_.newBuffer(C_.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=C_.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?C_.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),e.CertifiedRecord=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=C_.Long?C_.Long.fromBits(0,0,!0):0,e.prototype.raw=C_.newBuffer([]),e.encode=function(e,t){return t||(t=I_.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.raw&&Object.hasOwnProperty.call(e,"raw")&&t.uint32(18).bytes(e.raw),t},e.decode=function(e,t){e instanceof A_||(e=A_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Z_.Addresses.CertifiedRecord;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.seq=e.uint64();break;case 2:n.raw=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Z_.Addresses.CertifiedRecord)return e;var t=new Z_.Addresses.CertifiedRecord;return null!=e.seq&&(C_.Long?(t.seq=C_.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new C_.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.raw&&("string"===typeof e.raw?C_.base64.decode(e.raw,t.raw=C_.newBuffer(C_.base64.length(e.raw)),0):e.raw.length&&(t.raw=e.raw)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(C_.Long){var n=new C_.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;t.bytes===String?r.raw="":(r.raw=[],t.bytes!==Array&&(r.raw=C_.newBuffer(r.raw)))}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?C_.Long.prototype.toString.call(e.seq):t.longs===Number?new C_.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.raw&&e.hasOwnProperty("raw")&&(r.raw=t.bytes===String?C_.base64.encode(e.raw,0,e.raw.length):t.bytes===Array?Array.prototype.slice.call(e.raw):e.raw),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),e}(),T_=Se.Reader,D_=Se.Writer,P_=Se.util,N_=Se.roots.default||(Se.roots.default={}),O_=N_.Peer=function(){function e(e){if(this.addresses=[],this.protocols=[],this.metadata=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.addresses=P_.emptyArray,e.prototype.protocols=P_.emptyArray,e.prototype.metadata=P_.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null,Object.defineProperty(e.prototype,"_pubKey",{get:P_.oneOfGetter(t=["pubKey"]),set:P_.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:P_.oneOfGetter(t=["peerRecordEnvelope"]),set:P_.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=D_.create()),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)N_.Address.encode(e.addresses[r],t.uint32(10).fork()).ldelim();if(null!=e.protocols&&e.protocols.length)for(r=0;r<e.protocols.length;++r)t.uint32(18).string(e.protocols[r]);if(null!=e.metadata&&e.metadata.length)for(r=0;r<e.metadata.length;++r)N_.Metadata.encode(e.metadata[r],t.uint32(26).fork()).ldelim();return null!=e.pubKey&&Object.hasOwnProperty.call(e,"pubKey")&&t.uint32(34).bytes(e.pubKey),null!=e.peerRecordEnvelope&&Object.hasOwnProperty.call(e,"peerRecordEnvelope")&&t.uint32(42).bytes(e.peerRecordEnvelope),t},e.decode=function(e,t){e instanceof T_||(e=T_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new N_.Peer;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(N_.Address.decode(e,e.uint32()));break;case 2:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());break;case 3:n.metadata&&n.metadata.length||(n.metadata=[]),n.metadata.push(N_.Metadata.decode(e,e.uint32()));break;case 4:n.pubKey=e.bytes();break;case 5:n.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof N_.Peer)return e;var t=new N_.Peer;if(e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".Peer.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".Peer.addresses: object expected");t.addresses[r]=N_.Address.fromObject(e.addresses[r])}}if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Peer.protocols: array expected");t.protocols=[];for(r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}if(e.metadata){if(!Array.isArray(e.metadata))throw TypeError(".Peer.metadata: array expected");t.metadata=[];for(r=0;r<e.metadata.length;++r){if("object"!==typeof e.metadata[r])throw TypeError(".Peer.metadata: object expected");t.metadata[r]=N_.Metadata.fromObject(e.metadata[r])}}return null!=e.pubKey&&("string"===typeof e.pubKey?P_.base64.decode(e.pubKey,t.pubKey=P_.newBuffer(P_.base64.length(e.pubKey)),0):e.pubKey.length&&(t.pubKey=e.pubKey)),null!=e.peerRecordEnvelope&&("string"===typeof e.peerRecordEnvelope?P_.base64.decode(e.peerRecordEnvelope,t.peerRecordEnvelope=P_.newBuffer(P_.base64.length(e.peerRecordEnvelope)),0):e.peerRecordEnvelope.length&&(t.peerRecordEnvelope=e.peerRecordEnvelope)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[],r.protocols=[],r.metadata=[]),e.addresses&&e.addresses.length){r.addresses=[];for(var n=0;n<e.addresses.length;++n)r.addresses[n]=N_.Address.toObject(e.addresses[n],t)}if(e.protocols&&e.protocols.length){r.protocols=[];for(n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}if(e.metadata&&e.metadata.length){r.metadata=[];for(n=0;n<e.metadata.length;++n)r.metadata[n]=N_.Metadata.toObject(e.metadata[n],t)}return null!=e.pubKey&&e.hasOwnProperty("pubKey")&&(r.pubKey=t.bytes===String?P_.base64.encode(e.pubKey,0,e.pubKey.length):t.bytes===Array?Array.prototype.slice.call(e.pubKey):e.pubKey,t.oneofs&&(r._pubKey="pubKey")),null!=e.peerRecordEnvelope&&e.hasOwnProperty("peerRecordEnvelope")&&(r.peerRecordEnvelope=t.bytes===String?P_.base64.encode(e.peerRecordEnvelope,0,e.peerRecordEnvelope.length):t.bytes===Array?Array.prototype.slice.call(e.peerRecordEnvelope):e.peerRecordEnvelope,t.oneofs&&(r._peerRecordEnvelope="peerRecordEnvelope")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),B_=(N_.Address=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.multiaddr=P_.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:P_.oneOfGetter(t=["isCertified"]),set:P_.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=D_.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof T_||(e=T_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new N_.Address;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof N_.Address)return e;var t=new N_.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?P_.base64.decode(e.multiaddr,t.multiaddr=P_.newBuffer(P_.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=P_.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?P_.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),N_.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value=P_.newBuffer([]),e.encode=function(e,t){return t||(t=D_.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},e.decode=function(e,t){e instanceof T_||(e=T_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new N_.Metadata;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.key=e.string();break;case 2:n.value=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof N_.Metadata)return e;var t=new N_.Metadata;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&("string"===typeof e.value?P_.base64.decode(e.value,t.value=P_.newBuffer(P_.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",t.bytes===String?r.value="":(r.value=[],t.bytes!==Array&&(r.value=P_.newBuffer(r.value)))),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=t.bytes===String?P_.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),Se.Reader),L_=Se.Writer,M_=Se.util,U_=Se.roots.default||(Se.roots.default={}),j_=U_.Envelope=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.publicKey=M_.newBuffer([]),e.prototype.payloadType=M_.newBuffer([]),e.prototype.payload=M_.newBuffer([]),e.prototype.signature=M_.newBuffer([]),e.encode=function(e,t){return t||(t=L_.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.payloadType&&Object.hasOwnProperty.call(e,"payloadType")&&t.uint32(18).bytes(e.payloadType),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),t},e.decode=function(e,t){e instanceof B_||(e=B_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new U_.Envelope;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.publicKey=e.bytes();break;case 2:n.payloadType=e.bytes();break;case 3:n.payload=e.bytes();break;case 5:n.signature=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof U_.Envelope)return e;var t=new U_.Envelope;return null!=e.publicKey&&("string"===typeof e.publicKey?M_.base64.decode(e.publicKey,t.publicKey=M_.newBuffer(M_.base64.length(e.publicKey)),0):e.publicKey.length&&(t.publicKey=e.publicKey)),null!=e.payloadType&&("string"===typeof e.payloadType?M_.base64.decode(e.payloadType,t.payloadType=M_.newBuffer(M_.base64.length(e.payloadType)),0):e.payloadType.length&&(t.payloadType=e.payloadType)),null!=e.payload&&("string"===typeof e.payload?M_.base64.decode(e.payload,t.payload=M_.newBuffer(M_.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),null!=e.signature&&("string"===typeof e.signature?M_.base64.decode(e.signature,t.signature=M_.newBuffer(M_.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.publicKey="":(r.publicKey=[],t.bytes!==Array&&(r.publicKey=M_.newBuffer(r.publicKey))),t.bytes===String?r.payloadType="":(r.payloadType=[],t.bytes!==Array&&(r.payloadType=M_.newBuffer(r.payloadType))),t.bytes===String?r.payload="":(r.payload=[],t.bytes!==Array&&(r.payload=M_.newBuffer(r.payload))),t.bytes===String?r.signature="":(r.signature=[],t.bytes!==Array&&(r.signature=M_.newBuffer(r.signature)))),null!=e.publicKey&&e.hasOwnProperty("publicKey")&&(r.publicKey=t.bytes===String?M_.base64.encode(e.publicKey,0,e.publicKey.length):t.bytes===Array?Array.prototype.slice.call(e.publicKey):e.publicKey),null!=e.payloadType&&e.hasOwnProperty("payloadType")&&(r.payloadType=t.bytes===String?M_.base64.encode(e.payloadType,0,e.payloadType.length):t.bytes===Array?Array.prototype.slice.call(e.payloadType):e.payloadType),null!=e.payload&&e.hasOwnProperty("payload")&&(r.payload=t.bytes===String?M_.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),null!=e.signature&&e.hasOwnProperty("signature")&&(r.signature=t.bytes===String?M_.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),F_=Se.Reader,z_=Se.Writer,V_=Se.util,K_=Se.roots.default||(Se.roots.default={}),q_=K_.PeerRecord=function(){function e(e){if(this.addresses=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.peerId=V_.newBuffer([]),e.prototype.seq=V_.Long?V_.Long.fromBits(0,0,!0):0,e.prototype.addresses=V_.emptyArray,e.encode=function(e,t){if(t||(t=z_.create()),null!=e.peerId&&Object.hasOwnProperty.call(e,"peerId")&&t.uint32(10).bytes(e.peerId),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)K_.PeerRecord.AddressInfo.encode(e.addresses[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof F_||(e=F_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new K_.PeerRecord;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.peerId=e.bytes();break;case 2:n.seq=e.uint64();break;case 3:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(K_.PeerRecord.AddressInfo.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof K_.PeerRecord)return e;var t=new K_.PeerRecord;if(null!=e.peerId&&("string"===typeof e.peerId?V_.base64.decode(e.peerId,t.peerId=V_.newBuffer(V_.base64.length(e.peerId)),0):e.peerId.length&&(t.peerId=e.peerId)),null!=e.seq&&(V_.Long?(t.seq=V_.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new V_.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".PeerRecord.addresses: object expected");t.addresses[r]=K_.PeerRecord.AddressInfo.fromObject(e.addresses[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[]),t.defaults)if(t.bytes===String?r.peerId="":(r.peerId=[],t.bytes!==Array&&(r.peerId=V_.newBuffer(r.peerId))),V_.Long){var n=new V_.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if(null!=e.peerId&&e.hasOwnProperty("peerId")&&(r.peerId=t.bytes===String?V_.base64.encode(e.peerId,0,e.peerId.length):t.bytes===Array?Array.prototype.slice.call(e.peerId):e.peerId),null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?V_.Long.prototype.toString.call(e.seq):t.longs===Number?new V_.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),e.addresses&&e.addresses.length){r.addresses=[];for(var a=0;a<e.addresses.length;++a)r.addresses[a]=K_.PeerRecord.AddressInfo.toObject(e.addresses[a],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e.AddressInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.multiaddr=V_.newBuffer([]),e.encode=function(e,t){return t||(t=z_.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),t},e.decode=function(e,t){e instanceof F_||(e=F_.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new K_.PeerRecord.AddressInfo;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.multiaddr=e.bytes();else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof K_.PeerRecord.AddressInfo)return e;var t=new K_.PeerRecord.AddressInfo;return null!=e.multiaddr&&("string"===typeof e.multiaddr?V_.base64.decode(e.multiaddr,t.multiaddr=V_.newBuffer(V_.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=V_.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?V_.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),e}(),H_=__webpack_require__(8719);function W_(){return W_=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,v,g,m,b,w,k,x,_,E,S,A,I,C,Z,R,T=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=T.length>1&&void 0!==T[1]?T[1]:function(){})(0,"Storing each peerstore key under a single datastore key"),e.next=4,t.datastore.open();case 4:n={},a=[],i=!1,s=!1,e.prev=8,u=hr(t.datastore.query({prefix:"/peers"}));case 10:return e.next=12,u.next();case 12:if(!(i=!(c=e.sent).done)){e.next=28;break}if(l=c.value,f=l.key,p=l.value,a.push(f),h=f.toString(),d=h.split("/"),v=(0,y.Z)(d,5),v[0],g=v[1],m=v[2],b=v[3],w=v[4],"peers"===g){e.next=19;break}return e.abrupt("continue",25);case 19:if(["protos","addrs","metadata","keys"].includes(m)){e.next=21;break}return e.abrupt("continue",25);case 21:if(b){e.next=23;break}return e.abrupt("continue",25);case 23:n[b]=n[b]||{addresses:[],protocols:[],metadata:[]},"protos"===m?(k=S_.decode(p),n[b].protocols=k.protocols.sort()):"addrs"===m?(x=R_.decode(p),n[b].addresses=x.addrs.sort((function(e,t){return new H_.Multiaddr(e.multiaddr).toString().localeCompare(new H_.Multiaddr(t.multiaddr).toString())})),x.certifiedRecord&&x.certifiedRecord.raw&&(n[b].peerRecordEnvelope=x.certifiedRecord.raw)):"metadata"===m?n[b].metadata.push({key:w,value:p}):"keys"===m&&(n[b].pubKey=p);case 25:i=!1,e.next=10;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(8),s=!0,o=e.t0;case 34:if(e.prev=34,e.prev=35,!i||null==u.return){e.next=39;break}return e.next=39,u.return();case 39:if(e.prev=39,!s){e.next=42;break}throw o;case 42:return e.finish(39);case 43:return e.finish(34);case 44:r(33,"Read peer data from store"),_=0,E=a;case 46:if(!(_<E.length)){e.next=53;break}return S=E[_],e.next=50,t.datastore.delete(S);case 50:_++,e.next=46;break;case 53:r(66,"Removed existing peer data from store"),A=0,I=Object.keys(n);case 55:if(!(A<I.length)){e.next=65;break}return C=I[A],(Z=n[C]).metadata=Z.metadata.sort((function(e,t){return e.key.localeCompare(t.key)})),R=O_.encode(Z).finish(),e.next=62,t.datastore.put(new kr("/peers/".concat(C)),R);case 62:A++,e.next=55;break;case 65:return e.next=67,t.datastore.close();case 67:r(100,"Stored each peerstore key under a single datastore key");case 68:case"end":return e.stop()}}),e,null,[[8,30,34,44],[35,,39,43]])}))),W_.apply(this,arguments)}function G_(){return G_=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,g,m,b,w,k,x,_,E,S,A,I,C,Z,R,T,D,P,N,O,B=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=B.length>1&&void 0!==B[1]?B[1]:function(){})(0,"Storing each peerstore key under a multiple datastore keys"),e.next=4,t.datastore.open();case 4:n={},a=[],i=!1,s=!1,e.prev=8,u=hr(t.datastore.query({prefix:"/peers"}));case 10:return e.next=12,u.next();case 12:if(!(i=!(c=e.sent).done)){e.next=21;break}l=c.value,f=l.key,p=l.value,a.push(f),h=f.toString(),d=h.split("/"),g=(0,y.Z)(d,3),g[0],g[1],m=g[2],n[m]=O_.decode(p);case 18:i=!1,e.next=10;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(8),s=!0,o=e.t0;case 27:if(e.prev=27,e.prev=28,!i||null==u.return){e.next=32;break}return e.next=32,u.return();case 32:if(e.prev=32,!s){e.next=35;break}throw o;case 35:return e.finish(32);case 36:return e.finish(27);case 37:r(33,"Read peer data from store"),b=0,w=a;case 39:if(!(b<w.length)){e.next=46;break}return k=w[b],e.next=43,t.datastore.delete(k);case 43:b++,e.next=39;break;case 46:r(66,"Removed existing peer data from store"),x=0,_=Object.entries(n);case 48:if(!(x<_.length)){e.next=83;break}if(E=(0,y.Z)(_[x],2),S=E[0],!((A=E[1]).protocols&&A.protocols.length>0)){e.next=53;break}return e.next=53,t.datastore.put(new kr("/peers/protos/".concat(S)),S_.encode({protocols:A.protocols}).finish());case 53:if(!(A.addresses&&A.addresses.length>0)){e.next=59;break}return I=A.peerRecordEnvelope,C=void 0,I&&(Z=j_.decode(I),R=q_.decode(Z.payload),C={raw:I,seq:R.seq}),e.next=59,t.datastore.put(new kr("/peers/addrs/".concat(S)),R_.encode({addrs:A.addresses,certifiedRecord:C}).finish());case 59:if(!(A.metadata&&A.metadata.length>0)){e.next=77;break}T=(0,v.Z)(A.metadata),e.prev=61,T.s();case 63:if((D=T.n()).done){e.next=69;break}return P=D.value,N=P.key,O=P.value,e.next=67,t.datastore.put(new kr("/peers/metadata/".concat(S,"/").concat(N)),O);case 67:e.next=63;break;case 69:e.next=74;break;case 71:e.prev=71,e.t1=e.catch(61),T.e(e.t1);case 74:return e.prev=74,T.f(),e.finish(74);case 77:if(!A.pubKey){e.next=80;break}return e.next=80,t.datastore.put(new kr("/peers/keys/".concat(S)),A.pubKey);case 80:x++,e.next=48;break;case 83:return e.next=85,t.datastore.close();case 85:r(100,"Stored each peerstore key under multiple datastore keys");case 86:case"end":return e.stop()}}),e,null,[[8,23,27,37],[28,,32,36],[61,71,74,77]])}))),G_.apply(this,arguments)}Se.util.Long=void 0,Se.configure();var Y_={version:12,description:"Store each peerstore peer under a single datastore key",migrate:function(e){return W_.apply(this,arguments)},revert:function(e){return G_.apply(this,arguments)}},Q_={description:"Empty migration.",migrate:function(){},revert:function(){},empty:!0},J_=[Object.assign({version:1},Q_),Object.assign({version:2},Q_),Object.assign({version:3},Q_),Object.assign({version:4},Q_),Object.assign({version:5},Q_),Object.assign({version:6},Q_),Object.assign({version:7},Q_),Sx,e_,v_,w_,Y_],X_=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="NonReversibleMigrationError",n.code=r.code,n.message=e,n}return(0,he.Z)(r)}(Pt(Error));X_.code="ERR_NON_REVERSIBLE_MIGRATION";var $_=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="NotInitializedRepoError",n.code=r.code,n.message=e,n}return(0,he.Z)(r)}(Pt(Error));$_.code="ERR_NOT_INITIALIZED_REPO";var eE=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="RequiredParameterError",n.code=r.code,n.message=e,n}return(0,he.Z)(r)}(Pt(Error));eE.code="ERR_REQUIRED_PARAMETER";var tE=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="InvalidValueError",n.code=r.code,n.message=e,n}return(0,he.Z)(r)}(Pt(Error));tE.code="ERR_INVALID_VALUE";var rE=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="MissingRepoOptionsError",n.code=r.code,n.message=e,n}return(0,he.Z)(r)}(Pt(Error));rE.code="ERR_MISSING_REPO_OPTIONS";var nE=be("ipfs:repo:migrator:repo:init");function aE(e){return iE.apply(this,arguments)}function iE(){return(iE=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new rE("Please pass repo options when trying to open a repo");case 2:return r=t.root,e.prev=3,e.next=6,r.open();case 6:return e.next=8,r.has(r_);case 8:return n=e.sent,e.next=11,r.has(t_);case 11:if(a=e.sent,n&&a){e.next=16;break}return nE("Version entry present: ".concat(n)),nE("Config entry present: ".concat(a)),e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(3),nE("While checking if repo is initialized error was thrown: "+e.t0.message),e.abrupt("return",!1);case 23:if(e.prev=23,void 0===r){e.next=32;break}return e.prev=25,e.next=28,r.close();case 28:e.next=32;break;case 30:e.prev=30,e.t1=e.catch(25);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[3,19,23,33],[25,30]])})))).apply(this,arguments)}function sE(e){return oE.apply(this,arguments)}function oE(){return(oE=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aE(t);case 2:if(e.sent){e.next=4;break}throw new $_("Repo is not initialized!");case 4:return r=t.root,e.next=7,r.open();case 7:return e.prev=7,e.t0=parseInt,e.t1=gr.toString,e.next=12,r.get(r_);case 12:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 15:return e.prev=15,e.next=18,r.close();case 18:return e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[7,,15,19]])})))).apply(this,arguments)}function uE(e,t){return cE.apply(this,arguments)}function cE(){return cE=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new rE("Please pass repo options when trying to open a repo");case 2:return n=r.root,e.next=5,n.open();case 5:return e.next=7,n.put(r_,(0,fr.fromString)(String(t)));case 7:return e.next=9,n.close();case 9:case"end":return e.stop()}}),e)}))),cE.apply(this,arguments)}var lE=be("ipfs:repo:migrator");function fE(e){return e=e||J_,Array.isArray(e)&&0!==e.length?e[e.length-1].version:0}function pE(e,t,r,n,a){return hE.apply(this,arguments)}function hE(){return hE=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o,u,c,l,f,p,h,d,y,g,m;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i.ignoreLock,o=void 0!==s&&s,u=i.onProgress,c=i.isDryRun,l=void 0!==c&&c,f=(f=i.migrations)||J_,t){e.next=4;break}throw new gE.RequiredParameterError("Path argument is required!");case 4:if(n){e.next=6;break}throw new gE.RequiredParameterError("repoOptions argument is required!");case 6:if(a){e.next=8;break}throw new gE.RequiredParameterError("toVersion argument is required!");case 8:if(Number.isInteger(a)&&!(a<=0)){e.next=10;break}throw new gE.InvalidValueError("Version has to be positive integer!");case 10:return r=o_(r),e.next=13,sE(r);case 13:if((p=e.sent)!==a){e.next=17;break}return lE("Nothing to migrate."),e.abrupt("return");case 17:if(!(p>a)){e.next=19;break}throw new gE.InvalidValueError("Current repo's version (".concat(p,") is higher then toVersion (").concat(a,"), you probably wanted to revert it?"));case 19:if(yE(f,p,a),l||o){e.next=24;break}return e.next=23,n.repoLock.lock(t);case 23:h=e.sent;case 24:e.prev=24,d=(0,v.Z)(f),e.prev=26,g=(0,ce.Z)().mark((function e(){var t,n,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.value,!(void 0!==a&&t.version>a)){e.next=3;break}return e.abrupt("return","break");case 3:if(!(t.version<=p)){e.next=5;break}return e.abrupt("return","continue");case 5:if(lE("Migrating version ".concat(t.version)),e.prev=6,l){e.next=12;break}return n=function(){},u&&(n=function(e,r){return u(t.version,e.toFixed(2),r)}),e.next=12,t.migrate(r,n);case 12:e.next=21;break;case 14:return e.prev=14,e.t0=e.catch(6),i=t.version-1,lE("An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ".concat(i)),e.next=20,uE(i,r);case 20:throw new Error("During migration to version ".concat(t.version," exception was raised: ").concat(e.t0.stack||e.t0.message||e.t0));case 21:lE("Migrating to version ".concat(t.version," finished"));case 22:case"end":return e.stop()}}),e,null,[[6,14]])})),d.s();case 29:if((y=d.n()).done){e.next=38;break}return e.delegateYield(g(),"t0",31);case 31:if("break"!==(m=e.t0)){e.next=34;break}return e.abrupt("break",38);case 34:if("continue"!==m){e.next=36;break}return e.abrupt("continue",36);case 36:e.next=29;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e.catch(26),d.e(e.t1);case 43:return e.prev=43,d.f(),e.finish(43);case 46:if(l){e.next=49;break}return e.next=49,uE(a||fE(f),r);case 49:lE("Repo successfully migrated",void 0!==a?"to version ".concat(a,"!"):"to latest version!");case 50:if(e.prev=50,l||o||!h){e.next=54;break}return e.next=54,h.close();case 54:return e.finish(50);case 55:case"end":return e.stop()}}),e,null,[[24,,50,55],[26,40,43,46]])}))),hE.apply(this,arguments)}function dE(e,t,r,n,a){return vE.apply(this,arguments)}function vE(){return vE=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o,u,c,l,f,p,h,d,y,g,m,b;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i.ignoreLock,o=void 0!==s&&s,u=i.onProgress,c=i.isDryRun,l=void 0!==c&&c,f=(f=i.migrations)||J_,t){e.next=4;break}throw new gE.RequiredParameterError("Path argument is required!");case 4:if(n){e.next=6;break}throw new gE.RequiredParameterError("repoOptions argument is required!");case 6:if(a){e.next=8;break}throw new gE.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");case 8:if(Number.isInteger(a)&&!(a<=0)){e.next=10;break}throw new gE.InvalidValueError("Version has to be positive integer!");case 10:return r=o_(r),e.next=13,sE(r);case 13:if((p=e.sent)!==a){e.next=17;break}return lE("Nothing to revert."),e.abrupt("return");case 17:if(!(p<a)){e.next=19;break}throw new gE.InvalidValueError("Current repo's version (".concat(p,") is lower then toVersion (").concat(a,"), you probably wanted to migrate it?"));case 19:if(yE(f,a,p,!0),l||o){e.next=24;break}return e.next=23,n.repoLock.lock(t);case 23:h=e.sent;case 24:lE("Reverting from version ".concat(p," to ").concat(a)),e.prev=25,d=f.slice().reverse(),y=(0,v.Z)(d),e.prev=28,m=(0,ce.Z)().mark((function e(){var t,n,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=g.value).version<=a)){e.next=3;break}return e.abrupt("return","break");case 3:if(!(t.version>p)){e.next=5;break}return e.abrupt("return","continue");case 5:if(lE("Reverting migration version ".concat(t.version)),e.prev=6,l){e.next=12;break}return n=function(){},u&&(n=function(e,r){return u(t.version,e.toFixed(2),r)}),e.next=12,t.revert(r,n);case 12:e.next=22;break;case 14:return e.prev=14,e.t0=e.catch(6),i=t.version,lE("An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ".concat(i)),e.next=20,uE(i,r);case 20:throw e.t0.message="During reversion to version ".concat(t.version," exception was raised: ").concat(e.t0.message),e.t0;case 22:lE("Reverting to version ".concat(t.version," finished"));case 23:case"end":return e.stop()}}),e,null,[[6,14]])})),y.s();case 31:if((g=y.n()).done){e.next=40;break}return e.delegateYield(m(),"t0",33);case 33:if("break"!==(b=e.t0)){e.next=36;break}return e.abrupt("break",40);case 36:if("continue"!==b){e.next=38;break}return e.abrupt("continue",38);case 38:e.next=31;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(28),y.e(e.t1);case 45:return e.prev=45,y.f(),e.finish(45);case 48:if(l){e.next=51;break}return e.next=51,uE(a,r);case 51:lE("All migrations successfully reverted to version ".concat(a,"!"));case 52:if(e.prev=52,l||o||!h){e.next=56;break}return e.next=56,h.close();case 56:return e.finish(52);case 57:case"end":return e.stop()}}),e,null,[[25,,52,57],[28,42,45,48]])}))),vE.apply(this,arguments)}function yE(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0,s=(0,v.Z)(e);try{for(s.s();!(n=s.n()).done;){var o=n.value;if(o.version>r)break;if(o.version>t){if(a&&!o.revert)throw new gE.NonReversibleMigrationError("It is not possible to revert to version ".concat(t," because migration version ").concat(o.version," is not reversible. Cancelling reversion."));i++}}}catch(Dy){s.e(Dy)}finally{s.f()}if(i!==r-t)throw new gE.InvalidValueError("The ipfs-repo-migrations package does not have all migration to migrate from version ".concat(t," to ").concat(r))}var gE=s,mE=__webpack_require__(1438),bE=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="LockExistsError",n.code=r.code,n}return(0,he.Z)(r)}(Pt(Error));bE.code="ERR_LOCK_EXISTS";var wE=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="NotFoundError",n.code=r.code,n}return(0,he.Z)(r)}(Pt(Error));wE.code="ERR_NOT_FOUND";var kE=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).name="InvalidRepoVersionError",n.code=r.code,n}return(0,he.Z)(r)}(Pt(Error));kE.code="ERR_INVALID_REPO_VERSION";var xE="ERR_REPO_NOT_INITIALIZED";function _E(e,t,r){return EE.apply(this,arguments)}function EE(){return EE=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:if(i=IE(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){e(Boolean(n.result))}})));case 9:case"end":return e.stop()}}),e)}))),EE.apply(this,arguments)}function SE(e,t,r,n){return AE.apply(this,arguments)}function AE(){return AE=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",r(t));case 4:if(i=IE(a)){e.next=7;break}throw new wE;case 7:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){if(n.result)return e(n.result);r(new wE)}})));case 8:case"end":return e.stop()}}),e)}))),AE.apply(this,arguments)}function IE(e){for(var t=e;t.db||t.child;)if("level-js"===(t=t.db||t.child).type||"Level"===t.constructor.name)return t}var CE=be("ipfs:repo:version"),ZE=new kr("version");var RE=__webpack_require__(6662),TE=__webpack_require__(8860),DE=RE.default?RE.default:RE,PE=new kr("config");var NE=__webpack_require__(4542),OE=new kr("datastore_spec");var BE=new kr("api");var LE=__webpack_require__(8914);function ME(e){var t=Ue.CID.asCID(e);if(null==t)throw Ee(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==rr.identity.code?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}var UE=be("ipfs:repo:lock:memory"),jE="repo.lock",FE={};function zE(){return zE=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(UE("locking %s",r=t+"/"+jE),!0!==FE[r]){e.next=4;break}throw new bE("Lock already being held for file: ".concat(r));case 4:return FE[r]=!0,n={close:function(){return(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FE[r]&&delete FE[r];case 1:case"end":return e.stop()}}),e)})))()}},e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),zE.apply(this,arguments)}function VE(){return VE=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UE("checking lock: ".concat(r=t+"/"+jE)),e.abrupt("return",Boolean(FE[r]));case 3:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}var KE={lock:function(e){return zE.apply(this,arguments)},locked:function(e){return VE.apply(this,arguments)}},qE={autoMigrate:!0,onMigrationProgress:function(){},repoOwner:!0,repoLock:KE},HE={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};function WE(e){var t=Tt.k0.asCID(e);if(null==t)throw Ee(new Error("Not a valid cid"),"ERR_INVALID_CID");var r=ke.base32.encode(t.multihash.bytes);return new kr("/"+r.slice(1).toUpperCase(),!1)}function GE(e){return Vn.decode(ke.base32.decode("b".concat(e.toString().toLowerCase().substring(1))))}var YE=be("ipfs:repo:utils:walk-dag");function QE(e,t,r,n){return JE.apply(this,arguments)}function JE(){return JE=ye((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pr(r.get(t,a));case 3:return i=e.sent,e.next=6,pr(n(t.code));case 6:s=e.sent,o=Bm({bytes:i,cid:t,codec:s}),u=(0,v.Z)(o.links()),e.prev=9,u.s();case 11:if((c=u.n()).done){e.next=18;break}return l=(0,y.Z)(c.value,2),f=l[1],e.next=15,f;case 15:return e.delegateYield(ia(hr(QE(f,r,n,a)),pr),"t0",16);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(9),u.e(e.t1);case 23:return e.prev=23,u.f(),e.finish(23);case 26:e.next=32;break;case 28:throw e.prev=28,e.t2=e.catch(0),YE("Could not walk DAG for CID",t.toString(),e.t2),e.t2;case 32:case"end":return e.stop()}}),e,null,[[0,28],[9,20,23,26]])}))),JE.apply(this,arguments)}var XE=function(){function e(t){var r=t.pinstore,n=t.blockstore,a=t.loadCodec;(0,pe.Z)(this,e),this.pinstore=r,this.blockstore=n,this.loadCodec=a,this.log=be("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}return(0,he.Z)(e,[{key:"pinDirectly",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.blockstore.get(t,r);case 3:return n={depth:0},0!==t.version&&(n.version=t.version),t.code!==ft&&(n.codec=t.code),r.metadata&&(n.metadata=r.metadata),e.abrupt("return",this.pinstore.put(WE(t),dt.cv(n)));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unpin",value:function(e,t){return this.pinstore.delete(WE(e),t)}},{key:"pinRecursively",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchCompleteDag(t,r);case 3:return n={depth:1/0},0!==t.version&&(n.version=t.version),t.code!==ft&&(n.codec=t.code),r.metadata&&(n.metadata=r.metadata),e.next=9,this.pinstore.put(WE(t),dt.cv(n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"directKeys",value:function(e){var t=this;return ye((0,ce.Z)().mark((function e(){var r,n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t.pinstore.query({filters:[function(e){return 0===dt.Jx(e.value).depth}]}));case 4:return e.next=6,pr(i.next());case 6:if(!(r=!(s=e.sent).done)){e.next=17;break}return o=s.value,u=dt.Jx(o.value),c=u.version||0,l=null!=u.codec?u.codec:ft,f=GE(o.key),e.next=14,{cid:Ue.CID.create(c,l,f),metadata:u.metadata};case 14:r=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==i.return){e.next=28;break}return e.next=28,pr(i.return());case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})))()}},{key:"recursiveKeys",value:function(e){var t=this;return ye((0,ce.Z)().mark((function e(){var r,n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t.pinstore.query({filters:[function(e){return dt.Jx(e.value).depth===1/0}]}));case 4:return e.next=6,pr(i.next());case 6:if(!(r=!(s=e.sent).done)){e.next=17;break}return o=s.value,u=dt.Jx(o.value),c=u.version||0,l=null!=u.codec?u.codec:ft,f=GE(o.key),e.next=14,{cid:Ue.CID.create(c,l,f),metadata:u.metadata};case 14:r=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==i.return){e.next=28;break}return e.next=28,pr(i.return());case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})))()}},{key:"indirectKeys",value:function(e){var t=this;return ye((0,ce.Z)().mark((function r(){var n,a,i,s,o,u,c,l,f,p,h,d,v;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,s=hr(t.recursiveKeys());case 4:return r.next=6,pr(s.next());case 6:if(!(n=!(o=r.sent).done)){r.next=46;break}u=o.value.cid,c=!1,l=!1,r.prev=10,p=hr(QE(u,t.blockstore,t.loadCodec,e));case 12:return r.next=14,pr(p.next());case 14:if(!(c=!(h=r.sent).done)){r.next=27;break}return d=h.value,v=[ca.recursive],r.next=19,pr(t.isPinnedWithType(d,v));case 19:if(!r.sent.pinned){r.next=22;break}return r.abrupt("continue",24);case 22:return r.next=24,d;case 24:c=!1,r.next=12;break;case 27:r.next=33;break;case 29:r.prev=29,r.t0=r.catch(10),l=!0,f=r.t0;case 33:if(r.prev=33,r.prev=34,!c||null==p.return){r.next=38;break}return r.next=38,pr(p.return());case 38:if(r.prev=38,!l){r.next=41;break}throw f;case 41:return r.finish(38);case 42:return r.finish(33);case 43:n=!1,r.next=4;break;case 46:r.next=52;break;case 48:r.prev=48,r.t1=r.catch(2),a=!0,i=r.t1;case 52:if(r.prev=52,r.prev=53,!n||null==s.return){r.next=57;break}return r.next=57,pr(s.return());case 57:if(r.prev=57,!a){r.next=60;break}throw i;case 60:return r.finish(57);case 61:return r.finish(52);case 62:case"end":return r.stop()}}),r,null,[[2,48,52,62],[10,29,33,43],[34,,38,42],[53,,57,61]])})))()}},{key:"isPinnedWithType",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function(){return p=ye((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,s=hr(r);case 4:return e.next=6,pr(s.next());case 6:if(!(n=!(o=e.sent).done)){e.next=42;break}u=o.value.cid,c=!1,f=!1,e.prev=10,h=hr(QE(u,l.blockstore,l.loadCodec));case 12:return e.next=14,pr(h.next());case 14:if(!(c=!(d=e.sent).done)){e.next=23;break}if(!d.value.equals(t)){e.next=20;break}return e.next=19,u;case 19:return e.abrupt("return");case 20:c=!1,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),f=!0,p=e.t0;case 29:if(e.prev=29,e.prev=30,!c||null==h.return){e.next=34;break}return e.next=34,pr(h.return());case 34:if(e.prev=34,!f){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(29);case 39:n=!1,e.next=4;break;case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(2),a=!0,i=e.t1;case 48:if(e.prev=48,e.prev=49,!n||null==s.return){e.next=53;break}return e.next=53,pr(s.return());case 53:if(e.prev=53,!a){e.next=56;break}throw i;case 56:return e.finish(53);case 57:return e.finish(48);case 58:case"end":return e.stop()}}),e,null,[[2,44,48,58],[10,25,29,39],[30,,34,38],[49,,53,57]])}))),p.apply(this,arguments)},f=function(e,t){return p.apply(this,arguments)},Array.isArray(r)||(r=[r]),a=r.includes(ca.all),i=r.includes(ca.direct),s=r.includes(ca.recursive),o=r.includes(ca.indirect),!(s||i||a)){e.next=14;break}return e.next=10,bb(this.pinstore.query({prefix:WE(t).toString(),filters:[function(e){if(a)return!0;var t=dt.Jx(e.value);return r.includes(0===t.depth?ca.direct:ca.recursive)}],limit:1}));case 10:if(!(u=e.sent)){e.next=14;break}return c=dt.Jx(u.value),e.abrupt("return",{cid:t,pinned:!0,reason:0===c.depth?ca.direct:ca.recursive,metadata:c.metadata});case 14:if(l=this,!a&&!o){e.next=21;break}return e.next=18,bb(f(t,this.recursiveKeys()));case 18:if(!(h=e.sent)){e.next=21;break}return e.abrupt("return",{cid:t,pinned:!0,reason:ca.indirect,parent:h});case 21:return e.abrupt("return",{cid:t,pinned:!1});case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"fetchCompleteDag",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Set,a=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.has(t.toString())){e.next=2;break}return e.abrupt("return");case 2:return n.add(t.toString()),e.next=5,i.blockstore.get(t,r);case 5:return s=e.sent,e.next=8,i.loadCodec(t.code);case 8:return o=e.sent,u=Bm({bytes:s,cid:t,codec:o}),e.next=12,Promise.all(Vt(u.links()).map((function(e){var t=(0,y.Z)(e,2)[1];return a(t,r)})));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.next=4,a(t,r);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"checkPinType",value:function(e){if("string"!==typeof e||!Object.keys(ca).includes(e))throw function(e){var t="Invalid type '".concat(e,"', must be one of {direct, indirect, recursive, all}");return Ee(new Error(t),"ERR_INVALID_PIN_TYPE")}(e);return!0}}]),e}();function $E(e,t){return eS.apply(this,arguments)}function eS(){return(eS=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.isPinnedWithType(t,ca.all);case 2:if(n=e.sent,a=n.pinned,i=n.reason,!a){e.next=7;break}throw Ee(new Error("pinned: ".concat(i)),"ERR_BLOCK_PINNED");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tS=__webpack_require__(3214),rS=__webpack_require__(7220),nS=be("ipfs:repo:gc"),aS=ga().code,iS=new kr("/local/filesroot");function sS(e){return oS.apply(this,arguments)}function oS(){return(oS=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.pins,n=t.blockstore,a=t.loadCodec,i=t.root,s=ye((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pr(i.get(iS));case 3:t=e.sent,e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code!==aS){e.next=11;break}return nS("No blocks in MFS"),e.abrupt("return");case 11:throw e.t0;case 12:return r=Ue.CID.decode(t),e.next=15,r;case 15:return e.delegateYield(ia(hr(QE(r,n,a)),pr),"t1",16);case 16:case"end":return e.stop()}}),e,null,[[0,6]])})))(),o=el($c(r.recursiveKeys(),(function(e){return e.cid})),r.indirectKeys(),$c(r.directKeys(),(function(e){return e.cid})),s),u=new Set,c=!1,l=!1,e.prev=6,p=hr(el(o,s));case 8:return e.next=10,p.next();case 10:if(!(c=!(h=e.sent).done)){e.next=16;break}d=h.value,u.add(ke.base32.encode(d.multihash.bytes));case 13:c=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),l=!0,f=e.t0;case 22:if(e.prev=22,e.prev=23,!c||null==p.return){e.next=27;break}return e.next=27,p.return();case 27:if(e.prev=27,!l){e.next=30;break}throw f;case 30:return e.finish(27);case 31:return e.finish(22);case 32:return e.abrupt("return",u);case 33:case"end":return e.stop()}}),e,null,[[6,18,22,32],[23,,27,31]])})))).apply(this,arguments)}function uS(e,t,r){return cS.apply(this,arguments)}function cS(){return cS=ye((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.blockstore,i=0,s=0,o=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var n,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i++,e.prev=1,n=ke.base32.encode(t.multihash.bytes),!r.has(n)){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,e.next=8,a.delete(t);case 8:s++,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",{err:new Error("Could not delete block with CID ".concat(t,": ").concat(e.t0.message))});case 14:return e.abrupt("return",{cid:t});case 17:return e.prev=17,e.t1=e.catch(1),o="Could delete block with CID ".concat(t),nS(o,e.t1),e.abrupt("return",{err:new Error(o+": ".concat(e.t1.message))});case 22:case"end":return e.stop()}}),e,null,[[1,17],[5,11]])})));return function(){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.delegateYield(ia(hr((0,rS.pipe)(jp($c(n,o),256),(function(e){return Vc(e,Boolean)}))),pr),"t0",5);case 5:nS("Marked set has ".concat(r.size," unique blocks. Blockstore has ").concat(i," blocks. ")+"Deleted ".concat(s," blocks."));case 6:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}var lS=be("ipfs:repo"),fS=Number.MAX_SAFE_INTEGER,pS=function(){function e(t,r,n,a){if((0,pe.Z)(this,e),"string"!==typeof t)throw new Error("missing repo path");if("function"!==typeof r)throw new Error("missing codec loader");this.options=ge(qE,a),this.closed=!0,this.path=t,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;var i=n.blocks,s=n.pins;this.pins=new XE({pinstore:s,blockstore:i,loadCodec:r});var o,u,c=(o=this.pins,u=i,{open:function(){return u.open()},close:function(){return u.close()},query:function(e,t){return u.query(e,t)},queryKeys:function(e,t){return u.queryKeys(e,t)},get:function(e,t){return(0,fe.Z)((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",u.get(e,t));case 1:case"end":return r.stop()}}),r)})))()},getMany:function(e,t){return ye((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(ia(hr(u.getMany(e,t)),pr),"t0",1);case 1:case"end":return r.stop()}}),r)})))()},put:function(e,t,r){return(0,fe.Z)((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.put(e,t,r);case 2:case"end":return n.stop()}}),n)})))()},putMany:function(e,t){return ye((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(ia(hr(u.putMany(e,t)),pr),"t0",1);case 1:case"end":return r.stop()}}),r)})))()},has:function(e,t){return u.has(e,t)},delete:function(e,t){return(0,fe.Z)((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$E(e,o);case 2:return r.abrupt("return",u.delete(e,t));case 3:case"end":return r.stop()}}),r)})))()},deleteMany:function(e,t){return u.deleteMany($c(e,function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$E(t,o);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t)},batch:function(){return u.batch()}});this.blocks=function(e){return{open:function(){return e.open()},close:function(){return e.close()},query:function(t,r){return e.query(t,r)},queryKeys:function(t,r){return e.queryKeys(t,r)},get:function(t,r){return(0,fe.Z)((0,ce.Z)().mark((function n(){var a;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=ME(t)).isIdentity){n.next=3;break}return n.abrupt("return",Promise.resolve(a.digest));case 3:return n.abrupt("return",e.get(t,r));case 4:case"end":return n.stop()}}),n)})))()},getMany:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,r.get(c,t);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,s=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()},put:function(t,r,n){return(0,fe.Z)((0,ce.Z)().mark((function a(){return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!ME(t).isIdentity){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,e.put(t,r,n);case 5:case"end":return a.stop()}}),a)})))()},putMany:function(t,r){return ye((0,ce.Z)().mark((function r(){var n;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=LE(),(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((0,fe.Z)((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,zc(e.putMany(ye((0,ce.Z)().mark((function e(){var r,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,s=hr(t);case 4:return e.next=6,pr(s.next());case 6:if(!(r=!(o=e.sent).done)){e.next=15;break}if(u=o.value,c=u.key,l=u.value,ME(c).isIdentity){e.next=11;break}return e.next=11,{key:c,value:l};case 11:n.push({key:c,value:l});case 12:r=!1,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),a=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!r||null==s.return){e.next=26;break}return e.next=26,pr(s.return());case 26:if(e.prev=26,!a){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])})))()));case 3:n.end(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),n.end(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))),r.delegateYield(ia(hr(n),pr),"t0",4);case 4:case"end":return r.stop()}}),r)})))()},has:function(t,r){return ME(t).isIdentity?Promise.resolve(!0):e.has(t,r)},delete:function(t,r){return ME(t).isIdentity?Promise.resolve():e.delete(t,r)},deleteMany:function(t,r){return e.deleteMany(Vc(t,(function(e){return!ME(e).isIdentity})),r)},batch:function(){var t=e.batch();return{put:function(e,r){ME(e).isIdentity||t.put(e,r)},delete:function(e){ME(e).isIdentity||t.delete(e)},commit:function(e){return t.commit(e)}}}}}(c),this.version=function(e){return{exists:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_E(ZE,e.has.bind(e),e));case 1:case"end":return t.stop()}}),t)})))()},get:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){var r;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,SE(ZE,e.get.bind(e),e.has.bind(e),e);case 2:return r=t.sent,t.abrupt("return",parseInt((0,gr.toString)(r),10));case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return e.put(ZE,(0,fr.fromString)(String(t)))},check:function(e){var t=this;return(0,fe.Z)((0,ce.Z)().mark((function r(){var n,a;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get();case 2:return n=r.sent,CE("comparing version: %s and %s",n,e),a=6===n&&7===e||6===e&&7===n,r.abrupt("return",n===e||a);case 6:case"end":return r.stop()}}),r)})))()}}}(this.root),this.config=function(e){var t=new DE({concurrency:1}),r={getAll:function(){var t=arguments;return(0,fe.Z)((0,ce.Z)().mark((function r(){var n;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],r.next=3,SE(PE,e.get.bind(e),e.has.bind(e),e);case 3:return n=r.sent,r.abrupt("return",JSON.parse((0,gr.toString)(n)));case 5:case"end":return r.stop()}}),r)})))()},get:function(e){var t=arguments,r=this;return(0,fe.Z)((0,ce.Z)().mark((function n(){var a,i,s;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:{},null!=e){n.next=3;break}throw new wE("Key ".concat(e," does not exist in config"));case 3:return n.next=5,r.getAll(a);case 5:if(i=n.sent,void 0!==(s=gx(i,e))){n.next=9;break}throw new wE("Key ".concat(e," does not exist in config"));case 9:return n.abrupt("return",s);case 10:case"end":return n.stop()}}),n)})))()},set:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof e&&!(e instanceof String))throw Ee(new Error("Invalid key type: "+typeof e),"ERR_INVALID_KEY");if(void 0===r||r instanceof Uint8Array)throw Ee(new Error("Invalid value type: "+typeof r),"ERR_INVALID_VALUE");return t.add((function(){return n({key:e,value:r},a.signal)}))},replace:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e instanceof Uint8Array)throw Ee(new Error("Invalid value type: "+typeof e),"ERR_INVALID_VALUE");return t.add((function(){return n({key:void 0,value:e},r.signal)}))},exists:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_E(PE,e.has.bind(e),e));case 1:case"end":return t.stop()}}),t)})))()}};return r;function n(e,t){return a.apply(this,arguments)}function a(){return a=(0,fe.Z)((0,ce.Z)().mark((function e(t,n){var a,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.aborted){e.next=2;break}return e.abrupt("return");case 2:if(a=t.key,s=t.value,!a){e.next=10;break}return e.next=7,r.getAll();case 7:return"object"===typeof(o=e.sent)&&null!==o&&TE(o,a,s),e.abrupt("return",i(o));case 10:return e.abrupt("return",i(s));case 11:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function i(t){var r=(0,fr.fromString)(JSON.stringify(t,null,2));return e.put(PE,r)}}(this.root),this.spec=function(e){return{exists:function(){return e.has(OE)},get:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){var r;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(OE);case 2:return r=t.sent,t.abrupt("return",JSON.parse((0,gr.toString)(r)));case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return(0,fe.Z)((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.put(OE,(0,fr.fromString)(JSON.stringify(NE(t,{deep:!0})))));case 1:case"end":return r.stop()}}),r)})))()}}}(this.root),this.apiAddr=function(e){return{get:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){var r;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(BE);case 2:return r=t.sent,t.abrupt("return",r&&r.toString());case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return e.put(BE,(0,fr.fromString)(t.toString()))},delete:function(){return e.delete(BE)}}}(this.root),this.gcLock=tS(t,{singleProcess:!1!==this.options.repoOwner}),this.gc=function(e){var t=e.gcLock,r=e.pins,n=e.blockstore,a=e.root,i=e.loadCodec;function s(){return s=ye((0,ce.Z)().mark((function e(){var s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Date.now(),nS("Creating set of marked blocks"),e.next=4,pr(t.writeLock());case 4:return o=e.sent,e.prev=5,e.next=8,pr(sS({pins:r,blockstore:n,root:a,loadCodec:i}));case 8:return u=e.sent,c=n.queryKeys({}),e.delegateYield(ia(hr(uS({blockstore:n},u,c)),pr),"t0",11);case 11:nS("Complete (".concat(Date.now()-s,"ms)"));case 12:return e.prev=12,o(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[5,,12,15]])}))),s.apply(this,arguments)}return function(){return s.apply(this,arguments)}}({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:r})}return(0,he.Z)(e,[{key:"init",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lS("initializing at: %s",this.path),e.next=3,this._openRoot();case 3:return e.next=5,this.config.replace(vS(t));case 5:return e.next=7,this.spec.set(yS(t));case 7:return e.next=9,this.version.set(hx);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isInitialized",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,e.next=5,this._openRoot();case 5:return e.next=7,this._checkInitialized();case 7:return e.next=9,this.root.close();case 9:return e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"open",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed){e.next=2;break}throw Ee(new Error("repo is already open"),"ERR_REPO_ALREADY_OPEN");case 2:return lS("opening at: %s",this.path),e.prev=3,e.next=6,this._openRoot();case 6:return e.next=8,this._checkInitialized();case 8:return e.next=10,this._openLock();case 10:return this._lockfile=e.sent,lS("acquired repo.lock"),e.next=14,this.version.check(hx);case 14:if(e.sent){e.next=24;break}return e.next=18,this._isAutoMigrationEnabled();case 18:if(!e.sent){e.next=23;break}return e.next=21,this._migrate(hx,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});case 21:e.next=24;break;case 23:throw new kE("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");case 24:return lS("creating datastore"),e.next=27,this.datastore.open();case 27:return lS("creating blocks"),e.next=30,this.blocks.open();case 30:return lS("creating keystore"),e.next=33,this.keys.open();case 33:return lS("creating pins"),e.next=36,this.pins.pinstore.open();case 36:this.closed=!1,lS("all opened"),e.next=53;break;case 40:if(e.prev=40,e.t0=e.catch(3),!this._lockfile){e.next=52;break}return e.prev=43,e.next=46,this._closeLock();case 46:this._lockfile=null,e.next=52;break;case 49:e.prev=49,e.t1=e.catch(43),lS("error removing lock",e.t1);case 52:throw e.t0;case 53:case"end":return e.stop()}}),e,this,[[3,40],[43,49]])})));return function(){return e.apply(this,arguments)}}()},{key:"_openRoot",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.root.open();case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"Already open"===e.t0.message){e.next=9;break}throw e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"_openLock",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.options.repoLock.lock(this.path);case 2:if("function"===typeof(t=e.sent).close){e.next=5;break}throw Ee(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_closeLock",value:function(){return this._lockfile&&this._lockfile.close()}},{key:"_checkInitialized",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lS("init check"),e.prev=1,e.next=4,Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()]);case 4:r=e.sent,n=(0,y.Z)(r,1),t=n[0],e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(1),"ERR_NOT_FOUND"!==e.t0.code){e.next=13;break}throw Ee(new Error("repo is not initialized yet"),xE,{path:this.path});case 13:throw e.t0;case 14:if(t){e.next=16;break}throw Ee(new Error("repo is not initialized yet"),xE,{path:this.path});case 16:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.closed){e.next=2;break}throw Ee(new Error("repo is already closed"),"ERR_REPO_ALREADY_CLOSED");case 2:return lS("closing at: %s",this.path),e.prev=3,e.next=6,this.apiAddr.delete();case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),e.t0.code===xE||e.t0.message.startsWith("ENOENT")){e.next=12;break}throw e.t0;case 12:return e.next=14,Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map((function(e){return e&&e.close()})));case 14:return lS("unlocking"),this.closed=!0,e.next=18,this._closeLock();case 18:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"exists",value:function(){return this.version.exists()}},{key:"stat",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.datastore||!this.keys){e.next=12;break}return e.next=3,Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),hS(this.datastore),hS(this.keys)]);case 3:return t=e.sent,r=(0,y.Z)(t,5),n=r[0],a=r[1],i=r[2],s=r[3],o=r[4],u=a.size+s+o,e.abrupt("return",{repoPath:this.path,storageMax:n,version:i,numObjects:a.count,repoSize:u});case 12:throw Ee(new Error("repo is not initialized yet"),xE,{path:this.path});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_isAutoMigrationEnabled",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.options.autoMigrate){e.next=2;break}return e.abrupt("return",this.options.autoMigrate);case 2:return e.prev=2,e.next=5,this.config.get("repoAutoMigrate");case 5:t=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(2),e.t0.code!==wE.code){e.next=14;break}t=!0,e.next=15;break;case 14:throw e.t0;case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"_migrate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.version.get();case 2:if(!(e.sent>t)){e.next=8;break}return lS("reverting to version ".concat(t)),e.abrupt("return",dE(this.path,r,this.options,t,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}));case 8:return lS("migrating to version ".concat(t)),e.abrupt("return",pE(this.path,r,this.options,t,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_storageMaxStat",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.config.get("Datastore.StorageMax");case 3:return t=e.sent,e.abrupt("return",BigInt(mE(t)));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",BigInt(fS));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"_blockStat",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=BigInt(0),r=BigInt(0),!this.blocks){e.next=33;break}n=!1,a=!1,e.prev=5,s=hr(this.blocks.query({}));case 7:return e.next=9,s.next();case 9:if(!(n=!(o=e.sent).done)){e.next=17;break}u=o.value,c=u.key,l=u.value,t+=BigInt(1),r+=BigInt(l.byteLength),r+=BigInt(c.bytes.byteLength);case 14:n=!1,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),a=!0,i=e.t0;case 23:if(e.prev=23,e.prev=24,!n||null==s.return){e.next=28;break}return e.next=28,s.return();case 28:if(e.prev=28,!a){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(23);case 33:return e.abrupt("return",{count:t,size:r});case 34:case"end":return e.stop()}}),e,this,[[5,19,23,33],[24,,28,32]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function hS(e){return dS.apply(this,arguments)}function dS(){return(dS=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=BigInt(0),n=!1,a=!1,e.prev=3,s=hr(t.query({}));case 5:return e.next=7,s.next();case 7:if(!(n=!(o=e.sent).done)){e.next=14;break}u=o.value,r+=BigInt(u.value.byteLength),r+=BigInt(u.key.uint8Array().byteLength);case 11:n=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}function vS(e){return e.Datastore=Object.assign({},HE,gx(e,"datastore")),e}function yS(e){var t=(0,le.Z)((0,le.Z)({},HE.Spec),gx(e,"Datastore.Spec"));return{type:t.type,mounts:t.mounts.map((function(e){return{mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc}}))}}var gS=__webpack_require__(2035),mS=__webpack_require__(2164),bS=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this)).path=e,a.opts=n,n&&n.db?(a.database=n.db,delete n.db):a.database=mS,a}return(0,he.Z)(r,[{key:"_initDb",value:function(){var e=this;return new Promise((function(t,r){e.db=e.database(e.path,(0,le.Z)((0,le.Z)({},e.opts),{},{valueEncoding:"binary",compression:!1}),(function(n){if(n)return r(n);t(e.db)}))}))}},{key:"open",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.db){e.next=6;break}return e.next=4,this.db.open();case 4:e.next=9;break;case 6:return e.next=8,this._initDb();case 8:this.db=e.sent;case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),da(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.put(t.toString(),r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),ya(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.get(t.toString());case 3:r=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0.notFound){e.next=10;break}throw ga(e.t0);case 10:throw ya(e.t0);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.get(t.toString());case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0.notFound){e.next=9;break}return e.abrupt("return",!1);case 9:throw e.t0;case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.del(t.toString());case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),va(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){return this.db&&this.db.close()}},{key:"batch",value:function(){var e=this,t=[];return{put:function(e,r){t.push({type:"put",key:e.toString(),value:r})},delete:function(e){t.push({type:"del",key:e.toString()})},commit:function(){return e.db.batch(t)}}}},{key:"query",value:function(e){var t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((function(e,t){return Vc(e,t)}),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((function(e,t){return gS(e,t)}),t));var r=e.offset,n=e.limit;if(r){var a=0;t=Vc(t,(function(){return a++>=r}))}return n&&(t=Kc(t,n)),t}},{key:"queryKeys",value:function(e){var t=$c(this._query({values:!1,prefix:e.prefix}),(function(e){return e.key}));Array.isArray(e.filters)&&(t=e.filters.reduce((function(e,t){return Vc(e,t)}),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((function(e,t){return gS(e,t)}),t));var r=e.offset,n=e.limit;if(r){var a=0;t=Vc(t,(function(){return a++>=r}))}return n&&(t=Kc(t,n)),t}},{key:"_query",value:function(e){var t,r={keys:!0,keyAsBuffer:!0,values:e.values};if(null!=e.prefix){var n=e.prefix.toString();r.gte=n,r.lt=n+"\xff"}return t=this.db.iterator(r),(0,hp.Z)({},Symbol.asyncIterator,(function(){return{next:function(){return new Promise((function(e,r){t.next((function(n,a,i){return n?r(n):null==a?t.end((function(t){if(t)return r(t);e({done:!0,value:void 0})})):void e({done:!1,value:{key:new kr(a,!1),value:i}})}))}))},return:function(){return new Promise((function(e,r){t.end((function(t){if(t)return r(t);e({done:!0,value:void 0})}))}))}}}))}}]),r}(qc);var wS=__webpack_require__(3844),kS=function(e,t){return ye((0,ce.Z)().mark((function r(){var n;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pr(jc(e));case 2:return n=r.sent,r.delegateYield(ia(hr(n.sort(t)),pr),"t0",4);case 4:case"end":return r.stop()}}),r)})))()},xS=function(){function e(){(0,pe.Z)(this,e)}return(0,he.Z)(e,[{key:"open",value:function(){return Promise.reject(new Error(".open is not implemented"))}},{key:"close",value:function(){return Promise.reject(new Error(".close is not implemented"))}},{key:"put",value:function(e,t,r){return Promise.reject(new Error(".put is not implemented"))}},{key:"get",value:function(e,t){return Promise.reject(new Error(".get is not implemented"))}},{key:"has",value:function(e,t){return Promise.reject(new Error(".has is not implemented"))}},{key:"delete",value:function(e,t){return Promise.reject(new Error(".delete is not implemented"))}},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,l=c.key,f=c.value,n.next=10,pr(t.put(l,f,r));case 10:return n.next=12,{key:l,value:f};case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,s=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==o.return){n.next=26;break}return n.next=26,pr(o.return());case 26:if(n.prev=26,!i){n.next=29;break}throw s;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,s=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,n.next=10,pr(t.delete(c,r));case 10:return n.next=12,c;case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,s=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==o.return){n.next=26;break}return n.next=26,pr(o.return());case 26:if(n.prev=26,!i){n.next=29;break}throw s;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"batch",value:function(){var e=this,t=[],r=[];return{put:function(e,r){t.push({key:e,value:r})},delete:function(e){r.push(e)},commit:function(){var n=(0,fe.Z)((0,ce.Z)().mark((function n(a){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,zc(e.putMany(t,a));case 2:return t=[],n.next=5,zc(e.deleteMany(r,a));case 5:r=[];case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}},{key:"_all",value:function(e,t){return ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._all is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"_allKeys",value:function(e,t){return ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._allKeys is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"query",value:function(e,t){var r=this._all(e,t);if(null!=e.prefix&&(r=Vc(r,(function(t){return t.key.toString().startsWith(e.prefix||"")}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return Vc(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return kS(e,t)}),r)),null!=e.offset){var n=0;r=Vc(r,(function(){return n++>=(e.offset||0)}))}return null!=e.limit&&(r=Kc(r,e.limit)),r}},{key:"queryKeys",value:function(e,t){var r=this._allKeys(e,t);if(null!=e.prefix&&(r=Vc(r,(function(t){return t.toString().startsWith(e.prefix||"")}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return Vc(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return kS(e,t)}),r)),null!=e.offset){var n=0;r=Vc(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=Kc(r,e.limit)),r}}]),e}();function _S(e){var t=Ue.CID.asCID(e);if(!t)throw Ee(new Error("Not a valid cid"),"ERR_INVALID_CID");return new kr("/"+ke.base32.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function ES(e){return Ue.CID.createV1(Jp.code,Vn.decode(ke.base32.decode("b"+e.toString().slice(1).toLowerCase())))}function SS(e){var t,r,n=e.substring(0,1);if("/"===n)return SS(e.substring(1));t="b"===n.toLowerCase()?function(e){return ke.base32.decode(e.toLowerCase()).subarray(2)}:"c"===n.toLowerCase()?function(e){return ke.base32pad.decode(e.toLowerCase()).subarray(2)}:"z"===n?function(e){return we.base58btc.decode(e).subarray(2)}:"Q"===n?function(e){return we.base58btc.decode("z"+e)}:function(e){return ke.base32.decode("b"+e.toLowerCase()).subarray(2)};for(var a=1;a<e.length;a++)try{r=t(e.substring(0,a))}catch(Dy){if("Unexpected end of data"!==Dy.message)throw Dy}var i="/C";return r&&(i="/".concat(ke.base32.encode(r).slice(1,-1).toUpperCase()||"C")),i}function AS(e){return(0,le.Z)((0,le.Z)({},e),{},{prefix:e.prefix?SS(e.prefix):void 0,filters:e.filters?e.filters.map((function(e){return function(t){return e({key:ES(t.key),value:t.value})}})):void 0,orders:e.orders?e.orders.map((function(e){return function(t,r){return e({key:ES(t.key),value:t.value},{key:ES(r.key),value:r.value})}})):void 0})}function IS(e){return(0,le.Z)((0,le.Z)({},e),{},{prefix:e.prefix?SS(e.prefix):void 0,filters:e.filters?e.filters.map((function(e){return function(t){return e(ES(t))}})):void 0,orders:e.orders?e.orders.map((function(e){return function(t,r){return e(ES(t),ES(r))}})):void 0})}var CS=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this)).child=e,n}return(0,he.Z)(r,[{key:"open",value:function(){return this.child.open()}},{key:"close",value:function(){return this.child.close()}},{key:"query",value:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(r.child.query(AS(e),t));case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,l=c.key,f=c.value,n.next=10,{key:ES(l),value:f};case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,s=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"queryKeys",value:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(r.child.queryKeys(IS(e),t));case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,ES(c);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,s=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.child.get(_S(t),r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,r.get(c,t);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,s=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.child.put(_S(t),r,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){var a;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=wS(),(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((0,fe.Z)((0,ce.Z)().mark((function n(){var i;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r.child,n.next=4,zc(r.child.putMany(ye((0,ce.Z)().mark((function r(){var n,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,s=!1,r.prev=2,u=hr(e);case 4:return r.next=6,pr(u.next());case 6:if(!(n=!(c=r.sent).done)){r.next=19;break}return l=c.value,f=_S(l.key),r.next=11,pr(i.has(f,t));case 11:if(r.sent){r.next=15;break}return r.next=15,{key:f,value:l.value};case 15:a.push(l);case 16:n=!1,r.next=4;break;case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(2),s=!0,o=r.t0;case 25:if(r.prev=25,r.prev=26,!n||null==u.return){r.next=30;break}return r.next=30,pr(u.return());case 30:if(r.prev=30,!s){r.next=33;break}throw o;case 33:return r.finish(30);case 34:return r.finish(25);case 35:case"end":return r.stop()}}),r,null,[[2,21,25,35],[26,,30,34]])})))()));case 4:a.end(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a.end(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))),n.delegateYield(ia(hr(a),pr),"t0",4);case 4:case"end":return n.stop()}}),n)})))()}},{key:"has",value:function(e,t){return this.child.has(_S(e),t)}},{key:"delete",value:function(e,t){return this.child.delete(_S(e),t)}},{key:"deleteMany",value:function(e,t){var r=wS();return zc(this.child.deleteMany(ye((0,ce.Z)().mark((function t(){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,s=hr(e);case 4:return t.next=6,pr(s.next());case 6:if(!(n=!(o=t.sent).done)){t.next=14;break}return u=o.value,t.next=10,_S(u);case 10:r.push(u);case 11:n=!1,t.next=4;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(2),a=!0,i=t.t0;case 20:if(t.prev=20,t.prev=21,!n||null==s.return){t.next=25;break}return t.next=25,pr(s.return());case 25:if(t.prev=25,!a){t.next=28;break}throw i;case 28:return t.finish(25);case 29:return t.finish(20);case 30:r.end();case 31:case"end":return t.stop()}}),t,null,[[2,16,20,30],[21,,25,29]])})))(),t)).catch((function(e){r.end(e)})),r}}]),r}(xS);function ZS(e,t,r){var n=r.path||"ipfs";return function(e,t,r,n){return new pS(e,t,r,n)}(n,(function(e){return t.getCodec(e)}),{root:new bS(n,{prefix:"",version:2}),blocks:new CS(new bS("".concat(n,"/blocks"),{prefix:"",version:2})),datastore:new bS("".concat(n,"/datastore"),{prefix:"",version:2}),keys:new bS("".concat(n,"/keys"),{prefix:"",version:2}),pins:new bS("".concat(n,"/pins"),{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||e,repoLock:KE})}var RS,TS="ERR_SIGNATURE_NOT_VALID";!function(e){e.codec=function(){return yi({1:{name:"publicKey",codec:Ja},2:{name:"payloadType",codec:Ja},3:{name:"payload",codec:Ja},5:{name:"signature",codec:Ja}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(RS||(RS={}));var DS=function(){function e(t){(0,pe.Z)(this,e);var r=t.peerId,n=t.payloadType,a=t.payload,i=t.signature;this.peerId=r,this.payloadType=n,this.payload=a,this.signature=i}return(0,he.Z)(e,[{key:"marshal",value:function(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=RS.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload,signature:this.signature})),this.marshaled}},{key:"equals",value:function(e){return(0,Kn.equals)(this.marshal(),e.marshal())}},{key:"validate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=NS(t,this.payloadType,this.payload),null!=this.peerId.publicKey){e.next=3;break}throw new Error("Missing public key");case 3:return n=Yu(this.peerId.publicKey),e.next=6,n.verify(r,this.signature);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();DS.createFromProtobuf=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=RS.decode(t),e.next=3,ta(r.publicKey);case 3:return n=e.sent,e.abrupt("return",new DS({peerId:n,payloadType:r.payloadType,payload:r.payload,signature:r.signature}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DS.seal=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.domain,a=t.codec,i=t.marshal(),s=NS(n,a,i),null!=r.privateKey){e.next=6;break}throw new Error("Missing private key");case 6:return e.next=8,Ju(r.privateKey);case 8:return o=e.sent,e.next=11,o.sign(s);case 11:return u=e.sent,e.abrupt("return",new DS({peerId:r,payloadType:a,payload:i,signature:u}));case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),DS.openAndCertify=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DS.createFromProtobuf(t);case 2:return n=e.sent,e.next=5,n.validate(r);case 5:if(e.sent){e.next=8;break}throw Ee(new Error("envelope signature is not valid for the given domain"),TS);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var PS,NS=function(e,t,r){var n=(0,fr.fromString)(e),a=pf.encode(n.byteLength),i=pf.encode(t.length),s=pf.encode(r.length);return(0,ba.concat)([new Uint8Array(a),n,new Uint8Array(i),t,new Uint8Array(s),r])};!function(e){!function(e){e.codec=function(){return yi({1:{name:"multiaddr",codec:Ja}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.AddressInfo||(e.AddressInfo={})),e.codec=function(){return yi({1:{name:"peerId",codec:Ja},2:{name:"seq",codec:Ii},3:{name:"addresses",codec:e.AddressInfo.codec(),repeats:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(PS||(PS={}));var OS=Uint8Array.from([3,1]),BS=function(){function e(t){(0,pe.Z)(this,e),this.domain=e.DOMAIN,this.codec=e.CODEC;var r=t.peerId,n=t.multiaddrs,a=t.seqNumber;this.peerId=r,this.multiaddrs=null!==n&&void 0!==n?n:[],this.seqNumber=null!==a&&void 0!==a?a:BigInt(Date.now())}return(0,he.Z)(e,[{key:"marshal",value:function(){return null==this.marshaled&&(this.marshaled=PS.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((function(e){return{multiaddr:e.bytes}}))})),this.marshaled}},{key:"equals",value:function(t){return t instanceof e&&(!!this.peerId.equals(t.peerId)&&(this.seqNumber===t.seqNumber&&!!function(e,t){var r=function(e,t){return e.toString().localeCompare(t.toString())};return e.length===t.length&&t.sort(r)&&e.sort(r).every((function(e,r){return t[r].equals(e)}))}(this.multiaddrs,t.multiaddrs)))}}]),e}();BS.createFromProtobuf=function(e){var t,r=PS.decode(e),n=ea(r.peerId),a=(null!==(t=r.addresses)&&void 0!==t?t:[]).map((function(e){return new Lf(e.multiaddr)})),i=r.seq;return new BS({peerId:n,multiaddrs:a,seqNumber:i})},BS.DOMAIN="libp2p-peer-record",BS.CODEC=OS;var LS=Symbol.for("@libp2p/topology");var MS,US=function(){},jS=function(e){function t(e){var r,n,a,i;(0,pe.Z)(this,t),this.min=null!==(r=e.min)&&void 0!==r?r:0,this.max=null!==(n=e.max)&&void 0!==n?n:1/0,this.peers=new Set,this.onConnect=null!==(a=e.onConnect)&&void 0!==a?a:US,this.onDisconnect=null!==(i=e.onDisconnect)&&void 0!==i?i:US}return(0,he.Z)(t,[{key:e,get:function(){return LS.toString()}},{key:LS,get:function(){return!0}},{key:"setRegistrar",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.registrar=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(e){this.onDisconnect(e)}}]),t}(Symbol.toStringTag);function FS(e){return new jS(e)}var zS,VS=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},KS=function(e){St(r,e);var t=Rt(r);function r(){var e;return(0,pe.Z)(this,r),e=t.apply(this,arguments),zS.set(Ct(e),new Map),e}return(0,he.Z)(r,[{key:"listenerCount",value:function(e){var t=VS(this,zS,"f").get(e);return null==t?0:t.length}},{key:"addEventListener",value:function(e,t,n){var a;_t(kt(r.prototype),"addEventListener",this).call(this,e,t,n);var i=VS(this,zS,"f").get(e);null==i&&(i=[],VS(this,zS,"f").set(e,i)),i.push({callback:t,once:null!==(a=!0!==n&&!1!==n&&(null===n||void 0===n?void 0:n.once))&&void 0!==a&&a})}},{key:"removeEventListener",value:function(e,t,n){_t(kt(r.prototype),"removeEventListener",this).call(this,e.toString(),null!==t&&void 0!==t?t:null,n);var a=VS(this,zS,"f").get(e);null!=a&&(a=a.filter((function(e){return e.callback!==t})),VS(this,zS,"f").set(e,a))}},{key:"dispatchEvent",value:function(e){var t=_t(kt(r.prototype),"dispatchEvent",this).call(this,e),n=VS(this,zS,"f").get(e.type);return null==n||(n=n.filter((function(e){return!e.once})),VS(this,zS,"f").set(e.type,n)),t}}]),r}(Pt(EventTarget));zS=new WeakMap;var qS=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this,e,n)).detail=null===n||void 0===n?void 0:n.detail,a}return(0,he.Z)(r)}(Pt(Event)),HS=null!==(MS=globalThis.CustomEvent)&&void 0!==MS?MS:qS,WS=function e(t,r,n){var a=pf.encode(t,r,n);return e.bytes=pf.encode.bytes,null!==r&&void 0!==r?r:Uint8Array.from(a)};WS.bytes=0;function GS(e){var t,r,n,a;e=null!==(t=e)&&void 0!==t?t:{};var i=Math.max(null!==(r=e.poolSize)&&void 0!==r?r:10240,null!==(n=e.minPoolSize)&&void 0!==n?n:8),s=null!==(a=e.lengthEncoder)&&void 0!==a?a:WS,o=function(){var e=ye((0,ce.Z)().mark((function e(t){var r,n,a,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Uint8Array(i),n=0,a=!1,o=!1,e.prev=4,c=hr(t);case 6:return e.next=8,pr(c.next());case 8:if(!(a=!(l=e.sent).done)){e.next=19;break}return f=l.value,s(f.length,r,n),p=r.slice(n,n+s.bytes),n+=s.bytes,r.length-n<8&&(r=new Uint8Array(i),n=0),e.next=16,(0,ba.concat)([p,f.slice()],p.length+f.length);case 16:a=!1,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),o=!0,u=e.t0;case 25:if(e.prev=25,e.prev=26,!a||null==c.return){e.next=30;break}return e.next=30,pr(c.return());case 30:if(e.prev=30,!o){e.next=33;break}throw u;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])})));return function(t){return e.apply(this,arguments)}}();return o}GS.single=function(e,t){var r,n,a=null!==(n=(t=null!==(r=t)&&void 0!==r?r:{}).lengthEncoder)&&void 0!==n?n:WS;return new _a(a(e.length),e.slice())};var YS,QS=function e(t){var r=pf.decode(t);return e.bytes=pf.decode.bytes,r};QS.bytes=0;var JS=new _a,XS="readLength",$S="readData",eA=(YS={},(0,hp.Z)(YS,XS,(function(e,t,r,n){var a,i,s,o,u=null!==(a=null===n||void 0===n?void 0:n.lengthDecoder)&&void 0!==a?a:QS,c=null!==(i=null===n||void 0===n?void 0:n.maxLengthLength)&&void 0!==i?i:8,l=null!==(s=null===n||void 0===n?void 0:n.maxDataLength)&&void 0!==s?s:4194304;t.append(e);try{o=u(t.slice())}catch(Dy){if(t.length>c)throw Ee(new Error("message length too long"),"ERR_MSG_LENGTH_TOO_LONG");if(Dy instanceof RangeError)return{mode:XS,buffer:t,chunk:void 0,state:void 0,data:void 0};throw Dy}if(o>l)throw Ee(new Error("message data too long"),"ERR_MSG_DATA_TOO_LONG");return e=t.subarray(u.bytes),t=new _a,null!=(null===n||void 0===n?void 0:n.onLength)&&n.onLength(o),o<=0?{mode:XS,chunk:e,buffer:t,data:JS}:{mode:$S,chunk:e,buffer:t,state:{dataLength:o},data:void 0}})),(0,hp.Z)(YS,$S,(function(e,t,r,n){if(t.append(e),null==r)throw new Error("state is required");if(t.length<r.dataLength)return{mode:$S,buffer:t,state:r,chunk:void 0,data:void 0};var a=r.dataLength,i=t.subarray(0,a),s=t.length>a?t.subarray(a):void 0;return t=new _a,{mode:XS,chunk:s,buffer:t,state:void 0,data:i}})),YS);function tA(e){var t=function(){var t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new _a,a=XS,s=!1,o=!1,t.prev=4,c=hr(r);case 6:return t.next=8,pr(c.next());case 8:if(!(s=!(l=t.sent).done)){t.next=27;break}f=l.value,p=new _a(f);case 11:if(null==p){t.next=24;break}if(h=eA[a](p,n,i,e),a=h.mode,p=h.chunk,n=h.buffer,i=h.state,null==h.data){t.next=22;break}return d=h.data.slice(),null!=(null===e||void 0===e?void 0:e.onData)&&e.onData(d),t.next=22,d;case 22:t.next=11;break;case 24:s=!1,t.next=6;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(4),o=!0,u=t.t0;case 33:if(t.prev=33,t.prev=34,!s||null==c.return){t.next=38;break}return t.next=38,pr(c.return());case 38:if(t.prev=38,!o){t.next=41;break}throw u;case 41:return t.finish(38);case 42:return t.finish(33);case 43:if(!(n.length>0)){t.next=45;break}throw Ee(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");case 45:case"end":return t.stop()}}),t,null,[[4,29,33,43],[34,,38,42]])})));return function(e){return t.apply(this,arguments)}}();return t}tA.fromReader=function(e,t){var r=1,n=ye((0,ce.Z)().mark((function t(){var n,a,i;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,pr(e.next(r));case 4:if(n=t.sent,a=n.done,i=n.value,!0!==a){t.next=9;break}return t.abrupt("return");case 9:if(null==i){t.next=12;break}return t.next=12,i;case 12:t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(1),"ERR_UNDER_READ"!==t.t0.code){t.next=18;break}return t.abrupt("return",{done:!0,value:null});case 18:throw t.t0;case 19:return t.prev=19,r=1,t.finish(19);case 22:t.next=0;break;case 24:case"end":return t.stop()}}),t,null,[[1,14,19,22]])})))();return tA((0,le.Z)((0,le.Z)({},null!==t&&void 0!==t?t:{}),{},{onLength:function(e){r=e}}))(n)};(function(e,t,r){var n;return t=null!==(n=t)&&void 0!==n?n:function(e){var t;return null!=(null===globalThis||void 0===globalThis||null===(t=globalThis.Buffer)||void 0===t?void 0:t.allocUnsafe)?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}(4),new DataView(t.buffer,t.byteOffset,t.byteLength).setInt32(null!==r&&void 0!==r?r:0,e,!1),t}).bytes=4;var rA=function(){function e(t){if((0,pe.Z)(this,e),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}return(0,he.Z)(e,[{key:"push",value:function(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}},{key:"shift",value:function(){var e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}},{key:"isEmpty",value:function(){return void 0===this.buffer[this.btm]}}]),e}(),nA=function(){function e(t){(0,pe.Z)(this,e),this.hwm=null!==t&&void 0!==t?t:16,this.head=new rA(this.hwm),this.tail=this.head}return(0,he.Z)(e,[{key:"push",value:function(e){if(!this.head.push(e)){var t=this.head;this.head=t.next=new rA(2*this.head.buffer.length),this.head.push(e)}}},{key:"shift",value:function(){var e=this.tail.shift();if(void 0===e&&null!=this.tail.next){var t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}},{key:"isEmpty",value:function(){return this.head.isEmpty()}}]),e}();function aA(e){return iA((function(e){var t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),e)}function iA(e,t){var r,n,a,i,s,o,u=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,c=new nA,l=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.isEmpty()){t.next=2;break}return t.abrupt("return",e(c));case 2:if(!o){t.next=4;break}return t.abrupt("return",{done:!0});case 4:return t.next=6,new Promise((function(t,r){s=function(n){s=null,c.push(n);try{t(e(c))}catch(Dy){r(Dy)}return i}}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(e){return null!=s?s(e):(c.push(e),i)},p=function(e){return o?i:f({done:!1,value:e})},h=function(e){return o?i:(o=!0,null!=e?function(e){return c=new nA,null!=s?s({error:e}):(c.push({error:e}),i)}(e):f({done:!0}))};if(n={},(0,hp.Z)(n,Symbol.asyncIterator,(function(){return this})),(0,hp.Z)(n,"next",l),(0,hp.Z)(n,"return",(function(){return c=new nA,h(),{done:!0}})),(0,hp.Z)(n,"throw",(function(e){return h(e),{done:!0}})),(0,hp.Z)(n,"push",p),(0,hp.Z)(n,"end",h),i=n,null==u)return i;var d=i;return a={},(0,hp.Z)(a,Symbol.asyncIterator,(function(){return this})),(0,hp.Z)(a,"next",(function(){return d.next()})),(0,hp.Z)(a,"throw",(function(e){return d.throw(e),null!=u&&(u(e),u=void 0),{done:!0}})),(0,hp.Z)(a,"return",(function(){return d.return(),null!=u&&(u(),u=void 0),{done:!0}})),(0,hp.Z)(a,"push",p),(0,hp.Z)(a,"end",(function(e){return d.end(e),null!=u&&(u(e),u=void 0),i})),i=a}var sA=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this,null!==e&&void 0!==e?e:"The operation was aborted")).type="aborted",a.code=null!==n&&void 0!==n?n:"ABORT_ERR",a}return(0,he.Z)(r)}(Pt(Error));function oA(e,t,r){var n=null!==r&&void 0!==r?r:{},a=function(e){if(null!=e){if("function"===typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"===typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"===typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}(e);function i(){return i=ye((0,ce.Z)().mark((function r(){var i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=function(){null!=i&&i()},t.addEventListener("abort",s);case 2:if(o=void 0,r.prev=4,!t.aborted){r.next=8;break}throw u=n.abortMessage,c=n.abortCode,new sA(u,c);case 8:return l=new Promise((function(e,t){i=function(){var e=n.abortMessage,r=n.abortCode;t(new sA(e,r))}})),r.next=11,pr(Promise.race([l,a.next()]));case 11:o=r.sent,i=null,r.next=26;break;case 15:if(r.prev=15,r.t0=r.catch(4),t.removeEventListener("abort",s),!(f="aborted"===r.t0.type&&t.aborted)||null==n.onAbort){r.next=22;break}return r.next=22,pr(n.onAbort(e));case 22:if("function"===typeof a.return)try{(p=a.return())instanceof Promise&&p.catch((function(e){null!=n.onReturnError&&n.onReturnError(e)}))}catch(Dy){null!=n.onReturnError&&n.onReturnError(Dy)}if(!f||!0!==n.returnOnAbort){r.next=25;break}return r.abrupt("return");case 25:throw r.t0;case 26:if(!0!==o.done){r.next=28;break}return r.abrupt("break",32);case 28:return r.next=30,o.value;case 30:r.next=2;break;case 32:t.removeEventListener("abort",s);case 33:case"end":return r.stop()}}),r,null,[[4,15]])}))),i.apply(this,arguments)}return function(){return i.apply(this,arguments)}()}function uA(e,t,r){return function(n){return e(oA(n,t,r))}}function cA(e,t,r){return{sink:uA(e.sink,t,(0,le.Z)((0,le.Z)({},r),{},{onAbort:void 0})),source:oA(e.source,t,r)}}var lA,fA=_e("libp2p-pubsub:peer-streams"),pA=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this)).id=e.id,n.protocol=e.protocol,n._inboundAbortController=new AbortController,n.closed=!1,n}return(0,he.Z)(r,[{key:"isReadable",get:function(){return Boolean(this.inboundStream)}},{key:"isWritable",get:function(){return Boolean(this.outboundStream)}},{key:"write",value:function(e){if(null==this.outboundStream){var t=this.id.toString();throw new Error("No writable connection to "+t)}this.outboundStream.push(e)}},{key:"attachInboundStream",value:function(e){return this._rawInboundStream=e,this.inboundStream=oA(kp(this._rawInboundStream,tA()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.dispatchEvent(new HS("stream:inbound")),this.inboundStream}},{key:"attachOutboundStream",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.outboundStream,null==this.outboundStream){e.next=4;break}return e.next=4,this.outboundStream.end();case 4:return this._rawOutboundStream=t,this.outboundStream=aA({onEnd:function(e){null!=n._rawOutboundStream&&null!=n._rawOutboundStream.reset&&n._rawOutboundStream.reset(),n._rawOutboundStream=void 0,n.outboundStream=void 0,null!=e&&n.dispatchEvent(new HS("close"))}}),kp(this.outboundStream,GS(),this._rawOutboundStream).catch((function(e){fA.error(e)})),null==r&&this.dispatchEvent(new HS("stream:outbound")),e.abrupt("return",this.outboundStream);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.closed||(this.closed=!0,null!=this.outboundStream&&this.outboundStream.end(),null!=this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=void 0,this.outboundStream=void 0,this._rawInboundStream=void 0,this.inboundStream=void 0,this.dispatchEvent(new HS("close")))}}]),r}(KS),hA=function(){function e(t,r,n){(0,pe.Z)(this,e),this.gossip=t,this.msgs=new Map,this.history=[],this.msgIdToStrFn=n;for(var a=0;a<r;a++)this.history[a]=[]}return(0,he.Z)(e,[{key:"size",get:function(){return this.msgs.size}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.msgIdStr;return!this.msgs.has(n)&&(this.msgs.set(n,{message:t,validated:r,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push((0,le.Z)((0,le.Z)({},e),{},{topic:t.topic})),!0)}},{key:"observeDuplicate",value:function(e,t){var r=this.msgs.get(e);r&&!r.validated&&r.originatingPeers.add(t)}},{key:"get",value:function(e){var t;return null===(t=this.msgs.get(this.msgIdToStrFn(e)))||void 0===t?void 0:t.message}},{key:"getWithIWantCount",value:function(e,t){var r,n=this.msgs.get(e);if(!n)return null;var a=(null!==(r=n.iwantCounts.get(t))&&void 0!==r?r:0)+1;return n.iwantCounts.set(t,a),{msg:n.message,count:a}}},{key:"getGossipIDs",value:function(e){for(var t=this,r=new Map,n=0;n<this.gossip;n++)this.history[n].forEach((function(n){var a=t.msgs.get(n.msgIdStr);if(a&&a.validated&&e.has(n.topic)){var i=r.get(n.topic);i||(i=[],r.set(n.topic,i)),i.push(n.msgId)}}));return r}},{key:"validate",value:function(e){var t=this.msgs.get(e);if(!t)return null;var r=t.message,n=t.originatingPeers;return t.validated=!0,t.originatingPeers=new Set,{message:r,originatingPeers:n}}},{key:"shift",value:function(){var e=this;this.history[this.history.length-1].forEach((function(t){e.msgs.delete(t.msgIdStr)})),this.history.pop(),this.history.unshift([])}},{key:"remove",value:function(e){var t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}}]),e}();!function(e){!function(e){e.codec=function(){return yi({1:{name:"subscribe",codec:Qa,optional:!0},2:{name:"topic",codec:Si,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.SubOpts||(e.SubOpts={})),function(e){e.codec=function(){return yi({1:{name:"from",codec:Ja,optional:!0},2:{name:"data",codec:Ja,optional:!0},3:{name:"seqno",codec:Ja,optional:!0},4:{name:"topic",codec:Si},5:{name:"signature",codec:Ja,optional:!0},6:{name:"key",codec:Ja,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.Message||(e.Message={})),function(t){t.codec=function(){return yi({1:{name:"ihave",codec:e.ControlIHave.codec(),repeats:!0},2:{name:"iwant",codec:e.ControlIWant.codec(),repeats:!0},3:{name:"graft",codec:e.ControlGraft.codec(),repeats:!0},4:{name:"prune",codec:e.ControlPrune.codec(),repeats:!0}})},t.encode=function(e){return Ga(e,t.codec())},t.decode=function(e){return Wa(e,t.codec())}}(e.ControlMessage||(e.ControlMessage={})),function(e){e.codec=function(){return yi({1:{name:"topicID",codec:Si,optional:!0},2:{name:"messageIDs",codec:Ja,repeats:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.ControlIHave||(e.ControlIHave={})),function(e){e.codec=function(){return yi({1:{name:"messageIDs",codec:Ja,repeats:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.ControlIWant||(e.ControlIWant={})),function(e){e.codec=function(){return yi({1:{name:"topicID",codec:Si,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.ControlGraft||(e.ControlGraft={})),function(t){t.codec=function(){return yi({1:{name:"topicID",codec:Si,optional:!0},2:{name:"peers",codec:e.PeerInfo.codec(),repeats:!0},3:{name:"backoff",codec:Ii,optional:!0}})},t.encode=function(e){return Ga(e,t.codec())},t.decode=function(e){return Wa(e,t.codec())}}(e.ControlPrune||(e.ControlPrune={})),function(e){e.codec=function(){return yi({1:{name:"peerID",codec:Ja,optional:!0},2:{name:"signedPeerRecord",codec:Ja,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.PeerInfo||(e.PeerInfo={})),e.codec=function(){return yi({1:{name:"subscriptions",codec:e.SubOpts.codec(),repeats:!0},2:{name:"messages",codec:e.Message.codec(),repeats:!0},3:{name:"control",codec:e.ControlMessage.codec(),optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(lA||(lA={}));var dA="/floodsub/1.0.0",vA="/meshsub/1.0.0",yA="/meshsub/1.1.0",gA=5e3,mA=12e4;function bA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return{subscriptions:[],messages:e,control:t?{graft:t.graft||[],prune:t.prune||[],ihave:t.ihave||[],iwant:t.iwant||[]}:void 0}}function wA(e){if(e.length<=1)return e;for(var t=0;t<e.length;t++){var r=Math.floor(Math.random()*Math.floor(e.length)),n=e[t];e[t]=e[r],e[r]=n}return e}function kA(e){return e===vA||e===yA}function xA(e){return(0,gr.toString)(e,"base64")}var _A,EA,SA,AA,IA,CA,ZA="StrictSign",RA="StrictNoSign";function TA(e){switch(e){case SA.Ignore:return AA.Ignore;case SA.Reject:return AA.Reject}}function DA(e,t){return PA.apply(this,arguments)}function PA(){return(PA=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===ZA?3:e.t0===RA?13:14;break;case 3:if(r){e.next=5;break}throw Error("Must provide PeerId");case 5:if(null!=r.privateKey){e.next=7;break}throw Error("Cannot sign message, no private key present");case 7:if(null!=r.publicKey){e.next=9;break}throw Error("Cannot sign message, no public key present");case 9:return e.next=11,Ju(r.privateKey);case 11:return n=e.sent,e.abrupt("return",{type:EA.Signing,author:r,key:r.publicKey,privateKey:n});case 13:return e.abrupt("return",{type:EA.Anonymous});case 14:throw new Error('Unknown signature policy "'.concat(t,'"'));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.StrictSign="StrictSign",e.StrictNoSign="StrictNoSign"}(_A||(_A={})),function(e){e[e.Signing=0]="Signing",e[e.Author=1]="Author",e[e.Anonymous=2]="Anonymous"}(EA||(EA={})),function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"}(SA||(SA={})),function(e){e.Error="error",e.Ignore="ignore",e.Reject="reject",e.Blacklisted="blacklisted"}(AA||(AA={})),function(e){e.InvalidSignature="invalid_signature",e.InvalidSeqno="invalid_seqno",e.InvalidPeerId="invalid_peerid",e.SignaturePresent="signature_present",e.SeqnoPresent="seqno_present",e.FromPresent="from_present",e.TransformFailed="transform_failed"}(IA||(IA={})),function(e){e.duplicate="duplicate",e.invalid="invalid",e.valid="valid"}(CA||(CA={}));var NA="ERR_INVALID_PEER_SCORE_PARAMS",OA={topics:{},topicScoreCap:10,appSpecificScore:function(){return 0},appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},BA={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function LA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,le.Z)((0,le.Z)((0,le.Z)({},OA),e),{},{topics:e.topics?Object.entries(e.topics).reduce((function(e,t){var r=(0,y.Z)(t,2),n=r[0],a=r[1];return e[n]=MA(a),e}),{}):{}})}function MA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,le.Z)((0,le.Z)({},BA),e)}function UA(e){if(e.topicWeight<0)throw Ee(new Error("invalid topic weight; must be >= 0"),NA);if(0===e.timeInMeshQuantum)throw Ee(new Error("invalid TimeInMeshQuantum; must be non zero"),NA);if(e.timeInMeshWeight<0)throw Ee(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),NA);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw Ee(new Error("invalid TimeInMeshQuantum; must be positive"),NA);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw Ee(new Error("invalid TimeInMeshCap; must be positive"),NA);if(e.firstMessageDeliveriesWeight<0)throw Ee(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),NA);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw Ee(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),NA);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw Ee(new Error("invalid FirstMessageDeliveriesCap; must be positive"),NA);if(e.meshMessageDeliveriesWeight>0)throw Ee(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),NA);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw Ee(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),NA);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw Ee(new Error("invalid MeshMessageDeliveriesCap; must be positive"),NA);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw Ee(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),NA);if(e.meshMessageDeliveriesWindow<0)throw Ee(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),NA);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw Ee(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),NA);if(e.meshFailurePenaltyWeight>0)throw Ee(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),NA);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw Ee(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),NA);if(e.invalidMessageDeliveriesWeight>0)throw Ee(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),NA);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw Ee(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),NA)}var jA={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function FA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,le.Z)((0,le.Z)({},jA),e)}function zA(e,t,r,n){var a=0;Object.entries(t.topics).forEach((function(e){var t=(0,y.Z)(e,2),n=t[0],i=t[1],s=r.topics[n];if(void 0!==s){var o=0;if(i.inMesh){var u=i.meshTime/s.timeInMeshQuantum;u>s.timeInMeshCap&&(u=s.timeInMeshCap),o+=u*s.timeInMeshWeight}var c=i.firstMessageDeliveries;if(c>s.firstMessageDeliveriesCap&&(c=s.firstMessageDeliveriesCap),o+=c*s.firstMessageDeliveriesWeight,i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<s.meshMessageDeliveriesThreshold){var l=s.meshMessageDeliveriesThreshold-i.meshMessageDeliveries;o+=l*l*s.meshMessageDeliveriesWeight}o+=i.meshFailurePenalty*s.meshFailurePenaltyWeight,o+=i.invalidMessageDeliveries*i.invalidMessageDeliveries*s.invalidMessageDeliveriesWeight,a+=o*s.topicWeight}})),r.topicScoreCap>0&&a>r.topicScoreCap&&(a=r.topicScoreCap);var i=r.appSpecificScore(e);if(a+=i*r.appSpecificWeight,t.ips.forEach((function(e){if(!r.IPColocationFactorWhitelist.has(e)){var t=n.get(e),i=t?t.size:0;if(i>r.IPColocationFactorThreshold){var s=i-r.IPColocationFactorThreshold;a+=s*s*r.IPColocationFactorWeight}}})),t.behaviourPenalty>r.behaviourPenaltyThreshold){var s=t.behaviourPenalty-r.behaviourPenaltyThreshold;a+=s*s*r.behaviourPenaltyWeight}return a}var VA,KA=__webpack_require__(8718);!function(e){e[e.unknown=0]="unknown",e[e.valid=1]="valid",e[e.invalid=2]="invalid",e[e.ignored=3]="ignored"}(VA||(VA={}));var qA=function(){function e(){(0,pe.Z)(this,e),this.records=new Map,this.queue=new KA}return(0,he.Z)(e,[{key:"ensureRecord",value:function(e){var t=this.records.get(e);if(t)return t;t={status:VA.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,t);var r={msgId:e,expire:Date.now()+12e4};return this.queue.push(r),t}},{key:"gc",value:function(){for(var e=Date.now(),t=this.queue.peekFront();t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}},{key:"clear",value:function(){this.records.clear(),this.queue.clear()}}]),e}();function HA(e){return null!=e&&"function"===typeof e.start&&"function"===typeof e.stop}function WA(e){return null!=e&&"function"===typeof e.init}var GA,YA,QA,JA,XA,$A,eI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,e),this.started=!1,null!=t.peerId&&this.setPeerId(t.peerId),null!=t.addressManager&&this.setAddressManager(t.addressManager),null!=t.peerStore&&this.setPeerStore(t.peerStore),null!=t.upgrader&&this.setUpgrader(t.upgrader),null!=t.metrics&&this.setMetrics(t.metrics),null!=t.registrar&&this.setRegistrar(t.registrar),null!=t.connectionManager&&this.setConnectionManager(t.connectionManager),null!=t.transportManager&&this.setTransportManager(t.transportManager),null!=t.connectionGater&&this.setConnectionGater(t.connectionGater),null!=t.contentRouting&&this.setContentRouting(t.contentRouting),null!=t.peerRouting&&this.setPeerRouting(t.peerRouting),null!=t.datastore&&this.setDatastore(t.datastore),null!=t.connectionProtector&&this.setConnectionProtector(t.connectionProtector),null!=t.dht&&this.setDHT(t.dht),null!=t.pubsub&&this.setPubSub(t.pubsub)}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"beforeStart",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return HA(e)})).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStart){e.next=3;break}return e.next=3,t.beforeStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return HA(e)})).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.start();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:this.started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return HA(e)})).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStart){e.next=3;break}return e.next=3,t.afterStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeStop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return HA(e)})).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStop){e.next=3;break}return e.next=3,t.beforeStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return HA(e)})).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stop();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return HA(e)})).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStop){e.next=3;break}return e.next=3,t.afterStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPeerId",value:function(e){return this.peerId=e,e}},{key:"getPeerId",value:function(){if(null==this.peerId)throw Ee(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}},{key:"setMetrics",value:function(e){return this.metrics=e,WA(e)&&e.init(this),e}},{key:"getMetrics",value:function(){return this.metrics}},{key:"setAddressManager",value:function(e){return this.addressManager=e,WA(e)&&e.init(this),e}},{key:"getAddressManager",value:function(){if(null==this.addressManager)throw Ee(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}},{key:"setPeerStore",value:function(e){return this.peerStore=e,WA(e)&&e.init(this),e}},{key:"getPeerStore",value:function(){if(null==this.peerStore)throw Ee(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}},{key:"setUpgrader",value:function(e){return this.upgrader=e,WA(e)&&e.init(this),e}},{key:"getUpgrader",value:function(){if(null==this.upgrader)throw Ee(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}},{key:"setRegistrar",value:function(e){return this.registrar=e,WA(e)&&e.init(this),e}},{key:"getRegistrar",value:function(){if(null==this.registrar)throw Ee(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}},{key:"setConnectionManager",value:function(e){return this.connectionManager=e,WA(e)&&e.init(this),e}},{key:"getConnectionManager",value:function(){if(null==this.connectionManager)throw Ee(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}},{key:"setTransportManager",value:function(e){return this.transportManager=e,WA(e)&&e.init(this),e}},{key:"getTransportManager",value:function(){if(null==this.transportManager)throw Ee(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}},{key:"setConnectionGater",value:function(e){return this.connectionGater=e,WA(e)&&e.init(this),e}},{key:"getConnectionGater",value:function(){if(null==this.connectionGater)throw Ee(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}},{key:"setContentRouting",value:function(e){return this.contentRouting=e,WA(e)&&e.init(this),e}},{key:"getContentRouting",value:function(){if(null==this.contentRouting)throw Ee(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}},{key:"setPeerRouting",value:function(e){return this.peerRouting=e,WA(e)&&e.init(this),e}},{key:"getPeerRouting",value:function(){if(null==this.peerRouting)throw Ee(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}},{key:"setDatastore",value:function(e){return this.datastore=e,WA(e)&&e.init(this),e}},{key:"getDatastore",value:function(){if(null==this.datastore)throw Ee(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}},{key:"setConnectionProtector",value:function(e){return this.connectionProtector=e,WA(e)&&e.init(this),e}},{key:"getConnectionProtector",value:function(){return this.connectionProtector}},{key:"setDHT",value:function(e){return this.dht=e,WA(e)&&e.init(this),e}},{key:"getDHT",value:function(){if(null==this.dht)throw Ee(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}},{key:"setPubSub",value:function(e){return this.pubsub=e,WA(e)&&e.init(this),e}},{key:"getPubSub",value:function(){if(null==this.pubsub)throw Ee(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}}]),e}(),tI=_e("libp2p:gossipsub:score"),rI=function(){function e(t,r,n){var a;(0,pe.Z)(this,e),this.params=t,this.metrics=r,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new qA,this.components=new eI,function(e){for(var t=0,r=Object.entries(e.topics);t<r.length;t++){var n=(0,y.Z)(r[t],2),a=n[0],i=n[1];try{UA(i)}catch(s){throw Ee(new Error("invalid score parameters for topic ".concat(a,": ").concat(s.message)),NA)}}if(e.topicScoreCap<0)throw Ee(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),NA);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw Ee(new Error("missing application specific score function"),NA);if(e.IPColocationFactorWeight>0)throw Ee(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),NA);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw Ee(new Error("invalid IPColocationFactorThreshold; must be at least 1"),NA);if(e.behaviourPenaltyWeight>0)throw Ee(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),NA);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw Ee(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),NA);if(e.decayInterval<1e3)throw Ee(new Error("invalid DecayInterval; must be at least 1s"),NA);if(e.decayToZero<=0||e.decayToZero>=1)throw Ee(new Error("invalid DecayToZero; must be between 0 and 1"),NA)}(t),this.scoreCacheValidityMs=n.scoreCacheValidityMs,this.computeScore=null!==(a=n.computeScore)&&void 0!==a?a:zA}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"size",get:function(){return this.peerStats.size}},{key:"start",value:function(){var e=this;this._backgroundInterval?tI("Peer score already running"):(this._backgroundInterval=setInterval((function(){return e.background()}),this.params.decayInterval),tI("started"))}},{key:"stop",value:function(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),tI("stopped")):tI("Peer score already stopped")}},{key:"background",value:function(){this.refreshScores(),this.updateIPs(),this.deliveryRecords.gc()}},{key:"dumpPeerScoreStats",value:function(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((function(e){var t=(0,y.Z)(e,2);return[t[0],t[1]]})))}},{key:"refreshScores",value:function(){var e=this,t=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((function(n,a){n.connected?(Object.entries(n.topics).forEach((function(n){var a=(0,y.Z)(n,2),i=a[0],s=a[1],o=e.params.topics[i];void 0!==o&&(s.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,s.firstMessageDeliveries<r&&(s.firstMessageDeliveries=0),s.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,s.meshMessageDeliveries<r&&(s.meshMessageDeliveries=0),s.meshFailurePenalty*=o.meshFailurePenaltyDecay,s.meshFailurePenalty<r&&(s.meshFailurePenalty=0),s.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,s.invalidMessageDeliveries<r&&(s.invalidMessageDeliveries=0),s.inMesh&&(s.meshTime=t-s.graftTime,s.meshTime>o.meshMessageDeliveriesActivation&&(s.meshMessageDeliveriesActive=!0)))})),n.behaviourPenalty*=e.params.behaviourPenaltyDecay,n.behaviourPenalty<r&&(n.behaviourPenalty=0)):t>n.expire&&(e.removeIPs(a,n.ips),e.peerStats.delete(a),e.scoreCache.delete(a))}))}},{key:"score",value:function(e){var t,r;null===(t=this.metrics)||void 0===t||t.scoreFnCalls.inc();var n=this.peerStats.get(e);if(!n)return 0;var a=Date.now(),i=this.scoreCache.get(e);if(i&&i.cacheUntil>a)return i.score;null===(r=this.metrics)||void 0===r||r.scoreFnRuns.inc();var s,o=this.computeScore(e,n,this.params,this.peerIPs),u=a+this.scoreCacheValidityMs;i?(null===(s=this.metrics)||void 0===s||s.scoreCachedDelta.observe(Math.abs(o-i.score)),i.score=o,i.cacheUntil=u):this.scoreCache.set(e,{score:o,cacheUntil:u});return o}},{key:"addPenalty",value:function(e,t,r){var n,a=this.peerStats.get(e);a&&(a.behaviourPenalty+=t,null===(n=this.metrics)||void 0===n||n.onScorePenalty(r))}},{key:"addPeer",value:function(e){var t={connected:!0,expire:0,topics:{},ips:[],behaviourPenalty:0};this.peerStats.set(e,t);var r=this.getIPs(e);this.setIPs(e,r,t.ips),t.ips=r}},{key:"removePeer",value:function(e){var t=this,r=this.peerStats.get(e);if(r){if(this.score(e)>0)return this.removeIPs(e,r.ips),void this.peerStats.delete(e);Object.entries(r.topics).forEach((function(e){var r=(0,y.Z)(e,2),n=r[0],a=r[1];a.firstMessageDeliveries=0;var i=t.params.topics[n].meshMessageDeliveriesThreshold;if(a.inMesh&&a.meshMessageDeliveriesActive&&a.meshMessageDeliveries<i){var s=i-a.meshMessageDeliveries;a.meshFailurePenalty+=s*s}a.inMesh=!1,a.meshMessageDeliveriesActive=!1})),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}},{key:"graft",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);n&&(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1)}}},{key:"prune",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);if(n){var a=this.params.topics[t].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<a){var i=a-n.meshMessageDeliveries;n.meshFailurePenalty+=i*i}n.meshMessageDeliveriesActive=!1,n.inMesh=!1}}}},{key:"validateMessage",value:function(e){this.deliveryRecords.ensureRecord(e)}},{key:"deliverMessage",value:function(e,t,r){var n=this;this.markFirstMessageDelivery(e,r);var a=this.deliveryRecords.ensureRecord(t),i=Date.now();a.status===VA.unknown?(a.status=VA.valid,a.validated=i,a.peers.forEach((function(t){t!==e.toString()&&n.markDuplicateMessageDelivery(t,r)}))):tI("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",e,i-a.firstSeen,VA[a.status])}},{key:"rejectInvalidMessage",value:function(e,t){this.markInvalidMessageDelivery(e,t)}},{key:"rejectMessage",value:function(e,t,r,n){var a=this;switch(n){case AA.Error:return void this.markInvalidMessageDelivery(e,r);case AA.Blacklisted:return}var i=this.deliveryRecords.ensureRecord(t);if(i.status===VA.unknown){if(n===AA.Ignore)return i.status=VA.ignored,void i.peers.clear();i.status=VA.invalid,this.markInvalidMessageDelivery(e,r),i.peers.forEach((function(e){a.markInvalidMessageDelivery(e,r)})),i.peers.clear()}else tI("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-i.firstSeen,VA[i.status])}},{key:"duplicateMessage",value:function(e,t,r){var n=this.deliveryRecords.ensureRecord(t);if(!n.peers.has(e))switch(n.status){case VA.unknown:n.peers.add(e);break;case VA.valid:n.peers.add(e),this.markDuplicateMessageDelivery(e,r,n.validated);break;case VA.invalid:this.markInvalidMessageDelivery(e,r);case VA.ignored:}}},{key:"markInvalidMessageDelivery",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);n&&(n.invalidMessageDeliveries+=1)}}},{key:"markFirstMessageDelivery",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);if(n){var a=this.params.topics[t].firstMessageDeliveriesCap;n.firstMessageDeliveries=Math.min(a,n.firstMessageDeliveries+1),n.inMesh&&(a=this.params.topics[t].meshMessageDeliveriesCap,n.meshMessageDeliveries=Math.min(a,n.meshMessageDeliveries+1))}}}},{key:"markDuplicateMessageDelivery",value:function(e,t,r){var n=this.peerStats.get(e);if(n){var a=void 0!==r?Date.now():0,i=this.getPtopicStats(n,t);if(i&&i.inMesh){var s=this.params.topics[t];if(void 0!==r){var o,u=a-r,c=u>s.meshMessageDeliveriesWindow;if(null===(o=this.metrics)||void 0===o||o.onDuplicateMsgDelivery(t,u,c),c)return}var l=s.meshMessageDeliveriesCap;i.meshMessageDeliveries=Math.min(l,i.meshMessageDeliveries+1)}}}},{key:"getIPs",value:function(e){return this.components.getConnectionManager().getConnections($n(e)).map((function(e){return e.remoteAddr.toOptions().host}))}},{key:"setIPs",value:function(e,t,r){var n,a=(0,v.Z)(t);try{e:for(a.s();!(n=a.n()).done;){var i,s=n.value,o=(0,v.Z)(r);try{for(o.s();!(i=o.n()).done;){if(s===i.value)continue e}}catch(Dy){o.e(Dy)}finally{o.f()}var u=this.peerIPs.get(s);u||(u=new Set,this.peerIPs.set(s,u)),u.add(e)}}catch(Dy){a.e(Dy)}finally{a.f()}var c,l=(0,v.Z)(r);try{e:for(l.s();!(c=l.n()).done;){var f,p=c.value,h=(0,v.Z)(t);try{for(h.s();!(f=h.n()).done;){if(p===f.value)continue e}}catch(Dy){h.e(Dy)}finally{h.f()}var d=this.peerIPs.get(p);d&&(d.delete(e),d.size||this.peerIPs.delete(p))}}catch(Dy){l.e(Dy)}finally{l.f()}}},{key:"removeIPs",value:function(e,t){var r=this;t.forEach((function(t){var n=r.peerIPs.get(t);n&&(n.delete(e),n.size||r.peerIPs.delete(t))}))}},{key:"updateIPs",value:function(){var e=this;this.peerStats.forEach((function(t,r){var n=e.getIPs(r);e.setIPs(r,n,t.ips),t.ips=n}))}},{key:"getPtopicStats",value:function(e,t){var r=e.topics[t];return void 0!==r?r:void 0!==this.params.topics[t]?(r={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=r,r):null}}]),e}(),nI=function(){function e(t,r,n){(0,pe.Z)(this,e),this.gossipsubIWantFollowupMs=t,this.msgIdToStrFn=r,this.metrics=n,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*t}return(0,he.Z)(e,[{key:"size",get:function(){return this.promises.size}},{key:"requestMsByMsgSize",get:function(){return this.requestMsByMsg.size}},{key:"addPromise",value:function(e,t){var r=t[Math.floor(Math.random()*t.length)],n=this.msgIdToStrFn(r),a=this.promises.get(n);a||(a=new Map,this.promises.set(n,a));var i=Date.now();a.has(e)||(a.set(e,i+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(n)||this.requestMsByMsg.set(n,i)))}},{key:"getBrokenPromises",value:function(){var e,t=this,r=Date.now(),n=new Map,a=0;return this.promises.forEach((function(e,i){e.forEach((function(t,i){var s;t<r&&(n.set(i,(null!==(s=n.get(i))&&void 0!==s?s:0)+1),e.delete(i),a++)})),e.size||t.promises.delete(i)})),null===(e=this.metrics)||void 0===e||e.iwantPromiseBroken.inc(a),n}},{key:"deliverMessage",value:function(e){this.trackMessage(e);var t=this.promises.get(e);t&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(t.size)))}},{key:"rejectMessage",value:function(e,t){this.trackMessage(e),t!==AA.Error&&this.promises.delete(e)}},{key:"clear",value:function(){this.promises.clear()}},{key:"prune",value:function(){var e,t=Date.now()-this.requestMsByMsgExpire,r=(0,v.Z)(this.requestMsByMsg.entries());try{for(r.s();!(e=r.n()).done;){var n=(0,y.Z)(e.value,2),a=n[0];if(!(n[1]<t))break;this.requestMsByMsg.delete(a)}}catch(Dy){r.e(Dy)}finally{r.f()}}},{key:"trackMessage",value:function(e){if(this.metrics){var t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}]),e}(),aI=function(){function e(t){(0,pe.Z)(this,e),this.entries=new Map,this.validityMs=t.validityMs}return(0,he.Z)(e,[{key:"size",get:function(){return this.entries.size}},{key:"put",value:function(e,t){this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs})}},{key:"prune",value:function(){var e,t=Date.now(),r=(0,v.Z)(this.entries.entries());try{for(r.s();!(e=r.n()).done;){var n=(0,y.Z)(e.value,2),a=n[0];if(!(n[1].validUntilMs<t))break;this.entries.delete(a)}}catch(Dy){r.e(Dy)}finally{r.f()}}},{key:"has",value:function(e){return this.entries.has(e)}},{key:"get",value:function(e){var t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}},{key:"clear",value:function(){this.entries.clear()}}]),e}();function iI(e,t,r){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:e.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:e.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:e.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedStatus:e.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,1*r.maxMeshMessageDeliveriesWindowSec,2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,1*r.behaviourPenaltyThreshold,2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,1*r.gossipPromiseExpireSec,2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),topicStrToLabel:t,toTopic:function(e){var t;return null!==(t=this.topicStrToLabel.get(e))&&void 0!==t?t:e},onJoin:function(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave:function(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh:function(e,t,r){var n=this.toTopic(e);this.meshPeerInclusionEvents.inc({topic:n,reason:t},r)},onRemoveFromMesh:function(e,t,r){var n=this.toTopic(e);this.meshPeerChurnEvents.inc({topic:n,reason:t},r)},onReportValidationMcacheHit:function(e){this.asyncValidationMcacheHit.inc({hit:e?"hit":"miss"})},onReportValidation:function(e,t){var r=this.toTopic(e);this.asyncValidationResult.inc({topic:r,acceptance:t})},onScorePenalty:function(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv:function(e,t,r){var n=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:n},t),this.ihaveRcvNotSeenMsgids.inc({topic:n},r)},onIwantRcv:function(e,t){var r,n=(0,v.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=(0,y.Z)(r.value,2),i=a[0],s=a[1],o=this.toTopic(i);this.iwantRcvMsgids.inc({topic:o},s)}}catch(Dy){n.e(Dy)}finally{n.f()}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg:function(e,t){var r=this.toTopic(e);this.msgForwardCount.inc({topic:r},1),this.msgForwardPeers.inc({topic:r},t)},onPublishMsg:function(e,t,r,n){var a=this.toTopic(e);this.msgPublishCount.inc({topic:a},1),this.msgPublishBytes.inc({topic:a},r*n),this.msgPublishPeers.inc({topic:a},r),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"direct"},t.direct),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"floodsub"},t.floodsub),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"mesh"},t.mesh),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"fanout"},t.fanout)},onMsgRecvPreValidation:function(e){var t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvResult:function(e,t){var r=this.toTopic(e);this.msgReceivedStatus.inc({topic:r,status:t})},onMsgRecvInvalid:function(e,t){var r=this.toTopic(e),n=t.reason===AA.Error?t.error:t.reason;this.msgReceivedInvalid.inc({topic:r,error:n},1)},onDuplicateMsgDelivery:function(e,t,r){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),r){var n=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:n},1)}},onRpcRecv:function(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),this.rpcRecvSubscription.inc(e.subscriptions.length),this.rpcRecvMessage.inc(e.messages.length),e.control&&(this.rpcRecvControl.inc(1),this.rpcRecvIHave.inc(e.control.ihave.length),this.rpcRecvIWant.inc(e.control.iwant.length),this.rpcRecvGraft.inc(e.control.graft.length),this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent:function(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),this.rpcSentSubscription.inc(e.subscriptions.length),this.rpcSentMessage.inc(e.messages.length),e.control){var r=e.control.ihave.length,n=e.control.iwant.length,a=e.control.graft.length,i=e.control.prune.length;r>0&&this.rpcSentIHave.inc(r),n>0&&this.rpcSentIWant.inc(n),a>0&&this.rpcSentGraft.inc(a),i>0&&this.rpcSentPrune.inc(i),(r>0||n>0||a>0||i>0)&&this.rpcSentControl.inc(1)}},registerScores:function(e,t){var r,n=0,a=0,i=0,s=0,o=(0,v.Z)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value;u>=t.graylistThreshold&&n++,u>=t.publishThreshold&&a++,u>=t.gossipThreshold&&i++,u>=0&&s++}}catch(Dy){o.e(Dy)}finally{o.f()}this.peersByScoreThreshold.set({threshold:$A.graylist},n),this.peersByScoreThreshold.set({threshold:$A.publish},a),this.peersByScoreThreshold.set({threshold:$A.gossip},i),this.peersByScoreThreshold.set({threshold:$A.mesh},s),this.score.set(e)},registerScoreWeights:function(e){var t,r=(0,v.Z)(e.byTopic);try{for(r.s();!(t=r.n()).done;){var n=(0,y.Z)(t.value,2),a=n[0],i=n[1];this.scoreWeights.set({topic:a,p:"p1"},i.p1w),this.scoreWeights.set({topic:a,p:"p2"},i.p2w),this.scoreWeights.set({topic:a,p:"p3"},i.p3w),this.scoreWeights.set({topic:a,p:"p3b"},i.p3bw),this.scoreWeights.set({topic:a,p:"p4"},i.p4w)}}catch(Dy){r.e(Dy)}finally{r.f()}this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh:function(e,t){var r=this,n=new Map;e.forEach((function(e,t){var a,i=null!==(a=r.topicStrToLabel.get(t))&&void 0!==a?a:"unknown",s=n.get(i);s||(s=new Set,n.set(i,s)),e.forEach((function(e){var t;return null===(t=s)||void 0===t?void 0:t.add(e)}))}));var a,i=(0,v.Z)(n);try{var s=function(){var e=(0,y.Z)(a.value,2),n=e[0],i=e[1],s=[];i.forEach((function(e){var r;s.push(null!==(r=t.get(e))&&void 0!==r?r:0)})),r.scorePerMesh.set({topic:n},s)};for(i.s();!(a=i.n()).done;)s()}catch(Dy){i.e(Dy)}finally{i.f()}}}}!function(e){e.forward="forward",e.publish="publish"}(GA||(GA={})),function(e){e.Fanout="fanout",e.Random="random",e.Subscribed="subscribed",e.Outbound="outbound",e.NotEnough="not_enough",e.Opportunistic="opportunistic"}(YA||(YA={})),function(e){e.Dc="disconnected",e.BadScore="bad_score",e.Prune="prune",e.Unsub="unsubscribed",e.Excess="excess"}(QA||(QA={})),function(e){e.GraftBackoff="graft_backoff",e.BrokenPromise="broken_promise",e.MessageDeficit="message_deficit",e.IPColocation="IP_colocation"}(JA||(JA={})),function(e){e.LowScore="low_score",e.MaxIhave="max_ihave",e.MaxIasked="max_iasked"}(XA||(XA={})),function(e){e.graylist="graylist",e.publish="publish",e.gossip="gossip",e.mesh="mesh"}($A||($A={}));var sI=__webpack_require__(9070),oI=(0,fr.fromString)("libp2p-pubsub:");function uI(e,t,r){return cI.apply(this,arguments)}function cI(){return cI=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===EA.Signing?3:e.t0===EA.Author?10:e.t0===EA.Anonymous?11:12;break;case 3:return a={from:t.author.toBytes(),data:n,seqno:(0,sI.randomBytes)(8),topic:r,signature:void 0,key:void 0},i=(0,ba.concat)([oI,lA.Message.encode(a)]),e.next=7,t.privateKey.sign(i);case 7:return a.signature=e.sent,a.key=t.key,e.abrupt("return",a);case 10:return e.abrupt("return",{from:t.author.toBytes(),data:n,seqno:(0,sI.randomBytes)(8),topic:r,signature:void 0,key:void 0});case 11:return e.abrupt("return",{from:void 0,data:n,seqno:void 0,topic:r,signature:void 0,key:void 0});case 12:case"end":return e.stop()}}),e)}))),cI.apply(this,arguments)}function lI(e,t){return fI.apply(this,arguments)}function fI(){return fI=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===RA?3:e.t0===ZA?10:41;break;case 3:if(null==r.signature){e.next=5;break}return e.abrupt("return",{valid:!1,error:IA.SignaturePresent});case 5:if(null==r.seqno){e.next=7;break}return e.abrupt("return",{valid:!1,error:IA.SeqnoPresent});case 7:if(null==r.key){e.next=9;break}return e.abrupt("return",{valid:!1,error:IA.FromPresent});case 9:return e.abrupt("return",{valid:!0,fromPeerId:null});case 10:if(null!=r.seqno){e.next=12;break}return e.abrupt("return",{valid:!1,error:IA.InvalidSeqno});case 12:if(8===r.seqno.length){e.next=14;break}return e.abrupt("return",{valid:!1,error:IA.InvalidSeqno});case 14:if(null!=r.signature){e.next=16;break}return e.abrupt("return",{valid:!1,error:IA.InvalidSignature});case 16:if(null!=r.from){e.next=18;break}return e.abrupt("return",{valid:!1,error:IA.InvalidPeerId});case 18:e.prev=18,n=ea(r.from),e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(18),e.abrupt("return",{valid:!1,error:IA.InvalidPeerId});case 25:if(!r.key){e.next=31;break}if(a=Yu(r.key),void 0===n.publicKey||(0,Kn.equals)(a.bytes,n.publicKey)){e.next=29;break}return e.abrupt("return",{valid:!1,error:IA.InvalidPeerId});case 29:e.next=34;break;case 31:if(null!=n.publicKey){e.next=33;break}return e.abrupt("return",{valid:!1,error:IA.InvalidPeerId});case 33:a=Yu(n.publicKey);case 34:return i={from:r.from,data:r.data,seqno:r.seqno,topic:r.topic,signature:void 0,key:void 0},s=(0,ba.concat)([oI,lA.Message.encode(i)]),e.next=38,a.verify(s,r.signature);case 38:if(e.sent){e.next=40;break}return e.abrupt("return",{valid:!1,error:IA.InvalidSignature});case 40:return e.abrupt("return",{valid:!0,fromPeerId:n});case 41:case"end":return e.stop()}}),e,null,[[18,22]])}))),fI.apply(this,arguments)}function pI(e){if(null==e.sequenceNumber)throw Error("missing seqno field");return function(e,t){var r=(0,fr.fromString)(t.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(e.length+r.length);return n.set(e,0),n.set(r,e.length),n}(e.from.toBytes(),e.sequenceNumber)}function hI(e){return dI.apply(this,arguments)}function dI(){return(dI=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.encode(t.data);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vI(e,t,r,n,a){var i=0,s=new Map;if(Object.entries(t.topics).forEach((function(e){var t,n=(0,y.Z)(e,2),o=n[0],u=n[1],c=null!==(t=a.get(o))&&void 0!==t?t:"unknown",l=r.topics[o];if(void 0!==l){var f=s.get(c);f||(f={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},s.set(c,f));var p=0,h=0,d=0,v=0,g=0;if(u.inMesh)p+=Math.max(u.meshTime/l.timeInMeshQuantum,l.timeInMeshCap)*l.timeInMeshWeight;var m=u.firstMessageDeliveries;if(m>l.firstMessageDeliveriesCap&&(m=l.firstMessageDeliveriesCap),h+=m*l.firstMessageDeliveriesWeight,u.meshMessageDeliveriesActive&&u.meshMessageDeliveries<l.meshMessageDeliveriesThreshold){var b=l.meshMessageDeliveriesThreshold-u.meshMessageDeliveries;d+=b*b*l.meshMessageDeliveriesWeight}v+=u.meshFailurePenalty*l.meshFailurePenaltyWeight,g+=u.invalidMessageDeliveries*u.invalidMessageDeliveries*l.invalidMessageDeliveriesWeight,i+=(p+h+d+v+g)*l.topicWeight,f.p1w+=p,f.p2w+=h,f.p3w+=d,f.p3bw+=v,f.p4w+=g}})),r.topicScoreCap>0&&i>r.topicScoreCap){i=r.topicScoreCap;var o,u=r.topicScoreCap/i,c=(0,v.Z)(s.values());try{for(c.s();!(o=c.n()).done;){var l=o.value;l.p1w*=u,l.p2w*=u,l.p3w*=u,l.p3bw*=u,l.p4w*=u}}catch(Dy){c.e(Dy)}finally{c.f()}}var f=0,p=0,h=0;return f+=r.appSpecificScore(e)*r.appSpecificWeight,t.ips.forEach((function(e){if(!r.IPColocationFactorWhitelist.has(e)){var t=n.get(e),a=t?t.size:0;if(a>r.IPColocationFactorThreshold){var i=a-r.IPColocationFactorThreshold;p+=i*i*r.IPColocationFactorWeight}}})),h+=t.behaviourPenalty*t.behaviourPenalty*r.behaviourPenaltyWeight,{byTopic:s,p5w:f,p6w:p,p7w:h,score:i+=f+p+h}}function yI(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},n=new Set;if(t<=0)return n;var a,i=(0,v.Z)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(n.size>=t)break;r(s)&&(n.add(s),e.delete(s))}}catch(Dy){i.e(Dy)}finally{i.f()}return n}function gI(e,t){return yI(e,t,(function(){return!0}))}var mI;!function(e){e[e.started=0]="started",e[e.stopped=1]="stopped"}(mI||(mI={}));var bI=function(e){St(r,e);var t=Rt(r);function r(){var e,n,a,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,r),(i=t.call(this)).multicodecs=[yA,vA],i.peers=new Map,i.direct=new Set,i.floodsubPeers=new Set,i.acceptFromWhitelist=new Map,i.topics=new Map,i.subscriptions=new Set,i.mesh=new Map,i.fanout=new Map,i.fanoutLastpub=new Map,i.gossip=new Map,i.control=new Map,i.peerhave=new Map,i.iasked=new Map,i.backoff=new Map,i.outbound=new Map,i.topicValidators=new Map,i.heartbeatTicks=0,i.components=new eI,i.directPeerInitial=null,i.status={code:mI.stopped},i.heartbeatTimer=null,i.runHeartbeat=function(){var e,t=null===(e=i.metrics)||void 0===e?void 0:e.heartbeatDuration.startTimer();i.heartbeat().catch((function(e){i.log("Error running heartbeat",e)})).finally((function(){if(null!=t&&t(),i.status.code===mI.started){clearTimeout(i.status.heartbeatTimeout);var e,r=(Date.now()-i.status.hearbeatStartMs)%i.opts.heartbeatInterval;if(r<.25*i.opts.heartbeatInterval)r+=i.opts.heartbeatInterval,null===(e=i.metrics)||void 0===e||e.heartbeatSkipped.inc();i.status.heartbeatTimeout=setTimeout(i.runHeartbeat,r)}}))};var o=(0,le.Z)((0,le.Z)({fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:mA,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300},s),{},{scoreParams:LA(s.scoreParams),scoreThresholds:FA(s.scoreThresholds)});if(i.globalSignaturePolicy=null!==(e=o.globalSignaturePolicy)&&void 0!==e?e:ZA,o.fallbackToFloodsub&&i.multicodecs.push(dA),i.log=_e(null!==(n=o.debugName)&&void 0!==n?n:"libp2p:gossipsub"),i.opts=o,i.direct=new Set(o.directPeers.map((function(e){return e.id.toString()}))),i.seenCache=new aI({validityMs:o.seenTTL}),i.publishedMessageIds=new aI({validityMs:o.seenTTL}),s.msgIdFn)i.msgIdFn=s.msgIdFn;else switch(i.globalSignaturePolicy){case ZA:i.msgIdFn=pI;break;case RA:i.msgIdFn=hI}if(s.fastMsgIdFn&&(i.fastMsgIdFn=s.fastMsgIdFn,i.fastMsgIdCache=new aI({validityMs:o.seenTTL})),i.msgIdToStrFn=null!==(a=s.msgIdToStrFn)&&void 0!==a?a:xA,i.mcache=s.messageCache||new hA(o.mcacheGossip,o.mcacheLength,i.msgIdToStrFn),s.dataTransform&&(i.dataTransform=s.dataTransform),s.metricsRegister){if(!s.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");var u=Math.max.apply(Math,Vt(Object.values(o.scoreParams.topics).map((function(e){return e.meshMessageDeliveriesWindow}))).concat([1e3])),c=iI(s.metricsRegister,s.metricsTopicStrToLabel,{gossipPromiseExpireSec:i.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:o.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:u/1e3});c.mcacheSize.addCollect((function(){return i.onScrapeMetrics(c)}));var l,f=(0,v.Z)(i.multicodecs);try{for(f.s();!(l=f.n()).done;){var p=l.value;c.protocolsEnabled.set({protocol:p},1)}}catch(Dy){f.e(Dy)}finally{f.f()}i.metrics=c}else i.metrics=null;return i.gossipTracer=new nI(i.opts.gossipsubIWantFollowupMs,i.msgIdToStrFn,i.metrics),i.score=new rI(i.opts.scoreParams,i.metrics,{scoreCacheValidityMs:o.heartbeatInterval}),i}return(0,he.Z)(r,[{key:"getPeers",value:function(){return Vt(this.peers.keys()).map((function(e){return $n(e)}))}},{key:"isStarted",value:function(){return this.status.code===mI.started}},{key:"init",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.components=t,this.score.init(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:return this.log("starting"),e.next=5,DA(this.globalSignaturePolicy,this.components.getPeerId());case 5:return this.publishConfig=e.sent,e.next=8,Promise.all(this.opts.directPeers.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.components.getPeerStore().addressBook.add(t.id,t.addrs);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.next=10,this.components.getRegistrar().handle(this.multicodecs,this.onIncomingStream.bind(this));case 10:return t=FS({onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)}),e.next=13,this.components.getRegistrar().register(this.multicodecs,t);case 13:r=e.sent,n=setTimeout(this.runHeartbeat,100),this.status={code:mI.started,registrarTopologyId:r,heartbeatTimeout:n,hearbeatStartMs:Date.now()+100},this.log("started"),this.score.start(),this.directPeerInitial=setTimeout((function(){Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Array.from(a.direct).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){a.log(e)}))}),1e3);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log("stopping"),this.status.code===mI.started){e.next=3;break}return e.abrupt("return");case 3:t=this.status.registrarTopologyId,this.status={code:mI.stopped},this.components.getRegistrar().unregister(t),r=(0,v.Z)(this.peers.values());try{for(r.s();!(n=r.n()).done;)n.value.close()}catch(Dy){r.e(Dy)}finally{r.f()}this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped");case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dumpPeerScoreStats",value:function(){return this.score.dumpPeerScoreStats()}},{key:"onIncomingStream",value:function(e){var t=this,r=e.protocol,n=e.stream,a=e.connection;if(this.isStarted()){var i=a.remotePeer,s=this.addPeer(i,r,a.stat.direction).attachInboundStream(n);this.pipePeerReadStream(i,s).catch((function(e){return t.log(e)}))}}},{key:"onPeerConnected",value:function(e,t){var r=this;this.isStarted()&&(this.log("topology peer connected %p %s",e,t.stat.direction),Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function n(){var a,i,s,o;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.newStream(r.multicodecs);case 3:return a=n.sent,i=a.stream,s=a.protocol,o=r.addPeer(e,s,t.stat.direction),n.next=9,o.attachOutboundStream(i);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),r.log(n.t0);case 14:r.subscriptions.size>0&&r.sendSubscriptions(e.toString(),Array.from(r.subscriptions),!0);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))))}},{key:"onPeerDisconnected",value:function(e){this.log("connection ended %p",e),this.removePeer(e)}},{key:"addPeer",value:function(e,t,r){var n,a=this,i=e.toString(),s=this.peers.get(i);return void 0===s&&(this.log("new peer %p",e),s=new pA({id:e,protocol:t}),this.peers.set(i,s),s.addEventListener("close",(function(){return a.removePeer(e)}))),this.score.addPeer(i),t===dA&&this.floodsubPeers.add(i),null===(n=this.metrics)||void 0===n||n.peersPerProtocol.inc({protocol:t},1),this.outbound.get(i)||this.outbound.set(i,"outbound"===r),s}},{key:"removePeer",value:function(e){var t=e.toString(),r=this.peers.get(t);if(null!=r){var n;null===(n=this.metrics)||void 0===n||n.peersPerProtocol.inc({protocol:r.protocol},-1),this.log("delete peer %p",e),this.peers.delete(t),r.close();var a,i=(0,v.Z)(this.topics.values());try{for(i.s();!(a=i.n()).done;){a.value.delete(t)}}catch(Dy){i.e(Dy)}finally{i.f()}}var s,o=(0,v.Z)(this.mesh);try{for(o.s();!(s=o.n()).done;){var u,c=(0,y.Z)(s.value,2),l=c[0];if(!0===c[1].delete(t))null===(u=this.metrics)||void 0===u||u.onRemoveFromMesh(l,QA.Dc,1)}}catch(Dy){o.e(Dy)}finally{o.f()}var f,p=(0,v.Z)(this.fanout.values());try{for(p.s();!(f=p.n()).done;){f.value.delete(t)}}catch(Dy){p.e(Dy)}finally{p.f()}return this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t),r}},{key:"started",get:function(){return this.status.code===mI.started}},{key:"getMeshPeers",value:function(e){var t=this.mesh.get(e);return t?Array.from(t):[]}},{key:"getSubscribers",value:function(e){var t=this.topics.get(e);return(t?Array.from(t):[]).map((function(e){return $n(e)}))}},{key:"getTopics",value:function(){return Array.from(this.subscriptions)}},{key:"pipePeerReadStream",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kp(r,function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,o=hr(r);case 4:return e.next=6,o.next();case 6:if(!(a=!(u=e.sent).done)){e.next=26;break}if(c=u.value,e.prev=8,f=c instanceof Uint8Array?c:c.slice(),p=lA.decode(f),null===(l=n.metrics)||void 0===l||l.onRpcRecv(p,f.length),!n.opts.awaitRpcHandler){e.next=17;break}return e.next=15,n.handleReceivedRpc(t,p);case 15:e.next=18;break;case 17:n.handleReceivedRpc(t,p).catch((function(e){return n.log(e)}));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),n.log(e.t0);case 23:a=!1,e.next=4;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(2),i=!0,s=e.t1;case 32:if(e.prev=32,e.prev=33,!a||null==o.return){e.next=37;break}return e.next=37,o.return();case 37:if(e.prev=37,!i){e.next=40;break}throw s;case 40:return e.finish(37);case 41:return e.finish(32);case 42:case"end":return e.stop()}}),e,null,[[2,28,32,42],[8,20],[33,,37,41]])})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this.log.error(e.t0),this.onPeerDisconnected(t);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleReceivedRpc",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.acceptFrom(t.toString())){e.next=4;break}return this.log("received message from unacceptable peer %p",t),null===(n=this.metrics)||void 0===n||n.rpcRecvNotAccepted.inc(),e.abrupt("return");case 4:this.log("rpc from %p",t),r.subscriptions.length>0&&(r.subscriptions.forEach((function(e){u.handleReceivedSubscription(t,e)})),this.dispatchEvent(new HS("subscription-change",{detail:{peerId:t,subscriptions:r.subscriptions.filter((function(e){return null!==e.topic})).map((function(e){var t;return{topic:null!==(t=e.topic)&&void 0!==t?t:"",subscribe:Boolean(e.subscribe)}}))}}))),a=(0,v.Z)(r.messages),e.prev=7,a.s();case 9:if((i=a.n()).done){e.next=17;break}if(s=i.value,o=this.handleReceivedMessage(t,s).catch((function(e){return u.log(e)})),!this.opts.awaitRpcMessageHandler){e.next=15;break}return e.next=15,o;case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:if(!r.control){e.next=28;break}return e.next=28,this.handleControlMessage(t.toString(),r.control);case 28:case"end":return e.stop()}}),e,this,[[7,19,22,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleReceivedSubscription",value:function(e,t){if(null!=t.topic){this.log("subscription update from %p topic %s",e,t.topic);var r=this.topics.get(t.topic);null==r&&(r=new Set,this.topics.set(t.topic,r)),t.subscribe?r.add(e.toString()):r.delete(e.toString())}}},{key:"handleReceivedMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,n){var a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(a=this.metrics)||void 0===a||a.onMsgRecvPreValidation(n.topic),e.next=3,this.validateReceivedMessage(t,n);case 3:o=e.sent,null===(i=this.metrics)||void 0===i||i.onMsgRecvResult(n.topic,o.code),e.t0=o.code,e.next=e.t0===CA.duplicate?8:e.t0===CA.invalid?11:e.t0===CA.valid?14:19;break;case 8:return this.score.duplicateMessage(t.toString(),o.msgIdStr,n.topic),this.mcache.observeDuplicate(o.msgIdStr,t.toString()),e.abrupt("return");case 11:return o.msgIdStr?(u=o.msgIdStr,this.score.rejectMessage(t.toString(),u,n.topic,o.reason),this.gossipTracer.rejectMessage(u,o.reason)):this.score.rejectInvalidMessage(t.toString(),n.topic),null===(s=this.metrics)||void 0===s||s.onMsgRecvInvalid(n.topic,o),e.abrupt("return");case 14:this.score.validateMessage(o.messageId.msgIdStr),this.gossipTracer.deliverMessage(o.messageId.msgIdStr),this.mcache.put(o.messageId,n,!this.opts.asyncValidation),this.subscriptions.has(n.topic)&&(this.components.getPeerId().equals(t)&&!this.opts.emitSelf||(_t(kt(r.prototype),"dispatchEvent",this).call(this,new HS("gossipsub:message",{detail:{propagationSource:t,msgId:o.messageId.msgIdStr,msg:o.msg}})),_t(kt(r.prototype),"dispatchEvent",this).call(this,new HS("message",{detail:o.msg})))),this.opts.asyncValidation||this.forwardMessage(o.messageId.msgIdStr,n,t.toString());case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"validateReceivedMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=this.fastMsgIdFn)||void 0===n?void 0:n.call(this,r),!(o=s?null===(a=this.fastMsgIdCache)||void 0===a?void 0:a.get(s):void 0)){e.next=4;break}return e.abrupt("return",{code:CA.duplicate,msgIdStr:o});case 4:return e.next=6,lI(this.globalSignaturePolicy,r);case 6:if((u=e.sent).valid){e.next=9;break}return e.abrupt("return",{code:CA.invalid,reason:AA.Error,error:u.error});case 9:e.prev=9,f=null!==(l=r.data)&&void 0!==l?l:new Uint8Array(0),c=this.dataTransform?this.dataTransform.inboundTransform(r.topic,f):f,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(9),this.log("Invalid message, transform failed",e.t0),e.abrupt("return",{code:CA.invalid,reason:AA.Error,error:IA.TransformFailed});case 18:if(null!=r.from){e.next=21;break}return this.log("Invalid message, transform failed"),e.abrupt("return",{code:CA.invalid,reason:AA.Error,error:IA.TransformFailed});case 21:return p={from:ea(r.from),data:c,sequenceNumber:null==r.seqno?void 0:BigInt("0x".concat((0,gr.toString)(r.seqno,"base16"))),topic:r.topic},e.next=24,this.msgIdFn(p);case 24:if(h=e.sent,d=this.msgIdToStrFn(h),v={msgId:h,msgIdStr:d},s&&(null===(i=this.fastMsgIdCache)||void 0===i||i.put(s,d)),!this.seenCache.has(d)){e.next=32;break}return e.abrupt("return",{code:CA.duplicate,msgIdStr:d});case 32:this.seenCache.put(d);case 33:if(null==(y=this.topicValidators.get(r.topic))){e.next=48;break}return e.prev=35,e.next=38,y(p.topic,p,t);case 38:g=e.sent,e.next=46;break;case 41:e.prev=41,e.t1=e.catch(35),"ERR_TOPIC_VALIDATOR_IGNORE"===(m=e.t1.code)&&(g=SA.Ignore),g="ERR_TOPIC_VALIDATOR_REJECT"===m?SA.Reject:SA.Ignore;case 46:if(g===SA.Accept){e.next=48;break}return e.abrupt("return",{code:CA.invalid,reason:TA(g),msgIdStr:d});case 48:return e.abrupt("return",{code:CA.valid,messageId:v,msg:p});case 49:case"end":return e.stop()}}),e,this,[[9,14],[35,41]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getScore",value:function(e){return this.score.score(e)}},{key:"sendSubscriptions",value:function(e,t,r){this.sendRpc(e,{subscriptions:t.map((function(e){return{topic:e,subscribe:r}})),messages:[]})}},{key:"handleControlMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=2;break}return e.abrupt("return");case 2:return n=this.handleIHave(t,r.ihave),a=this.handleIWant(t,r.iwant),e.next=6,this.handleGraft(t,r.graft);case 6:return i=e.sent,e.next=9,this.handlePrune(t,r.prune);case 9:if(n.length||a.length||i.length){e.next=11;break}return e.abrupt("return");case 11:this.sendRpc(t,bA(a,{iwant:n,prune:i}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"acceptFrom",value:function(e){if(this.direct.has(e))return!0;var t=Date.now(),r=this.acceptFromWhitelist.get(e);if(r&&r.messagesAccepted<128&&r.acceptUntil>=t)return r.messagesAccepted+=1,!0;var n=this.score.score(e);return n>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),n>=this.opts.scoreThresholds.graylistThreshold}},{key:"handleIHave",value:function(e,t){var r,n,a=this;if(!t.length)return[];var i,s=this.score.score(e);if(s<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,s),null===(i=this.metrics)||void 0===i||i.ihaveRcvIgnored.inc({reason:XA.LowScore}),[];var o,u=(null!==(r=this.peerhave.get(e))&&void 0!==r?r:0)+1;if(this.peerhave.set(e,u),u>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,u),null===(o=this.metrics)||void 0===o||o.ihaveRcvIgnored.inc({reason:XA.MaxIhave}),[];var c,l=null!==(n=this.iasked.get(e))&&void 0!==n?n:0;if(l>=gA)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,l),null===(c=this.metrics)||void 0===c||c.ihaveRcvIgnored.inc({reason:XA.MaxIasked}),[];var f=new Map;if(t.forEach((function(e){var t,r=e.topicID,n=e.messageIDs;if(r&&a.mesh.has(r)){var i=0;n.forEach((function(e){var t=a.msgIdToStrFn(e);a.seenCache.has(t)||(f.set(t,e),i++)})),null===(t=a.metrics)||void 0===t||t.onIhaveRcv(r,n.length,i)}})),!f.size)return[];var p=f.size;p+l>gA&&(p=gA-l),this.log("IHAVE: Asking for %d out of %d messages from %s",p,f.size,e);var h=Array.from(f.values());return wA(h),h=h.slice(0,p),this.iasked.set(e,l+p),this.gossipTracer.addPromise(e,h),[{messageIDs:h}]}},{key:"handleIWant",value:function(e,t){var r,n=this;if(!t.length)return[];var a=this.score.score(e);if(a<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,a),[];var i=new Map,s=new Map,o=0;return t.forEach((function(t){t.messageIDs.forEach((function(t){var r,a=n.msgIdToStrFn(t),u=n.mcache.getWithIWantCount(a,e);null!=u?(s.set(u.msg.topic,1+(null!==(r=s.get(u.msg.topic))&&void 0!==r?r:0)),u.count>3?n.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):i.set(a,u.msg)):o++}))})),null===(r=this.metrics)||void 0===r||r.onIwantRcv(s,o),i.size?(this.log("IWANT: Sending %d messages to %s",i.size,e),Array.from(i.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}},{key:"handleGraft",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a=this.score.score(t),i=Date.now(),s=this.opts.doPX,r.forEach((function(e){var r,u,c=e.topicID;if(c){var l=o.mesh.get(c);if(l){if(!l.has(t)){if(o.direct.has(t))return o.log("GRAFT: ignoring request from direct peer %s",t),n.push(c),void(s=!1);var f=null===(r=o.backoff.get(c))||void 0===r?void 0:r.get(t);if("number"===typeof f&&i<f){o.log("GRAFT: ignoring backed off peer %s",t),o.score.addPenalty(t,1,JA.GraftBackoff),s=!1;var p=f+o.opts.graftFloodThreshold-o.opts.pruneBackoff;return i<p&&o.score.addPenalty(t,1,JA.GraftBackoff),o.addBackoff(t,c),void n.push(c)}if(a<0)return o.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",t,a,c),n.push(c),s=!1,void o.addBackoff(t,c);if(l.size>=o.opts.Dhi&&!o.outbound.get(t))return n.push(c),void o.addBackoff(t,c);o.log("GRAFT: Add mesh link from %s in %s",t,c),o.score.graft(t,c),l.add(t),null===(u=o.metrics)||void 0===u||u.onAddToMesh(c,YA.Subscribed,1)}}else s=!1}})),n.length){e.next=7;break}return e.abrupt("return",[]);case 7:return e.next=9,Promise.all(n.map((function(e){return o.makePrune(t,e,s)})));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handlePrune",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.score.score(t),a=(0,v.Z)(r),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=23;break}if(s=i.value,o=s.topicID,u=s.backoff,c=s.peers,null!=o){e.next=8;break}return e.abrupt("continue",21);case 8:if(l=this.mesh.get(o)){e.next=11;break}return e.abrupt("return");case 11:if(this.log("PRUNE: Remove mesh link to %s in %s",t,o),this.score.prune(t,o),l.has(t)&&(l.delete(t),null===(f=this.metrics)||void 0===f||f.onRemoveFromMesh(o,QA.Unsub,1)),"number"===typeof u&&u>0?this.doAddBackoff(t,o,1e3*u):this.addBackoff(t,o),!c.length){e.next=21;break}if(!(n<this.opts.scoreThresholds.acceptPXThreshold)){e.next=19;break}return this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",t,n,o),e.abrupt("continue",21);case 19:return e.next=21,this.pxConnect(c);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(2),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addBackoff",value:function(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}},{key:"doAddBackoff",value:function(e,t,r){var n,a=this.backoff.get(t);a||(a=new Map,this.backoff.set(t,a));var i=Date.now()+r;(null!==(n=a.get(e))&&void 0!==n?n:0)<i&&a.set(e,i)}},{key:"applyIwantPenalties",value:function(){var e=this;this.gossipTracer.getBrokenPromises().forEach((function(t,r){e.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,t),e.score.addPenalty(r,t,JA.BrokenPromise)}))}},{key:"clearBackoff",value:function(){var e=this;if(this.heartbeatTicks%15===0){var t=Date.now();this.backoff.forEach((function(r,n){r.forEach((function(e,n){e<t&&r.delete(n)})),0===r.size&&e.backoff.delete(n)}))}}},{key:"directConnect",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.direct.forEach((function(e){var n=r.peers.get(e);n&&n.isWritable||t.push(e)})),e.next=4,Promise.all(t.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pxConnect",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>this.opts.prunePeers&&(wA(t),t=t.slice(0,this.opts.prunePeers)),r=[],e.next=4,Promise.all(t.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.peerID){e.next=2;break}return e.abrupt("return");case 2:if(a=ea(t.peerID).toString(),!n.peers.has(a)){e.next=5;break}return e.abrupt("return");case 5:if(t.signedPeerRecord){e.next=8;break}return r.push(a),e.abrupt("return");case 8:return e.prev=8,e.next=11,DS.openAndCertify(t.signedPeerRecord,"libp2p-peer-record");case 11:if(i=e.sent,s=i.peerId,i.peerId.equals(a)){e.next=16;break}return n.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",s,a),e.abrupt("return");case 16:return e.next=18,n.components.getPeerStore().addressBook.consumePeerRecord(i);case 18:if(e.sent){e.next=21;break}return n.log("bogus peer record obtained through px: could not add peer record to address book"),e.abrupt("return");case 21:r.push(a),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),n.log("bogus peer record obtained through px: invalid signature or not a peer record");case 27:case"end":return e.stop()}}),e,null,[[8,24]])})));return function(t){return e.apply(this,arguments)}}()));case 4:if(r.length){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(r.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("Initiating connection with %s",t),e.next=3,this.components.getConnectionManager().openConnection($n(t));case 3:return r=e.sent,e.next=6,r.newStream(this.multicodecs);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(e){if(this.status.code!==mI.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);var t,r=(0,v.Z)(this.peers.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;this.sendSubscriptions(n,[e],!0)}}catch(Dy){r.e(Dy)}finally{r.f()}}this.join(e)}},{key:"unsubscribe",value:function(e){var t=this;if(this.status.code!==mI.started)throw new Error("Pubsub is not started");var r=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,r),r){var n,a=(0,v.Z)(this.peers.keys());try{for(a.s();!(n=a.n()).done;){var i=n.value;this.sendSubscriptions(i,[e],!1)}}catch(Dy){a.e(Dy)}finally{a.f()}}this.leave(e).catch((function(e){t.log(e)}))}},{key:"join",value:function(e){var t,r=this;if(this.status.code!==mI.started)throw new Error("Gossipsub has not started");if(!this.mesh.has(e)){this.log("JOIN %s",e),null===(t=this.metrics)||void 0===t||t.onJoin(e);var n,a=new Set,i=this.fanout.get(e);if(i)this.fanout.delete(e),this.fanoutLastpub.delete(e),i.forEach((function(e){!r.direct.has(e)&&r.score.score(e)>=0&&a.add(e)})),null===(n=this.metrics)||void 0===n||n.onAddToMesh(e,YA.Fanout,a.size);if(a.size<this.opts.D){var s,o=a.size;this.getRandomGossipPeers(e,this.opts.D,(function(e){return!a.has(e)&&!r.direct.has(e)&&r.score.score(e)>=0})).forEach((function(e){a.add(e)})),null===(s=this.metrics)||void 0===s||s.onAddToMesh(e,YA.Random,a.size-o)}this.mesh.set(e,a),a.forEach((function(t){r.log("JOIN: Add mesh link to %s in %s",t,e),r.sendGraft(t,e)}))}}},{key:"leave",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status.code===mI.started){e.next=2;break}throw new Error("Gossipsub has not started");case 2:if(this.log("LEAVE %s",t),null===(r=this.metrics)||void 0===r||r.onLeave(t),!(n=this.mesh.get(t))){e.next=9;break}return e.next=8,Promise.all(Array.from(n).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.log("LEAVE: Remove mesh link to %s in %s",r,t),e.next=3,a.sendPrune(r,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:this.mesh.delete(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectPeersToForward",value:function(e,t,r){var n=this,a=new Set,i=this.topics.get(e);i&&(this.direct.forEach((function(e){!i.has(e)||t===e||null!==r&&void 0!==r&&r.has(e)||a.add(e)})),this.floodsubPeers.forEach((function(e){i.has(e)&&t!==e&&(null===r||void 0===r||!r.has(e))&&n.score.score(e)>=n.opts.scoreThresholds.publishThreshold&&a.add(e)})));var s=this.mesh.get(e);return s&&s.size>0&&s.forEach((function(e){t===e||null!==r&&void 0!==r&&r.has(e)||a.add(e)})),a}},{key:"selectPeersToPublish",value:function(e){var t=this,r=new Set,n={direct:0,floodsub:0,mesh:0,fanout:0},a=this.topics.get(e);if(a)if(this.opts.floodPublish)a.forEach((function(e){t.direct.has(e)?(r.add(e),n.direct++):t.score.score(e)>=t.opts.scoreThresholds.publishThreshold&&(r.add(e),n.floodsub++)}));else{this.direct.forEach((function(e){a.has(e)&&(r.add(e),n.direct++)})),this.floodsubPeers.forEach((function(e){a.has(e)&&t.score.score(e)>=t.opts.scoreThresholds.publishThreshold&&(r.add(e),n.floodsub++)}));var i=this.mesh.get(e);if(i&&i.size>0)i.forEach((function(e){r.add(e),n.mesh++}));else{var s=this.fanout.get(e);if(s&&s.size>0)s.forEach((function(e){r.add(e),n.fanout++}));else{var o=this.getRandomGossipPeers(e,this.opts.D,(function(e){return t.score.score(e)>=t.opts.scoreThresholds.publishThreshold}));o.size>0&&(this.fanout.set(e,o),o.forEach((function(e){r.add(e),n.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:r,tosendCount:n}}},{key:"forwardMessage",value:function(e,t,r,n){var a,i=this;r&&this.score.deliverMessage(r,e,t.topic);var s=this.selectPeersToForward(t.topic,r,n),o=bA([t]);s.forEach((function(e){i.sendRpc(e,o)})),null===(a=this.metrics)||void 0===a||a.onForwardMsg(t.topic,s.size)}},{key:"publish",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,n){var a,i,s,o,u,c,l,f,p,h,d,y,g,m;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.dataTransform?this.dataTransform.outboundTransform(t,n):n,null!=this.publishConfig){e.next=3;break}throw Error("PublishError.Uninitialized");case 3:return e.next=5,uI(this.publishConfig,t,i);case 5:if(null!=(s=e.sent).from){e.next=8;break}throw Error("PublishError.InvalidMessage");case 8:return o={from:ea(s.from),data:n,sequenceNumber:null==s.seqno?void 0:BigInt("0x".concat((0,gr.toString)(s.seqno,"base16"))),topic:t,signature:s.signature,key:s.key},e.next=11,this.msgIdFn(o);case 11:if(u=e.sent,c=this.msgIdToStrFn(u),!this.seenCache.has(c)){e.next=15;break}throw Error("PublishError.Duplicate");case 15:if(l=this.selectPeersToPublish(s.topic),f=l.tosend,p=l.tosendCount,h=!0===this.opts.emitSelf&&this.subscriptions.has(t),0!==f.size||this.opts.allowPublishToZeroPeers||h){e.next=19;break}throw Error("PublishError.InsufficientPeers");case 19:this.seenCache.put(c),this.mcache.put({msgId:u,msgIdStr:c},s,!0),this.publishedMessageIds.put(c),d=bA([s]),y=(0,v.Z)(f);try{for(y.s();!(g=y.n()).done;)m=g.value,this.sendRpc(m,d)||f.delete(m)}catch(Dy){y.e(Dy)}finally{y.f()}return null===(a=this.metrics)||void 0===a||a.onPublishMsg(t,p,f.size,null!=s.data?s.data.length:0),h&&(f.add(this.components.getPeerId().toString()),_t(kt(r.prototype),"dispatchEvent",this).call(this,new HS("gossipsub:message",{detail:{propagationSource:this.components.getPeerId(),msgId:c,msg:o}})),_t(kt(r.prototype),"dispatchEvent",this).call(this,new HS("message",{detail:o}))),e.abrupt("return",{recipients:Array.from(f.values()).map((function(e){return $n(e)}))});case 28:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"reportMessageValidationResult",value:function(e,t,r){if(r===SA.Accept){var n,a=this.mcache.validate(e);if(null===(n=this.metrics)||void 0===n||n.onReportValidationMcacheHit(null!==a),null!=a){var i,s=a.message,o=a.originatingPeers;this.score.deliverMessage(t.toString(),e,s.topic),this.forwardMessage(e,a.message,t.toString(),o),null===(i=this.metrics)||void 0===i||i.onReportValidation(s.topic,r)}}else{var u,c=this.mcache.remove(e);if(null===(u=this.metrics)||void 0===u||u.onReportValidationMcacheHit(null!==c),c){var l,f=TA(r),p=c.message,h=c.originatingPeers;this.score.rejectMessage(t.toString(),e,p.topic,f);var d,y=(0,v.Z)(h);try{for(y.s();!(d=y.n()).done;){var g=d.value;this.score.rejectMessage(g,e,p.topic,f)}}catch(Dy){y.e(Dy)}finally{y.f()}null===(l=this.metrics)||void 0===l||l.onReportValidation(p.topic,r)}}}},{key:"sendGraft",value:function(e,t){var r=bA([],{graft:[{topicID:t}]});this.sendRpc(e,r)}},{key:"sendPrune",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makePrune(t,r,this.opts.doPX);case 2:e.t0=e.sent,n=[e.t0],a=bA([],{prune:n}),this.sendRpc(t,a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendRpc",value:function(e,t){var r,n=this.peers.get(e);if(!n||!n.isWritable)return this.log("Cannot send RPC to ".concat(e," as there is no open stream to it available")),!1;var a=this.control.get(e);a&&(this.piggybackControl(e,t,a),this.control.delete(e));var i=this.gossip.get(e);i&&(this.piggybackGossip(e,t,i),this.gossip.delete(e));var s=lA.encode(t);return n.write(s),null===(r=this.metrics)||void 0===r||r.onRpcSent(t,s.length),!0}},{key:"piggybackControl",value:function(e,t,r){var n=this,a=r.graft.filter((function(t){var r=t.topicID;return(r&&n.mesh.get(r)||new Set).has(e)})),i=r.prune.filter((function(t){var r=t.topicID;return!(r&&n.mesh.get(r)||new Set).has(e)}));(a.length||i.length)&&(t.control?(t.control.graft=t.control.graft.concat(a),t.control.prune=t.control.prune.concat(i)):t.control={graft:a,prune:i,ihave:[],iwant:[]})}},{key:"piggybackGossip",value:function(e,t,r){t.control||(t.control={ihave:[],iwant:[],graft:[],prune:[]}),t.control.ihave=r}},{key:"sendGraftPrune",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.opts.doPX,i=(0,v.Z)(t),e.prev=2,o=(0,ce.Z)().mark((function e(){var t,i,o,u,c,l,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,y.Z)(s.value,2),i=t[0],o=t[1],u=o.map((function(e){return{topicID:e}})),c=[],!(l=r.get(i))){e.next=9;break}return e.next=7,Promise.all(l.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.makePrune(i,t,a&&!(null!==(r=n.get(i))&&void 0!==r&&r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:c=e.sent,r.delete(i);case 9:p=bA([],{graft:u,prune:c}),f.sendRpc(i,p);case 11:case"end":return e.stop()}}),e)})),i.s();case 5:if((s=i.n()).done){e.next=9;break}return e.delegateYield(o(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),i.e(e.t1);case 14:return e.prev=14,i.f(),e.finish(14);case 17:u=(0,v.Z)(r),e.prev=18,l=(0,ce.Z)().mark((function e(){var t,r,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,y.Z)(c.value,2),r=t[0],i=t[1],e.next=3,Promise.all(i.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.makePrune(r,t,a&&!(null!==(i=n.get(r))&&void 0!==i&&i));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:s=e.sent,o=bA([],{prune:s}),f.sendRpc(r,o);case 6:case"end":return e.stop()}}),e)})),u.s();case 21:if((c=u.n()).done){e.next=25;break}return e.delegateYield(l(),"t2",23);case 23:e.next=21;break;case 25:e.next=30;break;case 27:e.prev=27,e.t3=e.catch(18),u.e(e.t3);case 30:return e.prev=30,u.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[2,11,14,17],[18,27,30,33]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"emitGossip",value:function(e){var t,r=this.mcache.getGossipIDs(new Set(e.keys())),n=(0,v.Z)(e);try{for(n.s();!(t=n.n()).done;){var a,i=(0,y.Z)(t.value,2),s=i[0],o=i[1];this.doEmitGossip(s,o,null!==(a=r.get(s))&&void 0!==a?a:[])}}catch(Dy){n.e(Dy)}finally{n.f()}}},{key:"doEmitGossip",value:function(e,t,r){var n=this;if(r.length&&(wA(r),r.length>gA&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length),t.size)){var a=this.opts.Dlazy,i=.25*t.size,s=t;i>a&&(a=i),a>s.size?a=s.size:s=wA(Array.from(s)).slice(0,a),s.forEach((function(t){var a=r;r.length>gA&&(a=wA(a.slice()).slice(0,gA)),n.pushGossip(t,{topicID:e,messageIDs:a})}))}}},{key:"flush",value:function(){var e,t=(0,v.Z)(this.gossip.entries());try{for(t.s();!(e=t.n()).done;){var r=(0,y.Z)(e.value,2),n=r[0],a=r[1];this.gossip.delete(n),this.sendRpc(n,bA([],{ihave:a}))}}catch(Dy){t.e(Dy)}finally{t.f()}var i,s=(0,v.Z)(this.control.entries());try{for(s.s();!(i=s.n()).done;){var o=(0,y.Z)(i.value,2),u=o[0],c=o[1];this.control.delete(u),this.sendRpc(u,bA([],{graft:c.graft,prune:c.prune}))}}catch(Dy){s.e(Dy)}finally{s.f()}}},{key:"pushGossip",value:function(e,t){this.log("Add gossip to %s",e);var r=this.gossip.get(e)||[];this.gossip.set(e,r.concat(t))}},{key:"makePrune",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.score.prune(t,r),this.peers.get(t).protocol!==vA){e.next=3;break}return e.abrupt("return",{topicID:r,peers:[]});case 3:if(a=BigInt(this.opts.pruneBackoff/1e3),n){e.next=6;break}return e.abrupt("return",{topicID:r,peers:[],backoff:a});case 6:return i=this.getRandomGossipPeers(r,this.opts.prunePeers,(function(e){return e!==t&&o.score.score(e)>=0})),e.next=9,Promise.all(Array.from(i).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$n(t),e.t0=r.toBytes(),e.next=4,o.components.getPeerStore().addressBook.getRawEnvelope(r);case 4:return e.t1=e.sent,e.abrupt("return",{peerID:e.t0,signedPeerRecord:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return s=e.sent,e.abrupt("return",{topicID:r,peers:s,backoff:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"heartbeat",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u,c,l,f,p,h,d,y,g,m=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.opts,a=n.D,i=n.Dlo,s=n.Dhi,o=n.Dscore,u=n.Dout,c=n.fanoutTTL,this.heartbeatTicks++,l=new Map,f=function(e){var t=l.get(e);return void 0===t&&(t=m.score.score(e),l.set(e,t)),t},p=new Map,h=new Map,d=new Map,this.clearBackoff(),this.peerhave.clear(),null===(t=this.metrics)||void 0===t||t.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks!==0){e.next=15;break}return e.next=15,this.directConnect();case 15:return null===(r=this.fastMsgIdCache)||void 0===r||r.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune(),y=new Map,this.mesh.forEach((function(e,t){var r=m.topics.get(t),n=new Set,c=new Set;if(y.set(t,c),r){var l,g=wA(Array.from(r)),b=m.backoff.get(t),w=(0,v.Z)(g);try{for(w.s();!(l=w.n()).done;){var k=l.value,x=m.peers.get(k);if(x&&kA(x.protocol)&&!e.has(k)&&!m.direct.has(k)){var _=f(k);b&&b.has(k)||!(_>=0)||n.add(k),_>=m.opts.scoreThresholds.gossipThreshold&&c.add(k)}}}catch(Dy){w.e(Dy)}finally{w.f()}}var E=function(r,n){var a;m.log("HEARTBEAT: Remove mesh link to %s in %s",r,t),m.addBackoff(r,t),e.delete(r),f(r)>=m.opts.scoreThresholds.gossipThreshold&&c.add(r),null===(a=m.metrics)||void 0===a||a.onRemoveFromMesh(t,n,1);var i=h.get(r);i?i.push(t):h.set(r,[t])},S=function(r,n){var a;m.log("HEARTBEAT: Add mesh link to %s in %s",r,t),m.score.graft(r,t),e.add(r),c.delete(r),null===(a=m.metrics)||void 0===a||a.onAddToMesh(t,n,1);var i=p.get(r);i?i.push(t):p.set(r,[t])};(e.forEach((function(e){var r=f(e);r<0&&(m.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,r,t),E(e,QA.BadScore),d.set(e,!0))})),e.size<i)&&gI(n,a-e.size).forEach((function(e){S(e,YA.NotEnough)}));if(e.size>s){var A=Array.from(e);A.sort((function(e,t){return f(t)-f(e)})),A=A.slice(0,o).concat(wA(A.slice(o)));var I=0;if(A.slice(0,a).forEach((function(e){m.outbound.get(e)&&I++})),I<u){var C=function(e){for(var t=A[e],r=e;r>0;r--)A[r]=A[r-1];A[0]=t};if(I>0)for(var Z=I,R=1;R<a&&Z>0;R++)m.outbound.get(A[R])&&(C(R),Z--);for(var T=a-I,D=a;D<A.length&&T>0;D++)m.outbound.get(A[D])&&(C(D),T--)}A.slice(a).forEach((function(e){E(e,QA.Excess)}))}if(e.size>=i){var P=0;if(e.forEach((function(e){m.outbound.get(e)&&P++})),P<u){var N=yI(n,u-P,(function(e){return!0===m.outbound.get(e)}));N.forEach((function(e){S(e,YA.Outbound)}))}}if(m.heartbeatTicks%m.opts.opportunisticGraftTicks===0&&e.size>1){var O=Array.from(e).sort((function(e,t){return f(e)-f(t)})),B=Math.floor(e.size/2),L=f(O[B]);if(L<m.opts.scoreThresholds.opportunisticGraftThreshold){var M,U=yI(n,m.opts.opportunisticGraftPeers,(function(e){return f(e)>L})),j=(0,v.Z)(U);try{for(j.s();!(M=j.n()).done;){var F=M.value;m.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",F,t),S(F,YA.Opportunistic)}}catch(Dy){j.e(Dy)}finally{j.f()}}}})),g=Date.now(),this.fanoutLastpub.forEach((function(e,t){e+c<g&&(m.fanout.delete(t),m.fanoutLastpub.delete(t))})),this.fanout.forEach((function(e,t){var r=m.topics.get(t);e.forEach((function(t){(!r.has(t)||f(t)<m.opts.scoreThresholds.publishThreshold)&&e.delete(t)}));var n=m.topics.get(t),i=[],s=new Set;if(y.set(t,s),n){var o,u=wA(Array.from(n)),c=(0,v.Z)(u);try{for(c.s();!(o=c.n()).done;){var l=o.value,p=m.peers.get(l);if(p&&kA(p.protocol)&&!e.has(l)&&!m.direct.has(l)){var h=f(l);h>=m.opts.scoreThresholds.publishThreshold&&i.push(l),h>=m.opts.scoreThresholds.gossipThreshold&&s.add(l)}}}catch(Dy){c.e(Dy)}finally{c.f()}}if(e.size<a){var d=a-e.size;i.slice(0,d).forEach((function(t){e.add(t),null===s||void 0===s||s.delete(t)}))}})),this.emitGossip(y),e.next=27,this.sendGraftPrune(p,h,d);case 27:this.flush(),this.mcache.shift(),this.dispatchEvent(new HS("gossipsub:heartbeat"));case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRandomGossipPeers",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},a=this.topics.get(e);if(!a)return new Set;var i=[];return a.forEach((function(e){var t=r.peers.get(e);t&&kA(t.protocol)&&n(e)&&i.push(e)})),i=wA(i),t>0&&i.length>t&&(i=i.slice(0,t)),new Set(i)}},{key:"onScrapeMetrics",value:function(e){var t,r;e.mcacheSize.set(this.mcache.size),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},null!==(t=null===(r=this.fastMsgIdCache)||void 0===r?void 0:r.size)&&void 0!==t?t:0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);var n,a=0,i=(0,v.Z)(this.backoff.values());try{for(i.s();!(n=i.n()).done;){a+=n.value.size}}catch(Dy){i.e(Dy)}finally{i.f()}e.cacheSize.set({cache:"backoff"},a);var s,o=(0,v.Z)(this.topics);try{for(o.s();!(s=o.n()).done;){var u=(0,y.Z)(s.value,2),c=u[0],l=u[1];e.topicPeersCount.set({topicStr:c},l.size)}}catch(Dy){o.e(Dy)}finally{o.f()}var f,p=(0,v.Z)(this.mesh);try{for(p.s();!(f=p.n()).done;){var h=(0,y.Z)(f.value,2),d=h[0],g=h[1];e.meshPeerCounts.set({topicStr:d},g.size)}}catch(Dy){p.e(Dy)}finally{p.f()}var m=[],b=new Map;e.behaviourPenalty.reset();var w,k=(0,v.Z)(this.peers.keys());try{for(k.s();!(w=k.n()).done;){var x,_,E=w.value,S=this.score.score(E);m.push(S),b.set(E,S),e.behaviourPenalty.observe(null!==(x=null===(_=this.score.peerStats.get(E))||void 0===_?void 0:_.behaviourPenalty)&&void 0!==x?x:0)}}catch(Dy){k.e(Dy)}finally{k.f()}e.registerScores(m,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,b);var A=function(e,t,r,n,a){var i,s={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]},o=(0,v.Z)(e);try{for(o.s();!(i=o.n()).done;){var u=i.value,c=t.get(u);if(c){var l,f=vI(u,c,r,n,a),p=(0,v.Z)(f.byTopic);try{for(p.s();!(l=p.n()).done;){var h=(0,y.Z)(l.value,2),d=h[0],g=h[1],m=s.byTopic.get(d);m||(m={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},s.byTopic.set(d,m)),m.p1w.push(g.p1w),m.p2w.push(g.p2w),m.p3w.push(g.p3w),m.p3bw.push(g.p3bw),m.p4w.push(g.p4w)}}catch(Dy){p.e(Dy)}finally{p.f()}s.p5w.push(f.p5w),s.p6w.push(f.p6w),s.p7w.push(f.p7w),s.score.push(f.score)}else s.p5w.push(0),s.p6w.push(0),s.p7w.push(0),s.score.push(0)}}catch(Dy){o.e(Dy)}finally{o.f()}return s}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(A)}}]),r}(KS);bI.multicodec=yA;function wI(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}var kI=_e("libp2p-delegated-peer-routing"),xI=3e4,_I=function(){function e(t){if((0,pe.Z)(this,e),null==t)throw new Error("missing ipfs http client");this.client=t,this.started=!1,this.abortController=new AbortController,this.httpQueue=new Tn({concurrency:4});var r=t.getEndpointConfig(),n=r.protocol,a=r.host,i=r.port;kI("enabled DelegatedPeerRouting via ".concat(n,"://").concat(a,":").concat(i))}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){this.started=!0}},{key:"stop",value:function(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}},{key:"findPeer",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:{},kI("findPeer starts: %p",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:xI,n.signal=Er([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),a=wI(),i=wI(),this.httpQueue.add((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.resolve(),e.next=3,i.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),e.prev=7,e.next=10,a.promise;case 10:s=!1,o=!1,e.prev=12,c=hr(this.client.dht.findPeer(t,n));case 14:return e.next=16,c.next();case 16:if(!(s=!(l=e.sent).done)){e.next=24;break}if("FINAL_PEER"!==(f=l.value).name){e.next=21;break}return p={id:f.peer.id,multiaddrs:f.peer.multiaddrs.map((function(e){return new Lf(e.toString())})),protocols:[]},e.abrupt("return",p);case 21:s=!1,e.next=14;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(12),o=!0,u=e.t0;case 30:if(e.prev=30,e.prev=31,!s||null==c.return){e.next=35;break}return e.next=35,c.return();case 35:if(e.prev=35,!o){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(30);case 40:e.next=46;break;case 42:throw e.prev=42,e.t1=e.catch(7),kI.error("findPeer errored: %o",e.t1),e.t1;case 46:return e.prev=46,i.resolve(),kI("findPeer finished: %p",t),e.finish(46);case 50:throw Ee(new Error("Not found"),"ERR_NOT_FOUND");case 51:case"end":return e.stop()}}),e,this,[[7,42,46,50],[12,26,30,40],[31,,35,39]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=Ue.CID.asCID(e),i=null!=s?s:ea(e),kI("getClosestPeers starts: %s",i),r.timeout=null!==(a=r.timeout)&&void 0!==a?a:xI,r.signal=Er([t.abortController.signal].concat(null!=r.signal?[r.signal]:[])),o=wI(),u=wI(),t.httpQueue.add((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.resolve(),e.next=3,u.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),n.prev=8,n.next=11,pr(o.promise);case 11:c=!1,l=!1,n.prev=13,p=hr(t.client.dht.query(i,r));case 15:return n.next=17,pr(p.next());case 17:if(!(c=!(h=n.sent).done)){n.next=24;break}if("PEER_RESPONSE"!==(d=h.value).name){n.next=21;break}return n.delegateYield(ia(hr(d.closer.map((function(e){return{id:e.id,multiaddrs:e.multiaddrs.map((function(e){return new Lf(e.toString())})),protocols:[]}}))),pr),"t0",21);case 21:c=!1,n.next=15;break;case 24:n.next=30;break;case 26:n.prev=26,n.t1=n.catch(13),l=!0,f=n.t1;case 30:if(n.prev=30,n.prev=31,!c||null==p.return){n.next=35;break}return n.next=35,pr(p.return());case 35:if(n.prev=35,!l){n.next=38;break}throw f;case 38:return n.finish(35);case 39:return n.finish(30);case 40:n.next=46;break;case 42:throw n.prev=42,n.t2=n.catch(8),kI.error("getClosestPeers errored:",n.t2),n.t2;case 46:return n.prev=46,u.resolve(),kI("getClosestPeers finished: %b",e),n.finish(46);case 50:case"end":return n.stop()}}),n,null,[[8,42,46,50],[13,26,30,40],[31,,35,39]])})))()}}]),e}(),EI=_e("libp2p:delegated-content-routing"),SI=3e4,AI=function(){function e(t){if((0,pe.Z)(this,e),null==t)throw new Error("missing ipfs http client");this.client=t,this.started=!1,this.abortController=new AbortController,this.httpQueue=new Tn({concurrency:4}),this.httpQueueRefs=new Tn({concurrency:2});var r=t.getEndpointConfig(),n=r.protocol,a=r.host,i=r.port;EI("enabled DelegatedContentRouting via ".concat(n,"://").concat(a,":").concat(i))}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){this.started=!0}},{key:"stop",value:function(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return EI("findProviders starts: %c",e),r.timeout=null!==(a=r.timeout)&&void 0!==a?a:SI,r.signal=Er([t.abortController.signal].concat(null!=r.signal?[r.signal]:[])),i=wI(),s=wI(),t.httpQueue.add((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.resolve(),e.next=3,s.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),n.prev=6,n.next=9,pr(i.promise);case 9:o=!1,u=!1,n.prev=11,l=hr(t.client.dht.findProvs(e,r));case 13:return n.next=15,pr(l.next());case 15:if(!(o=!(f=n.sent).done)){n.next=22;break}if("PROVIDER"!==(p=f.value).name){n.next=19;break}return n.delegateYield(ia(hr(p.providers.map((function(e){return{id:e.id,protocols:[],multiaddrs:e.multiaddrs.map((function(e){return new Lf(e.toString())}))}}))),pr),"t0",19);case 19:o=!1,n.next=13;break;case 22:n.next=28;break;case 24:n.prev=24,n.t1=n.catch(11),u=!0,c=n.t1;case 28:if(n.prev=28,n.prev=29,!o||null==l.return){n.next=33;break}return n.next=33,pr(l.return());case 33:if(n.prev=33,!u){n.next=36;break}throw c;case 36:return n.finish(33);case 37:return n.finish(28);case 38:n.next=44;break;case 40:throw n.prev=40,n.t2=n.catch(6),EI.error("findProviders errored:",n.t2),n.t2;case 44:return n.prev=44,s.resolve(),EI("findProviders finished: %c",e),n.finish(44);case 48:case"end":return n.stop()}}),n,null,[[6,40,44,48],[11,24,28,38],[29,,33,37]])})))()}},{key:"provide",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a=this,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},EI("provide starts: %c",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:SI,n.signal=Er([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),e.next=6,this.httpQueueRefs.add((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.client.block.stat(t,n);case 2:return e.next=4,zc(a.client.dht.provide(t,n));case 4:case"end":return e.stop()}}),e)}))));case 6:EI("provide finished: %c",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i=this,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},EI("put value start: %b",t),a.timeout=null!==(n=a.timeout)&&void 0!==n?n:SI,a.signal=Er([this.abortController.signal].concat(null!=a.signal?[a.signal]:[])),e.next=6,this.httpQueue.add((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zc(i.client.dht.put(t,r,a));case 2:case"end":return e.stop()}}),e)}))));case 6:EI("put value finished: %b",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a=this,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},EI("get value start: %b",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:SI,n.signal=Er([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),e.next=6,this.httpQueue.add((0,fe.Z)((0,ce.Z)().mark((function e(){var r,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,i=!1,e.prev=2,o=hr(a.client.dht.get(t,n));case 4:return e.next=6,o.next();case 6:if(!(r=!(u=e.sent).done)){e.next=14;break}if("VALUE"!==(c=u.value).name){e.next=11;break}return EI("get value finished: %b",t),e.abrupt("return",c.value);case 11:r=!1,e.next=4;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),i=!0,s=e.t0;case 20:if(e.prev=20,e.prev=21,!r||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!i){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(20);case 30:throw Ee(new Error("Not found"),"ERR_NOT_FOUND");case 31:case"end":return e.stop()}}),e,null,[[2,16,20,30],[21,,25,29]])}))));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),II=function(e){return Promise.reject(new Error('No base found for "'.concat(e,'"')))},CI=function(){function e(t){(0,pe.Z)(this,e),this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase||II;var r,n=(0,v.Z)(t.bases);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addBase(a)}}catch(Dy){n.e(Dy)}finally{n.f()}}return(0,he.Z)(e,[{key:"addBase",value:function(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error('Codec already exists for codec "'.concat(e.name,'"'));this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}},{key:"removeBase",value:function(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}},{key:"getBase",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._basesByName[t]){e.next=2;break}return e.abrupt("return",this._basesByName[t]);case 2:if(!this._basesByPrefix[t]){e.next=4;break}return e.abrupt("return",this._basesByPrefix[t]);case 4:return e.next=6,this._loadBase(t);case 6:return r=e.sent,null==this._basesByName[r.name]&&null==this._basesByPrefix[r.prefix]&&this.addBase(r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listBases",value:function(){return Object.values(this._basesByName)}}]),e}(),ZI=function(e){return Promise.reject(new Error('No codec found for "'.concat(e,'"')))},RI=function(){function e(t){(0,pe.Z)(this,e),this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec||ZI;var r,n=(0,v.Z)(t.codecs);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addCodec(a)}}catch(Dy){n.e(Dy)}finally{n.f()}}return(0,he.Z)(e,[{key:"addCodec",value:function(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}},{key:"removeCodec",value:function(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}},{key:"getCodec",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r="string"===typeof t?this._codecsByName:this._codecsByCode)[t]){e.next=3;break}return e.abrupt("return",r[t]);case 3:return e.next=5,this._loadCodec(t);case 5:return n=e.sent,null==r[t]&&this.addCodec(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listCodecs",value:function(){return Object.values(this._codecsByName)}}]),e}(),TI=function(e){return Promise.reject(new Error('No hasher found for "'.concat(e,'"')))},DI=function(){function e(t){(0,pe.Z)(this,e),this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher||TI;var r,n=(0,v.Z)(t.hashers);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addHasher(a)}}catch(Dy){n.e(Dy)}finally{n.f()}}return(0,he.Z)(e,[{key:"addHasher",value:function(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}},{key:"removeHasher",value:function(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}},{key:"getHasher",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r="string"===typeof t?this._hashersByName:this._hashersByCode)[t]){e.next=3;break}return e.abrupt("return",r[t]);case 3:return e.next=5,this._loadHasher(t);case 5:return n=e.sent,null==r[t]&&this.addHasher(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listHashers",value:function(){return Object.values(this._hashersByName)}}]),e}();function PI(e){try{e=Nb(new Lf(e))}catch(Dy){}return e=e.toString()}var NI=_e("ipfs-http-client:lib:error-handler"),OI=ge.bind({ignoreUndefined:!0}),BI=me.isBrowser||me.isWebWorker?location.protocol:"http",LI=me.isBrowser||me.isWebWorker?location.hostname:"localhost",MI=me.isBrowser||me.isWebWorker?location.port:"5001",UI=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};if("string"===typeof r||Lf.isMultiaddr(r))e=new URL(PI(r));else if(r instanceof URL)e=r;else if("string"===typeof r.url||Lf.isMultiaddr(r.url))e=new URL(PI(r.url)),n=r;else if(r.url instanceof URL)e=r.url,n=r;else{var a=((n=r||{}).protocol||BI).replace(":",""),i=(n.host||LI).split(":")[0],s=n.port||MI;e=new URL("".concat(a,"://").concat(i,":").concat(s))}if(n.apiPath?e.pathname=n.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),me.isNode){var o=void 0;t=n.agent||new o({keepAlive:!0,maxSockets:6})}return(0,le.Z)((0,le.Z)({},n),{},{host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:t})},jI=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.headers.get("Content-Type")||"").startsWith("application/json")){e.next=9;break}return e.next=4,t.json();case 4:n=e.sent,NI(n),r=n.Message||n.message,e.next=12;break;case 9:return e.next=11,t.text();case 11:r=e.sent;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),NI("Failed to parse error response",e.t0),r=e.t0.message;case 18:throw a=new Dn.HTTPError(t),r&&(r.includes("deadline has elapsed")&&(a=new Dn.TimeoutError),r&&r.includes("context deadline exceeded")&&(a=new Dn.TimeoutError)),r&&r.includes("request timed out")&&(a=new Dn.TimeoutError),r&&(a.message=r),a;case 23:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),FI=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,zI=function(e){return e.replace(FI,(function(e){return"-"+e.toLowerCase()}))},VI=function(e){return"string"===typeof e?Cr(e):e},KI=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,r);var a=UI(n);e=t.call(this,{timeout:VI(a.timeout||0)||void 0,headers:a.headers,base:"".concat(a.url),handleError:jI,transformSearchParams:function(e){var t,r=new URLSearchParams,n=(0,v.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=(0,y.Z)(t.value,2),i=a[0],s=a[1];"undefined"!==s&&"null"!==s&&"signal"!==i&&r.append(zI(i),s),"timeout"!==i||isNaN(s)||r.append(zI(i),s)}}catch(Dy){n.e(Dy)}finally{n.f()}return r},agent:a.agent}),delete e.get,delete e.put,delete e.delete,delete e.options;var i=e.fetch;return e.fetch=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof t||t.startsWith("/")||(t="".concat(a.url,"/").concat(t)),i.call(Ct(e),t,OI(r,{method:"POST"}))},e}return(0,he.Z)(r)}(Dn),qI=(Dn.HTTPError,function(e){return function(t){return e(new KI(t),t)}});function HI(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WI(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function GI(e){if(null!=e){var t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){var r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw Ee(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}var YI=["arg","searchParams","hashAlg","mtime","mode"];function QI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.arg,r=e.searchParams,n=e.hashAlg,a=e.mtime,i=e.mode,s=HI(e,YI);r&&(s=(0,le.Z)((0,le.Z)({},s),r)),n&&(s.hash=n),null!=a&&(a=GI(a),s.mtime=a.secs,s.mtimeNsecs=a.nsecs),null!=i&&(s.mode=WI(i)),s.timeout&&!isNaN(s.timeout)&&(s.timeout="".concat(s.timeout,"ms")),void 0===t||null===t?t=[]:Array.isArray(t)||(t=[t]);var o=new URLSearchParams(s);return t.forEach((function(e){return o.append("arg",e)})),o}var JI=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bitswap/wantlist",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,t.abrupt("return",(n.Keys||[]).map((function(e){return Ue.CID.parse(e["/"])})));case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),XI=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("bitswap/wantlist",{signal:n.signal,searchParams:QI((0,le.Z)((0,le.Z)({},n),{},{peer:r.toString()})),headers:n.headers});case 3:return t.next=5,t.sent.json();case 5:return a=t.sent,t.abrupt("return",(a.Keys||[]).map((function(e){return Ue.CID.parse(e["/"])})));case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),$I=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bitswap/stat",{searchParams:QI(r),signal:r.signal,headers:r.headers});case 3:return n=t.sent,t.t0=eC,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function eC(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((function(e){return Ue.CID.parse(e["/"])})),peers:(e.Peers||[]).map((function(e){return $n(e)})),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}var tC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("bitswap/unwant",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.abrupt("return",a.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function rC(e){return{wantlist:JI(e),wantlistForPeer:XI(e),unwant:tC(e),stat:$I(e)}}var nC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("block/get",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.t0=Uint8Array,t.next=7,a.arrayBuffer();case 7:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function aC(e){return iC.apply(this,arguments)}function iC(){return iC=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ip(t)){e.next=2;break}return e.abrupt("return",new Blob([t]));case 2:if(!("string"===typeof t||t instanceof String)){e.next=4;break}return e.abrupt("return",new Blob([t.toString()]));case 4:if(!Cp(t)){e.next=6;break}return e.abrupt("return",t);case 6:if(Rp(t)&&(t=Ep(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=28;break}return r=Ap(t),e.next=11,r.peek();case 11:if(n=e.sent,a=n.value,!n.done){e.next=16;break}return e.abrupt("return",sC(r));case 16:if(r.push(a),!Number.isInteger(a)){e.next=26;break}return e.t0=Blob,e.t1=Uint8Array,e.next=22,jc(r);case 22:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.t4=[e.t3],e.abrupt("return",new e.t0(e.t4));case 26:if(!(Ip(a)||"string"===typeof a||a instanceof String)){e.next=28;break}return e.abrupt("return",sC(r));case 28:throw Ee(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 29:case"end":return e.stop()}}),e)}))),iC.apply(this,arguments)}function sC(e){return oC.apply(this,arguments)}function oC(){return oC=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!1,a=!1,e.prev=3,s=hr(t);case 5:return e.next=7,s.next();case 7:if(!(n=!(o=e.sent).done)){e.next=13;break}u=o.value,r.push(u);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==s.return){e.next=24;break}return e.next=24,s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",new Blob(r));case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])}))),oC.apply(this,arguments)}function uC(e){return Yh(e,aC,!0)}function cC(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function lC(e,t){return fC.apply(this,arguments)}function fC(){return fC=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S.length>2&&void 0!==S[2]?S[2]:{},a=[],i=new FormData,s=0,o=0,u=!1,c=!1,e.prev=7,f=hr(uC(t));case 9:return e.next=11,f.next();case 11:if(!(u=!(p=e.sent).done)){e.next=37;break}if(h=p.value,d=h.content,v=h.path,y=h.mode,g=h.mtime,m="",b=d?"file":"dir",s>0&&(m="-".concat(s)),w=b+m,k=[],null!==y&&void 0!==y&&k.push("mode=".concat(cC(y))),null!=g&&(x=g.secs,_=g.nsecs,k.push("mtime=".concat(x)),null!=_&&k.push("mtime-nsecs=".concat(_))),k.length&&(w="".concat(w,"?").concat(k.join("&"))),!d){e.next=28;break}i.set(w,d,null!=v?encodeURIComponent(v):void 0),E=o+d.size,a.push({name:v,start:o,end:E}),o=E,e.next=33;break;case 28:if(null==v){e.next=32;break}i.set(w,new File([""],encodeURIComponent(v),{type:"application/x-directory"})),e.next=33;break;case 32:throw new Error("path or content or both must be set");case 33:s++;case 34:u=!1,e.next=9;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(7),c=!0,l=e.t0;case 43:if(e.prev=43,e.prev=44,!u||null==f.return){e.next=48;break}return e.next=48,f.return();case 48:if(e.prev=48,!c){e.next=51;break}throw l;case 51:return e.finish(48);case 52:return e.finish(43);case 53:return e.abrupt("return",{total:o,parts:a,headers:n,body:i});case 54:case"end":return e.stop()}}),e,null,[[7,39,43,53],[44,,48,52]])}))),fC.apply(this,arguments)}function pC(e){return e.filter(Boolean)}function hC(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,Er.anySignal)(pC(t))}var dC=qI((function(e){function t(e){return r.apply(this,arguments)}function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function r(n){var a,i,s,o,u,c=arguments;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},i=new AbortController,s=hC(i.signal,a.signal),r.prev=3,r.t0=e,r.t1=le.Z,r.t2={signal:s,searchParams:QI(a)},r.next=9,lC([n],i,a.headers);case 9:return r.t3=r.sent,r.t4=(0,r.t1)(r.t2,r.t3),r.next=13,r.t0.post.call(r.t0,"block/put",r.t4);case 13:return u=r.sent,r.next=16,u.json();case 16:o=r.sent,r.next=28;break;case 19:if(r.prev=19,r.t5=r.catch(3),"dag-pb"!==a.format){r.next=25;break}return r.abrupt("return",t(n,(0,le.Z)((0,le.Z)({},a),{},{format:"protobuf"})));case 25:if("dag-cbor"!==a.format){r.next=27;break}return r.abrupt("return",t(n,(0,le.Z)((0,le.Z)({},a),{},{format:"cbor"})));case 27:throw r.t5;case 28:return r.abrupt("return",Ue.CID.parse(o.Key));case 29:case"end":return r.stop()}}),r,null,[[3,19]])}))),r.apply(this,arguments)}return t})),vC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},Array.isArray(r)||(r=[r]),t.next=4,pr(e.post("block/rm",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r.map((function(e){return e.toString()})),"stream-channels":!0},n)),headers:n.headers}));case 4:a=t.sent,i=!1,s=!1,t.prev=7,u=hr(a.ndjson());case 9:return t.next=11,pr(u.next());case 11:if(!(i=!(c=t.sent).done)){t.next=18;break}return l=c.value,t.next=15,yC(l);case 15:i=!1,t.next=9;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(7),s=!0,o=t.t0;case 24:if(t.prev=24,t.prev=25,!i||null==u.return){t.next=29;break}return t.next=29,pr(u.return());case 29:if(t.prev=29,!s){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(24);case 34:case"end":return t.stop()}}),t,null,[[7,20,24,34],[25,,29,33]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function yC(e){var t={cid:Ue.CID.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}var gC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("block/stat",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{cid:Ue.CID.parse(i.Key),size:i.Size});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function mC(e){return{get:nC(e),put:dC(e),rm:vC(e),stat:gC(e)}}var bC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("bootstrap/add",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,s=i.Peers,t.abrupt("return",{Peers:s.map((function(e){return new Lf(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),wC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.next=3,e.post("bootstrap/rm",{signal:r.signal,searchParams:QI((0,le.Z)((0,le.Z)({},r),{},{all:!0})),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return new Lf(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),kC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.next=3,e.post("bootstrap/list",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return new Lf(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),xC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.next=3,e.post("bootstrap/add",{signal:r.signal,searchParams:QI((0,le.Z)((0,le.Z)({},r),{},{default:!0})),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return new Lf(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),_C=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("bootstrap/rm",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,s=i.Peers,t.abrupt("return",{Peers:s.map((function(e){return new Lf(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function EC(e){return{add:bC(e),clear:wC(e),list:kC(e),reset:xC(e),rm:_C(e)}}var SC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("config/profile/apply",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{original:i.OldCfg,updated:i.NewCfg});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function AC(e){if(null==e)return e;var t=/^[A-Z]+$/;return Object.keys(e).reduce((function(r,n){return t.test(n)?r[n.toLowerCase()]=e[n]:t.test(n[0])?r[n[0].toLowerCase()+n.slice(1)]=e[n]:r[n]=e[n],r}),{})}var IC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("config/profile/list",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.map((function(e){return AC(e)})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function CC(e){return{apply:SC(e),list:IC(e)}}var ZC=qI((function(e){var t=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:{},r){t.next=3;break}throw new Error("key argument is required");case 3:return t.next=5,e.post("config",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 5:return a=t.sent,t.next=8,a.json();case 8:return i=t.sent,t.abrupt("return",i.Value);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),RC=qI((function(e){var t=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("config/show",{signal:r.signal,searchParams:QI((0,le.Z)({},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t})),TC=qI((function(e){var t=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},a=new AbortController,i=hC(a.signal,n.signal),t.t0=e,t.t1=le.Z,t.t2={signal:i,searchParams:QI(n)},t.next=8,lC([(0,fr.fromString)(JSON.stringify(r))],a,n.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"config/replace",t.t4);case 12:return s=t.sent,t.next=15,s.text();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),DC=qI((function(e){var t=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:{},"string"===typeof r){t.next=3;break}throw new Error("Invalid key type");case 3:return i=(0,le.Z)((0,le.Z)({},a),PC(r,n)),t.next=6,e.post("config",{signal:a.signal,searchParams:QI(i),headers:a.headers});case 6:return s=t.sent,t.next=9,s.text();case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return t})),PC=function(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function NC(e){return{getAll:RC(e),get:ZC(e),set:DC(e),replace:TC(e),profiles:CC(e)}}var OC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,pr(e.post("dag/export",{signal:n.signal,searchParams:QI({arg:r.toString()}),headers:n.headers}));case 3:return a=t.sent,t.delegateYield(ia(hr(a.iterator()),pr),"t0",5);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function BC(e,t,r,n,a){return LC.apply(this,arguments)}function LC(){return LC=ye((0,ce.Z)().mark((function e(t,r,n,a,i){var s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCodec(t.code);case 2:return r=e.sent,e.next=5,a(t,i);case 5:return s=e.sent,e.abrupt("return",r.decode(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=r.split("/").filter(Boolean),e.next=4,pr(s(t));case 4:u=e.sent,c=t;case 6:if(!o.length){e.next=25;break}if(l=o.shift()){e.next=10;break}throw Ee(new Error('Could not resolve path "'.concat(r,'"')),"ERR_INVALID_PATH");case 10:if(!Object.prototype.hasOwnProperty.call(u,l)){e.next=16;break}return u=u[l],e.next=14,{value:u,remainderPath:o.join("/")};case 14:e.next=17;break;case 16:throw Ee(new Error('no link named "'.concat(l,'" under ').concat(c)),"ERR_NO_LINK");case 17:if(!(f=Ue.CID.asCID(u))){e.next=23;break}return c=f,e.next=22,pr(s(u));case 22:u=e.sent;case 23:e.next=6;break;case 25:return e.next=27,{value:u,remainderPath:""};case 27:case"end":return e.stop()}}),e)}))),LC.apply(this,arguments)}var MC=function(e,t){var r=qI((function(t,r){var n=nC(r),a=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=l.length>1&&void 0!==l[1]?l[1]:{}).path){t.next=16;break}if(!a.localResolve){t.next=8;break}return t.next=5,bb(BC(r,a.path,e,n,a));case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,aa(BC(r,a.path,e,n,a));case 10:t.t0=t.sent;case 11:if(i=t.t0,s=i){t.next=15;break}throw Ee(new Error("Not found"),"ERR_NOT_FOUND");case 15:return t.abrupt("return",s);case 16:return t.next=18,e.getCodec(r.code);case 18:return o=t.sent,t.next=21,n(r,a);case 21:return u=t.sent,c=o.decode(u),t.abrupt("return",{value:c,remainderPath:""});case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a}));return r(t)},UC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:{},a=new AbortController,i=hC(a.signal,n.signal),t.next=5,pr(lC(r,a,n.headers));case 5:return s=t.sent,o=s.headers,u=s.body,t.next=10,pr(e.post("dag/import",{signal:i,headers:o,body:u,searchParams:QI({"pin-roots":n.pinRoots})}));case 10:c=t.sent,l=!1,f=!1,t.prev=13,h=hr(c.ndjson());case 15:return t.next=17,pr(h.next());case 17:if(!(l=!(d=t.sent).done)){t.next=26;break}if(void 0===(v=d.value.Root)){t.next=23;break}return y=v.Cid["/"],g=v.PinErrorMsg,t.next=23,{root:{cid:Ue.CID.parse(y),pinErrorMsg:g}};case 23:l=!1,t.next=15;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(13),f=!0,p=t.t0;case 32:if(t.prev=32,t.prev=33,!l||null==h.return){t.next=37;break}return t.next=37,pr(h.return());case 37:if(t.prev=37,!f){t.next=40;break}throw p;case 40:return t.finish(37);case 41:return t.finish(32);case 42:case"end":return t.stop()}}),t,null,[[13,28,32,42],[33,,37,41]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),jC=function(e,t){var r=qI((function(t){var r=function(){var r=(0,fe.Z)((0,ce.Z)().mark((function r(n){var a,i,s,o,u,c,l,f,p=arguments;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=p.length>1&&void 0!==p[1]?p[1]:{},!(i=(0,le.Z)({storeCodec:"dag-cbor",hashAlg:"sha2-256"},a)).inputCodec){r.next=8;break}if(n instanceof Uint8Array){r.next=5;break}throw new Error("Can only inputCodec on raw bytes that can be decoded");case 5:s=n,r.next=13;break;case 8:return r.next=10,e.getCodec(i.storeCodec);case 10:o=r.sent,s=o.encode(n),i.inputCodec=i.storeCodec;case 13:return u=new AbortController,c=hC(u.signal,i.signal),r.t0=t,r.t1=le.Z,r.t2={timeout:i.timeout,signal:c,searchParams:QI(i)},r.next=20,lC([s],u,i.headers);case 20:return r.t3=r.sent,r.t4=(0,r.t1)(r.t2,r.t3),r.next=24,r.t0.post.call(r.t0,"dag/put",r.t4);case 24:return l=r.sent,r.next=27,l.json();case 27:return f=r.sent,r.abrupt("return",Ue.CID.parse(f.Cid["/"]));case 29:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return r}));return r(t)},FC=qI((function(e){var t=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("dag/resolve",{signal:n.signal,searchParams:QI((0,le.Z)({arg:"".concat(r).concat(n.path?"/".concat(n.path).replace(/\/[/]+/g,"/"):"")},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{cid:Ue.CID.parse(i.Cid["/"]),remainderPath:i.RemPath});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t}));function zC(e,t){return{export:OC(t),get:MC(e,t),import:UC(t),put:jC(e,t),resolve:FC(t)}}var VC=function(e){if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:$n(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((function(e){var t=e.ID,r=e.Addrs;return{id:$n(t),multiaddrs:r.map((function(e){return new Lf(e)})),protocols:[]}})),providers:(e.Responses||[]).map((function(e){var t=e.ID,r=e.Addrs;return{id:$n(t),multiaddrs:r.map((function(e){return new Lf(e)})),protocols:[]}}))};if(2===e.Type){var t,r={id:null!==(t=e.ID)&&void 0!==t?t:$n(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(r={id:$n(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((function(e){return new Lf(e)})),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:r}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((function(e){var t=e.ID,r=e.Addrs;return{id:$n(t),multiaddrs:r.map((function(e){return new Lf(e)})),protocols:[]}}))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:(0,fr.fromString)(e.Extra,"base64pad")};if(6===e.Type){var n=e.Responses.map((function(e){return $n(e.ID)}));if(!n.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:n[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:$n(e.ID)};throw new Error("Unknown DHT event type")},KC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},t.next=3,pr(e.post("dht/findpeer",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers}));case 3:a=t.sent,i=!1,s=!1,t.prev=6,u=hr(a.ndjson());case 8:return t.next=10,pr(u.next());case 10:if(!(i=!(c=t.sent).done)){t.next=17;break}return l=c.value,t.next=14,VC(l);case 14:i=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),s=!0,o=t.t0;case 23:if(t.prev=23,t.prev=24,!i||null==u.return){t.next=28;break}return t.next=28,pr(u.return());case 28:if(t.prev=28,!s){t.next=31;break}throw o;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),qC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},t.next=3,pr(e.post("dht/findprovs",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r.toString()},n)),headers:n.headers}));case 3:a=t.sent,i=!1,s=!1,t.prev=6,u=hr(a.ndjson());case 8:return t.next=10,pr(u.next());case 10:if(!(i=!(c=t.sent).done)){t.next=17;break}return l=c.value,t.next=14,VC(l);case 14:i=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),s=!0,o=t.t0;case 23:if(t.prev=23,t.prev=24,!i||null==u.return){t.next=28;break}return t.next=28,pr(u.return());case 28:if(t.prev=28,!s){t.next=31;break}throw o;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),HC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},t.next=3,pr(e.post("dht/get",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r instanceof Uint8Array?(0,gr.toString)(r):r.toString()},n)),headers:n.headers}));case 3:a=t.sent,i=!1,s=!1,t.prev=6,u=hr(a.ndjson());case 8:return t.next=10,pr(u.next());case 10:if(!(i=!(c=t.sent).done)){t.next=17;break}return l=c.value,t.next=14,VC(l);case 14:i=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),s=!0,o=t.t0;case 23:if(t.prev=23,t.prev=24,!i||null==u.return){t.next=28;break}return t.next=28,pr(u.return());case 28:if(t.prev=28,!s){t.next=31;break}throw o;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),WC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{recursive:!1},a=Array.isArray(r)?r:[r],t.next=4,pr(e.post("dht/provide",{signal:n.signal,searchParams:QI((0,le.Z)({arg:a.map((function(e){return e.toString()}))},n)),headers:n.headers}));case 4:i=t.sent,s=!1,o=!1,t.prev=7,c=hr(i.ndjson());case 9:return t.next=11,pr(c.next());case 11:if(!(s=!(l=t.sent).done)){t.next=18;break}return f=l.value,t.next=15,VC(f);case 15:s=!1,t.next=9;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(7),o=!0,u=t.t0;case 24:if(t.prev=24,t.prev=25,!s||null==c.return){t.next=29;break}return t.next=29,pr(c.return());case 29:if(t.prev=29,!o){t.next=32;break}throw u;case 32:return t.finish(29);case 33:return t.finish(24);case 34:case"end":return t.stop()}}),t,null,[[7,20,24,34],[25,,29,33]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),GC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=d.length>2&&void 0!==d[2]?d[2]:{},i=new AbortController,s=hC(i.signal,a.signal),t.t0=pr,t.t1=e,t.t2=le.Z,t.t3={signal:s,searchParams:QI((0,le.Z)({arg:r instanceof Uint8Array?(0,gr.toString)(r):r.toString()},a))},t.next=9,pr(lC([n],i,a.headers));case 9:return t.t4=t.sent,t.t5=(0,t.t2)(t.t3,t.t4),t.t6=t.t1.post.call(t.t1,"dht/put",t.t5),t.next=14,(0,t.t0)(t.t6);case 14:o=t.sent,u=!1,c=!1,t.prev=17,f=hr(o.ndjson());case 19:return t.next=21,pr(f.next());case 21:if(!(u=!(p=t.sent).done)){t.next=28;break}return h=p.value,t.next=25,VC(h);case 25:u=!1,t.next=19;break;case 28:t.next=34;break;case 30:t.prev=30,t.t7=t.catch(17),c=!0,l=t.t7;case 34:if(t.prev=34,t.prev=35,!u||null==f.return){t.next=39;break}return t.next=39,pr(f.return());case 39:if(t.prev=39,!c){t.next=42;break}throw l;case 42:return t.finish(39);case 43:return t.finish(34);case 44:case"end":return t.stop()}}),t,null,[[17,30,34,44],[35,,39,43]])}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),YC=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},t.next=3,pr(e.post("dht/query",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r.toString()},n)),headers:n.headers}));case 3:a=t.sent,i=!1,s=!1,t.prev=6,u=hr(a.ndjson());case 8:return t.next=10,pr(u.next());case 10:if(!(i=!(c=t.sent).done)){t.next=17;break}return l=c.value,t.next=14,VC(l);case 14:i=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),s=!0,o=t.t0;case 23:if(t.prev=23,t.prev=24,!i||null==u.return){t.next=28;break}return t.next=28,pr(u.return());case 28:if(t.prev=28,!s){t.next=31;break}throw o;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function QC(e){return{findPeer:KC(e),findProvs:qC(e),get:HC(e),provide:WC(e),put:GC(e),query:YC(e)}}var JC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/cmds",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),XC=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/net",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),$C=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/sys",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function eZ(e){return{cmds:JC(e),net:XC(e),sys:$C(e)}}var tZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,e.post("files/chmod",{signal:a.signal,searchParams:QI((0,le.Z)({arg:r,mode:n},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),rZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},i=Array.isArray(r)?r:[r],t.next=4,e.post("files/cp",{signal:a.signal,searchParams:QI((0,le.Z)({arg:i.concat(n).map((function(e){return Ue.CID.asCID(e)?"/ipfs/".concat(e):e}))},a)),headers:a.headers});case 4:return s=t.sent,t.next=7,s.text();case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),nZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:{},r&&"string"===typeof r){t.next=3;break}throw new Error("ipfs.files.flush requires a path");case 3:return t.next=5,e.post("files/flush",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 5:return a=t.sent,t.next=8,a.json();case 8:return i=t.sent,t.abrupt("return",Ue.CID.parse(i.Cid));case 10:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function aZ(e){var t=AC(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}var iZ=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:{},r){t.next=3;break}throw new Error("ipfs.files.ls requires a path");case 3:return t.next=5,pr(e.post("files/ls",{signal:n.signal,searchParams:QI((0,le.Z)((0,le.Z)({arg:Ue.CID.asCID(r)?"/ipfs/".concat(r):r,long:!0},n),{},{stream:!0})),headers:n.headers}));case 5:a=t.sent,i=!1,s=!1,t.prev=8,u=hr(a.ndjson());case 10:return t.next=12,pr(u.next());case 12:if(!(i=!(c=t.sent).done)){t.next=39;break}if(!("Entries"in(l=c.value))){t.next=34;break}f=(0,v.Z)(l.Entries||[]),t.prev=16,f.s();case 18:if((p=f.n()).done){t.next=24;break}return h=p.value,t.next=22,sZ(aZ(h));case 22:t.next=18;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(16),f.e(t.t0);case 29:return t.prev=29,f.f(),t.finish(29);case 32:t.next=36;break;case 34:return t.next=36,sZ(aZ(l));case 36:i=!1,t.next=10;break;case 39:t.next=45;break;case 41:t.prev=41,t.t1=t.catch(8),s=!0,o=t.t1;case 45:if(t.prev=45,t.prev=46,!i||null==u.return){t.next=50;break}return t.next=50,pr(u.return());case 50:if(t.prev=50,!s){t.next=53;break}throw o;case 53:return t.finish(50);case 54:return t.finish(45);case 55:case"end":return t.stop()}}),t,null,[[8,41,45,55],[16,26,29,32],[46,,50,54]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function sZ(e){return e.hash&&(e.cid=Ue.CID.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}var oZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("files/mkdir",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),uZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},Array.isArray(r)||(r=[r]),t.next=4,e.post("files/mv",{signal:a.signal,searchParams:QI((0,le.Z)({arg:r.concat(n)},a)),headers:a.headers});case 4:return i=t.sent,t.next=7,i.text();case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),cZ=__webpack_require__(9210),lZ=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,pr(e.post("files/read",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r,count:n.length},n)),headers:n.headers}));case 3:return a=t.sent,t.delegateYield(ia(hr(cZ(a.body)),pr),"t0",5);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),fZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("files/rm",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:if(""===(i=t.sent)){t.next=11;break}throw(s=new Dn.HTTPError(a)).message=i,s;case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),pZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("files/stat",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return(i=t.sent).WithLocality=i.WithLocality||!1,t.abrupt("return",hZ(aZ(i)));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function hZ(e){return e.cid=Ue.CID.parse(e.hash),delete e.hash,e}var dZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("files/touch",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),vZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},i=new AbortController,s=hC(i.signal,a.signal),t.t0=e,t.t1=le.Z,t.t2={signal:s,searchParams:QI((0,le.Z)({arg:r,streamChannels:!0,count:a.length},a))},t.next=8,lC([{content:n,path:"arg",mode:WI(a.mode),mtime:GI(a.mtime)}],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"files/write",t.t4);case 12:return o=t.sent,t.next=15,o.text();case 15:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}));function yZ(e){return{chmod:tZ(e),cp:rZ(e),flush:nZ(e),ls:iZ(e),mkdir:oZ(e),mv:uZ(e),read:lZ(e),rm:fZ(e),stat:pZ(e),touch:dZ(e),write:vZ(e)}}var gZ=qI((function(e){var t=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.length>2&&void 0!==n[2]?n[2]:{},Ee(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return t})),mZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{type:"Ed25519"},t.next=3,e.post("key/gen",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",AC(i));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),bZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n,a){var i,s,o,u=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>3&&void 0!==u[3]?u[3]:{},t.next=3,e.post("key/import",{signal:i.signal,searchParams:QI((0,le.Z)({arg:r,pem:n,password:a},i)),headers:i.headers});case 3:return s=t.sent,t.next=6,s.json();case 6:return o=t.sent,t.abrupt("return",AC(o));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r,n){return t.apply(this,arguments)}})),wZ=qI((function(e){var t=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:{},Ee(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t})),kZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("key/list",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",(a.Keys||[]).map((function(e){return AC(e)})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),xZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,e.post("key/rename",{signal:a.signal,searchParams:QI((0,le.Z)({arg:[r,n]},a)),headers:a.headers});case 3:return i=t.sent,t.t0=AC,t.next=7,i.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),_Z=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("key/rm",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",AC(i.Keys[0]));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function EZ(e){return{export:gZ(e),gen:mZ(e),import:bZ(e),info:wZ(e),list:kZ(e),rename:xZ(e),rm:_Z(e)}}var SZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,e.post("log/level",{signal:a.signal,searchParams:QI((0,le.Z)({arg:[r,n]},a)),headers:a.headers});case 3:return i=t.sent,t.t0=AC,t.next=7,i.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),AZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("log/ls",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.Strings);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),IZ=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,pr(e.post("log/tail",{signal:r.signal,searchParams:QI(r),headers:r.headers}));case 3:return n=t.sent,t.delegateYield(ia(hr(n.ndjson()),pr),"t0",5);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function CZ(e){return{level:SZ(e),ls:AZ(e),tail:IZ(e)}}var ZZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("name/publish",{signal:n.signal,searchParams:QI((0,le.Z)({arg:"".concat(r)},n)),headers:n.headers});case 3:return a=t.sent,t.t0=AC,t.next=7,a.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),RZ=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},t.next=3,pr(e.post("name/resolve",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r,stream:!0},n)),headers:n.headers}));case 3:a=t.sent,i=!1,s=!1,t.prev=6,u=hr(a.ndjson());case 8:return t.next=10,pr(u.next());case 10:if(!(i=!(c=t.sent).done)){t.next=17;break}return l=c.value,t.next=14,l.Path;case 14:i=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),s=!0,o=t.t0;case 23:if(t.prev=23,t.prev=24,!i||null==u.return){t.next=28;break}return t.next=28,pr(u.return());case 28:if(t.prev=28,!s){t.next=31;break}throw o;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),TZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("name/pubsub/cancel",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.t0=AC,t.next=7,a.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),DZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("name/pubsub/state",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.t0=AC,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),PZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("name/pubsub/subs",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.Strings||[]);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function NZ(e){return{cancel:TZ(e),state:DZ(e),subs:PZ(e)}}function OZ(e){return{publish:ZZ(e),resolve:RZ(e),pubsub:NZ(e)}}var BZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("object/data",{signal:n.signal,searchParams:QI((0,le.Z)({arg:"".concat(r instanceof Uint8Array?Ue.CID.decode(r):r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.arrayBuffer();case 6:return i=t.sent,t.abrupt("return",new Uint8Array(i,0,i.byteLength));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),LZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("object/get",{signal:n.signal,searchParams:QI((0,le.Z)({arg:"".concat(r instanceof Uint8Array?Ue.CID.decode(r):r),dataEncoding:"base64"},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{Data:(0,fr.fromString)(i.Data,"base64pad"),Links:(i.Links||[]).map((function(e){return{Name:e.Name,Hash:Ue.CID.parse(e.Hash),Tsize:e.Size}}))});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),MZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("object/links",{signal:n.signal,searchParams:QI((0,le.Z)({arg:"".concat(r instanceof Uint8Array?Ue.CID.decode(r):r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",(i.Links||[]).map((function(e){return{Name:e.Name,Tsize:e.Size,Hash:Ue.CID.parse(e.Hash)}})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),UZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.next=3,e.post("object/new",{signal:r.signal,searchParams:QI((0,le.Z)({arg:r.template},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Hash,t.abrupt("return",Ue.CID.parse(i));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),jZ=function(e,t){var r=qI((function(r){var n=jC(e,t);function a(){return a=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",n(t,(0,le.Z)((0,le.Z)({},r),{},{storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})));case 2:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return function(e){return a.apply(this,arguments)}}));return r(t)},FZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("object/stat",{signal:n.signal,searchParams:QI((0,le.Z)({arg:"".concat(r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",(0,le.Z)((0,le.Z)({},i),{},{Hash:Ue.CID.parse(i.Hash)}));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),zZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},t.next=3,e.post("object/patch/add-link",{signal:a.signal,searchParams:QI((0,le.Z)({arg:["".concat(r),n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null]},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.json();case 6:return s=t.sent,o=s.Hash,t.abrupt("return",Ue.CID.parse(o));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),VZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:{},i=new AbortController,s=hC(i.signal,a.signal),t.t0=e,t.t1=le.Z,t.t2={signal:s,searchParams:QI((0,le.Z)({arg:"".concat(r)},a))},t.next=8,lC([n],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"object/patch/append-data",t.t4);case 12:return o=t.sent,t.next=15,o.json();case 15:return u=t.sent,c=u.Hash,t.abrupt("return",Ue.CID.parse(c));case 18:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),KZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},t.next=3,e.post("object/patch/rm-link",{signal:a.signal,searchParams:QI((0,le.Z)({arg:["".concat(r),n.Name||n.name||null]},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.json();case 6:return s=t.sent,o=s.Hash,t.abrupt("return",Ue.CID.parse(o));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),qZ=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:{},i=new AbortController,s=hC(i.signal,a.signal),t.t0=e,t.t1=le.Z,t.t2={signal:s,searchParams:QI((0,le.Z)({arg:["".concat(r)]},a))},t.next=8,lC([n],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"object/patch/set-data",t.t4);case 12:return o=t.sent,t.next=15,o.json();case 15:return u=t.sent,c=u.Hash,t.abrupt("return",Ue.CID.parse(c));case 18:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}));function HZ(e){return{addLink:zZ(e),appendData:VZ(e),rmLink:KZ(e),setData:qZ(e)}}function WZ(e,t){return{data:BZ(t),get:LZ(t),links:MZ(t),new:UZ(t),put:jZ(e,t),stat:FZ(t),patch:HZ(t)}}var GZ=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d,y,g,m,b,w,k,x,_,E=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=E.length>1&&void 0!==E[1]?E[1]:{},a=!1,i=!1,t.prev=3,o=hr(sa(r));case 5:return t.next=7,pr(o.next());case 7:if(!(a=!(u=t.sent).done)){t.next=63;break}return c=u.value,l=c.path,f=c.recursive,p=c.metadata,t.next=11,pr(e.post("pin/add",{signal:n.signal,searchParams:QI((0,le.Z)((0,le.Z)({},n),{},{arg:l,recursive:f,metadata:p?JSON.stringify(p):void 0,stream:!0})),headers:n.headers}));case 11:h=t.sent,d=!1,y=!1,t.prev=14,m=hr(h.ndjson());case 16:return t.next=18,pr(m.next());case 18:if(!(d=!(b=t.sent).done)){t.next=44;break}if(!(w=b.value).Pins){t.next=39;break}k=(0,v.Z)(w.Pins),t.prev=22,k.s();case 24:if((x=k.n()).done){t.next=30;break}return _=x.value,t.next=28,Ue.CID.parse(_);case 28:t.next=24;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(22),k.e(t.t0);case 35:return t.prev=35,k.f(),t.finish(35);case 38:return t.abrupt("continue",41);case 39:return t.next=41,Ue.CID.parse(w);case 41:d=!1,t.next=16;break;case 44:t.next=50;break;case 46:t.prev=46,t.t1=t.catch(14),y=!0,g=t.t1;case 50:if(t.prev=50,t.prev=51,!d||null==m.return){t.next=55;break}return t.next=55,pr(m.return());case 55:if(t.prev=55,!y){t.next=58;break}throw g;case 58:return t.finish(55);case 59:return t.finish(50);case 60:a=!1,t.next=5;break;case 63:t.next=69;break;case 65:t.prev=65,t.t2=t.catch(3),i=!0,s=t.t2;case 69:if(t.prev=69,t.prev=70,!a||null==o.return){t.next=74;break}return t.next=74,pr(o.return());case 74:if(t.prev=74,!i){t.next=77;break}throw s;case 77:return t.finish(74);case 78:return t.finish(69);case 79:case"end":return t.stop()}}),t,null,[[3,65,69,79],[14,46,50,60],[22,32,35,38],[51,,55,59],[70,,74,78]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function YZ(e){var t=GZ(e);return qI((function(){function e(){return e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",aa(t([(0,le.Z)({path:r},n)],n)));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)}function QZ(e,t,r){var n={type:e,cid:Ue.CID.parse(t)};return r&&(n.metadata=r),n}var JZ=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(){var r,n,a,i,s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.length>0&&void 0!==d[0]?d[0]:{},n=[],r.paths&&(n=Array.isArray(r.paths)?r.paths:[r.paths]),t.next=5,pr(e.post("pin/ls",{signal:r.signal,searchParams:QI((0,le.Z)((0,le.Z)({},r),{},{arg:n.map((function(e){return"".concat(e)})),stream:!0})),headers:r.headers}));case 5:a=t.sent,i=!1,s=!1,t.prev=8,u=hr(a.ndjson());case 10:return t.next=12,pr(u.next());case 12:if(!(i=!(c=t.sent).done)){t.next=29;break}if(!(l=c.value).Keys){t.next=24;break}f=0,p=Object.keys(l.Keys);case 16:if(!(f<p.length)){t.next=23;break}return h=p[f],t.next=20,QZ(l.Keys[h].Type,h,l.Keys[h].Metadata);case 20:f++,t.next=16;break;case 23:return t.abrupt("return");case 24:return t.next=26,QZ(l.Type,l.Cid,l.Metadata);case 26:i=!1,t.next=10;break;case 29:t.next=35;break;case 31:t.prev=31,t.t0=t.catch(8),s=!0,o=t.t0;case 35:if(t.prev=35,t.prev=36,!i||null==u.return){t.next=40;break}return t.next=40,pr(u.return());case 40:if(t.prev=40,!s){t.next=43;break}throw o;case 43:return t.finish(40);case 44:return t.finish(35);case 45:case"end":return t.stop()}}),t,null,[[8,31,35,45],[36,,40,44]])}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),XZ=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d,v,y,g,m,b,w=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=w.length>1&&void 0!==w[1]?w[1]:{},a=!1,i=!1,t.prev=3,o=hr(sa(r));case 5:return t.next=7,pr(o.next());case 7:if(!(a=!(u=t.sent).done)){t.next=50;break}return c=u.value,l=c.path,f=c.recursive,(p=new URLSearchParams(n.searchParams)).append("arg","".concat(l)),null!=f&&p.set("recursive",String(f)),t.next=14,pr(e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:QI((0,le.Z)((0,le.Z)({},n),{},{arg:"".concat(l),recursive:f}))}));case 14:h=t.sent,d=!1,v=!1,t.prev=17,g=hr(h.ndjson());case 19:return t.next=21,pr(g.next());case 21:if(!(d=!(m=t.sent).done)){t.next=31;break}if(!(b=m.value).Pins){t.next=26;break}return t.delegateYield(ia(hr(b.Pins.map((function(e){return Ue.CID.parse(e)}))),pr),"t0",25);case 25:return t.abrupt("continue",28);case 26:return t.next=28,Ue.CID.parse(b);case 28:d=!1,t.next=19;break;case 31:t.next=37;break;case 33:t.prev=33,t.t1=t.catch(17),v=!0,y=t.t1;case 37:if(t.prev=37,t.prev=38,!d||null==g.return){t.next=42;break}return t.next=42,pr(g.return());case 42:if(t.prev=42,!v){t.next=45;break}throw y;case 45:return t.finish(42);case 46:return t.finish(37);case 47:a=!1,t.next=5;break;case 50:t.next=56;break;case 52:t.prev=52,t.t2=t.catch(3),i=!0,s=t.t2;case 56:if(t.prev=56,t.prev=57,!a||null==o.return){t.next=61;break}return t.next=61,pr(o.return());case 61:if(t.prev=61,!i){t.next=64;break}throw s;case 64:return t.finish(61);case 65:return t.finish(56);case 66:case"end":return t.stop()}}),t,null,[[3,52,56,66],[17,33,37,47],[38,,42,46],[57,,61,65]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),$Z=function(e){var t=XZ(e);return qI((function(){function e(){return e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",aa(t([(0,le.Z)({path:r},n)],n)));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)},eR=function(e){var t=e.Name,r=e.Status,n=e.Cid;return{cid:Ue.CID.parse(n),name:t,status:r}},tR=function(e){if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},rR=function(e){if(Ue.CID.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of ".concat(typeof e))},nR=function(e){var t=e.service,r=e.cid,n=e.name,a=e.status,i=e.all,s=QI({service:tR(t),name:n,force:!!i||void 0});if(r){var o,u=(0,v.Z)(r);try{for(u.s();!(o=u.n()).done;){var c=o.value;s.append("cid",rR(c))}}catch(Dy){u.e(Dy)}finally{u.f()}}if(a){var l,f=(0,v.Z)(a);try{for(f.s();!(l=f.n()).done;){var p=l.value;s.append("status",p)}}catch(Dy){f.e(Dy)}finally{f.f()}}return s},aR=function(e){var t=e.cid,r=e.service,n=e.background,a=e.name,i=e.origins,s=QI({arg:rR(t),service:tR(r),name:a,background:!!n||void 0});if(i){var o,u=(0,v.Z)(i);try{for(u.s();!(o=u.n()).done;){var c=o.value;s.append("origin",c.toString())}}catch(Dy){u.e(Dy)}finally{u.f()}}return s},iR=["timeout","signal","headers"];function sR(e){function t(){return(t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.timeout,i=n.signal,s=n.headers,o=HI(n,iR),t.next=3,e.post("pin/remote/add",{timeout:a,signal:i,headers:s,searchParams:aR((0,le.Z)({cid:r},o))});case 3:return u=t.sent,t.t0=eR,t.next=7,u.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}var oR=["timeout","signal","headers"];function uR(e){function t(){return(t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.timeout,a=r.signal,i=r.headers,s=HI(r,oR),t.next=3,pr(e.post("pin/remote/ls",{timeout:n,signal:a,headers:i,searchParams:nR(s)}));case 3:o=t.sent,u=!1,c=!1,t.prev=6,f=hr(o.ndjson());case 8:return t.next=10,pr(f.next());case 10:if(!(u=!(p=t.sent).done)){t.next=17;break}return h=p.value,t.next=14,eR(h);case 14:u=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),c=!0,l=t.t0;case 23:if(t.prev=23,t.prev=24,!u||null==f.return){t.next=28;break}return t.next=28,pr(f.return());case 28:if(t.prev=28,!c){t.next=31;break}throw l;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}var cR=["timeout","signal","headers"];function lR(e){function t(){return(t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.timeout,a=r.signal,i=r.headers,s=HI(r,cR),t.next=3,e.post("pin/remote/rm",{timeout:n,signal:a,headers:i,searchParams:nR((0,le.Z)((0,le.Z)({},s),{},{all:!1}))});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}var fR=["timeout","signal","headers"];function pR(e){function t(){return(t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.timeout,a=r.signal,i=r.headers,s=HI(r,fR),t.next=3,e.post("pin/remote/rm",{timeout:n,signal:a,headers:i,searchParams:nR((0,le.Z)((0,le.Z)({},s),{},{all:!0}))});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function hR(e){var t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function dR(e){return(0,le.Z)({service:e.Service,endpoint:new URL(e.ApiEndpoint)},e.Stat&&{stat:vR(e.Stat)})}function vR(e){switch(e.Status){case"valid":var t=e.PinCount,r=t.Pinning,n=t.Pinned;return{status:"valid",pinCount:{queued:t.Queued,pinning:r,pinned:n,failed:t.Failed}};case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function yR(e){function t(){return(t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.endpoint,i=n.key,s=n.headers,o=n.timeout,u=n.signal,t.next=3,e.post("pin/remote/service/add",{timeout:o,signal:u,searchParams:QI({arg:[r,hR(a),i]}),headers:s});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}function gR(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>0&&void 0!==l[0]?l[0]:{},n=r.stat,a=r.headers,i=r.timeout,s=r.signal,t.next=4,e.post("pin/remote/service/ls",{timeout:i,signal:s,headers:a,searchParams:!0===n?QI({stat:n}):void 0});case 4:return o=t.sent,t.next=7,o.json();case 7:return u=t.sent,c=u.RemoteServices,t.abrupt("return",c.map(dR));case 10:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}function mR(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:QI({arg:r})});case 3:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function bR(e){var t=new KI(e);return{add:yR(t),ls:gR(t),rm:mR(t)}}function wR(e){var t=new KI(e);return{add:sR(t),ls:uR(t),rm:lR(t),rmAll:pR(t),service:bR(e)}}function kR(e){return{addAll:GZ(e),add:YZ(e),ls:JZ(e),rmAll:XZ(e),rm:$Z(e),remote:wR(e)}}var xR=function(e){return Array.isArray(e)?e.map(_R):e},_R=function(e){return(0,gr.toString)(ER(e))},ER=function(e){return xe.base64url.decode(e)},SR=function(e){return BigInt("0x".concat((0,gr.toString)(xe.base64url.decode(e),"base16")))},AR=function(e){return xe.base64url.encode((0,fr.fromString)(e))},IR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("pubsub/ls",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,a=n.Strings,t.abrupt("return",xR(a)||[]);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),CR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("pubsub/peers",{signal:n.signal,searchParams:QI((0,le.Z)({arg:AR(r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,s=i.Strings,t.abrupt("return",s||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),ZR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n){var a,i,s,o,u,c=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:{},i=QI((0,le.Z)({arg:AR(r)},a)),s=new AbortController,o=hC(s.signal,a.signal),t.t0=e,t.t1=le.Z,t.t2={signal:o,searchParams:i},t.next=9,lC([n],s,a.headers);case 9:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=13,t.t0.post.call(t.t0,"pubsub/pub",t.t4);case 13:return u=t.sent,t.next=16,u.text();case 16:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),RR=_e("ipfs-http-client:pubsub:subscribe");function TR(e,t){return DR.apply(this,arguments)}function DR(){return(DR=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.onMessage,a=r.onEnd,i=(i=r.onError)||RR,e.prev=2,s=!1,o=!1,e.prev=5,c=hr(t.ndjson());case 7:return e.next=9,c.next();case 9:if(!(s=!(l=e.sent).done)){e.next=24;break}if(f=l.value,e.prev=11,f.from){e.next=14;break}return e.abrupt("continue",21);case 14:n({from:$n(f.from),data:ER(f.data),sequenceNumber:SR(f.seqno),topic:_R(f.topicIDs[0])}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(11),e.t0.message="Failed to parse pubsub message: ".concat(e.t0.message),i(e.t0,!1,f);case 21:s=!1,e.next=7;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(5),o=!0,u=e.t1;case 30:if(e.prev=30,e.prev=31,!s||null==c.return){e.next=35;break}return e.next=35,c.return();case 35:if(e.prev=35,!o){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(30);case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(2),PR(e.t2)||i(e.t2,!0);case 45:return e.prev=45,a(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[2,42,45,48],[5,26,30,40],[11,17],[31,,35,39]])})))).apply(this,arguments)}var PR=function(e){switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}},NR=function(e,t){function r(){return(r=(0,fe.Z)((0,ce.Z)().mark((function e(r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unsubscribe(r,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e,t){return r.apply(this,arguments)}},OR=function(){function e(){(0,pe.Z)(this,e),this._subs=new Map}return(0,he.Z)(e,[{key:"subscribe",value:function(e,t,r){var n=this,a=this._subs.get(e)||[];if(a.find((function(e){return e.handler===t})))throw new Error("Already subscribed to ".concat(e," with this handler"));var i=new AbortController;return this._subs.set(e,[{handler:t,controller:i}].concat(a)),r&&r.addEventListener("abort",(function(){return n.unsubscribe(e,t)})),i.signal}},{key:"unsubscribe",value:function(e,t){var r,n=this._subs.get(e)||[];t?(this._subs.set(e,n.filter((function(e){return e.handler!==t}))),r=n.filter((function(e){return e.handler===t}))):(this._subs.set(e,[]),r=n),(this._subs.get(e)||[]).length||this._subs.delete(e),r.forEach((function(e){return e.controller.abort()}))}}]),e}();function BR(e){var t,r,n=new OR;return{ls:IR(e),peers:CR(e),publish:ZR(e),subscribe:(t=e,r=n,qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(n,a){var i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=l.length>2&&void 0!==l[2]?l[2]:{}).signal=r.subscribe(n,a,i.signal),u=new Promise((function(e,t){s=e,o=t})),c=setTimeout((function(){return s()}),1e3),e.post("pubsub/sub",{signal:i.signal,searchParams:QI((0,le.Z)({arg:AR(n)},i)),headers:i.headers}).catch((function(e){r.unsubscribe(n,a),o(e)})).then((function(e){clearTimeout(c),e&&(TR(e,{onMessage:function(e){a&&("function"!==typeof a?"function"===typeof a.handleEvent&&a.handleEvent(e):a(e))},onEnd:function(){return r.unsubscribe(n,a)},onError:i.onError}),s())})),t.abrupt("return",u);case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}))(t)),unsubscribe:NR(0,n)}}var LR=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,pr(e.post("refs/local",{signal:r.signal,transform:AC,searchParams:QI(r),headers:r.headers}));case 3:return n=t.sent,t.delegateYield(ia(hr(n.ndjson()),pr),"t0",5);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),MR=qI((function(e,t){var r=function(){var t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},a=Array.isArray(r)?r:[r],t.next=4,pr(e.post("refs",{signal:n.signal,searchParams:QI((0,le.Z)({arg:a.map((function(e){return"".concat(e instanceof Uint8Array?Ue.CID.decode(e):e)}))},n)),headers:n.headers,transform:AC}));case 4:return i=t.sent,t.delegateYield(ia(hr(i.ndjson()),pr),"t0",6);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object.assign(r,{local:LR(t)})})),UR=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,pr(e.post("repo/gc",{signal:r.signal,searchParams:QI(r),headers:r.headers,transform:function(e){return{err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?Ue.CID.parse(e.Key["/"]):null}}}));case 3:return n=t.sent,t.delegateYield(ia(hr(n.ndjson()),pr),"t0",5);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),jR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("repo/stat",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",{numObjects:BigInt(a.NumObjects),repoSize:BigInt(a.RepoSize),repoPath:a.RepoPath,version:a.Version,storageMax:BigInt(a.StorageMax)});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),FR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("repo/version",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,t.abrupt("return",n.Version);case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function zR(e){return{gc:UR(e),stat:jR(e),version:FR(e)}}var VR=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,pr(e.post("stats/bw",{signal:r.signal,searchParams:QI(r),headers:r.headers,transform:function(e){return{totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)}}}));case 3:return n=t.sent,t.delegateYield(ia(hr(n.ndjson()),pr),"t0",5);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function KR(e){return{bitswap:$I(e),repo:jR(e),bw:VR(e)}}var qR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.next=3,e.post("swarm/addrs",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Addrs,t.abrupt("return",Object.keys(i).map((function(e){return{id:$n(e),addrs:(i[e]||[]).map((function(e){return new Lf(e)}))}})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),HR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("swarm/connect",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,s=i.Strings,t.abrupt("return",s||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),WR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("swarm/disconnect",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,s=i.Strings,t.abrupt("return",s||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),GR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.next=3,e.post("swarm/addrs/local",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Strings,t.abrupt("return",(i||[]).map((function(e){return new Lf(e)})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),YR=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.next=3,e.post("swarm/peers",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",(i||[]).map((function(e){return{addr:new Lf(e.Addr),peer:$n(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"}})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function QR(e){return{addrs:qR(e),connect:HR(e),disconnect:WR(e),localAddrs:GR(e),peers:YR(e)}}var JR=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d,v,g,m,b,w,k,x,_=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=_.length>1&&void 0!==_[1]?_[1]:{},a=new AbortController,i=hC(a.signal,n.signal),t.next=5,pr(lC(r,a,n.headers));case 5:return s=t.sent,o=s.headers,u=s.body,c=s.total,l=s.parts,f="function"===typeof n.progress?XR(c,l,n.progress):[void 0,void 0],p=(0,y.Z)(f,2),h=p[0],d=p[1],t.next=13,pr(e.post("add",{searchParams:QI((0,le.Z)((0,le.Z)({"stream-channels":!0},n),{},{progress:Boolean(h)})),onUploadProgress:d,signal:i,headers:o,body:u}));case 13:v=t.sent,g=!1,m=!1,t.prev=16,w=hr(v.ndjson());case 18:return t.next=20,pr(w.next());case 20:if(!(g=!(k=t.sent).done)){t.next=32;break}if(void 0===(x=AC(x=k.value)).hash){t.next=28;break}return t.next=26,eT(x);case 26:t.next=29;break;case 28:h&&h(x.bytes||0,x.name);case 29:g=!1,t.next=18;break;case 32:t.next=38;break;case 34:t.prev=34,t.t0=t.catch(16),m=!0,b=t.t0;case 38:if(t.prev=38,t.prev=39,!g||null==w.return){t.next=43;break}return t.next=43,pr(w.return());case 43:if(t.prev=43,!m){t.next=46;break}throw b;case 46:return t.finish(43);case 47:return t.finish(38);case 48:case"end":return t.stop()}}),t,null,[[16,34,38,48],[39,,43,47]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),XR=function(e,t,r){return t?[void 0,$R(e,t,r)]:[r,void 0]},$R=function(e,t,r){var n=0,a=t.length;return function(i){for(var s=i.loaded,o=i.total,u=Math.floor(s/o*e);n<a;){var c=t[n],l=c.start,f=c.end,p=c.name;if(u<f){r(u-l,p);break}r(f-l,p),n+=1}}};function eT(e){var t=e.name,r=e.hash,n=e.size,a=e.mode,i=e.mtime,s=e.mtimeNsecs,o={path:t,cid:Ue.CID.parse(r),size:parseInt(n)};return null!=a&&(o.mode=parseInt(a,8)),null!=i&&(o.mtime={secs:i,nsecs:s||0}),o}function tT(e){var t=JR(e);return qI((function(){function e(){return e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,aa(t(Up(r),n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)}var rT=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,pr(e.post("cat",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r.toString()},n)),headers:n.headers}));case 3:return a=t.sent,t.delegateYield(ia(hr(a.iterator()),pr),"t0",5);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),nT=qI((function(e){var t=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("commands",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t})),aT=qI((function(e){var t=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("dns",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",i.Path);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),iT=qI((function(e){return function(){var t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}})),sT=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},(a=(0,le.Z)({arg:"".concat(r instanceof Uint8Array?Ue.CID.decode(r):r)},n)).compressionLevel&&(a["compression-level"]=a.compressionLevel,delete a.compressionLevel),t.next=5,pr(e.post("get",{signal:n.signal,searchParams:QI(a),headers:n.headers}));case 5:return i=t.sent,t.delegateYield(ia(hr(i.iterator()),pr),"t0",7);case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),oT=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.next=3,e.post("id",{signal:r.signal,searchParams:QI((0,le.Z)({arg:r.peerId?r.peerId.toString():void 0},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,(i=(0,le.Z)({},AC(a))).id=$n(i.id),i.addresses&&(i.addresses=i.addresses.map((function(e){return new Lf(e)}))),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),uT=function(e){var t=oT(e);function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t(r);case 3:return n=e.sent,e.abrupt("return",Boolean(n&&n.addresses&&n.addresses.length));case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(){return r.apply(this,arguments)}},cT=qI((function(e,t){function r(){return r=ye((0,ce.Z)().mark((function r(n){var a,i,s,o,u,c,l,f,p,h,d,v,y=arguments;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=function(){return o=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=r.Hash).includes("/")){e.next=9;break}return a=n.startsWith("/ipfs/")?n:"/ipfs/".concat(n),e.next=5,pZ(t)(a);case 5:s=e.sent,n=s.cid,e.next=10;break;case 9:n=Ue.CID.parse(n);case 10:return o={name:r.Name,path:i+(r.Name?"/".concat(r.Name):""),size:r.Size,cid:n,type:lT(r)},r.Mode&&(o.mode=parseInt(r.Mode,8)),void 0!==r.Mtime&&null!==r.Mtime&&(o.mtime={secs:r.Mtime},void 0!==r.MtimeNsecs&&null!==r.MtimeNsecs&&(o.mtime.nsecs=r.MtimeNsecs)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)},s=function(e){return o.apply(this,arguments)},a=y.length>1&&void 0!==y[1]?y[1]:{},i="".concat(n instanceof Uint8Array?Ue.CID.decode(n):n),r.next=6,pr(e.post("ls",{signal:a.signal,searchParams:QI((0,le.Z)({arg:i},a)),headers:a.headers}));case 6:u=r.sent,c=!1,l=!1,r.prev=9,p=hr(u.ndjson());case 11:return r.next=13,pr(p.next());case 13:if(!(c=!(h=r.sent).done)){r.next=32;break}if(d=(d=h.value).Objects){r.next=18;break}throw new Error("expected .Objects in results");case 18:if(d=d[0]){r.next=21;break}throw new Error("expected one array in results.Objects");case 21:if(v=d.Links,Array.isArray(v)){r.next=24;break}throw new Error("expected one array in results.Objects[0].Links");case 24:if(v.length){r.next=28;break}return r.next=27,s(d);case 27:return r.abrupt("return");case 28:return r.delegateYield(ia(hr(v.map(s)),pr),"t0",29);case 29:c=!1,r.next=11;break;case 32:r.next=38;break;case 34:r.prev=34,r.t1=r.catch(9),l=!0,f=r.t1;case 38:if(r.prev=38,r.prev=39,!c||null==p.return){r.next=43;break}return r.next=43,pr(p.return());case 43:if(r.prev=43,!l){r.next=46;break}throw f;case 46:return r.finish(43);case 47:return r.finish(38);case 48:case"end":return r.stop()}}),r,null,[[9,34,38,48],[39,,43,47]])}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}));function lT(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}var fT=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("dns",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.t0=AC,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),pT=qI((function(e){function t(){return t=ye((0,ce.Z)().mark((function t(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,pr(e.post("ping",{signal:n.signal,searchParams:QI((0,le.Z)({arg:"".concat(r)},n)),headers:n.headers,transform:AC}));case 3:return a=t.sent,t.delegateYield(ia(hr(a.ndjson()),pr),"t0",5);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),hT=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("resolve",{signal:n.signal,searchParams:QI((0,le.Z)({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,s=i.Path,t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),dT=qI((function(e){var t=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw t.length>0&&void 0!==t[0]?t[0]:{},Ee(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t})),vT=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("shutdown",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),yT=qI((function(e){function t(){return t=(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("version",{signal:r.signal,searchParams:QI(r),headers:r.headers});case 3:return n=t.sent,t.t0=le.Z,t.t1=le.Z,t.t2={},t.t3=AC,t.next=10,n.json();case 10:return t.t4=t.sent,t.t5=(0,t.t3)(t.t4),t.t6=(0,t.t1)(t.t2,t.t5),t.t7={},t.t8={"ipfs-http-client":"1.0.0"},t.abrupt("return",(0,t.t0)(t.t6,t.t7,t.t8));case 16:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));__webpack_require__(9880),__webpack_require__(5014);var gT=Object.create(null);gT.open="0",gT.close="1",gT.ping="2",gT.pong="3",gT.message="4",gT.upgrade="5",gT.noop="6";var mT=Object.create(null);Object.keys(gT).forEach((function(e){mT[gT[e]]=e}));for(var bT={type:"error",data:"parser error"},wT="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),kT="function"===typeof ArrayBuffer,xT=function(e,t){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];t("b"+e)},r.readAsDataURL(e)},_T=function(e,t,r){var n,a=e.type,i=e.data;return wT&&i instanceof Blob?t?r(i):xT(i,r):kT&&(i instanceof ArrayBuffer||(n=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer))?t?r(i):xT(new Blob([i]),r):r(gT[a]+(i||""))},ET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ST="undefined"===typeof Uint8Array?[]:new Uint8Array(256),AT=0;AT<ET.length;AT++)ST[ET.charCodeAt(AT)]=AT;var IT="function"===typeof ArrayBuffer,CT=function(e,t){if(IT){var r=function(e){var t,r,n,a,i,s=.75*e.length,o=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),l=new Uint8Array(c);for(t=0;t<o;t+=4)r=ST[e.charCodeAt(t)],n=ST[e.charCodeAt(t+1)],a=ST[e.charCodeAt(t+2)],i=ST[e.charCodeAt(t+3)],l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|a>>2,l[u++]=(3&a)<<6|63&i;return c}(e);return ZT(r,t)}return{base64:!0,data:e}},ZT=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},RT=function(e,t){if("string"!==typeof e)return{type:"message",data:ZT(e,t)};var r=e.charAt(0);return"b"===r?{type:"message",data:CT(e.substring(1),t)}:mT[r]?e.length>1?{type:mT[r],data:e.substring(1)}:{type:mT[r]}:bT},TT=String.fromCharCode(30);function DT(e){if(e)return function(e){for(var t in DT.prototype)e[t]=DT.prototype[t];return e}(e)}DT.prototype.on=DT.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},DT.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},DT.prototype.off=DT.prototype.removeListener=DT.prototype.removeAllListeners=DT.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<n.length;a++)if((r=n[a])===t||r.fn===t){n.splice(a,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},DT.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var a=(r=r.slice(0)).length;n<a;++n)r[n].apply(this,t)}return this},DT.prototype.emitReserved=DT.prototype.emit,DT.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},DT.prototype.hasListeners=function(e){return!!this.listeners(e).length};var PT="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function NT(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((function(t,r){return e.hasOwnProperty(r)&&(t[r]=e[r]),t}),{})}var OT=setTimeout,BT=clearTimeout;function LT(e,t){t.useNativeTimers?(e.setTimeoutFn=OT.bind(PT),e.clearTimeoutFn=BT.bind(PT)):(e.setTimeoutFn=setTimeout.bind(PT),e.clearTimeoutFn=clearTimeout.bind(PT))}var MT,UT=function(e){St(r,e);var t=Rt(r);function r(e,n,a){var i;return(0,pe.Z)(this,r),(i=t.call(this,e)).description=n,i.context=a,i.type="TransportError",i}return(0,he.Z)(r)}(Pt(Error)),jT=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this)).writable=!1,LT(Ct(n),e),n.opts=e,n.query=e.query,n.readyState="",n.socket=e.socket,n}return(0,he.Z)(r,[{key:"onError",value:function(e,t,n){return _t(kt(r.prototype),"emitReserved",this).call(this,"error",new UT(e,t,n)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,_t(kt(r.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=RT(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){_t(kt(r.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",_t(kt(r.prototype),"emitReserved",this).call(this,"close",e)}}]),r}(DT),FT="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),zT={},VT=0,KT=0;function qT(e){var t="";do{t=FT[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function HT(){var e=qT(+new Date);return e!==MT?(VT=0,MT=e):e+"."+qT(VT++)}for(;KT<64;KT++)zT[FT[KT]]=KT;function WT(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function GT(e){for(var t={},r=e.split("&"),n=0,a=r.length;n<a;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}var YT=!1;try{YT="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Dy){}var QT=YT;function JT(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||QT))return new XMLHttpRequest}catch(r){}if(!t)try{return new(PT[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}function XT(){}var $T=null!=new JT({xdomain:!1}).responseType,eD=function(e){St(r,e);var t=Rt(r);function r(e){var n;if((0,pe.Z)(this,r),(n=t.call(this,e)).polling=!1,"undefined"!==typeof location){var a="https:"===location.protocol,i=location.port;i||(i=a?"443":"80"),n.xd="undefined"!==typeof location&&e.hostname!==location.hostname||i!==e.port,n.xs=e.secure!==a}var s=e&&e.forceBase64;return n.supportsBinary=$T&&!s,n}return(0,he.Z)(r,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var r=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var n=0;this.polling&&(n++,this.once("pollComplete",(function(){--n||r()}))),this.writable||(n++,this.once("drain",(function(){--n||r()})))}else r()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var r=e.split(TT),n=[],a=0;a<r.length;a++){var i=RT(r[a],t);if(n.push(i),"error"===i.type)break}return n})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var r=e.length,n=new Array(r),a=0;e.forEach((function(e,i){_T(e,!1,(function(e){n[i]=e,++a===r&&t(n.join(TT))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",r="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=HT()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);var n=WT(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new tD(this.uri(),e)}},{key:"doWrite",value:function(e,t){var r=this,n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(function(e,t){r.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,r){e.onError("xhr poll error",t,r)})),this.pollXhr=t}}]),r}(jT),tD=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),LT(Ct(a=t.call(this)),n),a.opts=n,a.method=n.method||"GET",a.uri=e,a.async=!1!==n.async,a.data=void 0!==n.data?n.data:null,a.create(),a}return(0,he.Z)(r,[{key:"create",value:function(){var e=this,t=NT(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var n=this.xhr=new JT(t);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var a in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this.opts.extraHeaders[a])}catch(i){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{n.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(i){return void this.setTimeoutFn((function(){e.onError(i)}),0)}"undefined"!==typeof document&&(this.index=r.requestsCount++,r.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=XT,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete r.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),r}(DT);if(tD.requestsCount=0,tD.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",rD);else if("function"===typeof addEventListener){addEventListener("onpagehide"in PT?"pagehide":"unload",rD,!1)}function rD(){for(var e in tD.requests)tD.requests.hasOwnProperty(e)&&tD.requests[e].abort()}var nD="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},aD=PT.WebSocket||PT.MozWebSocket,iD="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),sD=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).supportsBinary=!e.forceBase64,n}return(0,he.Z)(r,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,r=iD?{}:NT(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=iD?new aD(e,t,r):t?new aD(e,t):new aD(e)}catch(Dy){return this.emitReserved("error",Dy)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var r=function(r){var n=e[r],a=r===e.length-1;_T(n,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(r){}a&&nD((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},n=0;n<e.length;n++)r(n)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",r="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=HT()),this.supportsBinary||(e.b64=1);var n=WT(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}},{key:"check",value:function(){return!!aD}}]),r}(jT),oD={websocket:sD,polling:eD},uD=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,cD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lD(e){var t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));for(var a=uD.exec(e||""),i={},s=14;s--;)i[cD[s]]=a[s]||"";return-1!=r&&-1!=n&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,i.path),i.queryKey=function(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}(0,i.query),i}var fD=function(e){St(r,e);var t=Rt(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,pe.Z)(this,r),n=t.call(this),e&&"object"===typeof e&&(a=e,e=null),e?(e=lD(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=lD(a.host).host),LT(Ct(n),a),n.secure=null!=a.secure?a.secure:"undefined"!==typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=n.secure?"443":"80"),n.hostname=a.hostname||("undefined"!==typeof location?location.hostname:"localhost"),n.port=a.port||("undefined"!==typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=a.transports||["polling","websocket"],n.readyState="",n.writeBuffer=[],n.prevBufferLen=0,n.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},a),n.opts.path=n.opts.path.replace(/\/$/,"")+"/","string"===typeof n.opts.query&&(n.opts.query=GT(n.opts.query)),n.id=null,n.upgrades=null,n.pingInterval=null,n.pingTimeout=null,n.pingTimeoutTimer=null,"function"===typeof addEventListener&&(n.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())}),!1),"localhost"!==n.hostname&&(n.offlineEventListener=function(){n.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",n.offlineEventListener,!1))),n.open(),n}return(0,he.Z)(r,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new oD[e](r)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,n=this.createTransport(e),a=!1;r.priorWebsocketSuccess=!1;var i=function(){a||(n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(e){if(!a)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",n),!n)return;r.priorWebsocketSuccess="websocket"===n.name,t.transport.pause((function(){a||"closed"!==t.readyState&&(f(),t.setTransport(n),n.send([{type:"upgrade"}]),t.emitReserved("upgrade",n),n=null,t.upgrading=!1,t.flush())}))}else{var i=new Error("probe error");i.transport=n.name,t.emitReserved("upgradeError",i)}})))};function s(){a||(a=!0,f(),n.close(),n=null)}var o=function(e){var r=new Error("probe error: "+e);r.transport=n.name,s(),t.emitReserved("upgradeError",r)};function u(){o("transport closed")}function c(){o("socket closed")}function l(e){n&&e.name!==n.name&&s()}var f=function(){n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",u),this.once("close",c),this.once("upgrading",l),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,r=0;r<this.writeBuffer.length;r++){var n=this.writeBuffer[r].data;if(n&&(t+="string"===typeof(e=n)?function(e){for(var t=0,r=0,n=0,a=e.length;n<a;n++)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"send",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"sendPacket",value:function(e,t,r,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var a={type:e,data:t,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},r=function r(){e.off("upgrade",r),e.off("upgradeError",r),t()},n=function(){e.once("upgrade",r),e.once("upgradeError",r)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?n():t()})):this.upgrading?n():t()),this}},{key:"onError",value:function(e){r.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}]),r}(DT);fD.protocol=4;fD.protocol;var pD="function"===typeof ArrayBuffer,hD=Object.prototype.toString,dD="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===hD.call(Blob),vD="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===hD.call(File);function yD(e){return pD&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||dD&&e instanceof Blob||vD&&e instanceof File}function gD(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var r=0,n=e.length;r<n;r++)if(gD(e[r]))return!0;return!1}if(yD(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return gD(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&gD(e[a]))return!0;return!1}function mD(e){var t=[],r=e.data,n=e;return n.data=bD(r,t),n.attachments=t.length,{packet:n,buffers:t}}function bD(e,t){if(!e)return e;if(yD(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){for(var n=new Array(e.length),a=0;a<e.length;a++)n[a]=bD(e[a],t);return n}if("object"===typeof e&&!(e instanceof Date)){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=bD(e[s],t));return i}return e}function wD(e,t){return e.data=kD(e.data,t),e.attachments=void 0,e}function kD(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=kD(e[r],t);else if("object"===typeof e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=kD(e[n],t));return e}var xD,_D=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(xD||(xD={}));var ED=function(){function e(t){(0,pe.Z)(this,e),this.replacer=t}return(0,he.Z)(e,[{key:"encode",value:function(e){return e.type!==xD.EVENT&&e.type!==xD.ACK||!gD(e)?[this.encodeAsString(e)]:(e.type=e.type===xD.EVENT?xD.BINARY_EVENT:xD.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==xD.BINARY_EVENT&&e.type!==xD.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=mD(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}]),e}(),SD=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this)).reviver=e,n}return(0,he.Z)(r,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");(t=this.decodeString(e)).type===xD.BINARY_EVENT||t.type===xD.BINARY_ACK?(this.reconstructor=new AD(t),0===t.attachments&&_t(kt(r.prototype),"emitReserved",this).call(this,"decoded",t)):_t(kt(r.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!yD(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,_t(kt(r.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,n={type:Number(e.charAt(0))};if(void 0===xD[n.type])throw new Error("unknown packet type "+n.type);if(n.type===xD.BINARY_EVENT||n.type===xD.BINARY_ACK){for(var a=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var i=e.substring(a,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){for(var s=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(s,t)}else n.nsp="/";var o=e.charAt(t+1);if(""!==o&&Number(o)==o){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}n.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!r.isPayloadValid(n.type,l))throw new Error("invalid payload");n.data=l}return n}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case xD.CONNECT:return"object"===typeof t;case xD.DISCONNECT:return void 0===t;case xD.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case xD.EVENT:case xD.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case xD.ACK:case xD.BINARY_ACK:return Array.isArray(t)}}}]),r}(DT),AD=function(){function e(t){(0,pe.Z)(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,he.Z)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=wD(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function ID(e,t,r){return e.on(t,r),function(){e.off(t,r)}}var CD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),ZD=function(e){St(r,e);var t=Rt(r);function r(e,n,a){var i;return(0,pe.Z)(this,r),(i=t.call(this)).connected=!1,i.receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=n,a&&a.auth&&(i.auth=a.auth),i.io._autoConnect&&i.open(),i}return(0,he.Z)(r,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[ID(e,"open",this.onopen.bind(this)),ID(e,"packet",this.onpacket.bind(this)),ID(e,"error",this.onerror.bind(this)),ID(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(CD.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.unshift(e);var a={type:xD.EVENT,data:r,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof r[r.length-1]){var i=this.ids++,s=r.pop();this._registerAckCallback(i,s),a.id=i}var o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!o||!this.connected);return u||(this.connected?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var r=this,n=this.flags.timeout;if(void 0!==n){var a=this.io.setTimeoutFn((function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))}),n);this.acks[e]=function(){r.io.clearTimeoutFn(a);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:xD.CONNECT,data:t})})):this.packet({type:xD.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case xD.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xD.EVENT:case xD.BINARY_EVENT:this.onevent(e);break;case xD.ACK:case xD.BINARY_ACK:this.onack(e);break;case xD.DISCONNECT:this.ondisconnect();break;case xD.CONNECT_ERROR:this.destroy();var r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,n=this._anyListeners.slice(),a=(0,v.Z)(n);try{for(a.s();!(t=a.n()).done;){t.value.apply(this,e)}}catch(Dy){a.e(Dy)}finally{a.f()}}_t(kt(r.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];t.packet({type:xD.ACK,id:e,data:a})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:xD.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,r=this._anyOutgoingListeners.slice(),n=(0,v.Z)(r);try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(Dy){n.e(Dy)}finally{n.f()}}}}]),r}(DT);function RD(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}RD.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},RD.prototype.reset=function(){this.attempts=0},RD.prototype.setMin=function(e){this.ms=e},RD.prototype.setMax=function(e){this.max=e},RD.prototype.setJitter=function(e){this.jitter=e};var TD=function(e){St(r,e);var t=Rt(r);function r(e,n){var a,i;(0,pe.Z)(this,r),(a=t.call(this)).nsps={},a.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",a.opts=n,LT(Ct(a),n),a.reconnection(!1!==n.reconnection),a.reconnectionAttempts(n.reconnectionAttempts||1/0),a.reconnectionDelay(n.reconnectionDelay||1e3),a.reconnectionDelayMax(n.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),a.backoff=new RD({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==n.timeout?2e4:n.timeout),a._readyState="closed",a.uri=e;var s=n.parser||o;return a.encoder=new s.Encoder,a.decoder=new s.Decoder,a._autoConnect=!1!==n.autoConnect,a._autoConnect&&a.open(),a}return(0,he.Z)(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new fD(this.uri,this.opts);var r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;var a=ID(r,"open",(function(){n.onopen(),e&&e()})),i=ID(r,"error",(function(r){n.cleanup(),n._readyState="closed",t.emitReserved("error",r),e?e(r):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&a();var o=this.setTimeoutFn((function(){a(),r.close(),r.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&o.unref(),this.subs.push((function(){clearTimeout(o)}))}return this.subs.push(a),this.subs.push(i),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(ID(e,"ping",this.onping.bind(this)),ID(e,"data",this.ondata.bind(this)),ID(e,"error",this.onerror.bind(this)),ID(e,"close",this.onclose.bind(this)),ID(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var r=this.nsps[e];return r||(r=new ZD(this,e,t),this.nsps[e]=r),r}},{key:"_destroy",value:function(e){for(var t=0,r=Object.keys(this.nsps);t<r.length;t++){var n=r[t];if(this.nsps[n].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),r=0;r<t.length;r++)this.engine.write(t[r],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var r=this.backoff.duration();this._reconnecting=!0;var n=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(r){r?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",r)):t.onreconnect()})))}),r);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(DT),DD={};function PD(e,t){"object"===typeof e&&(t=e,e=void 0);var r,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=e;r=r||"undefined"!==typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof r?r.protocol+"//"+e:"https://"+e),n=lD(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),a=n.source,i=n.id,s=n.path,o=DD[i]&&s in DD[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?r=new TD(a,t):(DD[i]||(DD[i]=new TD(a,t)),r=DD[i]),n.query&&!t.query&&(t.query=n.queryKey),r.socket(n.path,t)}Object.assign(PD,{Manager:TD,Socket:ZD,io:PD,connect:PD});var ND=function(){function e(t,r){var n=this;(0,pe.Z)(this,e),this.label=t.label,this.open=wI(),this.channel=t,this.channel.binaryType="arraybuffer",this.log=r.log,"number"===typeof this.channel.bufferedAmountLowThreshold&&(this.channel.bufferedAmountLowThreshold=65536),t.addEventListener("message",(function(e){r.onMessage(e)})),t.addEventListener("bufferedamountlow",(function(){n.log("stop backpressure: bufferedAmount %d",n.channel.bufferedAmount),n.open.resolve()})),t.addEventListener("open",(function(){n.open.resolve(),r.onOpen()})),t.addEventListener("close",(function(){r.onClose()})),t.addEventListener("error",(function(e){var a,i,s,o,u;if("Transport channel closed"===(null===(a=e.error)||void 0===a?void 0:a.message))return n.close();r.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s',t.readyState,null===(i=e.error)||void 0===i?void 0:i.message,null===(s=e.error)||void 0===s?void 0:s.errorDetail);var c=e.error instanceof Error?e.error:new Error("datachannel error: ".concat(null===(o=e.error)||void 0===o?void 0:o.message," ").concat(null===(u=e.error)||void 0===u?void 0:u.errorDetail));r.onError(Ee(c,"ERR_DATA_CHANNEL"))}));var a=!1;this.closingInterval=setInterval((function(){"closing"===t.readyState?(a&&r.onClose(),a=!0):a=!1}),5e3)}return(0,he.Z)(e,[{key:"send",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open.promise;case 2:this.channel.send(t),this.channel.bufferedAmount>65536&&(this.log("start backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open=wI());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){clearInterval(this.closingInterval),this.channel.close()}},{key:"bufferedAmount",get:function(){return this.channel.bufferedAmount}}]),e}(),OD=__webpack_require__(2096),BD={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]};var LD=function(e){St(r,e);var t=Rt(r);function r(e){var n,a,i;return(0,pe.Z)(this,r),(i=t.call(this)).id=null!==(n=e.id)&&void 0!==n?n:(0,gr.toString)(Mi(4),"hex").slice(0,7),i.log=_e("libp2p:webrtc-peer:".concat(e.logPrefix,":").concat(i.id)),i.wrtc=null!==(a=e.wrtc)&&void 0!==a?a:function(){var e,t,r,n,a,i;if("undefined"===typeof globalThis)throw Ee(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");var s={RTCPeerConnection:null!==(e=null!==(t=globalThis.RTCPeerConnection)&&void 0!==t?t:globalThis.mozRTCPeerConnection)&&void 0!==e?e:globalThis.webkitRTCPeerConnection,RTCSessionDescription:null!==(r=null!==(n=globalThis.RTCSessionDescription)&&void 0!==n?n:globalThis.mozRTCSessionDescription)&&void 0!==r?r:globalThis.webkitRTCSessionDescription,RTCIceCandidate:null!==(a=null!==(i=globalThis.RTCIceCandidate)&&void 0!==i?i:globalThis.mozRTCIceCandidate)&&void 0!==a?a:globalThis.webkitRTCIceCandidate};if(null==s.RTCPeerConnection)throw Ee(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");return s}(),i.peerConnection=new i.wrtc.RTCPeerConnection(Object.assign({},BD,e.peerConnectionConfig)),i.closed=!1,i.connected=wI(),i.source=aA(),i.sink=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.connected.promise;case 2:if(null!=i.channel){e.next=4;break}throw Ee(new Error("Connected but no channel?!"),"ERR_DATA_CHANNEL");case 4:r=!1,n=!1,e.prev=6,s=hr(t);case 8:return e.next=10,s.next();case 10:if(!(r=!(o=e.sent).done)){e.next=17;break}return u=o.value,e.next=14,i.channel.send(u);case 14:r=!1,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==s.return){e.next=28;break}return e.next=28,s.return();case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:return e.next=35,i.close();case 35:case"end":return e.stop()}}),e,null,[[6,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),i}return(0,he.Z)(r,[{key:"handleDataChannelEvent",value:function(e){var t=this,r=e.channel;null!=r?this.channel=new ND(r,{log:this.log,onMessage:function(e){t.source.push(new Uint8Array(e.data))},onOpen:function(){t.connected.resolve(),t.dispatchEvent(new HS("ready"))},onClose:function(){t.close().catch((function(e){t.log("error closing connection after channel close",e)}))},onError:function(e){t.close(e).catch((function(e){t.log("error closing connection after channel error",e)}))}}):this.close(Ee(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL")).catch((function(e){t.log("Error closing after event channel was found to be null",e)}))}},{key:"close",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed=!0,null!=t||null==this.channel){e.next=7;break}case 2:if(!(this.channel.bufferedAmount>0)){e.next=7;break}return e.next=5,OD(100);case 5:e.next=2;break;case 7:null===(r=this.channel)||void 0===r||r.close(),this.peerConnection.close(),this.source.end(t),this.dispatchEvent(new HS("close"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(KS),MD=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this)).log=e.log,n.peerConnection=e.peerConnection,n.wrtc=e.wrtc,n.status="idle",n.peerConnection.addEventListener("negotiationneeded",(function(){n.log("peer connection negotiation needed"),n.handleRenegotiate({type:"renegotiate"}).catch((function(e){n.log.error("could not renegotiate %o",e)}))})),n}return(0,he.Z)(r,[{key:"handleSignal",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log('incoming signal "%s"',t.type),"offer"!==t.type){e.next=7;break}return e.next=4,this.handleOffer(t);case 4:return e.abrupt("return",e.sent);case 7:if("answer"!==t.type){e.next=13;break}return e.next=10,this.handleAnswer(t);case 10:return e.abrupt("return",e.sent);case 13:if("candidate"!==t.type){e.next=19;break}return e.next=16,this.handleCandidate(t);case 16:return e.abrupt("return",e.sent);case 19:if("renegotiate"!==t.type){e.next=25;break}return e.next=22,this.handleRenegotiate(t);case 22:return e.abrupt("return",e.sent);case 25:if("goodbye"!==t.type){e.next=31;break}return e.next=28,this.handleGoodye(t);case 28:return e.abrupt("return",e.sent);case 31:this.log("Unknown signal type ".concat(t.type));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOffer",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleAnswer",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleRenegotiate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleGoodye",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.peerConnection.close();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCandidate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this.wrtc.RTCIceCandidate(t.candidate),e.prev=1,e.next=4,this.peerConnection.addIceCandidate(r);case 4:e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(1),null!=r.address&&!r.address.endsWith(".local")){e.next=12;break}this.log("ignoring unsupported ICE candidate."),e.next=13;break;case 12:throw Ee(e.t0,"ERR_ADD_ICE_CANDIDATE");case 13:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(KS),UD=_e("libp2p:webrtc-peer:receiver"),jD=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,pe.Z)(this,r),(e=t.call(this,(0,le.Z)((0,le.Z)({},n),{},{logPrefix:"receiver"}))).handshake=new FD({log:e.log,peerConnection:e.peerConnection,wrtc:e.wrtc,answerOptions:n.answerOptions}),e.handshake.addEventListener("signal",(function(t){return e.dispatchEvent(new HS("signal",{detail:t.detail}))})),e.peerConnection.addEventListener("datachannel",(function(t){e.handleDataChannelEvent(t)})),e}return(0,he.Z)(r,[{key:"handleSignal",value:function(e){var t=this;this.handshake.handleSignal(e).catch((function(r){t.log("error handling signal %o %o",e,r)}))}}]),r}(LD),FD=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).options=e,n.status="idle",n.iceCandidates=[],n}return(0,he.Z)(r,[{key:"handleRenegotiate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:UD.trace("renegotiate"),this.dispatchEvent(new HS("signal",{detail:{type:"renegotiate"}}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleOffer",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t));case 2:n=(0,v.Z)(this.iceCandidates),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=11;break}return i=a.value,e.next=9,this.handleCandidate(i);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return this.iceCandidates=[],e.next=22,this.peerConnection.createAnswer(this.options.answerOptions);case 22:return s=e.sent,e.next=25,this.peerConnection.setLocalDescription(s);case 25:UD.trace("handle offer",this.peerConnection.localDescription),this.dispatchEvent(new HS("signal",{detail:null!==(r=this.peerConnection.localDescription)&&void 0!==r?r:s}));case 27:case"end":return e.stop()}}),e,this,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCandidate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.peerConnection.remoteDescription&&null!=this.peerConnection.remoteDescription.type){e.next=3;break}return this.iceCandidates.push(t),e.abrupt("return");case 3:return e.next=5,_t(kt(r.prototype),"handleCandidate",this).call(this,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(MD),zD=function(e){var t=e.on||e.addListener||e.addEventListener,r=e.off||e.removeListener||e.removeEventListener;if(!t||!r)throw new TypeError("Emitter is not compatible");return{addListener:t.bind(e),removeListener:r.bind(e)}};function VD(e,t,r){"function"===typeof r&&(r={filter:r});var n=function(e,t,r){var n,a=new Promise((function(a,i){if(!((r=(0,le.Z)({rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1},r)).count>=0)||r.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");var s=[t].flat(),o=[],u=zD(e),c=u.addListener,l=u.removeListener,f=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=r.multiArgs?t:t[0];r.filter&&!r.filter(s)||(o.push(s),r.count===o.length&&(n(),a(o)))},p=function(e){n(),i(e)};n=function(){var e,t=(0,v.Z)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;l(n,f)}}catch(Dy){t.e(Dy)}finally{t.f()}var a,i=(0,v.Z)(r.rejectionEvents);try{for(i.s();!(a=i.n()).done;){var o=a.value;l(o,p)}}catch(Dy){i.e(Dy)}finally{i.f()}};var h,d=(0,v.Z)(s);try{for(d.s();!(h=d.n()).done;)c(h.value,f)}catch(Dy){d.e(Dy)}finally{d.f()}var y,g=(0,v.Z)(r.rejectionEvents);try{for(g.s();!(y=g.n()).done;)c(y.value,p)}catch(Dy){g.e(Dy)}finally{g.f()}r.resolveImmediately&&a(o)}));if(a.cancel=n,"number"===typeof r.timeout){var i=Qr(a,r.timeout);return i.cancel=n,i}return a}(e,t,r=(0,le.Z)((0,le.Z)({},r),{},{count:1,resolveImmediately:!1})),a=n.then((function(e){return e[0]}));return a.cancel=n.cancel,a}var KD=_e("libp2p:webrtc-peer:initator"),qD=function(e){St(r,e);var t=Rt(r);function r(){var e,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,pe.Z)(this,r),(n=t.call(this,(0,le.Z)((0,le.Z)({},a),{},{logPrefix:"initiator"}))).handleDataChannelEvent({channel:n.peerConnection.createDataChannel(null!==(e=a.dataChannelLabel)&&void 0!==e?e:(0,gr.toString)(Mi(20),"hex").slice(0,7),a.dataChannelInit)}),n.handshake=new HD({log:n.log,peerConnection:n.peerConnection,wrtc:n.wrtc,offerOptions:a.offerOptions}),n.handshake.addEventListener("signal",(function(e){n.dispatchEvent(new HS("signal",{detail:e.detail}))})),n}return(0,he.Z)(r,[{key:"handleSignal",value:function(e){var t=this;this.handshake.handleSignal(e).catch((function(r){t.log("error handling signal %o %o",e,r)}))}}]),r}(LD),HD=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,e)).options=e,n.status="idle",n.peerConnection.addEventListener("icecandidate",(function(e){if(null!=e.candidate){var t={type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}};KD.trace("create candidate",t),n.dispatchEvent(new HS("signal",{detail:t})),n.dispatchEvent(new HS("ice-candidate"))}})),n}return(0,he.Z)(r,[{key:"handleRenegotiate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("negotiating"!==this.status){e.next=3;break}return this.log("already negotiating, queueing"),e.abrupt("return");case 3:return this.status="negotiating",e.next=6,this.peerConnection.createOffer(this.options.offerOptions);case 6:return r=e.sent,e.next=9,this.peerConnection.setLocalDescription(r);case 9:return e.next=11,VD(this,"ice-candidate");case 11:return e.next=13,OD(1e3);case 13:KD.trace("renegotiate",this.peerConnection.localDescription),this.dispatchEvent(new HS("signal",{detail:null!==(t=this.peerConnection.localDescription)&&void 0!==t?t:r}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAnswer",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return KD.trace("handle answer",t),e.next=3,this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t));case 3:this.status="idle";case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(MD),WD=_e("libp2p:webrtc-star:socket");function GD(e,t){var r=e.sink,n=e.source,a={remoteAddr:t.remoteAddr,sink:function(e){return(0,fe.Z)((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null!=t.signal&&(e=oA(e,t.signal)),n.prev=1,n.next=4,r(e);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),"aborted"!==n.t0.type&&WD.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},source:null!=t.signal?oA(n,t.signal):n,timeline:{open:Date.now()},close:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.closed){t.next=2;break}return t.abrupt("return");case 2:return r=Date.now(),n=setTimeout((function(){if(null!=a.remoteAddr){var t=a.remoteAddr.toOptions(),n=t.host,i=t.port;WD("timeout closing socket to %s:%s after %dms, destroying it manually",n,i,Date.now()-r)}e.closed||e.close().catch((function(e){WD.error("could not close socket",e)}))}),2e3),t.prev=4,t.next=7,e.close();case 7:return t.prev=7,clearTimeout(n),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[4,,7,10]])})))()}};return e.addEventListener("close",(function(){null==a.timeline.close&&(a.timeline.close=Date.now())}),{once:!0}),a}function YD(e){var t=e.toString().split("/"),r=e.protos()[1].name,n=e.protos()[2].name,a=e.stringTuples()[1][1];if("tcp"!==r||"ws"!==n&&"wss"!==n)throw new Error("invalid multiaddr: ".concat(e.toString()));if(!Lf.isName(e))return"http://".concat(t[2],":").concat(t[4]);if("ws"===n)return"http://".concat(t[2]).concat(null==a||"80"===a?"":":".concat(a));if("wss"===n)return"https://".concat(t[2]).concat(null==a||"443"===a?"":":".concat(a));throw new Error("invalid multiaddr: "+e.toString())}var QD=_e("libp2p:webrtc-star:listener"),JD={transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"},XD=function(e){St(r,e);var t=Rt(r);function r(e,n,a,i,s){var o;return(0,pe.Z)(this,r),(o=t.call(this)).signallingAddr=n,o.socket=PD(e,JD),o.connections=[],o.channels=new Map,o.pendingSignals=new Map,o.upgrader=a,o.handler=i,o.channelOptions=s,o.handleWsHandshake=o.handleWsHandshake.bind(Ct(o)),o.socket.once("connect_error",(function(e){o.dispatchEvent(new HS("error",{detail:e}))})),o.socket.once("error",(function(e){o.dispatchEvent(new HS("error",{detail:e}))})),o.socket.on("ws-handshake",o.handleWsHandshake),o.socket.on("ws-peer",(function(e){o.dispatchEvent(new HS("peer",{detail:e}))})),o.socket.on("connect",(function(){return o.socket.emit("ss-join",n.toString())})),o.socket.once("connect",(function(){o.dispatchEvent(new HS("listening"))})),o}return(0,he.Z)(r,[{key:"_createChannel",value:function(e,t,r){var n=this,a=(0,le.Z)({},this.channelOptions),i=new jD(a),s=function(e){var t=e.detail;QD.error("incoming connection errored",t)};return i.addEventListener("error",s),i.addEventListener("close",(function(){i.removeEventListener("error",s)}),{once:!0}),i.addEventListener("signal",(function(a){var i=a.detail;n.socket.emit("ss-handshake",{intentId:e,srcMultiaddr:t,dstMultiaddr:r,answer:!0,signal:i})})),i.addEventListener("ready",(function(){var t=GD(i,{remoteAddr:n.signallingAddr});QD("new inbound connection %s",t.remoteAddr);try{n.upgrader.upgradeInbound(t).then((function(r){QD("inbound connection %s upgraded",t.remoteAddr),n.connections.push(t);i.addEventListener("close",(function(){n.connections=n.connections.filter((function(e){return e!==t})),n.channels.delete(e),n.pendingSignals.delete(e)}),{once:!0}),n.dispatchEvent(new HS("connection",{detail:r})),n.handler(r)})).catch((function(e){QD.error("inbound connection failed to upgrade",e),t.close().catch((function(e){QD.error("inbound connection failed to close after failing to upgrade",e)}))}))}catch(Dy){QD.error("inbound connection failed to upgrade",Dy),t.close().catch((function(e){QD.error("inbound connection failed to close after failing to upgrade",e)}))}}),{once:!0}),i}},{key:"handleWsHandshake",value:function(e){if(QD('incoming handshake. signal type "%s" is answer %s',e.signal.type,e.answer),!0!==e.answer&&null==e.err&&null!=e.intentId){var t=e.intentId,r=this.pendingSignals.get(t);null==r&&(r=[],this.pendingSignals.set(t,r)),r.push(e);var n=this.channels.get(t);if(null==n){if("offer"!==e.signal.type)return void QD("handshake is not an offer and channel does not exist, buffering until we receive an offer");QD("creating new channel to handle offer handshake"),n=this._createChannel(e.intentId,e.srcMultiaddr,e.dstMultiaddr),this.channels.set(t,n)}else QD("channel already exists, using it to handle handshake");for(;r.length>0;){var a=r.shift();null!=(null===a||void 0===a?void 0:a.signal)&&n.handleSignal(a.signal)}}}},{key:"close",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),e.next=5,Promise.all([].concat(Vt(this.connections.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),Vt(Array.from(this.channels.values()).map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))));case 5:this.dispatchEvent(new HS("close"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(KS),$D=function(e){St(r,e);var t=Rt(r);function r(e,n,a,i,s){var o;return(0,pe.Z)(this,r),(o=t.call(this)).upgrader=e,o.handler=n,o.peerId=a,o.transport=i,o.options=s,o}return(0,he.Z)(r,[{key:"listen",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.listeningAddr){e.next=2;break}throw Ee(new Error("listener already in use"),"ERR_ALREADY_LISTENING");case 2:return r=wI(),this.listeningAddr=t,n=t.protoCodes().includes(421)?t:t.encapsulate("/p2p/".concat(this.peerId.toString())),this.signallingUrl=YD(t),QD("connecting to signalling server on: %s",this.signallingUrl),(a=new XD(this.signallingUrl,n,this.upgrader,this.handler,this.options.channelOptions)).addEventListener("error",(function(e){var t=e.detail;QD("error connecting to signalling server %o",t),a.close().catch((function(e){QD.error("error closing server after error",e)})),r.reject(t)})),a.addEventListener("listening",(function(){QD("connected to signalling server"),i.dispatchEvent(new HS("listening")),r.resolve()})),a.addEventListener("peer",(function(e){i.transport.peerDiscovered(e.detail)})),a.addEventListener("connection",(function(e){var r=e.detail;if(null==r.remoteAddr)try{r.remoteAddr=t.decapsulateCode(421).encapsulate("/p2p/".concat(r.remotePeer.toString()))}catch(Dy){QD.error("could not determine remote address",Dy)}i.dispatchEvent(new HS("connection",{detail:r}))})),this.transport.sigServers.set(this.signallingUrl,a),e.next=15,r.promise;case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.signallingUrl){e.next=6;break}if(null==(t=this.transport.sigServers.get(this.signallingUrl))){e.next=6;break}return e.next=5,t.close();case 5:this.transport.sigServers.delete(this.signallingUrl);case 6:this.dispatchEvent(new HS("close")),this.listeningAddr=void 0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAddrs",value:function(){return null!=this.listeningAddr?[this.listeningAddr]:[]}}]),r}(KS);var eP=Symbol.for("@libp2p/transport");var tP=Symbol.for("@libp2p/peer-discovery");var rP,nP,aP="RTCPeerConnection"in globalThis,iP=_e("libp2p:webrtc-star"),sP=function(){},oP=function(e,t){St(n,e);var r=Rt(n);function n(){var e;return(0,pe.Z)(this,n),(e=r.apply(this,arguments)).started=!1,e}return(0,he.Z)(n,[{key:tP,get:function(){return!0}},{key:t,get:function(){return"@libp2p/webrtc-star-discovery"}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchEvent",value:function(e){return!!this.isStarted()&&_t(kt(n.prototype),"dispatchEvent",this).call(this,e)}}]),n}(KS,Symbol.toStringTag),uP=function(e){function t(e){(0,pe.Z)(this,t),this.components=new eI,null!=(null===e||void 0===e?void 0:e.wrtc)&&(this.wrtc=e.wrtc),this.sigServers=new Map,this.discovery=new oP,this.peerDiscovered=this.peerDiscovered.bind(this)}return(0,he.Z)(t,[{key:eP,get:function(){return!0}},{key:e,get:function(){return"@libp2p/webrtc-star"}},{key:"init",value:function(e){this.components=e}},{key:"dial",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._connect(t,r);case 2:return n=e.sent,a=GD(n,{remoteAddr:t,signal:r.signal}),iP("new outbound connection %s",a.remoteAddr),e.next=7,r.upgrader.upgradeOutbound(a);case 7:return i=e.sent,iP("outbound connection %s upgraded",a.remoteAddr),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_connect",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(null===(n=r.signal)||void 0===n?void 0:n.aborted)){e.next=2;break}throw new sA;case 2:return i=(0,le.Z)({},null!==(a=r.channelOptions)&&void 0!==a?a:{}),null!=this.wrtc&&(i.wrtc=this.wrtc),s=t.toOptions(),o=(0,gr.toString)(Mi(36),"hex"),e.next=8,new Promise((function(e,n){var a,c=u.sigServers.get(YD(t));if(null==(null===c||void 0===c?void 0:c.socket))return n(Ee(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));var l=!1;iP("dialing %s:%s",s.host,s.port);var f=new qD(i),p=function(e){var t=e.detail;if(!l){var r="connection error ".concat(s.host,":").concat(s.port,": ").concat(t.message);iP.error(r),v(t)}},h=function(){l=!0,iP("connection opened %s:%s",s.host,s.port),v()},d=function(){iP.error("connection aborted %s:%s",s.host,s.port),f.close().finally((function(){v(new sA)}))},v=function(t){var a;f.removeEventListener("ready",h),null===(a=r.signal)||void 0===a||a.removeEventListener("abort",d),null==t?e(f):n(t)};f.addEventListener("ready",h,{once:!0}),f.addEventListener("close",(function(){f.removeEventListener("error",p)})),null===(a=r.signal)||void 0===a||a.addEventListener("abort",d),f.addEventListener("signal",(function(e){var r=e.detail;c.socket.emit("ss-handshake",{intentId:o,srcMultiaddr:c.signallingAddr.toString(),dstMultiaddr:t.toString(),signal:r})})),c.socket.on("ws-handshake",(function(e){e.intentId===o&&null!=e.err&&f.close().finally((function(){n(Ee(new Error(e.err),"ERR_SIGNALLING_FAILED"))})),e.intentId!==o||null==e.answer||f.closed||f.handleSignal(e.signal)}))}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){var t,r;if(!aP&&null==this.wrtc)throw Ee(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return e.channelOptions=null!==(t=e.channelOptions)&&void 0!==t?t:{},null!=this.wrtc&&(e.channelOptions.wrtc=this.wrtc),function(e,t,r,n,a){return new $D(e,t,r,n,a)}(e.upgrader,null!==(r=e.handler)&&void 0!==r?r:sP,this.components.getPeerId(),this,e)}},{key:"filter",value:function(e){return(e=Array.isArray(e)?e:[e]).filter((function(e){return!e.protoCodes().includes(290)&&Jf.matches(e)}))}},{key:"peerDiscovered",value:function(e){iP("peer discovered: %s",e),e=function(e){var t="/libp2p-webrtc-star";if(e.startsWith(t)){e=e.substring(t.length,e.length);var r=new Lf(e),n=r.stringTuples().filter((function(e){return 421===e[0]}))[0];if(null==n[1])throw new Error("invalid multiaddr: "+e);e=(r=(r=(r=r.decapsulate("p2p")).encapsulate("/p2p-webrtc-star")).encapsulate("/p2p/".concat(n[1]))).toString()}return e}(e);var t=new Lf(e),r=t.getPeerId();if(null!=r){var n=$n(r);this.discovery.dispatchEvent(new HS("peer",{detail:{id:n,multiaddrs:[t],protocols:[]}}))}}}]),t}(Symbol.toStringTag);function cP(e,t){return lP.apply(this,arguments)}function lP(){return lP=ye((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ia(hr($c(t,function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.addressBook.add(t.id,t.multiaddrs);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),pr),"t0",1);case 1:case"end":return e.stop()}}),e)}))),lP.apply(this,arguments)}function fP(e){var t=new Set;return Vc(e,(function(e){return!t.has(e.id.toString())&&(t.add(e.id.toString()),!0)}))}function pP(e){return hP.apply(this,arguments)}function hP(){return hP=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>1&&void 0!==l[1]?l[1]:1,n=0,a=!1,i=!1,e.prev=4,o=hr(t);case 6:return e.next=8,pr(o.next());case 8:if(!(a=!(u=e.sent).done)){e.next=16;break}return c=u.value,n++,e.next=13,c;case 13:a=!1,e.next=6;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),i=!0,s=e.t0;case 22:if(e.prev=22,e.prev=23,!a||null==o.return){e.next=27;break}return e.next=27,pr(o.return());case 27:if(e.prev=27,!i){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(22);case 32:if(!(n<r)){e.next=34;break}throw Ee(new Error("not found"),"NOT_FOUND");case 34:case"end":return e.stop()}}),e,null,[[4,18,22,32],[23,,27,31]])}))),hP.apply(this,arguments)}!function(e){e.NOT_STARTED_YET="The libp2p node is not started yet",e.DHT_DISABLED="DHT is not available",e.PUBSUB_DISABLED="PubSub is not available",e.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",e.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",e.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",e.NOT_FOUND="Not found"}(rP||(rP={})),function(e){e.DHT_DISABLED="ERR_DHT_DISABLED",e.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",e.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",e.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",e.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",e.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",e.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",e.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",e.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",e.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",e.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",e.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",e.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",e.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",e.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",e.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",e.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",e.ERR_DIALED_SELF="ERR_DIALED_SELF",e.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",e.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",e.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",e.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",e.ERR_INVALID_KEY="ERR_INVALID_KEY",e.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",e.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",e.ERR_INVALID_PEER="ERR_INVALID_PEER",e.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",e.ERR_NOT_FOUND="ERR_NOT_FOUND",e.ERR_TIMEOUT="ERR_TIMEOUT",e.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",e.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",e.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",e.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",e.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",e.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",e.ERR_FIND_SELF="ERR_FIND_SELF",e.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",e.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",e.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",e.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",e.ERR_INVALID_CMS="ERR_INVALID_CMS",e.ERR_MISSING_KEYS="ERR_MISSING_KEYS",e.ERR_NO_KEY="ERR_NO_KEY",e.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",e.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",e.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",e.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",e.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",e.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",e.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",e.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",e.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",e.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",e.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",e.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",e.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",e.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",e.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",e.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",e.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",e.ERR_INVALID_RECORD="ERR_INVALID_RECORD",e.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED"}(nP||(nP={}));var dP=__webpack_require__(8928),vP=__webpack_require__(7465),yP=_e("libp2p:peer-routing"),gP=function(){function e(t,r){var n;(0,pe.Z)(this,e),this.components=t,this.routers=r.routers,this.refreshManagerInit=null!==(n=r.refreshManager)&&void 0!==n?n:{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started&&0!==this.routers.length&&null==this.timeoutId&&!1!==this.refreshManagerInit.enabled){e.next=2;break}return e.abrupt("return");case 2:this.timeoutId=(0,dP.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_findClosestPeersTask",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.abortController){e.next=2;break}return e.abrupt("return");case 2:e.prev=2,this.abortController=new _r.TimeoutController(null!==(t=this.refreshManagerInit.timeout)&&void 0!==t?t:1e4);try{null===vP.setMaxListeners||void 0===vP.setMaxListeners||(0,vP.setMaxListeners)(1/0,this.abortController.signal)}catch(n){}return e.next=7,zc(this.getClosestPeers(this.components.getPeerId().toBytes(),{signal:this.abortController.signal}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),yP.error(e.t0);case 12:return e.prev=12,null===(r=this.abortController)||void 0===r||r.clear(),this.abortController=void 0,e.finish(12);case 16:case"end":return e.stop()}}),e,this,[[2,9,12,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,dP.clearDelayedInterval)(this.timeoutId),null===(t=this.abortController)||void 0===t||t.abort(),this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findPeer",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.routers.length){e.next=2;break}throw Ee(new Error("No peer routers available"),nP.ERR_NO_ROUTERS_AVAILABLE);case 2:if(t.toString()!==this.components.getPeerId().toString()){e.next=4;break}throw Ee(new Error("Should not try to find self"),nP.ERR_FIND_SELF);case 4:return e.next=6,kp(el.apply(void 0,Vt(this.routers.map((function(e){return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,pr(e.findPeer(t,r));case 3:return n.next=5,n.sent;case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),yP.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()})))),(function(e){return Vc(e,Boolean)}),(function(e){return cP(e,a.components.getPeerStore())}),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bb(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:if(null==(n=e.sent)){e.next=9;break}return e.abrupt("return",n);case 9:throw Ee(new Error(rP.NOT_FOUND),nP.ERR_NOT_FOUND);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==r.routers.length){n.next=2;break}throw Ee(new Error("No peer routers available"),nP.ERR_NO_ROUTERS_AVAILABLE);case 2:return n.delegateYield(ia(hr(kp(el.apply(void 0,Vt(r.routers.map((function(r){return r.getClosestPeers(e,t)})))),(function(e){return cP(e,r.components.getPeerStore())}),(function(e){return fP(e)}),(function(e){return pP(e)}))),pr),"t0",3);case 3:case"end":return n.stop()}}),n)})))()}}]),e}(),mP=function(){function e(t,r){var n;(0,pe.Z)(this,e),this.routers=null!==(n=r.routers)&&void 0!==n?n:[],this.started=!1,this.components=t}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==t.routers.length){n.next=2;break}throw Ee(new Error("No content this.routers available"),nP.ERR_NO_ROUTERS_AVAILABLE);case 2:return n.delegateYield(ia(hr(kp(el.apply(void 0,Vt(t.routers.map((function(t){return t.findProviders(e,r)})))),(function(e){return cP(e,t.components.getPeerStore())}),(function(e){return fP(e)}),(function(e){return pP(e)}))),pr),"t0",3);case 3:case"end":return n.stop()}}),n)})))()}},{key:"provide",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},0!==this.routers.length){e.next=3;break}throw Ee(new Error("No content routers available"),nP.ERR_NO_ROUTERS_AVAILABLE);case 3:return e.next=5,Promise.all(this.routers.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.provide(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}throw Ee(new Error(rP.NOT_STARTED_YET),nP.DHT_NOT_STARTED);case 2:if(null==(a=this.components.getDHT())){e.next=6;break}return e.next=6,zc(a.put(t,r,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}throw Ee(new Error(rP.NOT_STARTED_YET),nP.DHT_NOT_STARTED);case 2:if(null==(n=this.components.getDHT())){e.next=33;break}a=!1,i=!1,e.prev=6,o=hr(n.get(t,r));case 8:return e.next=10,o.next();case 10:if(!(a=!(u=e.sent).done)){e.next=17;break}if("VALUE"!==(c=u.value).name){e.next=14;break}return e.abrupt("return",c.value);case 14:a=!1,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),i=!0,s=e.t0;case 23:if(e.prev=23,e.prev=24,!a||null==o.return){e.next=28;break}return e.next=28,o.return();case 28:if(e.prev=28,!i){e.next=31;break}throw s;case 31:return e.finish(28);case 32:return e.finish(23);case 33:throw Ee(new Error(rP.NOT_FOUND),nP.ERR_NOT_FOUND);case 34:case"end":return e.stop()}}),e,this,[[6,19,23,33],[24,,28,32]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e,t,r){var n=this;return ye((0,ce.Z)().mark((function a(){var i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.isStarted()){a.next=2;break}throw Ee(new Error(rP.NOT_STARTED_YET),nP.DHT_NOT_STARTED);case 2:if(null!=t&&0!==t){a.next=4;break}return a.abrupt("return");case 4:if(i=0,null==(s=n.components.getDHT())){a.next=40;break}o=!1,u=!1,a.prev=9,l=hr(s.get(e,r));case 11:return a.next=13,pr(l.next());case 13:if(!(o=!(f=a.sent).done)){a.next=24;break}if("VALUE"!==(p=f.value).name){a.next=21;break}return a.next=18,{from:p.from,val:p.value};case 18:if(++i!==t){a.next=21;break}return a.abrupt("break",24);case 21:o=!1,a.next=11;break;case 24:a.next=30;break;case 26:a.prev=26,a.t0=a.catch(9),u=!0,c=a.t0;case 30:if(a.prev=30,a.prev=31,!o||null==l.return){a.next=35;break}return a.next=35,pr(l.return());case 35:if(a.prev=35,!u){a.next=38;break}throw c;case 38:return a.finish(35);case 39:return a.finish(30);case 40:if(0!==i){a.next=42;break}throw Ee(new Error(rP.NOT_FOUND),nP.ERR_NOT_FOUND);case 42:case"end":return a.stop()}}),a,null,[[9,26,30,40],[31,,35,39]])})))()}}]),e}();function bP(e){return ha(e)?{id:e,multiaddrs:[],protocols:[]}:("string"===typeof e&&(e=new Lf(e)),Lf.isMultiaddr(e)&&(t=e,e=function(e){var t=e.getPeerId();if(null==t)throw Ee(new Error("".concat(e.toString()," does not have a valid peer type")),nP.ERR_INVALID_MULTIADDR);try{return $n(t)}catch(Dy){throw Ee(new Error("".concat(e.toString()," is not a valid peer type")),nP.ERR_INVALID_MULTIADDR)}}(e)),{id:e,multiaddrs:null!=t?[t]:[],protocols:[]});var t}var wP=function(e){return e},kP=function(e){St(r,e);var t=Rt(r);function r(e,n){var a,i;(0,pe.Z)(this,r),i=t.call(this);var s=n.listen,o=void 0===s?[]:s,u=n.announce,c=void 0===u?[]:u;return i.components=e,i.listen=new Set(o.map((function(e){return e.toString()}))),i.announce=new Set(c.map((function(e){return e.toString()}))),i.observed=new Set,i.announceFilter=null!==(a=n.announceFilter)&&void 0!==a?a:wP,i}return(0,he.Z)(r,[{key:"getListenAddrs",value:function(){return Array.from(this.listen).map((function(e){return new Lf(e)}))}},{key:"getAnnounceAddrs",value:function(){return Array.from(this.announce).map((function(e){return new Lf(e)}))}},{key:"getObservedAddrs",value:function(){return Array.from(this.observed).map((function(e){return new Lf(e)}))}},{key:"addObservedAddr",value:function(e){var t=new Lf(e),r=t.getPeerId();null!=r&&($n(r).equals(this.components.getPeerId())&&(t=t.decapsulate(new Lf("/p2p/".concat(this.components.getPeerId().toString())))));var n=t.toString();this.observed.has(n)||(this.observed.add(n),this.dispatchEvent(new HS("change:addresses")))}},{key:"getAddresses",value:function(){var e=this,t=this.getAnnounceAddrs().map((function(e){return e.toString()}));0===t.length&&(t=this.components.getTransportManager().getAddrs().map((function(e){return e.toString()}))),t=t.concat(this.getObservedAddrs().map((function(e){return e.toString()})));var r=new Set(t);return this.announceFilter(Array.from(r).map((function(e){return new Lf(e)}))).map((function(t){return t.getPeerId()===e.components.getPeerId().toString()?t:t.encapsulate("/p2p/".concat(e.components.getPeerId().toString()))}))}}]),r}(KS),xP=_e("libp2p:connection-manager:latency-monitor:visibility-change-emitter"),_P=function(e){St(r,e);var t=Rt(r);function r(){var e;return(0,pe.Z)(this,r),(e=t.call(this)).hidden="hidden",e.visibilityChange="visibilityChange",null!=globalThis.document&&(e._initializeVisibilityVarNames(),e._addVisibilityChangeListener()),e}return(0,he.Z)(r,[{key:"_initializeVisibilityVarNames",value:function(){var e="hidden",t="visibilitychange";"undefined"!==typeof globalThis.document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof globalThis.document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):"undefined"!==typeof globalThis.document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof globalThis.document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this.hidden=e,this.visibilityChange=t}},{key:"_addVisibilityChangeListener",value:function(){"undefined"===typeof globalThis.document.addEventListener||"undefined"===typeof document[this.hidden]?xP("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}},{key:"isVisible",value:function(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}},{key:"_handleVisibilityChange",value:function(){var e=!1===globalThis.document[this.hidden];xP(e?"Page Visible":"Page Hidden"),this.dispatchEvent(new HS("visibilityChange",{detail:e}))}}]),r}(KS),EP=_e("libp2p:connection-manager:latency-monitor"),SP=function(e){St(r,e);var t=Rt(r);function r(){var e,n,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,r),a=t.call(this);var s=i.latencyCheckIntervalMs,o=i.dataEmitIntervalMs,u=i.asyncTestFn,c=i.latencyRandomPercentage;return a.latencyCheckIntervalMs=null!==s&&void 0!==s?s:500,a.latencyRandomPercentage=null!==c&&void 0!==c?c:10,a.latencyCheckMultiply=a.latencyRandomPercentage/100*2*a.latencyCheckIntervalMs,a.latencyCheckSubtract=a.latencyCheckMultiply/2,a.dataEmitIntervalMs=null===o||0===o?void 0:null!==o&&void 0!==o?o:5e3,EP("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",a.latencyCheckIntervalMs,a.dataEmitIntervalMs),null!=a.dataEmitIntervalMs?EP("Expecting ~%s events per summary",a.latencyCheckIntervalMs/a.dataEmitIntervalMs):EP("Not emitting summaries"),a.asyncTestFn=u,null!=(null===(e=globalThis.process)||void 0===e?void 0:e.hrtime)?(EP("Using process.hrtime for timing"),a.now=globalThis.process.hrtime,a.getDeltaMS=function(e){var t=a.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!==typeof window&&null!=(null===(n=window.performance)||void 0===n?void 0:n.now)?(EP("Using performance.now for timing"),a.now=window.performance.now.bind(window.performance),a.getDeltaMS=function(e){return Math.round(a.now()-e)}):(EP("Using Date.now for timing"),a.now=Date.now,a.getDeltaMS=function(e){return a.now()-e}),a.latencyData=a.initLatencyData(),a}return(0,he.Z)(r,[{key:"start",value:function(){var e,t=this;"undefined"!==typeof globalThis.window&&(this.visibilityChangeEmitter=new _P,this.visibilityChangeEmitter.addEventListener("visibilityChange",(function(e){e.detail?t._startTimers():(t._emitSummary(),t._stopTimers())}))),!0===(null===(e=this.visibilityChangeEmitter)||void 0===e?void 0:e.isVisible())&&this._startTimers()}},{key:"stop",value:function(){this._stopTimers()}},{key:"_startTimers",value:function(){var e=this;null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((function(){return e._emitSummary()}),this.dataEmitIntervalMs),"function"===typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}},{key:"_stopTimers",value:function(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}},{key:"_emitSummary",value:function(){var e=this.getSummary();e.events>0&&this.dispatchEvent(new HS("data",{detail:e}))}},{key:"getSummary",value:function(){var e={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),EP.trace("Summary: %O",e),e}},{key:"checkLatency",value:function(){var e=this,t=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,r={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+t),startTime:this.now()},n=function(){if(null!=e.checkLatencyID){var t=e.getDeltaMS(r.startTime)-r.deltaOffset;e.checkLatency(),e.latencyData.events++,e.latencyData.minMs=Math.min(e.latencyData.minMs,t),e.latencyData.maxMs=Math.max(e.latencyData.maxMs,t),e.latencyData.totalMs+=t,EP.trace("MS: %s Data: %O",t,e.latencyData)}};EP.trace("localData: %O",r),this.checkLatencyID=setTimeout((function(){null!=e.asyncTestFn?(r.deltaOffset=0,r.startTime=e.now(),e.asyncTestFn(n)):(r.deltaOffset-=1,n())}),r.deltaOffset),"function"===typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}},{key:"initLatencyData",value:function(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}]),r}(KS);var AP=__webpack_require__(1779),IP=function(e){St(r,e);var t=Rt(r);function r(e){var n;(0,pe.Z)(this,r),n=t.call(this);var a=e.system,i=e.component,s=e.metric,o=e.metrics;return n.system=null!==a&&void 0!==a?a:"libp2p",n.component=i,n.metric=s,n.metrics=o,n.updateComponentMetric(),n}return(0,he.Z)(r,[{key:"set",value:function(e,t){return _t(kt(r.prototype),"set",this).call(this,e,t),this.updateComponentMetric(),this}},{key:"delete",value:function(e){var t=_t(kt(r.prototype),"delete",this).call(this,e);return this.updateComponentMetric(),t}},{key:"clear",value:function(){_t(kt(r.prototype),"clear",this).call(this),this.updateComponentMetric()}},{key:"updateComponentMetric",value:function(){this.metrics.updateComponentMetric({system:this.system,component:this.component,metric:this.metric,value:this.size})}}]),r}(Pt(Map));function CP(e){var t=e.system,r=e.component,n=e.metric,a=e.metrics;return null!=a?new IP({system:t,component:r,metric:n,metrics:a}):new Map}var ZP="OPEN",RP="CLOSING",TP="CLOSED",DP=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted";return(0,pe.Z)(this,r),(e=t.call(this,n)).code=r.code,e.type=r.type,e}return(0,he.Z)(r,null,[{key:"code",get:function(){return"ABORT_ERR"}},{key:"type",get:function(){return"aborted"}}]),r}(Pt(Error)),PP=__webpack_require__(9879),NP=_e("libp2p:dialer:dial-request"),OP=function(){function e(t){(0,pe.Z)(this,e);var r=t.addrs,n=t.dialAction,a=t.dialer;this.addrs=r,this.dialer=a,this.dialAction=n}return(0,he.Z)(e,[{key:"run",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u,c,l=this,f=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:{},!((r=this.dialer.getTokens(this.addrs.length)).length<1)){e.next=4;break}throw Ee(new Error("No dial tokens available"),nP.ERR_NO_DIAL_TOKENS);case 4:n=new PP,a=(0,v.Z)(r);try{for(a.s();!(i=a.n()).done;)s=i.value,n.push(s).catch((function(e){NP.error(e)}))}catch(Dy){a.e(Dy)}finally{a.f()}if(o=this.addrs.map((function(){var e=new AbortController;try{null===vP.setMaxListeners||void 0===vP.setMaxListeners||(0,vP.setMaxListeners)(1/0,e.signal)}catch(t){}return e})),null!=t.signal)try{null===vP.setMaxListeners||void 0===vP.setMaxListeners||(0,vP.setMaxListeners)(1/0,t.signal)}catch(p){}return u=0,c=!1,e.prev=11,e.next=14,Promise.any(this.addrs.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(a,i){var s,f,p,h;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shift();case 2:if(s=e.sent,!c){e.next=6;break}throw l.dialer.releaseToken(r.splice(r.indexOf(s),1)[0]),Ee(new Error("dialAction already succeeded"),nP.ERR_ALREADY_SUCCEEDED);case 6:if(null!=(f=o[i])){e.next=9;break}throw Ee(new Error("dialAction did not come with an AbortController"),nP.ERR_INVALID_PARAMETERS);case 9:return e.prev=9,h=f.signal,e.next=13,l.dialAction(a,(0,le.Z)((0,le.Z)({},t),{},{signal:null!=t.signal?(0,Er.anySignal)([h,t.signal]):h}));case 13:p=e.sent,o[i]=void 0;case 15:return e.prev=15,u++,l.addrs.length-u>=r.length?n.push(s).catch((function(e){NP.error(e)})):l.dialer.releaseToken(r.splice(r.indexOf(s),1)[0]),e.finish(15);case 19:if(null!=p){e.next=23;break}throw Ee(new Error("dialAction led to empty object"),nP.ERR_TRANSPORT_DIAL_FAILED);case 23:c=!0;case 24:return e.abrupt("return",p);case 25:case"end":return e.stop()}}),e,null,[[9,,15,19]])})));return function(t,r){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",e.sent);case 15:return e.prev=15,o.forEach((function(e){void 0!==e&&e.abort()})),r.forEach((function(e){return l.dialer.releaseToken(e)})),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[11,,15,19]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),BP=__webpack_require__(3931);function LP(e){var t=e.nodeAddress().address;return Boolean(BP(t))}function MP(e,t){var r=LP(e.multiaddr),n=LP(t.multiaddr);return r&&!n?1:!r&&n||e.isCertified&&!t.isCertified?-1:!e.isCertified&&t.isCertified?1:0}var UP,jP=3e4,FP=50,zP=_e("libp2p:dialer"),VP="dialler",KP="pending-dials",qP="pending-dial-targets",HP=function(){function e(){var t,r,n,a,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,e),this.components=new eI,this.started=!1,this.addressSorter=null!==(t=s.addressSorter)&&void 0!==t?t:MP,this.maxAddrsToDial=null!==(r=s.maxAddrsToDial)&&void 0!==r?r:25,this.timeout=null!==(n=s.dialTimeout)&&void 0!==n?n:jP,this.maxDialsPerPeer=null!==(a=s.maxDialsPerPeer)&&void 0!==a?a:4,this.tokens=Vt(new Array(null!==(i=s.maxParallelDials)&&void 0!==i?i:100)).map((function(e,t){return t})),this.pendingDials=CP({component:VP,metric:KP,metrics:s.metrics}),this.pendingDialTargets=CP({component:VP,metric:qP,metrics:s.metrics});for(var o=0,u=Object.entries(null!==(c=s.resolvers)&&void 0!==c?c:{});o<u.length;o++){var c,l=(0,y.Z)(u[o],2),f=l[0],p=l[1];Lf.resolvers.set(f,p)}}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,t=(0,v.Z)(this.pendingDials.values());try{for(t.s();!(r=t.n()).done;){n=r.value;try{n.controller.abort()}catch(Dy){zP.error(Dy)}}}catch(Dy){t.e(Dy)}finally{t.f()}this.pendingDials.clear(),a=(0,v.Z)(this.pendingDialTargets.values());try{for(a.s();!(i=a.n()).done;)i.value.reject(new DP("Dialer was destroyed"))}catch(Dy){a.e(Dy)}finally{a.f()}this.pendingDialTargets.clear();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},a=bP(t),i=a.id,s=a.multiaddrs,!this.components.getPeerId().equals(i)){e.next=4;break}throw Ee(new Error("Tried to dial self"),nP.ERR_DIALED_SELF);case 4:if(zP("check multiaddrs %p",i),!(null!=s&&s.length>0)){e.next=9;break}return zP("storing multiaddrs %p",i,s),e.next=9,this.components.getPeerStore().addressBook.add(i,s);case 9:return e.next=11,this.components.getConnectionGater().denyDialPeer(i);case 11:if(!e.sent){e.next=13;break}throw Ee(new Error("The dial request is blocked by gater.allowDialPeer"),nP.ERR_PEER_DIAL_INTERCEPTED);case 13:return zP("creating dial target for %p",i),e.next=16,this._createCancellableDialTarget(i);case 16:if(0!==(o=e.sent).addrs.length){e.next=19;break}throw Ee(new Error("The dial request has no valid addresses"),nP.ERR_NO_VALID_ADDRESSES);case 19:return u=null!==(r=this.pendingDials.get(o.id))&&void 0!==r?r:this._createPendingDial(o,n),e.prev=20,e.next=23,u.promise;case 23:return c=e.sent,zP("dial succeeded to %s",o.id),e.abrupt("return",c);case 28:throw e.prev=28,e.t0=e.catch(20),zP("dial failed to %s",o.id,e.t0),u.controller.signal.aborted&&(e.t0.code=nP.ERR_TIMEOUT),zP.error(e.t0),e.t0;case 34:return e.prev=34,u.destroy(),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[20,28,34,37]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createCancellableDialTarget",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(parseInt(String(1e9*Math.random()),10).toString()).concat(Date.now()),n=new Promise((function(e,t){i.pendingDialTargets.set(r,{resolve:e,reject:t})})),e.prev=2,e.next=5,Promise.race([this._createDialTarget(t),n]);case 5:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,this.pendingDialTargets.delete(r),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[2,,7,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createDialTarget",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=kp,e.next=3,this.components.getPeerStore().addressBook.get(t);case 3:return e.t1=e.sent,e.t2=function(e){return Vc(e,function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.components.getConnectionGater().denyDialMultiaddr(t,r.multiaddr);case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},e.t3=function(e){return gS(e,u.addressSorter)},e.t4=function(e){return $c(e,(function(e){var r=e.multiaddr;return t.toString()===r.getPeerId()?r:r.encapsulate("/p2p/".concat(t.toString()))}))},e.t5=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5);case 10:r=e.sent,n=[],a=(0,v.Z)(r),e.prev=13,a.s();case 15:if((i=a.n()).done){e.next=23;break}return s=i.value,e.next=19,this._resolve(s);case 19:e.sent.forEach((function(e){return n.push(e)}));case 21:e.next=15;break;case 23:e.next=28;break;case 25:e.prev=25,e.t6=e.catch(13),a.e(e.t6);case 28:return e.prev=28,a.f(),e.finish(28);case 31:if(o=n.filter((function(e){return u.components.getTransportManager().transportForMultiaddr(e)})),!(o.length>this.maxAddrsToDial)){e.next=36;break}return e.next=35,this.components.getPeerStore().delete(t);case 35:throw Ee(new Error("dial with more addresses than allowed"),nP.ERR_TOO_MANY_ADDRESSES);case 36:return e.abrupt("return",{id:t.toString(),addrs:o});case 37:case"end":return e.stop()}}),e,this,[[13,25,28,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createPendingDial",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:{},!0!==(null===(n=a.signal)||void 0===n?void 0:n.aborted)){e.next=3;break}throw Ee(new Error("already aborted"),nP.ERR_ALREADY_ABORTED);case 3:return e.next=5,t.components.getTransportManager().dial(r,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=new OP({addrs:e.addrs,dialAction:n,dialer:this}),i=new _r.TimeoutController(this.timeout),s=[i.signal];null!=r.signal&&s.push(r.signal);var o=(0,Er.anySignal)(s);try{null===vP.setMaxListeners||void 0===vP.setMaxListeners||(0,vP.setMaxListeners)(1/0,o)}catch(c){}var u={dialRequest:a,controller:i,promise:a.run((0,le.Z)((0,le.Z)({},r),{},{signal:o})),destroy:function(){i.clear(),t.pendingDials.delete(e.id)}};return this.pendingDials.set(e.id,u),u}},{key:"getTokens",value:function(e){var t=Math.min(e,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,t);return zP("%d tokens request, returning %d, %d remaining",e,t,this.tokens.length),r}},{key:"releaseToken",value:function(e){this.tokens.includes(e)||(zP("token %d released",e),this.tokens.push(e))}},{key:"_resolve",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.protoNames().includes("dnsaddr")){e.next=3;break}return e.abrupt("return",[t]);case 3:return e.next=5,this._resolveRecord(t);case 5:return r=e.sent,e.next=8,Promise.all(r.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i._resolve(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return n=e.sent,a=n.flat(),e.abrupt("return",a.reduce((function(e,t){return null==e.find((function(e){return e.equals(t)}))&&e.push(t),e}),[]));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_resolveRecord",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new Lf(t.toString()),e.next=4,t.resolve();case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),zP.error("multiaddr ".concat(t.toString()," could not be resolved"),e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),WP=_e("libp2p:connection-manager"),GP={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:.5},YP="connection-manager",QP=function(e){St(r,e);var t=Rt(r);function r(e){var n;if((0,pe.Z)(this,r),(n=t.call(this)).components=new eI,n.opts=ge.call({ignoreUndefined:!0},GP,e),n.opts.maxConnections<n.opts.minConnections)throw Ee(new Error("Connection Manager maxConnections must be greater than minConnections"),nP.ERR_INVALID_PARAMETERS);WP("options: %o",n.opts),n.peerValues=CP({component:YP,metric:"peer-values",metrics:n.components.getMetrics()}),n.connections=CP({component:YP,metric:"peer-connections",metrics:n.components.getMetrics()}),n.started=!1,n._checkMetrics=n._checkMetrics.bind(Ct(n)),n.latencyMonitor=new SP({latencyCheckIntervalMs:e.pollInterval,dataEmitIntervalMs:e.pollInterval});try{null===vP.setMaxListeners||void 0===vP.setMaxListeners||(0,vP.setMaxListeners)(1/0,Ct(n))}catch(a){}return n.dialer=new HP(n.opts),n.onConnect=n.onConnect.bind(Ct(n)),n.onDisconnect=n.onDisconnect.bind(Ct(n)),n}return(0,he.Z)(r,[{key:"init",value:function(e){this.components=e,this.dialer.init(e)}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=this.components.getMetrics()&&(this.timer=null!==(t=this.timer)&&void 0!==t?t:AP(this._checkMetrics,this.opts.pollInterval)),this.latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this.latencyMonitor.addEventListener("data",this._onLatencyMeasure),e.next=6,this.dialer.start();case 6:this.started=!0,WP("started");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.components.getUpgrader().addEventListener("connection",this.onConnect),this.components.getUpgrader().addEventListener("connectionEnd",this.onDisconnect);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeStop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.components.getUpgrader().removeEventListener("connection",this.onConnect),this.components.getUpgrader().removeEventListener("connectionEnd",this.onDisconnect);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.timer)||void 0===t||t.clear(),this.latencyMonitor.removeEventListener("data",this._onLatencyMeasure),this.latencyMonitor.stop(),e.next=5,this.dialer.stop();case 5:return this.started=!1,e.next=8,this._close();case 8:WP("stopped");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_close",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=(0,v.Z)(this.connections.values());try{for(r.s();!(n=r.n()).done;){a=n.value,i=(0,v.Z)(a);try{for(o=function(){var e=s.value;t.push((0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.close();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),WP.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))())},i.s();!(s=i.n()).done;)o()}catch(Dy){i.e(Dy)}finally{i.f()}}}catch(Dy){r.e(Dy)}finally{r.f()}return WP("closing %d connections",t.length),e.next=6,Promise.all(t);case 6:this.connections.clear();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPeerValue",value:function(e,t){if(t<0||t>1)throw new Error("value should be a number between 0 and 1");this.peerValues.set(e.toString(),t)}},{key:"_checkMetrics",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.components.getMetrics())){e.next=17;break}return e.prev=2,r=t.getGlobal().getMovingAverages(),n=r.dataReceived[this.opts.movingAverageInterval].movingAverage,e.next=7,this._checkMaxLimit("maxReceivedData",n);case 7:return a=r.dataSent[this.opts.movingAverageInterval].movingAverage,e.next=10,this._checkMaxLimit("maxSentData",a);case 10:return i=n+a,e.next=13,this._checkMaxLimit("maxData",i);case 13:WP.trace("metrics update",i);case 14:return e.prev=14,this.timer=AP(this._checkMetrics,this.opts.pollInterval),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onConnect",value:function(e){this._onConnect(e).catch((function(e){WP.error(e)}))}},{key:"_onConnect",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.detail,this.started){e.next=5;break}return e.next=4,r.close();case 4:return e.abrupt("return");case 5:if(n=r.remotePeer,a=n.toString(),null!=(i=this.connections.get(a))?i.push(r):this.connections.set(a,[r]),null==n.publicKey){e.next=12;break}return e.next=12,this.components.getPeerStore().keyBook.set(n,n.publicKey);case 12:return this.peerValues.has(a)||this.peerValues.set(a,this.opts.defaultPeerValue),s=this.getConnections().length,o=s-this.opts.maxConnections,e.next=17,this._checkMaxLimit("maxConnections",s,o);case 17:this.dispatchEvent(new HS("peer:connect",{detail:r}));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDisconnect",value:function(e){var t=e.detail;if(this.started){var r=t.remotePeer.toString(),n=this.connections.get(r);if(null!=n&&n.length>1)n=n.filter((function(e){return e.id!==t.id})),this.connections.set(r,n);else if(null!=n){var a;this.connections.delete(r),this.peerValues.delete(t.remotePeer.toString()),this.dispatchEvent(new HS("peer:disconnect",{detail:t})),null===(a=this.components.getMetrics())||void 0===a||a.onPeerDisconnected(t.remotePeer)}}}},{key:"getConnections",value:function(e){var t;if(null!=e)return null!==(t=this.connections.get(e.toString()))&&void 0!==t?t:[];var r,n=[],a=(0,v.Z)(this.connections.values());try{for(a.s();!(r=a.n()).done;){var i=r.value;n=n.concat(i)}}catch(Dy){a.e(Dy)}finally{a.f()}return n}},{key:"openConnection",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(WP("dial to %p",t),!((n=this.getConnections(t)).length>0)){e.next=5;break}return WP("had an existing connection to %p",t),e.abrupt("return",n[0]);case 5:return e.next=7,this.dialer.dial(t,r);case 7:a=e.sent,null==(i=this.connections.get(t.toString()))&&(i=[],this.connections.set(t.toString(),i)),s=!1,o=(0,v.Z)(i);try{for(o.s();!(u=o.n()).done;)u.value.id===a.id&&(s=!0)}catch(Dy){o.e(Dy)}finally{o.f()}return s||i.push(a),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"closeConnections",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==(r=this.connections.get(t.toString()))&&void 0!==r?r:[],e.next=3,Promise.all(n.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(e){if(!ha(e))throw Ee(new Error("peerId must be an instance of peer-id"),nP.ERR_INVALID_PARAMETERS);var t=e.toString(),r=this.connections.get(t);return null!=r?r.filter((function(e){return e.stat.status===ZP})):[]}},{key:"_onLatencyMeasure",value:function(e){var t=e.detail;this._checkMaxLimit("maxEventLoopDelay",t.avgMs,1).catch((function(e){WP.error(e)}))}},{key:"_checkMaxLimit",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:1,a=this.opts[t],WP.trace("checking limit of %s. current value: %d of %d",t,r,a),!(r>a)){e.next=7;break}return WP("%s: limit exceeded: %p, %d, pruning %d connection(s)",this.components.getPeerId(),t,r,n),e.next=7,this._maybePruneConnections(n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_maybePruneConnections",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=this.getConnections()).length<=this.opts.minConnections||t<1)){e.next=3;break}return e.abrupt("return");case 3:n=Array.from(new Map(Vt(this.peerValues.entries()).sort((function(e,t){return e[1]-t[1]})))),WP.trace("sorted peer values: %j",n),a=[],i=0,s=n;case 7:if(!(i<s.length)){e.next=31;break}o=(0,y.Z)(s[i],1),u=o[0],WP("too many connections open - closing a connection to %p",u),c=(0,v.Z)(r),e.prev=11,c.s();case 13:if((l=c.n()).done){e.next=20;break}if((f=l.value).remotePeer.toString()===u&&a.push(f),a.length!==t){e.next=18;break}return e.abrupt("break",20);case 18:e.next=13;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),c.e(e.t0);case 25:return e.prev=25,c.f(),e.finish(25);case 28:i++,e.next=7;break;case 31:return e.next=33,Promise.all(a.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.close();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),WP.error(e.t0);case 8:p.onDisconnect(new HS("connectionEnd",{detail:t}));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 33:case"end":return e.stop()}}),e,this,[[11,22,25,28]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(KS),JP=_e("libp2p:connection-manager:auto-dialler"),XP={enabled:!0,minConnections:0,autoDialInterval:1e4},$P=function(){function e(t,r){(0,pe.Z)(this,e),this.components=t,this.options=ge.call({ignoreUndefined:!0},XP,r),this.running=!1,this._autoDial=this._autoDial.bind(this),JP("options: %j",this.options)}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.enabled){e.next=3;break}return JP("not enabled"),e.abrupt("return");case 3:this.running=!0,this._autoDial().catch((function(e){JP.error("could start autodial",e)})),JP("started");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.enabled){e.next=3;break}return JP("not enabled"),e.abrupt("return");case 3:this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),JP("stopped");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_autoDial",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),t=this.options.minConnections,!(this.components.getConnectionManager().getConnections().length>=t)){e.next=5;break}return this.autoDialTimeout=AP(this._autoDial,this.options.autoDialInterval),e.abrupt("return");case 5:return e.next=7,this.components.getPeerStore().all();case 7:return r=e.sent,e.next=10,kp(r.sort((function(){return Math.random()>.5?1:-1})),(function(e){return Vc(e,(function(e){return!e.id.equals(s.components.getPeerId())}))}),(function(e){return gS(e,(function(e,t){return t.protocols.length>e.protocols.length||null!=t.id.publicKey&&null==e.id.publicKey?1:-1}))}),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:n=e.sent,a=0;case 12:if(!(this.running&&a<n.length&&this.components.getConnectionManager().getConnections().length<t)){e.next=29;break}if(this.running){e.next=15;break}return e.abrupt("return");case 15:if(i=n[a],0!==this.components.getConnectionManager().getConnections(i.id).length){e.next=26;break}return JP("connecting to a peerStore stored peer %p",i.id),e.prev=18,e.next=21,this.components.getConnectionManager().openConnection(i.id);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(18),JP.error("could not connect to peerStore stored peer",e.t0);case 26:a++,e.next=12;break;case 29:if(this.running){e.next=31;break}return e.abrupt("return");case 31:this.autoDialTimeout=AP(this._autoDial,this.options.autoDialInterval);case 32:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(){return e.apply(this,arguments)}}()}]),e}();!function(e){var t,r;!function(e){e.SUCCESS="SUCCESS",e.HOP_SRC_ADDR_TOO_LONG="HOP_SRC_ADDR_TOO_LONG",e.HOP_DST_ADDR_TOO_LONG="HOP_DST_ADDR_TOO_LONG",e.HOP_SRC_MULTIADDR_INVALID="HOP_SRC_MULTIADDR_INVALID",e.HOP_DST_MULTIADDR_INVALID="HOP_DST_MULTIADDR_INVALID",e.HOP_NO_CONN_TO_DST="HOP_NO_CONN_TO_DST",e.HOP_CANT_DIAL_DST="HOP_CANT_DIAL_DST",e.HOP_CANT_OPEN_DST_STREAM="HOP_CANT_OPEN_DST_STREAM",e.HOP_CANT_SPEAK_RELAY="HOP_CANT_SPEAK_RELAY",e.HOP_CANT_RELAY_TO_SELF="HOP_CANT_RELAY_TO_SELF",e.STOP_SRC_ADDR_TOO_LONG="STOP_SRC_ADDR_TOO_LONG",e.STOP_DST_ADDR_TOO_LONG="STOP_DST_ADDR_TOO_LONG",e.STOP_SRC_MULTIADDR_INVALID="STOP_SRC_MULTIADDR_INVALID",e.STOP_DST_MULTIADDR_INVALID="STOP_DST_MULTIADDR_INVALID",e.STOP_RELAY_REFUSED="STOP_RELAY_REFUSED",e.MALFORMED_MESSAGE="MALFORMED_MESSAGE"}(e.Status||(e.Status={})),function(e){e[e.SUCCESS=100]="SUCCESS",e[e.HOP_SRC_ADDR_TOO_LONG=220]="HOP_SRC_ADDR_TOO_LONG",e[e.HOP_DST_ADDR_TOO_LONG=221]="HOP_DST_ADDR_TOO_LONG",e[e.HOP_SRC_MULTIADDR_INVALID=250]="HOP_SRC_MULTIADDR_INVALID",e[e.HOP_DST_MULTIADDR_INVALID=251]="HOP_DST_MULTIADDR_INVALID",e[e.HOP_NO_CONN_TO_DST=260]="HOP_NO_CONN_TO_DST",e[e.HOP_CANT_DIAL_DST=261]="HOP_CANT_DIAL_DST",e[e.HOP_CANT_OPEN_DST_STREAM=262]="HOP_CANT_OPEN_DST_STREAM",e[e.HOP_CANT_SPEAK_RELAY=270]="HOP_CANT_SPEAK_RELAY",e[e.HOP_CANT_RELAY_TO_SELF=280]="HOP_CANT_RELAY_TO_SELF",e[e.STOP_SRC_ADDR_TOO_LONG=320]="STOP_SRC_ADDR_TOO_LONG",e[e.STOP_DST_ADDR_TOO_LONG=321]="STOP_DST_ADDR_TOO_LONG",e[e.STOP_SRC_MULTIADDR_INVALID=350]="STOP_SRC_MULTIADDR_INVALID",e[e.STOP_DST_MULTIADDR_INVALID=351]="STOP_DST_MULTIADDR_INVALID",e[e.STOP_RELAY_REFUSED=390]="STOP_RELAY_REFUSED",e[e.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE"}(t||(t={})),function(e){e.codec=function(){return $a(t)}}(e.Status||(e.Status={})),function(e){e.HOP="HOP",e.STOP="STOP",e.STATUS="STATUS",e.CAN_HOP="CAN_HOP"}(e.Type||(e.Type={})),function(e){e[e.HOP=1]="HOP",e[e.STOP=2]="STOP",e[e.STATUS=3]="STATUS",e[e.CAN_HOP=4]="CAN_HOP"}(r||(r={})),function(e){e.codec=function(){return $a(r)}}(e.Type||(e.Type={})),function(e){e.codec=function(){return yi({1:{name:"id",codec:Ja},2:{name:"addrs",codec:Ja,repeats:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.Peer||(e.Peer={})),e.codec=function(){return yi({1:{name:"type",codec:e.Type.codec(),optional:!0},2:{name:"srcPeer",codec:e.Peer.codec(),optional:!0},3:{name:"dstPeer",codec:e.Peer.codec(),optional:!0},4:{name:"code",codec:e.Status.codec(),optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(UP||(UP={}));var eN=_e("libp2p:stream:converter");function tN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.stream,n=e.remoteAddr,a=r.sink,i=r.source,s={sink:function(e){return(0,fe.Z)((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null!=t.signal&&(e=oA(e,t.signal)),r.prev=1,r.next=4,a(e);case 4:return r.next=6,o();case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),"aborted"!==r.t0.type&&eN(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},source:null!=t.signal?oA(i,t.signal):i,remoteAddr:n,timeline:{open:Date.now(),close:void 0},close:function(){return(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Uint8Array(0);case 2:case"end":return e.stop()}}),e)})))());case 2:return e.next=4,o();case 4:case"end":return e.stop()}}),e)})))()}};function o(){return u.apply(this,arguments)}function u(){return(u=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==s.timeline.close&&(s.timeline.close=Date.now()),e.next=3,Promise.resolve();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s}var rN="/libp2p/circuit/relay/0.1.0";function nN(e,t){e.write({type:UP.Type.STATUS,code:t})}function aN(e,t){try{var r;null!=(null===(r=e.dstPeer)||void 0===r?void 0:r.addrs)&&e.dstPeer.addrs.forEach((function(e){return new Lf(e)}))}catch(Dy){throw nN(t,e.type===UP.Type.HOP?UP.Status.HOP_DST_MULTIADDR_INVALID:UP.Status.STOP_DST_MULTIADDR_INVALID),Dy}try{var n;null!=(null===(n=e.srcPeer)||void 0===n?void 0:n.addrs)&&e.srcPeer.addrs.forEach((function(e){return new Lf(e)}))}catch(Dy){throw nN(t,e.type===UP.Type.HOP?UP.Status.HOP_SRC_MULTIADDR_INVALID:UP.Status.STOP_SRC_MULTIADDR_INVALID),Dy}}function iN(e){var t,r=aA(),n=Kd(e.source),a=wI(),i=e.sink(ye((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ia(hr(r),pr),"t0",1);case 1:return e.next=3,pr(a.promise);case 3:return t=e.sent,e.delegateYield(ia(hr(t),pr),"t1",5);case 5:case"end":return e.stop()}}),e)})))());i.catch((function(e){t=e}));var s={sink:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=4;break}return e.next=3,Promise.reject(t);case 3:case 7:return e.abrupt("return",e.sent);case 4:return a.resolve(r),e.next=7,i;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),source:$c(n,(function(e){return e.slice()}))};return{reader:n,writer:r,stream:s,rest:function(){return r.end()},write:r.push,read:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.next();case 2:if(null==(t=e.sent).value){e.next=5;break}return e.abrupt("return",t.value.slice());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}var sN=_e("libp2p:circuit:stream-handler"),oN=function(){function e(t){(0,pe.Z)(this,e);var r=t.stream,n=t.maxLength,a=void 0===n?4096:n;this.stream=r,this.shake=iN(this.stream),this.decoder=tA.fromReader(this.shake.reader,{maxDataLength:a})}return(0,he.Z)(e,[{key:"read",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decoder.next();case 2:if(null==(t=e.sent).value){e.next=7;break}return r=UP.decode(t.value.slice()),sN("read message type",r.type),e.abrupt("return",r);case 7:sN("read received no value, closing stream"),this.close();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"write",value:function(e){sN("write message type %s",e.type),this.shake.write(GS.single(UP.encode(e)).slice())}},{key:"rest",value:function(){return this.shake.rest(),this.shake.stream}},{key:"end",value:function(e){this.write(e),this.close()}},{key:"close",value:function(){sN("closing the stream"),this.rest().sink([]).catch((function(e){sN.error(e)}))}}]),e}(),uN=_e("libp2p:circuit:stop");function cN(e){var t=e.connection,r=e.request,n=e.streamHandler;try{aN(r,n)}catch(Dy){return void uN.error("invalid stop request via peer %p %o",t.remotePeer,Dy)}return uN("stop request is valid"),n.write({type:UP.Type.STATUS,code:UP.Status.SUCCESS}),n.rest()}function lN(e){return fN.apply(this,arguments)}function fN(){return fN=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.connection,n=t.request,e.next=3,r.newStream([rN]);case 3:return a=e.sent,i=a.stream,uN("starting stop request to %p",r.remotePeer),(s=new oN({stream:i})).write(n),e.next=10,s.read();case 10:if(null!=(o=e.sent)){e.next=14;break}return s.close(),e.abrupt("return");case 14:if(o.code!==UP.Status.SUCCESS){e.next=17;break}return uN("stop request to %p was successful",r.remotePeer),e.abrupt("return",s.rest());case 17:uN("stop request failed with code %d",o.code),s.close();case 19:case"end":return e.stop()}}),e)}))),fN.apply(this,arguments)}var pN=_e("libp2p:circuit:hop");function hN(e){return dN.apply(this,arguments)}function dN(){return dN=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.connection,n=t.request,a=t.streamHandler,i=t.circuit,s=t.connectionManager,i.hopEnabled()){e.next=4;break}return pN("HOP request received but we are not acting as a relay"),e.abrupt("return",a.end({type:UP.Type.STATUS,code:UP.Status.HOP_CANT_SPEAK_RELAY}));case 4:e.prev=4,aN(n,a),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(4),pN.error("invalid hop request via peer %p %o",r.remotePeer,e.t0),e.abrupt("return");case 12:if(null!=n.dstPeer){e.next=15;break}return pN("HOP request received but we do not receive a dstPeer"),e.abrupt("return");case 15:if(o=ea(n.dstPeer.id),0!==(u=s.getConnections(o)).length||i.hopActive()){e.next=20;break}return pN("HOP request received but we are not connected to the destination peer"),e.abrupt("return",a.end({type:UP.Type.STATUS,code:UP.Status.HOP_NO_CONN_TO_DST}));case 20:if(0!==u.length){e.next=23;break}return pN("did not have connection to remote peer"),e.abrupt("return",a.end({type:UP.Type.STATUS,code:UP.Status.HOP_NO_CONN_TO_DST}));case 23:return c={type:UP.Type.STOP,dstPeer:n.dstPeer,srcPeer:n.srcPeer},e.prev=24,pN("performing STOP request"),e.next=28,lN({connection:u[0],request:c});case 28:if(null!=(f=e.sent)){e.next=31;break}throw new Error("Could not stop");case 31:l=f,e.next=38;break;case 34:return e.prev=34,e.t1=e.catch(24),pN.error(e.t1),e.abrupt("return");case 38:return pN("hop request from %p is valid",r.remotePeer),a.write({type:UP.Type.STATUS,code:UP.Status.SUCCESS}),p=a.rest(),pN("creating related connections"),e.next=44,kp(p,l,p);case 44:return e.abrupt("return",e.sent);case 45:case"end":return e.stop()}}),e,null,[[4,8],[24,34]])}))),dN.apply(this,arguments)}function vN(e){return yN.apply(this,arguments)}function yN(){return yN=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,a=t.request,e.next=3,n.newStream(rN);case 3:return i=e.sent,s=i.stream,(o=new oN({stream:s})).write(a),e.next=9,o.read();case 9:if(null!=(u=e.sent)){e.next=12;break}throw Ee(new Error("HOP request had no response"),nP.ERR_HOP_REQUEST_FAILED);case 12:if(u.code!==UP.Status.SUCCESS){e.next=15;break}return pN("hop request was successful"),e.abrupt("return",o.rest());case 15:throw pN("hop request failed with code %d, closing stream",u.code),o.close(),Ee(new Error('HOP request failed with code "'.concat(null!==(r=u.code)&&void 0!==r?r:"unknown",'"')),nP.ERR_HOP_REQUEST_FAILED);case 18:case"end":return e.stop()}}),e)}))),yN.apply(this,arguments)}function gN(e){return mN.apply(this,arguments)}function mN(){return(mN=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.connection,e.next=3,r.newStream(rN);case 3:return n=e.sent,a=n.stream,(i=new oN({stream:a})).write({type:UP.Type.CAN_HOP}),e.next=9,i.read();case 9:return s=e.sent,e.next=12,i.close();case 12:if(null!=s&&s.code===UP.Status.SUCCESS){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bN(e){var t=e.connection,r=e.streamHandler,n=e.circuit.hopEnabled();pN("can hop (%s) request from %p",n,t.remotePeer),r.end({type:UP.Type.STATUS,code:n?UP.Status.SUCCESS:UP.Status.HOP_CANT_SPEAK_RELAY})}var wN=_e("libp2p:circuit"),kN=function(e){function t(){(0,pe.Z)(this,t),this.components=new eI}return(0,he.Z)(t,[{key:"init",value:function(e){var t=this;this.components=e,this.components.getRegistrar().handle(rN,(function(e){t._onProtocol(e).catch((function(e){wN.error(e)}))})).catch((function(e){wN.error(e)}))}},{key:"hopEnabled",value:function(){return!0}},{key:"hopActive",value:function(){return!0}},{key:eP,get:function(){return!0}},{key:e,get:function(){return"libp2p/circuit-relay-v1"}},{key:"_onProtocol",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.connection,n=t.stream,a=new oN({stream:n}),e.next=4,a.read();case 4:if(null!=(i=e.sent)){e.next=10;break}return wN("request was invalid, could not read from stream"),a.write({type:UP.Type.STATUS,code:UP.Status.MALFORMED_MESSAGE}),a.close(),e.abrupt("return");case 10:e.t0=i.type,e.next=e.t0===UP.Type.CAN_HOP?13:e.t0===UP.Type.HOP?17:e.t0===UP.Type.STOP?22:27;break;case 13:return wN("received CAN_HOP request from %p",r.remotePeer),e.next=16,bN({circuit:this,connection:r,streamHandler:a});case 16:return e.abrupt("break",31);case 17:return wN("received HOP request from %p",r.remotePeer),e.next=20,hN({connection:r,request:i,streamHandler:a,circuit:this,connectionManager:this.components.getConnectionManager()});case 20:return s=e.sent,e.abrupt("break",31);case 22:return wN("received STOP request from %p",r.remotePeer),e.next=25,cN({connection:r,request:i,streamHandler:a});case 25:return s=e.sent,e.abrupt("break",31);case 27:return wN("Request of type %s not supported",i.type),a.write({type:UP.Type.STATUS,code:UP.Status.MALFORMED_MESSAGE}),a.close(),e.abrupt("return");case 31:if(null==s){e.next=42;break}return o=new Lf(i.dstPeer.addrs[0]),u=new Lf(i.srcPeer.addrs[0]),c=tN({stream:s,remoteAddr:o,localAddr:u}),l=i.type===UP.Type.HOP?"relay":"inbound",wN("new %s connection %s",l,c.remoteAddr),e.next=39,this.components.getUpgrader().upgradeInbound(c);case 39:f=e.sent,wN("%s connection %s upgraded",l,c.remoteAddr),null!=this.handler&&this.handler(f);case 42:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,v,y,g=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>1&&void 0!==g[1]?g[1]:{},n=t.toString().split("/p2p-circuit"),a=new Lf(n[0]),i=new Lf(n[n.length-1]),s=a.getPeerId(),o=i.getPeerId(),null!=s&&null!=o){e.next=10;break}throw u="Circuit relay dial failed as addresses did not have peer id",wN.error(u),Ee(new Error(u),nP.ERR_RELAYED_DIAL);case 10:if(c=$n(s),l=$n(o),f=!1,p=this.components.getConnectionManager().getConnections(c),null!=(h=p[0])){e.next=22;break}return e.next=18,this.components.getPeerStore().addressBook.add(c,[a]);case 18:return e.next=20,this.components.getConnectionManager().openConnection(c,r);case 20:h=e.sent,f=!0;case 22:return e.prev=22,e.next=25,vN({connection:h,request:{type:UP.Type.HOP,srcPeer:{id:this.components.getPeerId().toBytes(),addrs:this.components.getAddressManager().getAddresses().map((function(e){return e.bytes}))},dstPeer:{id:l.toBytes(),addrs:[new Lf(i).bytes]}}});case 25:return d=e.sent,v=a.encapsulate("/p2p-circuit/p2p/".concat(this.components.getPeerId().toString())),y=tN({stream:d,remoteAddr:t,localAddr:v}),wN("new outbound connection %s",y.remoteAddr),e.next=31,this.components.getUpgrader().upgradeOutbound(y);case 31:return e.abrupt("return",e.sent);case 34:if(e.prev=34,e.t0=e.catch(22),wN.error("Circuit relay dial failed",e.t0),e.t1=f,!e.t1){e.next=41;break}return e.next=41,h.close();case 41:throw e.t0;case 42:case"end":return e.stop()}}),e,this,[[22,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){return this.handler=e.handler,function(e){var t=new Map;function r(){return(r=(0,fe.Z)((0,ce.Z)().mark((function r(a){var i,s,o,u,c,l;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=a.toString().split("/p2p-circuit").find((function(e){return""!==e})),s=new Lf(i),null!=(o=s.getPeerId())){r.next=5;break}throw new Error("Could not determine relay peer from multiaddr");case 5:return u=$n(o),r.next=8,e.peerStore.addressBook.add(u,[s]);case 8:return r.next=10,e.connectionManager.openConnection(u);case 10:c=r.sent,l=c.remoteAddr.encapsulate("/p2p-circuit"),t.set(c.remotePeer.toString(),l),n.dispatchEvent(new HS("listening"));case 14:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var n=Object.assign(new KS,{close:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),listen:function(e){return r.apply(this,arguments)},getAddrs:function(){var e,r=[],n=(0,v.Z)(t.values());try{for(n.s();!(e=n.n()).done;){var a=e.value;r.push(a)}}catch(Dy){n.e(Dy)}finally{n.f()}return r}});return e.connectionManager.addEventListener("peer:disconnect",(function(e){var r=e.detail;t.delete(r.remotePeer.toString())&&n.dispatchEvent(new HS("close"))})),n}({connectionManager:this.components.getConnectionManager(),peerStore:this.components.getPeerStore()})}},{key:"filter",value:function(e){return(e=Array.isArray(e)?e:[e]).filter((function(e){return rp.matches(e)}))}}]),t}(Symbol.toStringTag);function xN(e){return _N.apply(this,arguments)}function _N(){return _N=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new TextEncoder).encode(t),e.next=3,qn.sha256.digest(r);case 3:return n=e.sent,e.abrupt("return",Ue.CID.createV0(n));case 5:case"end":return e.stop()}}),e)}))),_N.apply(this,arguments)}var EN="hop_relay",SN="true",AN="/libp2p/relay",IN=_e("libp2p:auto-relay"),CN=function(){},ZN=function(){function e(t,r){var n,a,i,s=this;(0,pe.Z)(this,e),this.components=t,this.addressSorter=null!==(n=r.addressSorter)&&void 0!==n?n:MP,this.maxListeners=null!==(a=r.maxListeners)&&void 0!==a?a:1,this.listenRelays=new Set,this.onError=null!==(i=r.onError)&&void 0!==i?i:CN,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.getPeerStore().addEventListener("change:protocols",(function(e){s._onProtocolChange(e).catch((function(e){IN.error(e)}))})),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onPeerDisconnected)}return(0,he.Z)(e,[{key:"_onProtocolChange",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.detail,n=r.peerId,a=r.protocols,i=n.toString(),s=a.find((function(e){return e===rN})),null!=s){e.next=8;break}if(!this.listenRelays.has(i)){e.next=7;break}return e.next=7,this._removeListenRelay(i);case 7:return e.abrupt("return");case 8:if(!this.listenRelays.has(i)){e.next=10;break}return e.abrupt("return");case 10:if(e.prev=10,0!==(o=this.components.getConnectionManager().getConnections(n)).length){e.next=14;break}return e.abrupt("return");case 14:if(!(u=o[0]).remoteAddr.protoCodes().includes(290)){e.next=18;break}return IN("relayed connection to ".concat(i," will not be used to hop on")),e.abrupt("return");case 18:return e.next=20,gN({connection:u});case 20:if(!e.sent){e.next=26;break}return e.next=24,this.components.getPeerStore().metadataBook.setValue(n,EN,(0,fr.fromString)(SN));case 24:return e.next=26,this._addListenRelay(u,i);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),this.onError(e.t0);case 31:case"end":return e.stop()}}),e,this,[[10,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_onPeerDisconnected",value:function(e){var t=e.detail.remotePeer.toString();this.listenRelays.has(t)&&this._removeListenRelay(t).catch((function(e){IN.error(e)}))}},{key:"_addListenRelay",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.listenRelays.size>=this.maxListeners)){e.next=3;break}return e.abrupt("return");case 3:return e.t0=kp,e.next=6,this.components.getPeerStore().addressBook.get(t.remotePeer);case 6:return e.t1=e.sent,e.t2=function(e){return gS(e,a.addressSorter)},e.t3=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=11,(0,e.t0)(e.t1,e.t2,e.t3);case 11:return n=e.sent,e.next=14,Promise.all(n.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null==(n=r.multiaddr).getPeerId()&&(n=n.encapsulate("/p2p/".concat(t.remotePeer.toString()))),n=n.encapsulate("/p2p-circuit"),e.next=6,a.components.getTransportManager().listen([n]);case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),IN.error("error listening on circuit address",e.t0),a.onError(e.t0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));case 14:e.sent.includes(!0)&&this.listenRelays.add(r),e.next=22;break;case 18:e.prev=18,e.t4=e.catch(0),this.onError(e.t4),this.listenRelays.delete(r);case 22:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_removeListenRelay",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.listenRelays.delete(t)){e.next=3;break}return e.next=3,this._listenOnAvailableHopRelays([t]);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_listenOnAvailableHopRelays",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u,c,l,f,p,h,d,y,g,m,b,w,k,x,_,E=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E.length>0&&void 0!==E[0]?E[0]:[],!(this.listenRelays.size>=this.maxListeners)){e.next=3;break}return e.abrupt("return");case 3:return r=[],e.next=6,this.components.getPeerStore().all();case 6:n=e.sent,a=(0,v.Z)(n),e.prev=8,a.s();case 10:if((i=a.n()).done){e.next=30;break}if(s=i.value,o=s.id,u=s.metadata,c=o.toString(),!this.listenRelays.has(c)){e.next=15;break}return e.abrupt("continue",28);case 15:if(!t.includes(c)){e.next=17;break}return e.abrupt("continue",28);case 17:if(null!=(l=u.get(EN))&&(0,gr.toString)(l)===SN){e.next=20;break}return e.abrupt("continue",28);case 20:if(0!==(f=this.components.getConnectionManager().getConnections(o)).length){e.next=24;break}return r.push(o),e.abrupt("continue",28);case 24:return e.next=26,this._addListenRelay(f[0],c);case 26:if(!(this.listenRelays.size>=this.maxListeners)){e.next=28;break}return e.abrupt("return");case 28:e.next=10;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(8),a.e(e.t0);case 35:return e.prev=35,a.f(),e.finish(35);case 38:p=0,h=r;case 39:if(!(p<h.length)){e.next=48;break}return d=h[p],e.next=43,this._tryToListenOnRelay(d);case 43:if(!(this.listenRelays.size>=this.maxListeners)){e.next=45;break}return e.abrupt("return");case 45:p++,e.next=39;break;case 48:return e.prev=48,e.next=51,xN(AN);case 51:y=e.sent,g=!1,m=!1,e.prev=54,w=hr(this.components.getContentRouting().findProviders(y));case 56:return e.next=58,w.next();case 58:if(!(g=!(k=e.sent).done)){e.next=72;break}if(0!==(x=k.value).multiaddrs.length){e.next=62;break}return e.abrupt("continue",69);case 62:return _=x.id,e.next=65,this.components.getPeerStore().addressBook.add(_,x.multiaddrs);case 65:return e.next=67,this._tryToListenOnRelay(_);case 67:if(!(this.listenRelays.size>=this.maxListeners)){e.next=69;break}return e.abrupt("return");case 69:g=!1,e.next=56;break;case 72:e.next=78;break;case 74:e.prev=74,e.t1=e.catch(54),m=!0,b=e.t1;case 78:if(e.prev=78,e.prev=79,!g||null==w.return){e.next=83;break}return e.next=83,w.return();case 83:if(e.prev=83,!m){e.next=86;break}throw b;case 86:return e.finish(83);case 87:return e.finish(78);case 88:e.next=93;break;case 90:e.prev=90,e.t2=e.catch(48),this.onError(e.t2);case 93:case"end":return e.stop()}}),e,this,[[8,32,35,38],[48,90],[54,74,78,88],[79,,83,87]])})));return function(){return e.apply(this,arguments)}}()},{key:"_tryToListenOnRelay",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.components.getConnectionManager().openConnection(t);case 3:return r=e.sent,e.next=6,this._addListenRelay(r,t.toString());case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),IN.error("Could not use %p as relay",t,e.t0),this.onError(e.t0,"could not connect and listen on known hop relay ".concat(t.toString()));case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),RN=_e("libp2p:relay"),TN=function(){function e(t,r){var n;(0,pe.Z)(this,e),this.components=t,this.autoRelay=!1!==(null===(n=r.autoRelay)||void 0===n?void 0:n.enabled)?new ZN(t,(0,le.Z)({addressSorter:r.addressSorter},r.autoRelay)):void 0,this.started=!1,this.init=r,this._advertiseService=this._advertiseService.bind(this)}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,dP.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.timeout&&(0,dP.clearDelayedInterval)(this.timeout),this.started=!1;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_advertiseService",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xN(AN);case 3:return t=e.sent,e.next=6,this.components.getContentRouting().provide(t);case 6:e.next=17;break;case 8:if(e.prev=8,e.t0=e.catch(0),e.t0.code!==nP.ERR_NO_ROUTERS_AVAILABLE){e.next=16;break}return RN.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e.t0),e.next=14,this.stop();case 14:e.next=17;break;case 16:RN.error(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),DN=__webpack_require__(6327),PN=(__webpack_require__(4660),__webpack_require__(3391),Ci.pki),NN=function(e,t){var r=PN.rsa.setPublicKey(t.n,t.e),n=PN.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);var a=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return n.setSubject(a),n.setIssuer(a),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(t),n};function ON(e,t){return BN.apply(this,arguments)}function BN(){return(BN=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(r),e.next=3,Promise.all(n);case 3:return a=e.sent,i=a.findIndex((function(e){return e})),e.abrupt("return",t[i]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var LN=_e("libp2p:keychain:cms"),MN=new WeakMap,UN=function(){function e(t,r){if((0,pe.Z)(this,e),null==t)throw Ee(new Error("keychain is required"),nP.ERR_KEYCHAIN_REQUIRED);this.keychain=t,MN.set(this,{dek:r})}return(0,he.Z)(e,[{key:"encrypt",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array){e.next=2;break}throw Ee(new Error("Plain data must be a Uint8Array"),nP.ERR_INVALID_PARAMETERS);case 2:return e.next=4,this.keychain.findKeyByName(t);case 4:return n=e.sent,e.next=7,this.keychain.getPrivateKey(t);case 7:if(a=e.sent,null!=(i=MN.get(this))){e.next=11;break}throw Ee(new Error("dek missing"),nP.ERR_INVALID_PARAMETERS);case 11:return s=i.dek,o=Ci.pki.decryptRsaPrivateKey(a,s),e.next=15,NN(n,o);case 15:return u=e.sent,(c=Ci.pkcs7.createEnvelopedData()).addRecipient(u),c.content=Ci.util.createBuffer(r),c.encrypt(),l=Ci.asn1.toDer(c.toAsn1()).getBytes(),e.abrupt("return",(0,fr.fromString)(l,"ascii"));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw Ee(new Error("CMS data is required"),nP.ERR_INVALID_PARAMETERS);case 2:e.prev=2,n=Ci.util.createBuffer((0,gr.toString)(t,"ascii")),a=Ci.asn1.fromDer(n),r=Ci.pkcs7.messageFromAsn1(a),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),LN.error(e.t0),Ee(new Error("Invalid CMS"),nP.ERR_INVALID_CMS);case 12:return i=r.recipients.filter((function(e){return e.issuer.find((function(e){return"O"===e.shortName&&"ipfs"===e.value}))})).filter((function(e){return e.issuer.find((function(e){return"CN"===e.shortName}))})).map((function(e){return{recipient:e,keyId:e.issuer.find((function(e){return"CN"===e.shortName})).value}})),e.next=15,ON(i,function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.keychain.findKeyById(t.keyId);case 3:if(null==e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());case 15:if(null!=(s=e.sent)){e.next=19;break}throw o=i.map((function(e){return e.keyId})),Ee(new Error("Decryption needs one of the key(s): ".concat(o.join(", "))),nP.ERR_MISSING_KEYS,{missingKeys:o});case 19:return e.next=21,this.keychain.findKeyById(s.keyId);case 21:if(null!=(u=e.sent)){e.next=24;break}throw Ee(new Error("No key available to decrypto"),nP.ERR_NO_KEY);case 24:return e.next=26,this.keychain.getPrivateKey(u.name);case 26:if(c=e.sent,null!=(l=MN.get(this))){e.next=30;break}throw Ee(new Error("dek missing"),nP.ERR_INVALID_PARAMETERS);case 30:return f=l.dek,p=Ci.pki.decryptRsaPrivateKey(c,f),r.decrypt(s.recipient,p),e.abrupt("return",(0,fr.fromString)(r.content.getBytes(),"ascii"));case 34:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();__webpack_require__(8605);var jN=__webpack_require__(6019),FN={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function zN(e,t,r,n,a){if("sha1"!==a&&"sha2-256"!==a&&"sha2-512"!==a){var i=Object.keys(FN).join(" / ");throw Ee(new Error("Hash '".concat(a,"' is unknown or not supported. Must be ").concat(i)),"ERR_UNSUPPORTED_HASH_TYPE")}var s=jN(e,t,r,n,FN[a]);return Ri.encode64(s,null)}var VN=_e("libp2p:keychain"),KN="/info/",qN=new WeakMap,HN=14,WN=16,GN=1e3,YN={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function QN(e){return null!=e&&("string"===typeof e&&(e===DN(e.trim())&&e.length>0))}function JN(){return XN.apply(this,arguments)}function XN(){return XN=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,1e3,t=800*Math.random()+200,e.next=5,new Promise((function(e){return setTimeout(e,t)}));case 5:case"end":return e.stop()}}),e)}))),XN.apply(this,arguments)}function $N(e){return new kr("/pkcs8/"+e)}function eO(e){return new kr(KN+e)}var tO=function(){function e(t,r){var n,a,i,s,o,u,c,l,f,p;if((0,pe.Z)(this,e),this.components=t,this.init=ge(YN,r),null!=this.init.pass&&(null===(n=this.init.pass)||void 0===n?void 0:n.length)<20)throw new Error("pass must be least 20 characters");if(null!=(null===(a=this.init.dek)||void 0===a?void 0:a.keyLength)&&this.init.dek.keyLength<HN)throw new Error("dek.keyLength must be least ".concat(HN," bytes"));if(null!=(null===(i=this.init.dek)||void 0===i||null===(s=i.salt)||void 0===s?void 0:s.length)&&this.init.dek.salt.length<WN)throw new Error("dek.saltLength must be least ".concat(WN," bytes"));if(null!=(null===(o=this.init.dek)||void 0===o?void 0:o.iterationCount)&&this.init.dek.iterationCount<GN)throw new Error("dek.iterationCount must be least ".concat(GN));var h=null!=this.init.pass&&null!=(null===(u=this.init.dek)||void 0===u?void 0:u.salt)?zN(this.init.pass,null===(c=this.init.dek)||void 0===c?void 0:c.salt,null===(l=this.init.dek)||void 0===l?void 0:l.iterationCount,null===(f=this.init.dek)||void 0===f?void 0:f.keyLength,null===(p=this.init.dek)||void 0===p?void 0:p.hash):"";qN.set(this,{dek:h})}return(0,he.Z)(e,[{key:"cms",get:function(){var e=qN.get(this);if(null==e)throw Ee(new Error("dek missing"),nP.ERR_INVALID_PARAMETERS);var t=e.dek;return new UN(this,t)}},{key:"createKey",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>2&&void 0!==p[2]?p[2]:2048,QN(t)&&"self"!==t){e.next=5;break}return e.next=4,JN();case 4:throw Ee(new Error("Invalid key name"),nP.ERR_INVALID_KEY_NAME);case 5:if("string"===typeof r){e.next=9;break}return e.next=8,JN();case 8:throw Ee(new Error("Invalid key type"),nP.ERR_INVALID_KEY_TYPE);case 9:return a=$N(t),e.next=12,this.components.getDatastore().has(a);case 12:if(!e.sent){e.next=17;break}return e.next=16,JN();case 16:throw Ee(new Error("Key name already exists"),nP.ERR_KEY_ALREADY_EXISTS);case 17:e.t0=r.toLowerCase(),e.next="rsa"===e.t0?20:25;break;case 20:if(Number.isSafeInteger(n)&&!(n<2048)){e.next=24;break}return e.next=23,JN();case 23:throw Ee(new Error("Invalid RSA key size"),nP.ERR_INVALID_KEY_SIZE);case 24:case 25:return e.abrupt("break",26);case 26:return e.prev=26,e.next=29,Wu(r,n);case 29:return s=e.sent,e.next=32,s.id();case 32:if(o=e.sent,null!=(u=qN.get(this))){e.next=36;break}throw Ee(new Error("dek missing"),nP.ERR_INVALID_PARAMETERS);case 36:return c=u.dek,e.next=39,s.export(c);case 39:return l=e.sent,i={name:t,id:o},(f=this.components.getDatastore().batch()).put(a,(0,fr.fromString)(l)),f.put(eO(t),(0,fr.fromString)(JSON.stringify(i))),e.next=46,f.commit();case 46:e.next=53;break;case 48:return e.prev=48,e.t1=e.catch(26),e.next=52,JN();case 52:throw e.t1;case 53:return e.abrupt("return",i);case 54:case"end":return e.stop()}}),e,this,[[26,48]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"listKeys",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={prefix:KN},r=[],n=!1,a=!1,e.prev=4,s=hr(this.components.getDatastore().query(t));case 6:return e.next=8,s.next();case 8:if(!(n=!(o=e.sent).done)){e.next=14;break}u=o.value,r.push(JSON.parse((0,gr.toString)(u.value)));case 11:n=!1,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,this,[[4,16,20,30],[21,,25,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"findKeyById",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.listKeys();case 3:return r=e.sent,e.abrupt("return",r.find((function(e){return e.id===t})));case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,JN();case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"findKeyByName",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QN(t)){e.next=4;break}return e.next=3,JN();case 3:throw Ee(new Error("Invalid key name '".concat(t,"'")),nP.ERR_INVALID_KEY_NAME);case 4:return r=eO(t),e.prev=5,e.next=8,this.components.getDatastore().get(r);case 8:return n=e.sent,e.abrupt("return",JSON.parse((0,gr.toString)(n)));case 12:return e.prev=12,e.t0=e.catch(5),e.next=16,JN();case 16:throw VN.error(e.t0),Ee(new Error("Key '".concat(t,"' does not exist.")),nP.ERR_KEY_NOT_FOUND);case 18:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeKey",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QN(t)&&"self"!==t){e.next=4;break}return e.next=3,JN();case 3:throw Ee(new Error("Invalid key name '".concat(t,"'")),nP.ERR_INVALID_KEY_NAME);case 4:return r=$N(t),e.next=7,this.findKeyByName(t);case 7:return n=e.sent,(a=this.components.getDatastore().batch()).delete(r),a.delete(eO(t)),e.next=13,a.commit();case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameKey",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QN(t)&&"self"!==t){e.next=4;break}return e.next=3,JN();case 3:throw Ee(new Error("Invalid old key name '".concat(t,"'")),nP.ERR_OLD_KEY_NAME_INVALID);case 4:if(QN(r)&&"self"!==r){e.next=8;break}return e.next=7,JN();case 7:throw Ee(new Error("Invalid new key name '".concat(r,"'")),nP.ERR_NEW_KEY_NAME_INVALID);case 8:return n=$N(t),a=$N(r),i=eO(t),s=eO(r),e.next=14,this.components.getDatastore().has(a);case 14:if(!e.sent){e.next=19;break}return e.next=18,JN();case 18:throw Ee(new Error("Key '".concat(r,"' already exists")),nP.ERR_KEY_ALREADY_EXISTS);case 19:return e.prev=19,e.next=22,this.components.getDatastore().get(n);case 22:return o=e.sent,e.next=25,this.components.getDatastore().get(i);case 25:return u=e.sent,(c=JSON.parse((0,gr.toString)(u))).name=r,(l=this.components.getDatastore().batch()).put(a,o),l.put(s,(0,fr.fromString)(JSON.stringify(c))),l.delete(n),l.delete(i),e.next=35,l.commit();case 35:return e.abrupt("return",c);case 38:return e.prev=38,e.t0=e.catch(19),e.next=42,JN();case 42:throw e.t0;case 43:case"end":return e.stop()}}),e,this,[[19,38]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"exportKey",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QN(t)){e.next=4;break}return e.next=3,JN();case 3:throw Ee(new Error("Invalid key name '".concat(t,"'")),nP.ERR_INVALID_KEY_NAME);case 4:if(null!=r){e.next=8;break}return e.next=7,JN();case 7:throw Ee(new Error("Password is required"),nP.ERR_PASSWORD_REQUIRED);case 8:return n=$N(t),e.prev=9,e.next=12,this.components.getDatastore().get(n);case 12:if(a=e.sent,i=(0,gr.toString)(a),null!=(s=qN.get(this))){e.next=17;break}throw Ee(new Error("dek missing"),nP.ERR_INVALID_PARAMETERS);case 17:return o=s.dek,e.next=20,$u(i,o);case 20:return u=e.sent,e.next=23,u.export(r);case 23:return e.abrupt("return",e.sent);case 26:return e.prev=26,e.t0=e.catch(9),e.next=30,JN();case 30:throw e.t0;case 31:case"end":return e.stop()}}),e,this,[[9,26]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"importKey",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QN(t)&&"self"!==t){e.next=4;break}return e.next=3,JN();case 3:throw Ee(new Error("Invalid key name '".concat(t,"'")),nP.ERR_INVALID_KEY_NAME);case 4:if(null!=r){e.next=8;break}return e.next=7,JN();case 7:throw Ee(new Error("PEM encoded key is required"),nP.ERR_PEM_REQUIRED);case 8:return a=$N(t),e.next=11,this.components.getDatastore().has(a);case 11:if(!e.sent){e.next=16;break}return e.next=15,JN();case 15:throw Ee(new Error("Key '".concat(t,"' already exists")),nP.ERR_KEY_ALREADY_EXISTS);case 16:return e.prev=16,e.next=19,$u(r,n);case 19:i=e.sent,e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(16),e.next=26,JN();case 26:throw Ee(new Error("Cannot read the key, most likely the password is wrong"),nP.ERR_CANNOT_READ_KEY);case 27:return e.prev=27,e.next=30,i.id();case 30:if(s=e.sent,null!=(o=qN.get(this))){e.next=34;break}throw Ee(new Error("dek missing"),nP.ERR_INVALID_PARAMETERS);case 34:return u=o.dek,e.next=37,i.export(u);case 37:r=e.sent,e.next=45;break;case 40:return e.prev=40,e.t1=e.catch(27),e.next=44,JN();case 44:throw e.t1;case 45:return c={name:t,id:s},(l=this.components.getDatastore().batch()).put(a,(0,fr.fromString)(r)),l.put(eO(t),(0,fr.fromString)(JSON.stringify(c))),e.next=51,l.commit();case 51:return e.abrupt("return",c);case 52:case"end":return e.stop()}}),e,this,[[16,22],[27,40]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"importPeer",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,QN(t)){e.next=3;break}throw Ee(new Error("Invalid key name '".concat(t,"'")),nP.ERR_INVALID_KEY_NAME);case 3:if(null!=r&&null!=r.privateKey){e.next=5;break}throw Ee(new Error("Peer.privKey is required"),nP.ERR_MISSING_PRIVATE_KEY);case 5:return e.next=7,Ju(r.privateKey);case 7:return n=e.sent,a=$N(t),e.next=11,this.components.getDatastore().has(a);case 11:if(!e.sent){e.next=16;break}return e.next=15,JN();case 15:throw Ee(new Error("Key '".concat(t,"' already exists")),nP.ERR_KEY_ALREADY_EXISTS);case 16:if(null!=(i=qN.get(this))){e.next=19;break}throw Ee(new Error("dek missing"),nP.ERR_INVALID_PARAMETERS);case 19:return s=i.dek,e.next=22,n.export(s);case 22:return o=e.sent,u={name:t,id:r.toString()},(c=this.components.getDatastore().batch()).put(a,(0,fr.fromString)(o)),c.put(eO(t),(0,fr.fromString)(JSON.stringify(u))),e.next=29,c.commit();case 29:return e.abrupt("return",u);case 32:return e.prev=32,e.t0=e.catch(0),e.next=36,JN();case 36:throw e.t0;case 37:case"end":return e.stop()}}),e,this,[[0,32]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getPrivateKey",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QN(t)){e.next=4;break}return e.next=3,JN();case 3:throw Ee(new Error("Invalid key name '".concat(t,"'")),nP.ERR_INVALID_KEY_NAME);case 4:return e.prev=4,r=$N(t),e.next=8,this.components.getDatastore().get(r);case 8:return n=e.sent,e.abrupt("return",(0,gr.toString)(n));case 12:return e.prev=12,e.t0=e.catch(4),e.next=16,JN();case 16:throw VN.error(e.t0),Ee(new Error("Key '".concat(t,"' does not exist.")),nP.ERR_KEY_NOT_FOUND);case 18:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"rotateKeychainPass",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p,h,d,y,g,m,b,w,k;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t){e.next=4;break}return e.next=3,JN();case 3:throw Ee(new Error("Invalid old pass type '".concat(typeof t,"'")),nP.ERR_INVALID_OLD_PASS_TYPE);case 4:if("string"===typeof r){e.next=8;break}return e.next=7,JN();case 7:throw Ee(new Error("Invalid new pass type '".concat(typeof r,"'")),nP.ERR_INVALID_NEW_PASS_TYPE);case 8:if(!(r.length<20)){e.next=12;break}return e.next=11,JN();case 11:throw Ee(new Error("Invalid pass length ".concat(r.length)),nP.ERR_INVALID_PASS_LENGTH);case 12:if(VN("recreating keychain"),null!=(o=qN.get(this))){e.next=16;break}throw Ee(new Error("dek missing"),nP.ERR_INVALID_PARAMETERS);case 16:return u=o.dek,this.init.pass=r,c=null!=r&&null!=(null===(n=this.init.dek)||void 0===n?void 0:n.salt)?zN(r,this.init.dek.salt,null===(a=this.init.dek)||void 0===a?void 0:a.iterationCount,null===(i=this.init.dek)||void 0===i?void 0:i.keyLength,null===(s=this.init.dek)||void 0===s?void 0:s.hash):"",qN.set(this,{dek:c}),e.next=22,this.listKeys();case 22:l=e.sent,f=(0,v.Z)(l),e.prev=24,f.s();case 26:if((p=f.n()).done){e.next=47;break}return h=p.value,e.next=30,this.components.getDatastore().get($N(h.name));case 30:return d=e.sent,y=(0,gr.toString)(d),e.next=34,$u(y,u);case 34:return g=e.sent,m=c.toString(),e.next=38,g.export(m);case 38:return b=e.sent,w=this.components.getDatastore().batch(),k={name:h.name,id:h.id},w.put($N(h.name),(0,fr.fromString)(b)),w.put(eO(h.name),(0,fr.fromString)(JSON.stringify(k))),e.next=45,w.commit();case 45:e.next=26;break;case 47:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(24),f.e(e.t0);case 52:return e.prev=52,f.f(),e.finish(52);case 55:VN("keychain reconstructed");case 56:case"end":return e.stop()}}),e,this,[[24,49,52,55]])})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"generateOptions",value:function(){var e=Object.assign({},YN),t=3*Math.ceil(WN/3);return e.dek.salt=(0,gr.toString)(Ui(t),"base64"),e}},{key:"options",get:function(){return YN}}]),e}(),rO=__webpack_require__(1309),nO=function(){function e(t){if((0,pe.Z)(this,e),"number"!==typeof t)throw new Error("must provide a timespan to the moving average constructor");if(t<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");this.timespan=t,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}return(0,he.Z)(e,[{key:"alpha",value:function(e,t){return 1-Math.exp(-(e-t)/this.timespan)}},{key:"push",value:function(e,t){if(null!=this.previousTime){var r=this.alpha(e,this.previousTime),n=t-this.movingAverage,a=r*n;this.movingAverage=r*t+(1-r)*this.movingAverage,this.variance=(1-r)*(this.variance+n*a),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+r*n}else this.movingAverage=t;this.previousTime=e}}]),e}();function aO(e){return new nO(e)}var iO,sO=function(e){St(r,e);var t=Rt(r);function r(e){var n;(0,pe.Z)(this,r),(n=t.call(this)).enabled=e.enabled,n.queue=[],n.stats={dataReceived:0n,dataSent:0n},n.frequencyLastTime=Date.now(),n.frequencyAccumulators={},n.movingAverages={dataReceived:[],dataSent:[]},n.computeThrottleMaxQueueSize=e.computeThrottleMaxQueueSize,n.computeThrottleTimeout=e.computeThrottleTimeout,n._update=n._update.bind(Ct(n)),n.movingAverageIntervals=e.movingAverageIntervals;for(var a=0;a<e.initialCounters.length;a++){var i=e.initialCounters[a];n.stats[i]=0n,n.movingAverages[i]=[];for(var s=0;s<n.movingAverageIntervals.length;s++){var o=n.movingAverageIntervals[s];(n.movingAverages[i][o]=aO(o)).push(n.frequencyLastTime,0)}}return n}return(0,he.Z)(r,[{key:"start",value:function(){this.enabled&&this.queue.length>0&&this._resetComputeTimeout()}},{key:"stop",value:function(){null!=this.timeout&&(this.timeout.clear(),this.timeout=null)}},{key:"getSnapshot",value:function(){return Object.assign({},this.stats)}},{key:"getMovingAverages",value:function(){return Object.assign({},this.movingAverages)}},{key:"push",value:function(e,t){this.queue.push([e,t,Date.now()]),this._resetComputeTimeout()}},{key:"_resetComputeTimeout",value:function(){this.timeout=AP(this._update,this._nextTimeout())}},{key:"_nextTimeout",value:function(){var e=this.queue.length/this.computeThrottleMaxQueueSize;return Math.max(this.computeThrottleTimeout*(1-e),0)}},{key:"_update",value:function(){if(this.timeout=null,this.queue.length>0){var e,t=["",0,0],r=(0,v.Z)(this.queue);try{for(r.s();!(e=r.n()).done;)t=e.value,this._applyOp(t)}catch(Dy){r.e(Dy)}finally{r.f()}this.queue=[],t.length>2&&""!==t[0]&&this._updateFrequency(t[2]),this.dispatchEvent(new HS("update",{detail:this.stats}))}}},{key:"_updateFrequency",value:function(e){var t=e-this.frequencyLastTime;this._updateFrequencyFor("dataReceived",t,e),this._updateFrequencyFor("dataSent",t,e),this.frequencyLastTime=e}},{key:"_updateFrequencyFor",value:function(e,t,r){var n,a=null!==(n=this.frequencyAccumulators[e])&&void 0!==n?n:0;this.frequencyAccumulators[e]=0;var i=a/(null!==t&&void 0!==t?t:1)*1e3,s=this.movingAverages[e];null==s&&(s=this.movingAverages[e]=[]);for(var o=this.movingAverageIntervals,u=0;u<o.length;u++){var c=o[u],l=s[c];null==l&&(l=s[c]=aO(c)),l.push(r,i)}}},{key:"_applyOp",value:function(e){var t,r=e[0],n=e[1];if("number"!==typeof n)throw new Error("invalid increment number");t=Object.prototype.hasOwnProperty.call(this.stats,r)?this.stats[r]:this.stats[r]=0n,this.stats[r]=t+BigInt(n),null==this.frequencyAccumulators[r]&&(this.frequencyAccumulators[r]=0),this.frequencyAccumulators[r]+=n}}]),r}(KS),oO=["dataReceived","dataSent"],uO={in:"dataReceived",out:"dataSent"},cO=function(){function e(t){var r;(0,pe.Z)(this,e),this.enabled=t.enabled,this.statsInit=(0,le.Z)((0,le.Z)({},t),{},{initialCounters:oO}),this.globalStats=new sO(this.statsInit),this.peerStats=new Map,this.protocolStats=new Map,this.oldPeers=Vr(null!==(r=t.maxOldPeersRetention)&&void 0!==r?r:FP),this.running=!1,this._onMessage=this._onMessage.bind(this),this.systems=new Map}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:this.running=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.running){e.next=2;break}return e.abrupt("return");case 2:this.running=!1,this.globalStats.stop(),t=(0,v.Z)(this.peerStats.values());try{for(t.s();!(r=t.n()).done;)r.value.stop()}catch(Dy){t.e(Dy)}finally{t.f()}n=(0,v.Z)(this.protocolStats.values());try{for(n.s();!(a=n.n()).done;)a.value.stop()}catch(Dy){n.e(Dy)}finally{n.f()}case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGlobal",value:function(){return this.globalStats}},{key:"getPeers",value:function(){return Array.from(this.peerStats.keys())}},{key:"getComponentMetrics",value:function(){return this.systems}},{key:"updateComponentMetric",value:function(e){var t=e.system,r=void 0===t?"libp2p":t,n=e.component,a=e.metric,i=e.value;this.systems.has(r)||this.systems.set(r,new Map);var s=this.systems.get(r);if(null==s)throw new Error("Unknown metric system");s.has(n)||s.set(n,new Map);var o=s.get(n);if(null==o)throw new Error("Unknown metric component");o.set(a,i)}},{key:"forPeer",value:function(e){var t,r=e.toString();return null!==(t=this.peerStats.get(r))&&void 0!==t?t:this.oldPeers.get(r)}},{key:"getProtocols",value:function(){return Array.from(this.protocolStats.keys())}},{key:"forProtocol",value:function(e){return this.protocolStats.get(e)}},{key:"onPeerDisconnected",value:function(e){var t=e.toString(),r=this.peerStats.get(t);null!=r&&(r.stop(),this.peerStats.delete(t),this.oldPeers.set(t,r))}},{key:"_onMessage",value:function(e){if(this.running){var t=e.remotePeer,r=e.protocol,n=e.direction,a=e.dataLength,i=uO[n],s=this.forPeer(t);if(null==s){var o=new sO(this.statsInit);this.peerStats.set(t.toString(),o),s=o}if(s.push(i,a),this.globalStats.push(i,a),null!=r){var u=this.forProtocol(r);if(null==u){var c=new sO(this.statsInit);this.protocolStats.set(r,c),u=c}u.push(i,a)}}}},{key:"updatePlaceholder",value:function(e,t){var r,n;if(this.running){var a,i,s=e.toString(),o=null!==(r=this.peerStats.get(s))&&void 0!==r?r:this.oldPeers.get(s),u=t.toString(),c=null!==(n=this.peerStats.get(u))&&void 0!==n?n:this.oldPeers.get(u),l=o;null!=c&&(i=l,(a=c).stop(),i.stop(),a.queue=[].concat(Vt(a.queue),Vt(i.queue)),l=a,this.oldPeers.remove(u)),this.peerStats.delete(e.toString()),this.peerStats.set(u,l),l.start()}}},{key:"trackStream",value:function(e){var t=this,r=e.stream,n=e.remotePeer,a=e.protocol;if(!this.running)return r;var i=r.source;r.source=rO(i,(function(e){return t._onMessage({remotePeer:n,protocol:a,direction:"in",dataLength:e.length})}));var s=r.sink;return r.sink=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kp(r,(function(e){return rO(e,(function(e){t._onMessage({remotePeer:n,protocol:a,direction:"out",dataLength:e.length})}))}),s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r}}]),e}();function lO(e){return fO.apply(this,arguments)}function fO(){return fO=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return r=e.sent,e.abrupt("return",{status:"fulfilled",value:r,isFulfilled:!0,isRejected:!1});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"rejected",reason:e.t0,isFulfilled:!1,isRejected:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),fO.apply(this,arguments)}function pO(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function hO(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function dO(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,hO(e,t,"set"),r),r}function vO(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,hO(e,t,"get"))}var yO=(0,he.Z)((function e(t){(0,pe.Z)(this,e),(0,hp.Z)(this,"value",void 0),(0,hp.Z)(this,"next",void 0),this.value=t})),gO=new WeakMap,mO=new WeakMap,bO=new WeakMap;iO=Symbol.iterator;var wO=function(){function e(){(0,pe.Z)(this,e),pO(this,gO,{writable:!0,value:void 0}),pO(this,mO,{writable:!0,value:void 0}),pO(this,bO,{writable:!0,value:void 0}),this.clear()}return(0,he.Z)(e,[{key:"enqueue",value:function(e){var t,r=new yO(e);vO(this,gO)?(vO(this,mO).next=r,dO(this,mO,r)):(dO(this,gO,r),dO(this,mO,r)),dO(this,bO,(t=vO(this,bO),t++,t))}},{key:"dequeue",value:function(){var e,t=vO(this,gO);if(t)return dO(this,gO,vO(this,gO).next),dO(this,bO,(e=vO(this,bO),e--,e)),t.value}},{key:"clear",value:function(){dO(this,gO,void 0),dO(this,mO,void 0),dO(this,bO,0)}},{key:"size",get:function(){return vO(this,bO)}},{key:iO,value:(0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=vO(this,gO);case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}]),e}();function kO(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");var t=new wO,r=0,n=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(n,a,i){var s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r++,s=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.apply(void 0,Vt(i)));case 1:case"end":return e.stop()}}),e)})))(),a(s),e.prev=3,e.next=6,s;case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:r--,t.size>0&&t.dequeue()();case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),a=function(a,i,s){t.enqueue(n.bind(void 0,a,i,s)),(0,fe.Z)((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve();case 2:r<e&&t.size>0&&t.dequeue()();case 3:case"end":return n.stop()}}),n)})))()},i=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise((function(t){a(e,t,r)}))};return Object.defineProperties(i,{activeCount:{get:function(){return r}},pendingCount:{get:function(){return t.size}},clearQueue:{value:function(){t.clear()}}}),i}function xO(e){return _O.apply(this,arguments)}function _O(){return _O=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=r.concurrency,a=void 0===n?Number.POSITIVE_INFINITY:n,i=kO(a),e.abrupt("return",Promise.all(t.map((function(e){return e&&"function"===typeof e.then?lO(e):lO("function"===typeof e?i((function(){return e()})):Promise.resolve(e))}))));case 4:case"end":return e.stop()}}),e)}))),_O.apply(this,arguments)}var EO,SO=_e("libp2p:transports"),AO=function(e){St(r,e);var t=Rt(r);function r(e){var n,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,pe.Z)(this,r),(a=t.call(this)).components=e,a.started=!1,a.transports=new Map,a.listeners=CP({component:"transport-manager",metric:"listeners",metrics:a.components.getMetrics()}),a.faultTolerance=null!==(n=i.faultTolerance)&&void 0!==n?n:EO.FATAL_ALL,a}return(0,he.Z)(r,[{key:"add",value:function(e){var t=e[Symbol.toStringTag];if(null==t)throw Ee(new Error("Transport must have a valid tag"),nP.ERR_INVALID_KEY);if(this.transports.has(t))throw Ee(new Error("There is already a transport with this tag"),nP.ERR_DUPLICATE_TRANSPORT);SO("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.components.getAddressManager().getListenAddrs(),e.next=3,this.listen(t);case 3:this.started=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=(0,v.Z)(this.listeners),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=16;break}a=(0,y.Z)(n.value,2),i=a[0],s=a[1],SO("closing listeners for %s",i);case 7:if(!(s.length>0)){e.next=14;break}if(null!=(o=s.pop())){e.next=11;break}return e.abrupt("continue",7);case 11:t.push(o.close()),e.next=7;break;case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return e.next=26,Promise.all(t);case 26:SO("all listeners closed"),u=(0,v.Z)(this.listeners.keys());try{for(u.s();!(c=u.n()).done;)l=c.value,this.listeners.set(l,[])}catch(Dy){u.e(Dy)}finally{u.f()}this.started=!1;case 30:case"end":return e.stop()}}),e,this,[[2,18,21,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.transportForMultiaddr(t))){e.next=3;break}throw Ee(new Error("No transport available for address ".concat(String(t))),nP.ERR_TRANSPORT_UNAVAILABLE);case 3:return e.prev=3,e.next=6,n.dial(t,(0,le.Z)((0,le.Z)({},r),{},{upgrader:this.components.getUpgrader()}));case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(3),null==e.t0.code&&(e.t0.code=nP.ERR_TRANSPORT_DIAL_FAILED),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAddrs",value:function(){var e,t=[],r=(0,v.Z)(this.listeners.values());try{for(r.s();!(e=r.n()).done;){var n,a=e.value,i=(0,v.Z)(a);try{for(i.s();!(n=i.n()).done;){var s=n.value;t=[].concat(Vt(t),Vt(s.getAddrs()))}}catch(Dy){i.e(Dy)}finally{i.f()}}}catch(Dy){r.e(Dy)}finally{r.f()}return t}},{key:"getTransports",value:function(){return Array.of.apply(Array,Vt(this.transports.values()))}},{key:"transportForMultiaddr",value:function(e){var t,r=(0,v.Z)(this.transports.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.filter([e]).length>0)return n}}catch(Dy){r.e(Dy)}finally{r.f()}}},{key:"listen",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,g=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!==t.length){e.next=3;break}return SO("no addresses were provided for listening, this node is dial only"),e.abrupt("return");case 3:r=[],n=(0,v.Z)(this.transports.entries()),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=24;break}i=(0,y.Z)(a.value,2),s=i[0],o=i[1],u=o.filter(t),c=[],l=(0,v.Z)(u);try{for(p=function(){var e=f.value;SO("creating listener for %s on %s",s,e);var t=o.createListener({upgrader:g.components.getUpgrader()}),r=g.listeners.get(s);null==r&&(r=[],g.listeners.set(s,r)),r.push(t),t.addEventListener("listening",(function(){g.dispatchEvent(new HS("listener:listening",{detail:t}))})),t.addEventListener("close",(function(){g.dispatchEvent(new HS("listener:close",{detail:t}))})),c.push(t.listen(e))},l.s();!(f=l.n()).done;)p()}catch(Dy){l.e(Dy)}finally{l.f()}if(0!==c.length){e.next=16;break}return r.push(s),e.abrupt("continue",22);case 16:return e.next=18,xO(c);case 18:if(h=e.sent,null!=h.find((function(e){return e.isFulfilled}))||this.faultTolerance===EO.NO_FATAL){e.next=22;break}throw Ee(new Error("Transport (".concat(s,") could not listen on any available address")),nP.ERR_NO_VALID_ADDRESSES);case 22:e.next=7;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(5),n.e(e.t0);case 29:return e.prev=29,n.f(),e.finish(29);case 32:if(r.length!==this.transports.size){e.next=37;break}if(d="no valid addresses were provided for transports [".concat(r.join(", "),"]"),this.faultTolerance!==EO.FATAL_ALL){e.next=36;break}throw Ee(new Error(d),nP.ERR_NO_VALID_ADDRESSES);case 36:SO("libp2p in dial mode only: ".concat(d));case 37:case"end":return e.stop()}}),e,this,[[5,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:SO("removing %s",t),n=(0,v.Z)(null!==(r=this.listeners.get(t))&&void 0!==r?r:[]),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=10;break}return i=a.value,e.next=8,i.close();case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:this.transports.delete(t),this.listeners.delete(t);case 20:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeAll",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=(0,v.Z)(this.transports.keys());try{for(r.s();!(n=r.n()).done;)a=n.value,t.push(this.remove(a))}catch(Dy){r.e(Dy)}finally{r.f()}return e.next=5,Promise.all(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(KS);!function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"}(EO||(EO={}));var IO=(0,fr.fromString)("\n");function CO(e){var t=new _a(e,IO);return GS.single(t).slice()}function ZO(e,t){e.push(CO(t).slice())}function RO(e,t){var r,n=new _a,a=(0,v.Z)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.append(CO(i))}}catch(Dy){a.e(Dy)}finally{a.f()}e.push(n.slice())}function TO(e,t){return DO.apply(this,arguments)}function DO(){return DO=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=1,n={},(0,hp.Z)(n,Symbol.asyncIterator,(function(){return i})),(0,hp.Z)(n,"next",function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.next(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),s=i=n,null!=(null===r||void 0===r?void 0:r.signal)&&(s=oA(i,r.signal)),o=function(e){a=e},e.next=7,kp(s,tA({onLength:o}),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bb(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:if(null!=(u=e.sent)){e.next=10;break}throw Ee(new Error("no buffer returned"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");case 10:if(u[u.length-1]===IO[0]){e.next=12;break}throw Ee(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");case 12:return e.abrupt("return",u.slice(0,-1));case 13:case"end":return e.stop()}}),e)}))),DO.apply(this,arguments)}function PO(e,t){return NO.apply(this,arguments)}function NO(){return(NO=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TO(t,r);case 2:return n=e.sent,e.abrupt("return",(0,gr.toString)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var OO=_e("libp2p:mss:select");function BO(e,t,r,n){return LO.apply(this,arguments)}function LO(){return LO=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c,l,f,p,h,d,y;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Array.isArray(r)?Vt(r):[r],i=iN(t),s=i.reader,o=i.writer,u=i.rest,c=i.stream,null!=(l=r.shift())){e.next=5;break}throw new Error("At least one protocol must be specified");case 5:return null!=n?(OO('select: write ["%s", "%s"]',n,l),RO(o,[(0,fr.fromString)(n),(0,fr.fromString)(l)])):(OO('select: write "%s"',l),ZO(o,(0,fr.fromString)(l))),e.next=8,PO(s,a);case 8:if(f=e.sent,OO('select: read "%s"',f),f!==n){e.next=15;break}return e.next=13,PO(s,a);case 13:f=e.sent,OO('select: read "%s"',f);case 15:if(f!==l){e.next=18;break}return u(),e.abrupt("return",{stream:c,protocol:l});case 18:p=(0,v.Z)(r),e.prev=19,p.s();case 21:if((h=p.n()).done){e.next=34;break}return d=h.value,OO('select: write "%s"',d),ZO(o,(0,fr.fromString)(d)),e.next=27,PO(s,a);case 27:if(y=e.sent,OO('select: read "%s" for "%s"',y,d),y!==d){e.next=32;break}return u(),e.abrupt("return",{stream:c,protocol:d});case 32:e.next=21;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(19),p.e(e.t0);case 39:return e.prev=39,p.f(),e.finish(39);case 42:throw u(),Ee(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL");case 44:case"end":return e.stop()}}),e,null,[[19,36,39,42]])}))),LO.apply(this,arguments)}var MO="/multistream/1.0.0",UO=_e("libp2p:mss:handle");function jO(e,t,r){return FO.apply(this,arguments)}function FO(){return FO=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Array.isArray(r)?r:[r],a=iN(t),i=a.writer,s=a.reader,o=a.rest,u=a.stream;case 2:return e.next=5,PO(s,n);case 5:if(c=e.sent,UO('read "%s"',c),c!==MO){e.next=11;break}return UO('respond with "%s" for "%s"',MO,c),ZO(i,(0,fr.fromString)(MO)),e.abrupt("continue",2);case 11:if(!r.includes(c)){e.next=16;break}return ZO(i,(0,fr.fromString)(c)),UO('respond with "%s" for "%s"',c,c),o(),e.abrupt("return",{stream:u,protocol:c});case 16:if("ls"!==c){e.next=20;break}return ZO(i,Dt(_a,Vt(r.map((function(e){return CO((0,fr.fromString)(e))}))))),UO('respond with "%s" for %s',r,c),e.abrupt("continue",2);case 20:ZO(i,(0,fr.fromString)("na")),UO('respond with "na" for "%s"',c),e.next=2;break;case 24:case"end":return e.stop()}}),e)}))),FO.apply(this,arguments)}var zO=_e("libp2p:mss:ls");function VO(e,t){return KO.apply(this,arguments)}function KO(){return KO=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=iN(t),a=n.reader,i=n.writer,s=n.rest,o=n.stream,zO('write "ls"'),ZO(i,(0,fr.fromString)("ls")),s(),e.next=6,TO(a,r);case 6:return u=e.sent,c=Kd([u]),l=[],e.next=11,kp(c,tA(),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t);case 4:return e.next=6,i.next();case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}o=s.value,l.push((0,gr.toString)(o.slice(0,-1)));case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),n=!0,a=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,i.return();case 23:if(e.prev=23,!n){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}());case 11:return f={stream:o,protocols:l},e.abrupt("return",f);case 13:case"end":return e.stop()}}),e)}))),KO.apply(this,arguments)}var qO=function(){function e(t){(0,pe.Z)(this,e),this.stream=t,this.shaken=!1}return(0,he.Z)(e,[{key:"_handshake",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shaken){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,BO(this.stream,MO,void 0,t);case 4:r=e.sent,n=r.stream,this.stream=n,this.shaken=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),HO=function(e){St(r,e);var t=Rt(r);function r(){return(0,pe.Z)(this,r),t.apply(this,arguments)}return(0,he.Z)(r,[{key:"select",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BO(this.stream,t,this.shaken?void 0:MO,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"ls",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._handshake(t);case 2:return e.next=4,VO(this.stream,t);case 4:return r=e.sent,n=r.stream,a=r.protocols,this.stream=n,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(qO),WO=function(e){St(r,e);var t=Rt(r);function r(){return(0,pe.Z)(this,r),t.apply(this,arguments)}return(0,he.Z)(r,[{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jO(this.stream,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(qO),GO=__webpack_require__(486),YO=Symbol.for("@libp2p/connection");var QO=_e("libp2p:connection"),JO=function(e){function t(e){(0,pe.Z)(this,t);var r=e.remoteAddr,n=e.remotePeer,a=e.newStream,i=e.close,s=e.getStreams,o=e.stat;this.id="".concat(parseInt(String(1e9*Math.random())).toString(36)).concat(Date.now()),this.remoteAddr=r,this.remotePeer=n,this.stat=(0,le.Z)((0,le.Z)({},o),{},{status:ZP}),this._newStream=a,this._close=i,this._getStreams=s,this.registry=new Map,this.tags=[],this._closing=!1}return(0,he.Z)(t,[{key:e,get:function(){return"Connection"}},{key:YO,get:function(){return!0}},{key:"streams",get:function(){return this._getStreams()}},{key:"newStream",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stat.status!==RP){e.next=2;break}throw Ee(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");case 2:if(this.stat.status!==TP){e.next=4;break}throw Ee(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");case 4:return Array.isArray(t)||(t=[t]),e.next=7,this._newStream(t,r);case 7:return n=e.sent,a=n.stream,i=n.protocol,this.addStream(a,{protocol:i,metadata:{}}),e.abrupt("return",{stream:a,protocol:i});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addStream",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.registry.set(e.id,{protocol:null!==(t=n.protocol)&&void 0!==t?t:"",metadata:null!==(r=n.metadata)&&void 0!==r?r:{}})}},{key:"removeStream",value:function(e){this.registry.delete(e)}},{key:"close",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stat.status!==TP&&!this._closing){e.next=2;break}return e.abrupt("return");case 2:this.stat.status=RP;try{this.streams.forEach((function(e){return e.close()}))}catch(Dy){QO.error(Dy)}return this._closing=!0,e.next=7,this._close();case 7:this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=TP;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(Symbol.toStringTag);var XO=_e("libp2p:upgrader"),$O=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this)).components=e,a.connectionEncryption=new Map,n.connectionEncryption.forEach((function(e){a.connectionEncryption.set(e.protocol,e)})),a.muxers=new Map,n.muxers.forEach((function(e){a.muxers.set(e.protocol,e)})),a}return(0,he.Z)(r,[{key:"upgradeInbound",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,v;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.components.getMetrics(),e.next=3,this.components.getConnectionGater().denyInboundConnection(t);case 3:if(!e.sent){e.next=5;break}throw Ee(new Error("The multiaddr connection is blocked by gater.acceptConnection"),nP.ERR_CONNECTION_INTERCEPTED);case 5:if(null!=c&&(l=GO(),o=l.setTarget,u=l.proxy,f="".concat((1e9*Math.random()).toString(36)).concat(Date.now()),o({toString:function(){return f}}),t=c.trackStream({stream:t,remotePeer:u})),XO("starting the inbound connection upgrade"),p=t,null==(h=this.components.getConnectionProtector())){e.next=14;break}return XO("protecting the inbound connection"),e.next=13,h.protect(t);case 13:p=e.sent;case 14:return e.prev=14,e.next=17,this._encryptInbound(p);case 17:return d=e.sent,r=d.conn,n=d.remotePeer,s=d.protocol,e.next=23,this.components.getConnectionGater().denyInboundEncryptedConnection(n,(0,le.Z)((0,le.Z)({},p),r));case 23:if(!e.sent){e.next=25;break}throw Ee(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),nP.ERR_CONNECTION_INTERCEPTED);case 25:if(!(this.muxers.size>0)){e.next=33;break}return e.next=28,this._multiplexInbound((0,le.Z)((0,le.Z)({},p),r),this.muxers);case 28:v=e.sent,i=v.muxerFactory,a=v.stream,e.next=34;break;case 33:a=r;case 34:e.next=42;break;case 36:return e.prev=36,e.t0=e.catch(14),XO.error("Failed to upgrade inbound connection",e.t0),e.next=41,t.close(e.t0);case 41:throw e.t0;case 42:return e.next=44,this.components.getConnectionGater().denyInboundUpgradedConnection(n,(0,le.Z)((0,le.Z)({},p),r));case 44:if(!e.sent){e.next=46;break}throw Ee(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),nP.ERR_CONNECTION_INTERCEPTED);case 46:return null!=c&&(c.updatePlaceholder(u,n),o(n)),XO("Successfully upgraded inbound connection"),e.abrupt("return",this._createConnection({cryptoProtocol:s,direction:"inbound",maConn:t,upgradedConn:a,muxerFactory:i,remotePeer:n}));case 49:case"end":return e.stop()}}),e,this,[[14,36]])})));return function(t){return e.apply(this,arguments)}}()},{key:"upgradeOutbound",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,v,y,g;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=t.remoteAddr.getPeerId())){e.next=3;break}throw Ee(new Error("outbound connection must have a peer id"),nP.ERR_INVALID_MULTIADDR);case 3:return n=$n(r),e.next=6,this.components.getConnectionGater().denyOutboundConnection(n,t);case 6:if(!e.sent){e.next=8;break}throw Ee(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),nP.ERR_CONNECTION_INTERCEPTED);case 8:if(null!=(f=this.components.getMetrics())&&(p=GO(),c=p.setTarget,l=p.proxy,h="".concat((1e9*Math.random()).toString(36)).concat(Date.now()),c({toB58String:function(){return h}}),t=f.trackStream({stream:t,remotePeer:l})),XO("Starting the outbound connection upgrade"),d=t,null==(v=this.components.getConnectionProtector())){e.next=17;break}return e.next=16,v.protect(t);case 16:d=e.sent;case 17:return e.prev=17,e.next=20,this._encryptOutbound(d,n);case 20:return y=e.sent,a=y.conn,i=y.remotePeer,o=y.protocol,e.next=26,this.components.getConnectionGater().denyOutboundEncryptedConnection(i,(0,le.Z)((0,le.Z)({},d),a));case 26:if(!e.sent){e.next=28;break}throw Ee(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),nP.ERR_CONNECTION_INTERCEPTED);case 28:if(!(this.muxers.size>0)){e.next=36;break}return e.next=31,this._multiplexOutbound((0,le.Z)((0,le.Z)({},d),a),this.muxers);case 31:g=e.sent,u=g.muxerFactory,s=g.stream,e.next=37;break;case 36:s=a;case 37:e.next=45;break;case 39:return e.prev=39,e.t0=e.catch(17),XO.error("Failed to upgrade outbound connection",e.t0),e.next=44,t.close(e.t0);case 44:throw e.t0;case 45:return e.next=47,this.components.getConnectionGater().denyOutboundUpgradedConnection(i,(0,le.Z)((0,le.Z)({},d),a));case 47:if(!e.sent){e.next=49;break}throw Ee(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),nP.ERR_CONNECTION_INTERCEPTED);case 49:return null!=f&&(f.updatePlaceholder(l,i),c(i)),XO("Successfully upgraded outbound connection"),e.abrupt("return",this._createConnection({cryptoProtocol:o,direction:"outbound",maConn:t,upgradedConn:s,muxerFactory:u,remotePeer:i}));case 52:case"end":return e.stop()}}),e,this,[[17,39]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createConnection",value:function(e){var t,r,n,a,i,s=this,o=e.cryptoProtocol,u=e.direction,c=e.maConn,l=e.upgradedConn,f=e.remotePeer,p=e.muxerFactory;null!=p&&(n=p.createStreamMuxer(this.components,{onIncomingStream:function(e){null!=i&&Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a,o,c,l;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new WO(e),n=s.components.getRegistrar().getProtocols(),t.next=4,r.handle(n);case 4:if(a=t.sent,o=a.stream,c=a.protocol,XO("%s: incoming stream opened on %s",u,c),null!=(l=s.components.getMetrics())&&l.trackStream({stream:o,remotePeer:f,protocol:c}),null!=i){t.next=12;break}return t.abrupt("return");case 12:i.addStream(e,{protocol:c}),s._onStream({connection:i,stream:(0,le.Z)((0,le.Z)({},e),o),protocol:c});case 14:case"end":return t.stop()}}),t)})))).catch((function(t){XO.error(t),null==e.timeline.close&&e.close()}))},onStreamEnd:function(e){var t;null===(t=i)||void 0===t||t.removeStream(e.id)}}),a=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,a,i,o,c,l,p,h=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:{},null!=n){e.next=3;break}throw Ee(new Error("Stream is not multiplexed"),nP.ERR_MUXER_UNAVAILABLE);case 3:return XO("%s: starting new stream on %s",u,t),a=n.newStream(),i=new HO(a),o=s.components.getMetrics(),e.prev=7,e.next=10,i.select(t,r);case 10:return c=e.sent,l=c.stream,p=c.protocol,null!=o&&(l=o.trackStream({stream:l,remotePeer:f,protocol:p})),e.abrupt("return",{stream:(0,le.Z)((0,le.Z)({},a),l),protocol:p});case 17:if(e.prev=17,e.t0=e.catch(7),XO.error("could not create new stream",e.t0),null==a.timeline.close&&a.close(),null==e.t0.code){e.next=23;break}throw e.t0;case 23:throw Ee(e.t0,nP.ERR_UNSUPPORTED_PROTOCOL);case 24:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}(),kp(l,n,l).catch(XO.error));var h=c.timeline;c.timeline=new Proxy(h,{set:function(){return null!=i&&"close"===(arguments.length<=1?void 0:arguments[1])&&null!=(arguments.length<=2?void 0:arguments[2])&&null==h.close&&(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"OPEN"!==i.stat.status){e.next=4;break}return e.next=4,i.close();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),XO.error(e.t0);case 9:return e.prev=9,s.dispatchEvent(new HS("connectionEnd",{detail:i})),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))().catch((function(e){XO.error(e)})),Reflect.set.apply(Reflect,arguments)}}),c.timeline.upgraded=Date.now();var d,v=function(){throw Ee(new Error("connection is not multiplexed"),nP.ERR_CONNECTION_NOT_MULTIPLEXED)};return d={remoteAddr:c.remoteAddr,remotePeer:f,stat:{status:"OPEN",direction:u,timeline:c.timeline,multiplexer:null===(t=n)||void 0===t?void 0:t.protocol,encryption:o},newStream:null!==(r=a)&&void 0!==r?r:v,getStreams:function(){return null!=n?n.streams:v()},close:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.close();case 2:if(null==n){e.next=5;break}return e.next=5,Promise.all(n.streams.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},i=new JO(d),this.dispatchEvent(new HS("connection",{detail:i})),i}},{key:"_onStream",value:function(e){var t=e.connection,r=e.stream,n=e.protocol;this.components.getRegistrar().getHandler(n)({connection:t,stream:r,protocol:n})}},{key:"_encryptInbound",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new WO(t),n=Array.from(this.connectionEncryption.keys()),XO("handling inbound crypto protocol selection",n),e.prev=3,e.next=6,r.handle(n);case 6:if(a=e.sent,i=a.stream,s=a.protocol,null!=(o=this.connectionEncryption.get(s))){e.next=12;break}throw new Error("no crypto module found for ".concat(s));case 12:return XO("encrypting inbound connection..."),e.t0=le.Z,e.t1=le.Z,e.t2={},e.next=18,o.secureInbound(this.components.getPeerId(),i);case 18:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={protocol:s},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 25:throw e.prev=25,e.t7=e.catch(3),Ee(e.t7,nP.ERR_ENCRYPTION_FAILED);case 28:case"end":return e.stop()}}),e,this,[[3,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_encryptOutbound",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new HO(t),a=Array.from(this.connectionEncryption.keys()),XO("selecting outbound crypto protocol",a),e.prev=3,e.next=6,n.select(a);case 6:if(i=e.sent,s=i.stream,o=i.protocol,null!=(u=this.connectionEncryption.get(o))){e.next=12;break}throw new Error("no crypto module found for ".concat(o));case 12:return XO("encrypting outbound connection to %p",r),e.t0=le.Z,e.t1=le.Z,e.t2={},e.next=18,u.secureOutbound(this.components.getPeerId(),s,r);case 18:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={protocol:o},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 25:throw e.prev=25,e.t7=e.catch(3),Ee(e.t7,nP.ERR_ENCRYPTION_FAILED);case 28:case"end":return e.stop()}}),e,this,[[3,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_multiplexOutbound",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new HO(t),a=Array.from(r.keys()),XO("outbound selecting muxer %s",a),e.prev=3,e.next=6,n.select(a);case 6:return i=e.sent,s=i.stream,o=i.protocol,XO("%s selected as muxer protocol",o),u=r.get(o),e.abrupt("return",{stream:s,muxerFactory:u});case 14:throw e.prev=14,e.t0=e.catch(3),XO.error("error multiplexing outbound stream",e.t0),Ee(e.t0,nP.ERR_MUXER_UNAVAILABLE);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_multiplexInbound",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new WO(t),a=Array.from(r.keys()),XO("inbound handling muxers %s",a),e.prev=3,e.next=6,n.handle(a);case 6:return i=e.sent,s=i.stream,o=i.protocol,u=r.get(o),e.abrupt("return",{stream:s,muxerFactory:u});case 13:throw e.prev=13,e.t0=e.catch(3),XO.error("error multiplexing inbound stream",e.t0),Ee(e.t0,nP.ERR_MUXER_UNAVAILABLE);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(KS),eB=_e("libp2p:registrar");function tB(e,t){var r,n=(0,v.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(t.includes(a))return!0}}catch(Dy){n.e(Dy)}finally{n.f()}return!1}var rB,nB=function(){function e(t){(0,pe.Z)(this,e),this.topologies=new Map,this.handlers=new Map,this.components=t,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onDisconnect),this.components.getPeerStore().addEventListener("change:protocols",this._onProtocolChange)}return(0,he.Z)(e,[{key:"getProtocols",value:function(){var e,t=new Set,r=(0,v.Z)(this.topologies.values());try{for(r.s();!(e=r.n()).done;){e.value.protocols.forEach((function(e){return t.add(e)}))}}catch(Dy){r.e(Dy)}finally{r.f()}var n,a=(0,v.Z)(this.handlers.keys());try{for(a.s();!(n=a.n()).done;){var i=n.value;t.add(i)}}catch(Dy){a.e(Dy)}finally{a.f()}return Array.from(t).sort()}},{key:"getHandler",value:function(e){var t=this.handlers.get(e);if(null==t)throw new Error("No handler registered for protocol ".concat(e));return t}},{key:"getTopologies",value:function(e){var t,r=[],n=(0,v.Z)(this.topologies.values());try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.topology;a.protocols.includes(e)&&r.push(i)}}catch(Dy){n.e(Dy)}finally{n.f()}return r}},{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(t)?t:[t],a=(0,v.Z)(n),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=11;break}if(s=i.value,!this.handlers.has(s)){e.next=8;break}throw Ee(new Error("Handler already registered for protocol ".concat(s)),nP.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);case 8:this.handlers.set(s,r);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.e(e.t0);case 16:return e.prev=16,a.f(),e.finish(16);case 19:return e.next=21,this.components.getPeerStore().protoBook.add(this.components.getPeerId(),n);case 21:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unhandle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Array.isArray(t)?t:[t]).forEach((function(e){n.handlers.delete(e)})),e.next=4,this.components.getPeerStore().protoBook.remove(this.components.getPeerId(),r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(a=r)&&Boolean(a[LS])){e.next=3;break}throw eB.error("topology must be an instance of interfaces/topology"),Ee(new Error("topology must be an instance of interfaces/topology"),nP.ERR_INVALID_PARAMETERS);case 3:return n="".concat((1e9*Math.random()).toString(36)).concat(Date.now()),this.topologies.set(n,{topology:r,protocols:Array.isArray(t)?t:[t]}),e.next=7,r.setRegistrar(this);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}var a}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unregister",value:function(e){this.topologies.delete(e)}},{key:"_onDisconnect",value:function(e){var t=this,r=e.detail;this.components.getPeerStore().protoBook.get(r.remotePeer).then((function(e){var n,a=(0,v.Z)(t.topologies.values());try{for(a.s();!(n=a.n()).done;){var i=n.value,s=i.topology;tB(e,i.protocols)&&s.onDisconnect(r.remotePeer)}}catch(Dy){a.e(Dy)}finally{a.f()}})).catch((function(e){eB.error(e)}))}},{key:"_onProtocolChange",value:function(e){var t,r=e.detail,n=r.peerId,a=r.protocols,i=r.oldProtocols,s=i.filter((function(e){return!a.includes(e)})),o=a.filter((function(e){return!i.includes(e)})),u=(0,v.Z)(this.topologies.values());try{for(u.s();!(t=u.n()).done;){var c=t.value,l=c.topology;tB(s,c.protocols)&&l.onDisconnect(n)}}catch(Dy){u.e(Dy)}finally{u.f()}var f,p=(0,v.Z)(this.topologies.values());try{for(p.s();!(f=p.n()).done;){var h=f.value,d=h.topology;if(tB(o,h.protocols)){var y=this.components.getConnectionManager().getConnections(n)[0];if(null==y)continue;d.onConnect(n,y)}}}catch(Dy){p.e(Dy)}finally{p.f()}}}]),e}();!function(e){e.codec=function(){return yi({5:{name:"protocolVersion",codec:Si,optional:!0},6:{name:"agentVersion",codec:Si,optional:!0},1:{name:"publicKey",codec:Ja,optional:!0},2:{name:"listenAddrs",codec:Ja,repeats:!0},4:{name:"observedAddr",codec:Ja,optional:!0},3:{name:"protocols",codec:Si,repeats:!0},8:{name:"signedPeerRecord",codec:Ja,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(rB||(rB={}));var aB,iB,sB="0.0.0",oB="js-libp2p/".concat(sB),uB=_e("libp2p:identify"),cB=6e4,lB=8192,fB=function(){function e(t,r){var n=this;(0,pe.Z)(this,e),this.components=t,this.started=!1,this.init=r,this.handleMessage=this.handleMessage.bind(this),this.identifyProtocolStr="/".concat(r.protocolPrefix,"/").concat("id","/").concat("1.0.0"),this.identifyPushProtocolStr="/".concat(r.protocolPrefix,"/").concat("id/push","/").concat("1.0.0"),this.host=(0,le.Z)({protocolVersion:"".concat(r.protocolPrefix,"/").concat("0.1.0")},r.host),this.components.getConnectionManager().addEventListener("peer:connect",(function(e){var t=e.detail;n.identify(t).catch(uB.error)})),this.components.getPeerStore().addEventListener("change:multiaddrs",(function(e){var t=e.detail.peerId;n.components.getPeerId().equals(t)&&n.pushToPeerStore().catch((function(e){return uB.error(e)}))})),this.components.getPeerStore().addEventListener("change:protocols",(function(e){var t=e.detail.peerId;n.components.getPeerId().equals(t)&&n.pushToPeerStore().catch((function(e){return uB.error(e)}))}))}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"AgentVersion",(0,fr.fromString)(this.host.agentVersion));case 4:return e.next=6,this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"ProtocolVersion",(0,fr.fromString)(this.host.protocolVersion));case 6:return e.next=8,this.components.getRegistrar().handle([this.identifyProtocolStr,this.identifyPushProtocolStr],(function(e){var r;null===(r=t.handleMessage(e))||void 0===r||r.catch((function(e){uB.error(e)}))}));case 8:this.started=!0;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(this.identifyProtocolStr);case 2:return e.next=4,this.components.getRegistrar().unhandle(this.identifyPushProtocolStr);case 4:this.started=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getPeerStore().addressBook.getRawEnvelope(this.components.getPeerId());case 2:return r=e.sent,n=this.components.getAddressManager().getAddresses().map((function(e){return e.bytes})),e.next=6,this.components.getPeerStore().protoBook.get(this.components.getPeerId());case 6:return a=e.sent,i=t.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var i,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new _r.TimeoutController(null!==(i=s.init.timeout)&&void 0!==i?i:cB),e.prev=1,e.next=4,t.newStream([s.identifyPushProtocolStr],{signal:o.signal});case 4:return c=e.sent,u=c.stream,l=cA(u,o.signal),e.next=9,kp([rB.encode({listenAddrs:n,signedPeerRecord:r,protocols:a})],GS(),l,zc);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),uB.error("could not push identify update to peer",e.t0);case 14:return e.prev=14,null!=u&&u.close(),o.clear(),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[1,11,14,18]])})));return function(t){return e.apply(this,arguments)}}()),e.next=10,Promise.all(i);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pushToPeerStore",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:t=[],r=(0,v.Z)(this.components.getConnectionManager().getConnections()),e.prev=4,r.s();case 6:if((n=r.n()).done){e.next=17;break}return a=n.value,i=a.remotePeer,e.next=11,this.components.getPeerStore().get(i);case 11:if(e.sent.protocols.includes(this.identifyPushProtocolStr)){e.next=14;break}return e.abrupt("continue",15);case 14:t.push(a);case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.next=27,this.push(t);case 27:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"_identify",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=3,t.newStream([this.identifyProtocolStr],r);case 3:return n=e.sent,a=n.stream,i=a,null==(o=r.signal)&&(s=new _r.TimeoutController(null!==(u=this.init.timeout)&&void 0!==u?u:cB),o=s.signal),i=cA(a,o),e.prev=9,e.next=12,kp([],i,tA({maxDataLength:null!==(c=this.init.maxIdentifyMessageSize)&&void 0!==c?c:lB}),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bb(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:if(null!=(l=e.sent)){e.next=15;break}throw Ee(new Error("No data could be retrieved"),nP.ERR_CONNECTION_ENDED);case 15:return e.prev=15,e.abrupt("return",rB.decode(l));case 19:throw e.prev=19,e.t0=e.catch(15),Ee(e.t0,nP.ERR_INVALID_MESSAGE);case 22:return e.prev=22,null!=s&&s.clear(),a.close(),e.finish(22);case 26:case"end":return e.stop()}}),e,this,[[9,,22,26],[15,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"identify",value:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d,v=arguments;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:{},t.next=3,this._identify(r,n);case 3:if(a=t.sent,i=a.publicKey,s=a.listenAddrs,o=a.protocols,u=a.observedAddr,c=a.signedPeerRecord,l=a.agentVersion,f=a.protocolVersion,null!=i){t.next=7;break}throw Ee(new Error("public key was missing from identify message"),nP.ERR_MISSING_PUBLIC_KEY);case 7:return t.next=9,ta(i);case 9:if(p=t.sent,r.remotePeer.equals(p)){t.next=12;break}throw Ee(new Error("identified peer does not match the expected peer"),nP.ERR_INVALID_PEER);case 12:if(!this.components.getPeerId().equals(p)){t.next=14;break}throw Ee(new Error("identified peer is our own peer id?"),nP.ERR_INVALID_PEER);case 14:if(h=e.getCleanMultiaddr(u),null==c){t.next=43;break}return uB("received signed peer record from %p",p),t.prev=17,t.next=20,DS.openAndCertify(c,BS.DOMAIN);case 20:if((d=t.sent).peerId.equals(p)){t.next=23;break}throw Ee(new Error("identified peer does not match the expected peer"),nP.ERR_INVALID_PEER);case 23:return t.next=25,this.components.getPeerStore().addressBook.consumePeerRecord(d);case 25:if(!t.sent){t.next=36;break}return t.next=28,this.components.getPeerStore().protoBook.set(p,o);case 28:if(null==l){t.next=31;break}return t.next=31,this.components.getPeerStore().metadataBook.setValue(p,"AgentVersion",(0,fr.fromString)(l));case 31:if(null==f){t.next=34;break}return t.next=34,this.components.getPeerStore().metadataBook.setValue(p,"ProtocolVersion",(0,fr.fromString)(f));case 34:return uB("identify completed for peer %p and protocols %o",p,o),t.abrupt("return");case 36:t.next=41;break;case 38:t.prev=38,t.t0=t.catch(17),uB("received invalid envelope, discard it and fallback to listenAddrs is available",t.t0);case 41:t.next=44;break;case 43:uB("no signed peer record received from %p",p);case 44:return uB("falling back to legacy addresses from %p",p),t.prev=45,t.next=48,this.components.getPeerStore().addressBook.set(p,s.map((function(e){return new Lf(e)})));case 48:t.next=53;break;case 50:t.prev=50,t.t1=t.catch(45),uB.error("received invalid addrs",t.t1);case 53:return t.next=55,this.components.getPeerStore().protoBook.set(p,o);case 55:if(null==l){t.next=58;break}return t.next=58,this.components.getPeerStore().metadataBook.setValue(p,"AgentVersion",(0,fr.fromString)(l));case 58:if(null==f){t.next=61;break}return t.next=61,this.components.getPeerStore().metadataBook.setValue(p,"ProtocolVersion",(0,fr.fromString)(f));case 61:uB("identify completed for peer %p and protocols %o",p,o),uB("received observed address of %s",null===h||void 0===h?void 0:h.toString());case 63:case"end":return t.stop()}}),t,this,[[17,38],[45,50]])})));return function(e){return t.apply(this,arguments)}}()},{key:"handleMessage",value:function(e){var t=e.protocol;switch(t){case this.identifyProtocolStr:return this._handleIdentify(e);case this.identifyPushProtocolStr:return this._handlePush(e);default:uB.error("cannot handle unknown protocol %s",t)}}},{key:"_handleIdentify",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,a=t.stream,i=new _r.TimeoutController(null!==(r=this.init.timeout)&&void 0!==r?r:cB),e.prev=2,o=null!==(s=this.components.getPeerId().publicKey)&&void 0!==s?s:new Uint8Array(0),e.next=6,this.components.getPeerStore().get(this.components.getPeerId());case 6:if(u=e.sent,c=this.components.getAddressManager().getAddresses().map((function(e){return e.decapsulateCode(ff("p2p").code)})),l=u.peerRecordEnvelope,!(c.length>0&&null==l)){e.next=17;break}return f=new BS({peerId:this.components.getPeerId(),multiaddrs:c}),e.next=13,DS.seal(f,this.components.getPeerId());case 13:return p=e.sent,e.next=16,this.components.getPeerStore().addressBook.consumePeerRecord(p);case 16:l=p.marshal();case 17:return h=rB.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:o,listenAddrs:c.map((function(e){return e.bytes})),signedPeerRecord:l,observedAddr:n.remoteAddr.bytes,protocols:u.protocols}),d=cA(a,i.signal),e.next=21,kp([h],GS(),d,zc);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),uB.error("could not respond to identify request",e.t0);case 26:return e.prev=26,a.close(),i.clear(),e.finish(26);case 30:case"end":return e.stop()}}),e,this,[[2,23,26,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_handlePush",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,a=t.stream,i=new _r.TimeoutController(null!==(r=this.init.timeout)&&void 0!==r?r:cB),e.prev=2,u=cA(a,i.signal),e.next=6,kp([],u,tA({maxDataLength:null!==(o=this.init.maxIdentifyMessageSize)&&void 0!==o?o:lB}),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bb(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:null!=(c=e.sent)&&(s=rB.decode(c)),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",uB.error("received invalid message",e.t0));case 13:return e.prev=13,a.close(),i.clear(),e.finish(13);case 17:if(null!=s){e.next=19;break}return e.abrupt("return",uB.error("received invalid message"));case 19:if(l=n.remotePeer,!this.components.getPeerId().equals(l)){e.next=23;break}return uB("received push from ourselves?"),e.abrupt("return");case 23:if(uB("received push from %p",l),null==s.signedPeerRecord){e.next=47;break}return uB("received signedPeerRecord in push"),e.prev=26,e.next=29,DS.openAndCertify(s.signedPeerRecord,BS.DOMAIN);case 29:return f=e.sent,e.next=32,this.components.getPeerStore().addressBook.consumePeerRecord(f);case 32:if(!e.sent){e.next=39;break}return uB("consumed signedPeerRecord sent in push"),e.next=36,this.components.getPeerStore().protoBook.set(l,s.protocols);case 36:return e.abrupt("return");case 39:uB("failed to consume signedPeerRecord sent in push");case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(26),uB("received invalid envelope, discard it and fallback to listenAddrs is available",e.t1);case 45:e.next=48;break;case 47:uB("did not receive signedPeerRecord in push");case 48:return e.prev=48,e.next=51,this.components.getPeerStore().addressBook.set(l,s.listenAddrs.map((function(e){return new Lf(e)})));case 51:e.next=56;break;case 53:e.prev=53,e.t2=e.catch(48),uB.error("received invalid addrs",e.t2);case 56:return e.prev=56,e.next=59,this.components.getPeerStore().protoBook.set(l,s.protocols);case 59:e.next=64;break;case 61:e.prev=61,e.t3=e.catch(56),uB.error("received invalid protocols",e.t3);case 64:uB("handled push from %p",l);case 65:case"end":return e.stop()}}),e,this,[[2,10,13,17],[26,42],[48,53],[56,61]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getCleanMultiaddr",value:function(e){if(null!=e&&e.length>0)try{return new Lf(e)}catch(t){}}}]),e}();!function(e){e.codec=function(){return yi({1:{name:"identifier",codec:Si}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(aB||(aB={})),function(e){var t;!function(e){e.OK="OK",e.NOT_FOUND="NOT_FOUND",e.ERROR="ERROR"}(e.StatusCode||(e.StatusCode={})),function(e){e[e.OK=0]="OK",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.ERROR=2]="ERROR"}(t||(t={})),function(e){e.codec=function(){return $a(t)}}(e.StatusCode||(e.StatusCode={})),e.codec=function(){return yi({1:{name:"status",codec:e.StatusCode.codec()},2:{name:"data",codec:Ja}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(iB||(iB={}));var pB=_e("libp2p:fetch"),hB=function(){function e(t,r){var n;(0,pe.Z)(this,e),this.started=!1,this.components=t,this.protocol="/".concat(null!==(n=r.protocolPrefix)&&void 0!==n?n:"libp2p","/").concat("fetch","/").concat("0.0.1"),this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this)}return(0,he.Z)(e,[{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().handle(this.protocol,(function(e){t.handleMessage(e).catch((function(e){pB.error(e)}))}));case 2:this.started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(this.protocol);case 2:this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"fetch",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>2&&void 0!==f[2]?f[2]:{},pB("dialing %s to %p",this.protocol,t),e.next=4,this.components.getConnectionManager().openConnection(t,n);case 4:return a=e.sent,e.next=7,a.newStream([this.protocol],n);case 7:return i=e.sent,s=i.stream,o=s,null!=n.signal&&(o=cA(s,n.signal)),(u=iN(o)).write(GS.single(aB.encode({identifier:r})).slice()),e.t0=iB,e.next=16,tA.fromReader(u.reader).next();case 16:e.t1=e.sent.value.slice(),c=e.t0.decode.call(e.t0,e.t1),e.t2=c.status,e.next=e.t2===iB.StatusCode.OK?21:e.t2===iB.StatusCode.NOT_FOUND?22:e.t2===iB.StatusCode.ERROR?23:25;break;case 21:return e.abrupt("return",c.data);case 22:return e.abrupt("return",null);case 23:throw l=(new TextDecoder).decode(c.data),Ee(new Error("Error in fetch protocol response: "+l),nP.ERR_INVALID_PARAMETERS);case 25:throw Ee(new Error("Unknown response status"),nP.ERR_INVALID_MESSAGE);case 26:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stream,n=iN(r),e.t0=aB,e.next=5,tA.fromReader(n.reader).next();case 5:if(e.t1=e.sent.value.slice(),a=e.t0.decode.call(e.t0,e.t1),null==(s=this._getLookupFunction(a.identifier))){e.next=15;break}return e.next=11,s(a.identifier);case 11:o=e.sent,i=null!=o?{status:iB.StatusCode.OK,data:o}:{status:iB.StatusCode.NOT_FOUND,data:new Uint8Array(0)},e.next=17;break;case 15:u=(new TextEncoder).encode("No lookup function registered for key: "+a.identifier),i={status:iB.StatusCode.ERROR,data:u};case 17:n.write(GS.single(iB.encode(i)).slice());case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getLookupFunction",value:function(e){var t,r=(0,v.Z)(this.lookupFunctions.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e.startsWith(n))return this.lookupFunctions.get(n)}}catch(Dy){r.e(Dy)}finally{r.f()}}},{key:"registerLookupFunction",value:function(e,t){if(this.lookupFunctions.has(e))throw Ee(new Error("Fetch protocol handler for key prefix '"+e+"' already registered"),nP.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(e,t)}},{key:"unregisterLookupFunction",value:function(e,t){if(null!=t&&this.lookupFunctions.get(e)!==t)return;this.lookupFunctions.delete(e)}}]),e}(),dB=_e("libp2p:ping"),vB=function(){function e(t,r){(0,pe.Z)(this,e),this.components=t,this.started=!1,this.protocol="/".concat(r.protocolPrefix,"/").concat("ping","/").concat("1.0.0")}return(0,he.Z)(e,[{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().handle(this.protocol,this.handleMessage);case 2:this.started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(this.protocol);case 2:this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"handleMessage",value:function(e){var t=e.stream;kp(t,t).catch((function(e){dB.error(e)}))}},{key:"ping",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:{},dB("dialing %s to %p",this.protocol,t),e.next=4,this.components.getConnectionManager().openConnection(t,r);case 4:return n=e.sent,e.next=7,n.newStream([this.protocol],r);case 7:return a=e.sent,i=a.stream,s=Date.now(),o=Ui(32),u=i,null!=r.signal&&(u=cA(i,r.signal)),e.prev=13,e.next=16,kp([o],u,function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bb(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:if(c=e.sent,l=Date.now(),null!=c&&(0,Kn.equals)(o,c)){e.next=20;break}throw Ee(new Error("Received wrong ping ack"),nP.ERR_WRONG_PING_ACK);case 20:return e.abrupt("return",l-s);case 21:return e.prev=21,i.close(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[13,,21,24]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function yB(){return gB.apply(this,arguments)}function gB(){return(gB=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not supported in browsers");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mB=__webpack_require__(3227);function bB(e){var t,r=e.nodeAddress().address;return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t=r)||/^::1$/.test(t)}var wB=_e("libp2p:nat"),kB=7200;function xB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65535;return Math.floor(Math.random()*(t-e+1)+e)}var _B=function(){function e(t,r){var n,a,i;if((0,pe.Z)(this,e),this.components=t,this.started=!1,this.enabled=r.enabled,this.externalAddress=r.externalAddress,this.localAddress=r.localAddress,this.description=null!==(n=r.description)&&void 0!==n?n:"".concat("libp2p","@").concat(sB," ").concat(this.components.getPeerId().toString()),this.ttl=null!==(a=r.ttl)&&void 0!==a?a:kB,this.keepAlive=null===(i=r.keepAlive)||void 0===i||i,this.gateway=r.gateway,this.ttl<kB)throw Ee(new Error("NatManager ttl should be at least ".concat(kB," seconds")),nP.ERR_INVALID_PARAMETERS)}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){}},{key:"afterStart",value:function(){mB.isBrowser||!this.enabled||this.started||(this.started=!0,this._start().catch((function(e){wB.error(e)})))}},{key:"_start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.components.getTransportManager().getAddrs(),r=(0,v.Z)(t),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=33;break}if(i=n.value,s=i.toOptions(),o=s.family,u=s.host,c=s.port,l=s.transport,i.isThinWaistAddress()&&"tcp"===l){e.next=9;break}return e.abrupt("continue",31);case 9:if(!bB(i)){e.next=11;break}return e.abrupt("continue",31);case 11:if(4===o){e.next=13;break}return e.abrupt("continue",31);case 13:return e.next=15,this._getClient();case 15:if(f=e.sent,null===(a=this.externalAddress)||void 0===a){e.next=20;break}e.t0=a,e.next=23;break;case 20:return e.next=22,f.externalIp();case 22:e.t0=e.sent;case 23:if(p=e.t0,!BP(p)){e.next=26;break}throw new Error("".concat(p," is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT"));case 26:return h=xB(),wB("opening uPnP connection from ".concat(p,":").concat(h," to ").concat(u,":").concat(c)),e.next=30,f.map({publicPort:h,localPort:c,localAddress:this.localAddress,protocol:"TCP"===l.toUpperCase()?"TCP":"UDP"});case 30:this.components.getAddressManager().addObservedAddr(Lf.fromNodeAddress({family:4,address:p,port:h},l));case 31:e.next=4;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(2),r.e(e.t1);case 38:return e.prev=38,r.f(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[2,35,38,41]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getClient",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.client){e.next=2;break}return e.abrupt("return",this.client);case 2:return e.next=4,yB({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway});case 4:return this.client=e.sent,e.abrupt("return",this.client);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mB.isBrowser&&null!=this.client){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.client.close();case 5:this.client=void 0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),wB.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),EB=_e("libp2p:peer-record-updater"),SB=function(){function e(t){(0,pe.Z)(this,e),this.components=t,this.started=!1,this.update=this.update.bind(this)}return(0,he.Z)(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0,this.components.getTransportManager().addEventListener("listener:listening",this.update),this.components.getTransportManager().addEventListener("listener:close",this.update),this.components.getAddressManager().addEventListener("change:addresses",this.update);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,this.components.getTransportManager().removeEventListener("listener:listening",this.update),this.components.getTransportManager().removeEventListener("listener:close",this.update),this.components.getAddressManager().removeEventListener("change:addresses",this.update);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=this;Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function t(){var r,n;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new BS({peerId:e.components.getPeerId(),multiaddrs:e.components.getAddressManager().getAddresses().map((function(e){return e.decapsulateCode(ff("p2p").code)}))}),t.next=3,DS.seal(r,e.components.getPeerId());case 3:return n=t.sent,t.next=6,e.components.getPeerStore().addressBook.consumePeerRecord(n);case 6:case"end":return t.stop()}}),t)})))).catch((function(e){EB.error("Could not update self peer record: %o",e)}))}}]),e}(),AB=function(){function e(t){(0,pe.Z)(this,e),this.dht=t}return(0,he.Z)(e,[{key:"findPeer",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>1&&void 0!==c[1]?c[1]:{},n=!1,a=!1,e.prev=3,s=hr(this.dht.findPeer(t,r));case 5:return e.next=7,s.next();case 7:if(!(n=!(o=e.sent).done)){e.next=14;break}if("FINAL_PEER"!==(u=o.value).name){e.next=11;break}return e.abrupt("return",u.peer);case 11:n=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:throw Ee(new Error(rP.NOT_FOUND),nP.ERR_NOT_FOUND);case 31:case"end":return e.stop()}}),e,this,[[3,16,20,30],[21,,25,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(t.dht.getClosestPeers(e,r));case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}if("PEER_RESPONSE"!==(c=u.value).name){n.next=10;break}return n.delegateYield(ia(hr(c.closer),pr),"t0",10);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t1=n.catch(2),i=!0,s=n.t1;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}}]),e}(),IB="ERR_INVALID_PARAMETERS",CB="ERR_NOT_FOUND",ZB=_e("libp2p:peer-store:address-book"),RB="change:multiaddrs";function TB(){return DB.apply(this,arguments)}function DB(){return(DB=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var PB=function(){function e(t,r,n){(0,pe.Z)(this,e),this.dispatchEvent=t,this.store=r,this.addressFilter=null!==n&&void 0!==n?n:TB}return(0,he.Z)(e,[{key:"consumePeerRecord",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ZB.trace("consumePeerRecord await write lock"),e.next=3,this.store.lock.writeLock();case 3:r=e.sent,ZB.trace("consumePeerRecord got write lock"),e.prev=5,e.prev=6,s=BS.createFromProtobuf(t.payload),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(6),ZB.error("invalid peer record received"),e.abrupt("return",!1);case 14:if(n=s.peerId,o=s.multiaddrs,n.equals(t.peerId)){e.next=19;break}return ZB("signing key does not match PeerId in the PeerRecord"),e.abrupt("return",!1);case 19:if(null!=o&&0!==o.length){e.next=21;break}return e.abrupt("return",!1);case 21:return e.next=23,this.store.has(n);case 23:if(!e.sent){e.next=35;break}return e.next=26,this.store.load(n);case 26:if(null==(a=e.sent).peerRecordEnvelope){e.next=35;break}return e.next=30,DS.createFromProtobuf(a.peerRecordEnvelope);case 30:if(u=e.sent,!((c=BS.createFromProtobuf(u.payload)).seqNumber>=s.seqNumber)){e.next=35;break}return ZB("sequence number was lower or equal to existing sequence number - stored: %d received: %d",c.seqNumber,s.seqNumber),e.abrupt("return",!1);case 35:return e.next=37,NB(n,o,this.addressFilter,!0);case 37:return l=e.sent,e.next=40,this.store.patchOrCreate(n,{addresses:l,peerRecordEnvelope:t.marshal()});case 40:i=e.sent,ZB("stored provided peer record for %p",s.peerId);case 42:return e.prev=42,ZB.trace("consumePeerRecord release write lock"),r(),e.finish(42);case 46:return this.dispatchEvent(new HS(RB,{detail:{peerId:n,multiaddrs:i.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==a?[]:a.addresses.map((function(e){return e.multiaddr}))}})),e.abrupt("return",!0);case 48:case"end":return e.stop()}}),e,this,[[5,,42,46],[6,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getRawEnvelope",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ZB.trace("getRawEnvelope await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,ZB.trace("getRawEnvelope got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return n=e.sent,e.abrupt("return",n.peerRecordEnvelope);case 12:if(e.prev=12,e.t0=e.catch(5),e.t0.code===CB){e.next=16;break}throw e.t0;case 16:return e.prev=16,ZB.trace("getRawEnvelope release read lock"),r(),e.finish(16);case 20:case"end":return e.stop()}}),e,this,[[5,12,16,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPeerRecord",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRawEnvelope(t);case 2:if(null!=(r=e.sent)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,DS.createFromProtobuf(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),ZB.trace("get wait for read lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,ZB.trace("get got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.addresses);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===CB){e.next=17;break}throw e.t0;case 17:return e.prev=17,ZB.trace("get release read lock"),r(),e.finish(17);case 21:return e.abrupt("return",[]);case 22:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xn(t),Array.isArray(r)){e.next=4;break}throw ZB.error("multiaddrs must be an array of Multiaddrs"),Ee(new Error("multiaddrs must be an array of Multiaddrs"),IB);case 4:return ZB.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,ZB.trace("set got write lock"),a=!1,e.prev=10,e.next=13,NB(t,r,this.addressFilter);case 13:if(0!==(o=e.sent).length){e.next=16;break}return e.abrupt("return");case 16:return e.prev=16,e.next=19,this.store.load(t);case 19:if(i=e.sent,a=!0,new Set([].concat(Vt(o.map((function(e){return e.multiaddr.toString()}))),Vt(i.addresses.map((function(e){return e.multiaddr.toString()}))))).size!==i.addresses.length||o.length!==i.addresses.length){e.next=23;break}return e.abrupt("return");case 23:e.next=29;break;case 25:if(e.prev=25,e.t0=e.catch(16),e.t0.code===CB){e.next=29;break}throw e.t0;case 29:return e.next=31,this.store.patchOrCreate(t,{addresses:o});case 31:s=e.sent,ZB("set multiaddrs for %p",t);case 33:return e.prev=33,ZB.trace("set multiaddrs for %p",t),ZB("set release write lock"),n(),e.finish(33);case 38:this.dispatchEvent(new HS(RB,{detail:{peerId:t,multiaddrs:s.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==i?[]:i.addresses.map((function(e){return e.multiaddr}))}})),a||this.dispatchEvent(new HS("peer",{detail:{id:t,multiaddrs:s.addresses.map((function(e){return e.multiaddr})),protocols:s.protocols}}));case 40:case"end":return e.stop()}}),e,this,[[10,,33,38],[16,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xn(t),Array.isArray(r)){e.next=4;break}throw ZB.error("multiaddrs must be an array of Multiaddrs"),Ee(new Error("multiaddrs must be an array of Multiaddrs"),IB);case 4:return ZB.trace("add await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,ZB.trace("add got write lock"),e.prev=9,e.next=12,NB(t,r,this.addressFilter);case 12:if(0!==(o=e.sent).length){e.next=15;break}return e.abrupt("return");case 15:return e.prev=15,e.next=18,this.store.load(t);case 18:if(i=e.sent,a=!0,new Set([].concat(Vt(o.map((function(e){return e.multiaddr.toString()}))),Vt(i.addresses.map((function(e){return e.multiaddr.toString()}))))).size!==i.addresses.length){e.next=22;break}return e.abrupt("return");case 22:e.next=28;break;case 24:if(e.prev=24,e.t0=e.catch(15),e.t0.code===CB){e.next=28;break}throw e.t0;case 28:return e.next=30,this.store.mergeOrCreate(t,{addresses:o});case 30:s=e.sent,ZB("added multiaddrs for %p",t);case 32:return e.prev=32,ZB.trace("set release write lock"),n(),e.finish(32);case 36:this.dispatchEvent(new HS(RB,{detail:{peerId:t,multiaddrs:s.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==i?[]:i.addresses.map((function(e){return e.multiaddr}))}})),!0===a&&this.dispatchEvent(new HS("peer",{detail:{id:t,multiaddrs:s.addresses.map((function(e){return e.multiaddr})),protocols:s.protocols}}));case 38:case"end":return e.stop()}}),e,this,[[9,,32,36],[15,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),ZB.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,ZB.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===CB){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{addresses:[]});case 19:return e.prev=19,ZB.trace("delete release write lock"),r(),e.finish(19);case 23:null!=n&&this.dispatchEvent(new HS(RB,{detail:{peerId:t,multiaddrs:[],oldMultiaddrs:null==n?[]:n.addresses.map((function(e){return e.multiaddr}))}}));case 24:case"end":return e.stop()}}),e,this,[[6,,19,23],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function NB(e,t,r){return OB.apply(this,arguments)}function OB(){return OB=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]&&i[3],e.next=3,kp(r,(function(e){return rO(e,(function(e){if(!Lf.isMultiaddr(e))throw ZB.error("multiaddr must be an instance of Multiaddr"),Ee(new Error("multiaddr must be an instance of Multiaddr"),IB)}))}),(function(e){return Vc(e,function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),(function(e){return $c(e,(function(e){return{multiaddr:new Lf(e.toString()),isCertified:a}}))}),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),OB.apply(this,arguments)}var BB,LB,MB,UB=_e("libp2p:peer-store:key-book"),jB="change:pubkey",FB=function(){function e(t,r){(0,pe.Z)(this,e),this.dispatchEvent=t,this.store=r}return(0,he.Z)(e,[{key:"set",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xn(t),r instanceof Uint8Array){e.next=4;break}throw UB.error("publicKey must be an instance of Uint8Array to store data"),Ee(new Error("publicKey must be an instance of PublicKey"),IB);case 4:return UB.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,UB.trace("set got write lock"),a=!1,e.prev=10,e.prev=11,e.next=14,this.store.load(t);case 14:if(null==(i=e.sent).pubKey||!(0,Kn.equals)(i.pubKey,r)){e.next=17;break}return e.abrupt("return");case 17:e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(11),e.t0.code===CB){e.next=23;break}throw e.t0;case 23:return e.next=25,this.store.patchOrCreate(t,{pubKey:r});case 25:a=!0;case 26:return e.prev=26,UB.trace("set release write lock"),n(),e.finish(26);case 30:a&&this.dispatchEvent(new HS(jB,{detail:{peerId:t,publicKey:r,oldPublicKey:null==i?void 0:i.pubKey}}));case 31:case"end":return e.stop()}}),e,this,[[10,,26,30],[11,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),UB.trace("get await write lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,UB.trace("get got write lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.pubKey);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===CB){e.next=17;break}throw e.t0;case 17:return e.prev=17,UB("get release write lock"),r(),e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),UB.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,UB.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===CB){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{pubKey:void 0});case 19:e.next=25;break;case 21:if(e.prev=21,e.t1=e.catch(6),e.t1.code===CB){e.next=25;break}throw e.t1;case 25:return e.prev=25,UB.trace("delete release write lock"),r(),e.finish(25);case 29:this.dispatchEvent(new HS(jB,{detail:{peerId:t,publicKey:void 0,oldPublicKey:null==n?void 0:n.pubKey}}));case 30:case"end":return e.stop()}}),e,this,[[6,21,25,29],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),zB=_e("libp2p:peer-store:metadata-book"),VB="change:metadata",KB=function(){function e(t,r){(0,pe.Z)(this,e),this.dispatchEvent=t,this.store=r}return(0,he.Z)(e,[{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),zB.trace("get await read lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,zB.trace("get got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.metadata);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===CB){e.next=17;break}throw e.t0;case 17:return e.prev=17,zB.trace("get release read lock"),r(),e.finish(17);case 21:return e.abrupt("return",new Map);case 22:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getValue",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),zB.trace("getValue await read lock"),e.next=4,this.store.lock.readLock();case 4:return n=e.sent,zB.trace("getValue got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return a=e.sent,e.abrupt("return",a.metadata.get(r));case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===CB){e.next=17;break}throw e.t0;case 17:return e.prev=17,zB.trace("getValue release write lock"),n(),e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xn(t),r instanceof Map){e.next=4;break}throw zB.error("valid metadata must be provided to store data"),Ee(new Error("valid metadata must be provided"),IB);case 4:return zB.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,zB.trace("set got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:a=e.sent,e.next=20;break;case 16:if(e.prev=16,e.t0=e.catch(10),e.t0.code===CB){e.next=20;break}throw e.t0;case 20:return e.next=22,this.store.mergeOrCreate(t,{metadata:r});case 22:return e.prev=22,zB.trace("set release write lock"),n(),e.finish(22);case 26:this.dispatchEvent(new HS(VB,{detail:{peerId:t,metadata:r,oldMetadata:null==a?new Map:a.metadata}}));case 27:case"end":return e.stop()}}),e,this,[[9,,22,26],[10,16]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setValue",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xn(t),"string"===typeof r&&n instanceof Uint8Array){e.next=4;break}throw zB.error("valid key and value must be provided to store data"),Ee(new Error("valid key and value must be provided"),IB);case 4:return zB.trace("setValue await write lock"),e.next=7,this.store.lock.writeLock();case 7:return a=e.sent,zB.trace("setValue got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(i=e.sent,null==(o=i.metadata.get(r))||!(0,Kn.equals)(n,o)){e.next=17;break}return e.abrupt("return");case 17:e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(10),e.t0.code===CB){e.next=23;break}throw e.t0;case 23:return e.next=25,this.store.mergeOrCreate(t,{metadata:new Map([[r,n]])});case 25:s=e.sent;case 26:return e.prev=26,zB.trace("setValue release write lock"),a(),e.finish(26);case 30:this.dispatchEvent(new HS(VB,{detail:{peerId:t,metadata:s.metadata,oldMetadata:null==i?new Map:i.metadata}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,19]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),zB.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,zB.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===CB){e.next=17;break}throw e.t0;case 17:if(null==n){e.next=20;break}return e.next=20,this.store.patch(t,{metadata:new Map});case 20:return e.prev=20,zB.trace("delete release write lock"),r(),e.finish(20);case 24:null!=n&&this.dispatchEvent(new HS(VB,{detail:{peerId:t,metadata:new Map,oldMetadata:n.metadata}}));case 25:case"end":return e.stop()}}),e,this,[[6,,20,24],[7,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteValue",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),zB.trace("deleteValue await write lock"),e.next=4,this.store.lock.writeLock();case 4:return n=e.sent,zB.trace("deleteValue got write lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return i=e.sent,(a=i.metadata).delete(r),e.next=14,this.store.patch(t,{metadata:a});case 14:e.next=20;break;case 16:if(e.prev=16,e.t0=e.catch(6),e.t0.code===CB){e.next=20;break}throw e.t0;case 20:return e.prev=20,zB.trace("deleteValue release write lock"),n(),e.finish(20);case 24:null!=a&&this.dispatchEvent(new HS(VB,{detail:{peerId:t,metadata:a,oldMetadata:null==i?new Map:i.metadata}}));case 25:case"end":return e.stop()}}),e,this,[[6,16,20,24]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),qB=_e("libp2p:peer-store:proto-book"),HB="change:protocols",WB=function(){function e(t,r){(0,pe.Z)(this,e),this.dispatchEvent=t,this.store=r}return(0,he.Z)(e,[{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qB.trace("get wait for read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,qB.trace("get got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return n=e.sent,e.abrupt("return",n.protocols);case 12:if(e.prev=12,e.t0=e.catch(5),e.t0.code===CB){e.next=16;break}throw e.t0;case 16:return e.prev=16,qB.trace("get release read lock"),r(),e.finish(16);case 20:return e.abrupt("return",[]);case 21:case"end":return e.stop()}}),e,this,[[5,12,16,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xn(t),Array.isArray(r)){e.next=4;break}throw qB.error("protocols must be provided to store data"),Ee(new Error("protocols must be provided"),IB);case 4:return qB.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,qB.trace("set got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(a=e.sent,new Set(Vt(r)).size!==a.protocols.length){e.next=16;break}return e.abrupt("return");case 16:e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(10),e.t0.code===CB){e.next=22;break}throw e.t0;case 22:return e.next=24,this.store.patchOrCreate(t,{protocols:r});case 24:i=e.sent,qB("stored provided protocols for %p",t);case 26:return e.prev=26,qB.trace("set release write lock"),n(),e.finish(26);case 30:this.dispatchEvent(new HS(HB,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xn(t),Array.isArray(r)){e.next=4;break}throw qB.error("protocols must be provided to store data"),Ee(new Error("protocols must be provided"),IB);case 4:return qB.trace("add await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,qB.trace("add got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(a=e.sent,new Set([].concat(Vt(a.protocols),Vt(r))).size!==a.protocols.length){e.next=16;break}return e.abrupt("return");case 16:e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(10),e.t0.code===CB){e.next=22;break}throw e.t0;case 22:return e.next=24,this.store.mergeOrCreate(t,{protocols:r});case 24:i=e.sent,qB("added provided protocols for %p",t);case 26:return e.prev=26,qB.trace("add release write lock"),n(),e.finish(26);case 30:this.dispatchEvent(new HS(HB,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xn(t),Array.isArray(r)){e.next=4;break}throw qB.error("protocols must be provided to store data"),Ee(new Error("protocols must be provided"),IB);case 4:return qB.trace("remove await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,qB.trace("remove got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:a=e.sent,s=new Set(a.protocols),o=(0,v.Z)(r);try{for(o.s();!(u=o.n()).done;)c=u.value,s.delete(c)}catch(Dy){o.e(Dy)}finally{o.f()}if(a.protocols.length!==s.size){e.next=19;break}return e.abrupt("return");case 19:r=Array.from(s),e.next=26;break;case 22:if(e.prev=22,e.t0=e.catch(10),e.t0.code===CB){e.next=26;break}throw e.t0;case 26:return e.next=28,this.store.patchOrCreate(t,{protocols:r});case 28:i=e.sent;case 29:return e.prev=29,qB.trace("remove release write lock"),n(),e.finish(29);case 33:this.dispatchEvent(new HS(HB,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 34:case"end":return e.stop()}}),e,this,[[9,,29,33],[10,22]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xn(t),qB.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,qB.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===CB){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{protocols:[]});case 19:return e.prev=19,qB.trace("delete release write lock"),r(),e.finish(19);case 23:null!=n&&this.dispatchEvent(new HS(HB,{detail:{peerId:t,protocols:[],oldProtocols:n.protocols}}));case 24:case"end":return e.stop()}}),e,this,[[6,,19,23],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();!function(e){e.codec=function(){return yi({1:{name:"addresses",codec:LB.codec(),repeats:!0},2:{name:"protocols",codec:Si,repeats:!0},3:{name:"metadata",codec:MB.codec(),repeats:!0},4:{name:"pubKey",codec:Ja,optional:!0},5:{name:"peerRecordEnvelope",codec:Ja,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(BB||(BB={})),function(e){e.codec=function(){return yi({1:{name:"multiaddr",codec:Ja},2:{name:"isCertified",codec:Qa,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(LB||(LB={})),function(e){e.codec=function(){return yi({1:{name:"key",codec:Si},2:{name:"value",codec:Ja}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(MB||(MB={}));var GB=_e("libp2p:peer-store:store"),YB="/peers/",QB=function(){function e(){(0,pe.Z)(this,e),this.components=new eI,this.lock=sw({name:"peer-store",singleProcess:!0})}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"_peerIdToDatastoreKey",value:function(e){if(null==e.type)throw GB.error("peerId must be an instance of peer-id to store data"),Ee(new Error("peerId must be an instance of peer-id"),IB);var t=e.toCID().toString();return new kr("".concat(YB).concat(t))}},{key:"has",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getDatastore().has(this._peerIdToDatastoreKey(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getDatastore().delete(this._peerIdToDatastoreKey(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getDatastore().get(this._peerIdToDatastoreKey(t));case 2:a=e.sent,i=BB.decode(a),s=new Map,o=(0,v.Z)(i.metadata);try{for(o.s();!(u=o.n()).done;)c=u.value,s.set(c.key,c.value)}catch(Dy){o.e(Dy)}finally{o.f()}return e.abrupt("return",(0,le.Z)((0,le.Z)({},i),{},{id:t,addresses:i.addresses.map((function(e){var t=e.multiaddr,r=e.isCertified;return{multiaddr:new Lf(t),isCertified:null!==r&&void 0!==r&&r}})),metadata:s,pubKey:null!==(r=i.pubKey)&&void 0!==r?r:void 0,peerRecordEnvelope:null!==(n=i.peerRecordEnvelope)&&void 0!==n?n:void 0}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.pubKey||null==t.id.publicKey||(0,Kn.equals)(t.pubKey,t.id.publicKey)){e.next=3;break}throw GB.error("peer publicKey bytes do not match peer id publicKey bytes"),Ee(new Error("publicKey bytes do not match peer id publicKey bytes"),IB);case 3:return r=new Set,n=t.addresses.filter((function(e){return!r.has(e.multiaddr.toString())&&(r.add(e.multiaddr.toString()),!0)})).sort((function(e,t){return e.multiaddr.toString().localeCompare(t.multiaddr.toString())})).map((function(e){var t=e.multiaddr,r=e.isCertified;return{multiaddr:t.bytes,isCertified:r}})),a=[],Vt(t.metadata.keys()).sort().forEach((function(e){var r=t.metadata.get(e);null!=r&&a.push({key:e,value:r})})),i=BB.encode({addresses:n,protocols:t.protocols.sort(),pubKey:t.pubKey,metadata:a,peerRecordEnvelope:t.peerRecordEnvelope}),e.next=10,this.components.getDatastore().put(this._peerIdToDatastoreKey(t.id),i);case 10:return e.next=12,this.load(t.id);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return n=e.sent,e.next=5,this._patch(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"patchOrCreate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.load(t);case 3:n=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code===CB){e.next=10;break}throw e.t0;case 10:n={id:t,addresses:[],protocols:[],metadata:new Map};case 11:return e.next=13,this._patch(t,r,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_patch",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.save((0,le.Z)((0,le.Z)((0,le.Z)({},n),r),{},{id:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"merge",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return n=e.sent,e.next=5,this._merge(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mergeOrCreate",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.load(t);case 3:n=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code===CB){e.next=10;break}throw e.t0;case 10:n={id:t,addresses:[],protocols:[],metadata:new Map};case 11:return e.next=13,this._merge(t,r,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_merge",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=new Map,n.addresses.forEach((function(e){h.set(e.multiaddr.toString(),e.isCertified)})),(null!==(a=r.addresses)&&void 0!==a?a:[]).forEach((function(e){var t=e.multiaddr.toString(),r=Boolean(h.get(t))||e.isCertified;h.set(t,r)})),e.next=5,this.save({id:t,addresses:Array.from(h.entries()).map((function(e){var t=(0,y.Z)(e,2),r=t[0],n=t[1];return{multiaddr:new Lf(r),isCertified:n}})),protocols:Array.from(new Set([].concat(Vt(null!==(i=n.protocols)&&void 0!==i?i:[]),Vt(null!==(s=r.protocols)&&void 0!==s?s:[])))),metadata:new Map([].concat(Vt(null!==(o=null===(u=n.metadata)||void 0===u?void 0:u.entries())&&void 0!==o?o:[]),Vt(null!==(c=null===(l=r.metadata)||void 0===l?void 0:l.entries())&&void 0!==c?c:[]))),pubKey:null!==(f=r.pubKey)&&void 0!==f?f:null!=n?n.pubKey:void 0,peerRecordEnvelope:null!==(p=r.peerRecordEnvelope)&&void 0!==p?p:null!=n?n.peerRecordEnvelope:void 0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=this;return ye((0,ce.Z)().mark((function t(){var r,n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=hr(e.components.getDatastore().queryKeys({prefix:YB}));case 4:return t.next=6,pr(i.next());case 6:if(!(r=!(s=t.sent).done)){t.next=15;break}return o=s.value,u=o.toString().split("/")[2],c=ke.base32.decode(u),t.next=12,e.load(ea(c));case 12:r=!1,t.next=4;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(2),n=!0,a=t.t0;case 21:if(t.prev=21,t.prev=22,!r||null==i.return){t.next=26;break}return t.next=26,pr(i.return());case 26:if(t.prev=26,!n){t.next=29;break}throw a;case 29:return t.finish(26);case 30:return t.finish(21);case 31:case"end":return t.stop()}}),t,null,[[2,17,21,31],[22,,26,30]])})))()}}]),e}(),JB=_e("libp2p:peer-store"),XB=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,pe.Z)(this,r),(e=t.call(this)).components=new eI,e.store=new QB,e.addressBook=new PB(e.dispatchEvent.bind(Ct(e)),e.store,n.addressFilter),e.keyBook=new FB(e.dispatchEvent.bind(Ct(e)),e.store),e.metadataBook=new KB(e.dispatchEvent.bind(Ct(e)),e.store),e.protoBook=new WB(e.dispatchEvent.bind(Ct(e)),e.store),e}return(0,he.Z)(r,[{key:"init",value:function(e){this.components=e,this.store.init(e)}},{key:"forEach",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JB.trace("getPeers await read lock"),e.next=3,this.store.lock.readLock();case 3:r=e.sent,JB.trace("getPeers got read lock"),e.prev=5,n=!1,a=!1,e.prev=8,s=hr(this.store.all());case 10:return e.next=12,s.next();case 12:if(!(n=!(o=e.sent).done)){e.next=20;break}if(!(u=o.value).id.equals(this.components.getPeerId())){e.next=16;break}return e.abrupt("continue",17);case 16:t(u);case 17:n=!1,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),a=!0,i=e.t0;case 26:if(e.prev=26,e.prev=27,!n||null==s.return){e.next=31;break}return e.next=31,s.return();case 31:if(e.prev=31,!a){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(26);case 36:return e.prev=36,JB.trace("getPeers release read lock"),r(),e.finish(36);case 40:case"end":return e.stop()}}),e,this,[[5,,36,40],[8,22,26,36],[27,,31,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.forEach((function(e){t.push(e)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JB.trace("delete await write lock"),e.next=3,this.store.lock.writeLock();case 3:return r=e.sent,JB.trace("delete got write lock"),e.prev=5,e.next=8,this.store.delete(t);case 8:return e.prev=8,JB.trace("delete release write lock"),r(),e.finish(8);case 12:case"end":return e.stop()}}),e,this,[[5,,8,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JB.trace("get await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,JB.trace("get got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,JB.trace("get release read lock"),r(),e.finish(9);case 13:case"end":return e.stop()}}),e,this,[[5,,9,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JB.trace("has await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,JB.trace("has got read lock"),e.prev=5,e.next=8,this.store.has(t);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,JB.trace("has release read lock"),r(),e.finish(9);case 13:case"end":return e.stop()}}),e,this,[[5,,9,13]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(KS),$B=function(){function e(t){(0,pe.Z)(this,e),this.dht=t}return(0,he.Z)(e,[{key:"provide",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zc(this.dht.provide(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(t.dht.findProviders(e,r));case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}if("PROVIDER"!==(c=u.value).name){n.next=10;break}return n.delegateYield(ia(hr(c.providers),pr),"t0",10);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t1=n.catch(2),i=!0,s=n.t1;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zc(this.dht.put(t,r,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,s=hr(this.dht.get(t,r));case 4:return e.next=6,s.next();case 6:if(!(n=!(o=e.sent).done)){e.next=13;break}if("VALUE"!==(u=o.value).name){e.next=10;break}return e.abrupt("return",u.value);case 10:n=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==s.return){e.next=24;break}return e.next=24,s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:throw Ee(new Error("Not found"),"ERR_NOT_FOUND");case 30:case"end":return e.stop()}}),e,this,[[2,15,19,29],[20,,24,28]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),eL=_e("libp2p:dialer:auto-dialer"),tL=function(){function e(t,r){(0,pe.Z)(this,e),this.components=t,this.enabled=r.enabled,this.minConnections=r.minConnections,this.dialTimeout=r.dialTimeout}return(0,he.Z)(e,[{key:"handle",value:function(e){var t,r=e.detail;if(this.enabled&&(0===this.components.getConnectionManager().getConnections(r.id).length&&(null!==(t=this.minConnections)&&void 0!==t?t:0)>this.components.getConnectionManager().getConnections().length)){eL("auto-dialing discovered peer %p with timeout %d",r.id,this.dialTimeout);var n=new _r.TimeoutController(this.dialTimeout);this.components.getConnectionManager().openConnection(r.id,{signal:n.signal}).catch((function(e){eL.error("could not connect to discovered peer %p with %o",r.id,e)})).finally((function(){n.clear()}))}}}]),e}(),rL=__webpack_require__(449),nL=globalThis.fetch,aL=globalThis.Headers;globalThis.Request,globalThis.Response;function iL(e,t,r){return"".concat(e,"?name=").concat(t,"&type=").concat(r)}function sL(e,t){return oL.apply(this,arguments)}function oL(){return(oL=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nL(t,{headers:new aL({accept:"application/dns-json"}),signal:r});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uL(e,t){return"".concat(t,"_").concat(e)}var cL=Object.assign(be("dns-over-http-resolver"),{error:be("dns-over-http-resolver:error")}),lL=function(){function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,e),this._cache=new rL({max:null!==(t=null===a||void 0===a?void 0:a.maxCache)&&void 0!==t?t:100}),this._TXTcache=new rL({max:null!==(r=null===a||void 0===a?void 0:a.maxCache)&&void 0!==r?r:100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=null!==(n=a.request)&&void 0!==n?n:sL,this._abortControllers=[]}return(0,he.Z)(e,[{key:"cancel",value:function(){this._abortControllers.forEach((function(e){return e.abort()}))}},{key:"getServers",value:function(){return this._servers}},{key:"_getShuffledServers",value:function(){for(var e=Vt(this._servers),t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*t),n=e[t];e[t]=e[r],e[r]=n}return e}},{key:"setServers",value:function(e){this._servers=e}},{key:"resolve",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.length>1&&void 0!==n[1]?n[1]:"A",e.t0=r,e.next="A"===e.t0?4:"AAAA"===e.t0?7:"TXT"===e.t0?10:13;break;case 4:return e.next=6,this.resolve4(t);case 6:case 9:case 12:return e.abrupt("return",e.sent);case 7:return e.next=9,this.resolve6(t);case 10:return e.next=12,this.resolveTxt(t);case 13:throw new Error("".concat(r," is not supported"));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve4",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="A",null==(n=this._cache.get(uL(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=(0,v.Z)(this._getShuffledServers()),e.prev=6,o=(0,ce.Z)().mark((function e(){var n,i,o,u,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(iL(n,t,r),i.signal);case 6:return o=e.sent,u=o.Answer.map((function(e){return e.data})),l=Math.min.apply(Math,Vt(o.Answer.map((function(e){return e.TTL})))),c._cache.set(uL(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),cL.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((s=i.n()).done){e.next=16;break}return e.delegateYield(o(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve6",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="AAAA",null==(n=this._cache.get(uL(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=(0,v.Z)(this._getShuffledServers()),e.prev=6,o=(0,ce.Z)().mark((function e(){var n,i,o,u,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(iL(n,t,r),i.signal);case 6:return o=e.sent,u=o.Answer.map((function(e){return e.data})),l=Math.min.apply(Math,Vt(o.Answer.map((function(e){return e.TTL})))),c._cache.set(uL(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),cL.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((s=i.n()).done){e.next=16;break}return e.delegateYield(o(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolveTxt",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="TXT",null==(n=this._TXTcache.get(uL(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=(0,v.Z)(this._getShuffledServers()),e.prev=6,o=(0,ce.Z)().mark((function e(){var n,i,o,u,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(iL(n,t,r),i.signal);case 6:return o=e.sent,u=o.Answer.map((function(e){return[e.data.replace(/['"]+/g,"")]})),l=Math.min.apply(Math,Vt(o.Answer.map((function(e){return e.TTL})))),c._TXTcache.set(uL(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),cL.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((s=i.n()).done){e.next=16;break}return e.delegateYield(o(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"clearCache",value:function(){this._cache.clear(),this._TXTcache.clear()}}]),e}(),fL=lL,pL=ff("dnsaddr").code;function hL(){return hL=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:{},a=new fL,null!=n.signal&&n.signal.addEventListener("abort",(function(){a.cancel()})),i=t.getPeerId(),s=null!==(r=t.stringTuples().find((function(e){return(0,y.Z)(e,1)[0]===pL})))&&void 0!==r?r:[],o=(0,y.Z)(s,2),null!=(u=o[1])){e.next=7;break}throw new Error("No hostname found in multiaddr");case 7:return e.next=9,a.resolveTxt("_dnsaddr.".concat(u));case 9:return c=e.sent,l=c.flat().map((function(e){return e.split("=")[1]})),null!=i&&(l=l.filter((function(e){return e.includes(i)}))),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)}))),hL.apply(this,arguments)}var dL={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:function(e){return e}},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:100,maxDialsPerPeer:4,dialTimeout:jP,resolvers:{dnsaddr:function(e){return hL.apply(this,arguments)}},addressSorter:MP},connectionGater:{},transportManager:{faultTolerance:EO.FATAL_ALL},metrics:{enabled:!1,computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:9e5,enabled:!1,ttl:18e5},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:oB},timeout:3e4},ping:{protocolPrefix:"ipfs"},fetch:{protocolPrefix:"libp2p"}};function vL(e){var t,r,n=ge(dL,e);if(null==n.transports||n.transports.length<1)throw Ee(new Error(rP.ERR_TRANSPORTS_REQUIRED),nP.ERR_TRANSPORTS_REQUIRED);if(null==n.connectionEncryption||0===n.connectionEncryption.length)throw Ee(new Error(rP.CONN_ENCRYPTION_REQUIRED),nP.CONN_ENCRYPTION_REQUIRED);if(null===n.connectionProtector&&null!=(null===(t=globalThis.process)||void 0===t||null===(r=t.env)||void 0===r?void 0:r.LIBP2P_FORCE_PNET))throw Ee(new Error(rP.ERR_PROTECTOR_REQUIRED),nP.ERR_PROTECTOR_REQUIRED);return n}var yL=__webpack_require__(9018),gL=yL.Reader;function mL(e,t){var r=gL.create(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}["uint64","int64","sint64","fixed64","sfixed64"].forEach((function(e){var t=gL.prototype[e];gL.prototype[e]=function(){return BigInt(t.call(this).toString())}}));var bL,wL,kL,xL,_L,EL=yL.Writer;function SL(e,t){var r=EL.create();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}function AL(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function IL(e,t){return AL("message",bL.LENGTH_DELIMITED,e,t)}["uint64","int64","sint64","fixed64","sfixed64"].forEach((function(e){var t=EL.prototype[e];EL.prototype[e]=function(e){return t.call(this,e.toString())}})),function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(bL||(bL={})),function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(wL||(wL={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(kL||(kL={})),function(e){e.codec=function(){return function(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}return AL("enum",bL.VARINT,(function(e,r){var n=t(e);r.int32(n)}),(function(e){return t(e.uint32())}))}(kL)}}(wL||(wL={})),function(e){var t;e.codec=function(){return null==t&&(t=IL((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.Type)throw new Error('Protocol error: required field "Type" was not found in object');if(t.uint32(8),wL.codec().encode(e.Type,t),null==e.Data)throw new Error('Protocol error: required field "Data" was not found in object');t.uint32(18),t.bytes(e.Data),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={Type:wL.RSA,Data:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.Type=wL.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&a)}}if(null==r.Type)throw new Error('Protocol error: value for required field "Type" was not found in protobuf');if(null==r.Data)throw new Error('Protocol error: value for required field "Data" was not found in protobuf');return r}))),t},e.encode=function(t){return SL(t,e.codec())},e.decode=function(t){return mL(t,e.codec())}}(xL||(xL={})),function(e){var t;e.codec=function(){return null==t&&(t=IL((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.Type)throw new Error('Protocol error: required field "Type" was not found in object');if(t.uint32(8),wL.codec().encode(e.Type,t),null==e.Data)throw new Error('Protocol error: required field "Data" was not found in object');t.uint32(18),t.bytes(e.Data),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={Type:wL.RSA,Data:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.Type=wL.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&a)}}if(null==r.Type)throw new Error('Protocol error: value for required field "Type" was not found in protobuf');if(null==r.Data)throw new Error('Protocol error: value for required field "Data" was not found in protobuf');return r}))),t},e.encode=function(t){return SL(t,e.codec())},e.decode=function(t){return mL(t,e.codec())}}(_L||(_L={}));var CL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis,t=e.crypto;if(null==t||null==t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t};function ZL(e,t){var r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,ba.concat)([new Uint8Array(t-r.length),r])}return(0,gr.toString)(r,"base64url")}function RL(e){var t=function(e,t){var r=(0,fr.fromString)(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,ba.concat)([new Uint8Array(t-r.length),r])}return r}(e);return new Ci.jsbn.BigInteger((0,gr.toString)(t,"base16"),16)}var TL={"P-256":256,"P-384":384,"P-521":521};Object.keys(TL).join(" / ");function DL(e){var t,r,n,a,i,s,o=null!==(t=null===e||void 0===e?void 0:e.algorithm)&&void 0!==t?t:"AES-GCM",u=null!==(r=null===e||void 0===e?void 0:e.keyLength)&&void 0!==r?r:16,c=null!==(n=null===e||void 0===e?void 0:e.nonceLength)&&void 0!==n?n:12,l=null!==(a=null===e||void 0===e?void 0:e.digest)&&void 0!==a?a:"SHA-256",f=null!==(i=null===e||void 0===e?void 0:e.saltLength)&&void 0!==i?i:16,p=null!==(s=null===e||void 0===e?void 0:e.iterations)&&void 0!==s?s:32767,h=CL();function d(){return(d=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,d,v,y;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.getRandomValues(new Uint8Array(f)),a=h.getRandomValues(new Uint8Array(c)),i={name:o,iv:a},"string"===typeof r&&(r=(0,fr.fromString)(r)),s={name:"PBKDF2",salt:n,iterations:p,hash:{name:l}},e.next=7,h.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]);case 7:return d=e.sent,e.next=10,h.subtle.deriveKey(s,d,{name:o,length:u},!0,["encrypt"]);case 10:return v=e.sent,e.next=13,h.subtle.encrypt(i,v,t);case 13:return y=e.sent,e.abrupt("return",(0,ba.concat)([n,i.iv,new Uint8Array(y)]));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,d,v,y,g;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slice(0,f),a=t.slice(f,f+c),i=t.slice(f+c),s={name:o,iv:a},"string"===typeof r&&(r=(0,fr.fromString)(r)),d={name:"PBKDF2",salt:n,iterations:p,hash:{name:l}},e.next=8,h.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]);case 8:return v=e.sent,e.next=11,h.subtle.deriveKey(d,v,{name:o,length:u},!0,["decrypt"]);case 11:return y=e.sent,e.next=14,h.subtle.decrypt(s,y,i);case 14:return g=e.sent,e.abrupt("return",new Uint8Array(g));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u*=8;var y={encrypt:function(e,t){return d.apply(this,arguments)},decrypt:function(e,t){return v.apply(this,arguments)}};return y}function PL(e){var t=Ci.asn1.fromDer((0,gr.toString)(e,"ascii")),r=Ci.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:ZL(r.n),e:ZL(r.e),d:ZL(r.d),p:ZL(r.p),q:ZL(r.q),dp:ZL(r.dP),dq:ZL(r.dQ),qi:ZL(r.qInv),alg:"RS256"}}function NL(e,t){return t.map((function(t){return RL(e[t])}))}function OL(e){return BL.apply(this,arguments)}function BL(){return BL=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CL().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);case 2:return r=e.sent,e.next=5,VL(r);case 5:return n=e.sent,e.abrupt("return",{privateKey:n[0],publicKey:n[1]});case 7:case"end":return e.stop()}}),e)}))),BL.apply(this,arguments)}function LL(e){return ML.apply(this,arguments)}function ML(){return ML=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CL().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]);case 2:return r=e.sent,e.t0=r,e.next=6,qL(t);case 6:return e.t1=e.sent,n=[e.t0,e.t1],e.next=10,VL({privateKey:n[0],publicKey:n[1]});case 10:return a=e.sent,e.abrupt("return",{privateKey:a[0],publicKey:a[1]});case 12:case"end":return e.stop()}}),e)}))),ML.apply(this,arguments)}function UL(e,t){return jL.apply(this,arguments)}function jL(){return(jL=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CL().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);case 2:return n=e.sent,e.next=5,CL().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,Uint8Array.from(r));case 5:return a=e.sent,e.abrupt("return",new Uint8Array(a,0,a.byteLength));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FL(e,t,r){return zL.apply(this,arguments)}function zL(){return(zL=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CL().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);case 2:return a=e.sent,e.next=5,CL().subtle.verify({name:"RSASSA-PKCS1-v1_5"},a,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VL(e){return KL.apply(this,arguments)}function KL(){return KL=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.privateKey&&null!=t.publicKey){e.next=2;break}throw Ee(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");case 2:return e.next=4,Promise.all([CL().subtle.exportKey("jwk",t.privateKey),CL().subtle.exportKey("jwk",t.publicKey)]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),KL.apply(this,arguments)}function qL(e){return HL.apply(this,arguments)}function HL(){return(HL=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CL().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WL(e,t,r,n){var a=t?function(e){var t;return(t=Ci.pki).setRsaPublicKey.apply(t,Vt(NL(e,["n","e"])))}(e):function(e){var t;return(t=Ci.pki).setRsaPrivateKey.apply(t,Vt(NL(e,["n","e","d","p","q","dp","dq","qi"])))}(e),i=n((0,gr.toString)(Uint8Array.from(r),"ascii"),a);return(0,fr.fromString)(i,"ascii")}function GL(e,t){return YL.apply(this,arguments)}function YL(){return(YL=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=DL(),e.next=3,n.encrypt(t,r);case 3:return a=e.sent,e.abrupt("return",xe.base64.encode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var QL=function(){function e(t){(0,pe.Z)(this,e),this._key=t}return(0,he.Z)(e,[{key:"verify",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FL(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return function(e){if(null==e.n||null==e.e)throw Ee(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");var t=Ci.pki.publicKeyToAsn1({n:RL(e.n),e:RL(e.e)});return(0,fr.fromString)(Ci.asn1.toDer(t).getBytes(),"ascii")}(this._key)}},{key:"bytes",get:function(){return xL.encode({Type:wL.RSA,Data:this.marshal()}).subarray()}},{key:"encrypt",value:function(e){return WL(this._key,!0,e,(function(e,t){return t.encrypt(e)}))}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),JL=function(){function e(t,r){(0,pe.Z)(this,e),this._key=t,this._publicKey=r}return(0,he.Z)(e,[{key:"genSecret",value:function(){return function(e){if(isNaN(e)||e<=0)throw Ee(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return Tu.randomBytes(e)}(16)}},{key:"sign",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UL(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){if(null==this._publicKey)throw Ee(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new QL(this._publicKey)}},{key:"decrypt",value:function(e){return WL(this._key,!1,e,(function(e,t){return t.decrypt(e)}))}},{key:"marshal",value:function(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw Ee(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");var t=Ci.pki.privateKeyToAsn1({n:RL(e.n),e:RL(e.e),d:RL(e.d),p:RL(e.p),q:RL(e.q),dP:RL(e.dp),dQ:RL(e.dq),qInv:RL(e.qi)});return(0,fr.fromString)(Ci.asn1.toDer(t).getBytes(),"ascii")}(this._key)}},{key:"bytes",get:function(){return _L.encode({Type:wL.RSA,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.hash();case 2:return t=e.sent,e.abrupt("return",(0,gr.toString)(t,"base58btc"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pkcs-8"!==(r=o.length>1&&void 0!==o[1]?o[1]:"pkcs-8")){e.next=9;break}return n=new Ci.util.ByteBuffer(this.marshal()),a=Ci.asn1.fromDer(n),i=Ci.pki.privateKeyFromAsn1(a),s={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"},e.abrupt("return",Ci.pki.encryptRsaPrivateKey(i,t,s));case 9:if("libp2p-key"!==r){e.next=15;break}return e.next=12,GL(this.bytes,t);case 12:return e.abrupt("return",e.sent);case 15:throw Ee(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function XL(e){return $L.apply(this,arguments)}function $L(){return $L=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=PL(t),e.next=3,LL(r);case 3:return n=e.sent,e.abrupt("return",new JL(n.privateKey,n.publicKey));case 5:case"end":return e.stop()}}),e)}))),$L.apply(this,arguments)}function eM(e){var t=function(e){var t=Ci.asn1.fromDer((0,gr.toString)(e,"ascii")),r=Ci.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:ZL(r.n),e:ZL(r.e)}}(e);return new QL(t)}function tM(e){return rM.apply(this,arguments)}function rM(){return(rM=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LL(t);case 2:return r=e.sent,e.abrupt("return",new JL(r.privateKey,r.publicKey));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nM(e){return aM.apply(this,arguments)}function aM(){return aM=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OL(t);case 2:return r=e.sent,e.abrupt("return",new JL(r.privateKey,r.publicKey));case 4:case"end":return e.stop()}}),e)}))),aM.apply(this,arguments)}var iM=64,sM=32;function oM(){return uM.apply(this,arguments)}function uM(){return(uM=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=uo.randomPrivateKey(),e.next=3,to(t);case 3:return r=e.sent,n=vM(t,r),e.abrupt("return",{privateKey:n,publicKey:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cM(e){return lM.apply(this,arguments)}function lM(){return lM=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length===sM){e.next=4;break}throw new TypeError('"seed" must be 32 bytes in length.');case 4:if(t instanceof Uint8Array){e.next=6;break}throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');case 6:return r=t,e.next=9,to(r);case 9:return n=e.sent,a=vM(r,n),e.abrupt("return",{privateKey:a,publicKey:n});case 12:case"end":return e.stop()}}),e)}))),lM.apply(this,arguments)}function fM(e,t){return pM.apply(this,arguments)}function pM(){return(pM=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slice(0,sM),e.next=3,no(r,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hM(e,t,r){return dM.apply(this,arguments)}function dM(){return(dM=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(r,n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vM(e,t){for(var r=new Uint8Array(iM),n=0;n<sM;n++)r[n]=e[n],r[sM+n]=t[n];return r}var yM=function(){function e(t){(0,pe.Z)(this,e),this._key=EM(t,32)}return(0,he.Z)(e,[{key:"verify",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hM(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return xL.encode({Type:wL.Ed25519,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),gM=function(){function e(t,r){(0,pe.Z)(this,e),this._key=EM(t,iM),this._publicKey=EM(r,32)}return(0,he.Z)(e,[{key:"sign",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fM(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){return new yM(this._publicKey)}},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return _L.encode({Type:wL.Ed25519,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr.identity.digest(this.public.bytes);case 2:return t=e.sent,e.abrupt("return",we.base58btc.encode(t.bytes).substring(1));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("libp2p-key"!==(r=n.length>1&&void 0!==n[1]?n[1]:"libp2p-key")){e.next=7;break}return e.next=4,GL(this.bytes,t);case 4:return e.abrupt("return",e.sent);case 7:throw Ee(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function mM(e){if(e.length>iM){var t=(e=EM(e,96)).slice(0,iM),r=e.slice(iM,e.length);return new gM(t,r)}var n=(e=EM(e,iM)).slice(0,iM),a=e.slice(32);return new gM(n,a)}function bM(e){return e=EM(e,32),new yM(e)}function wM(){return kM.apply(this,arguments)}function kM(){return(kM=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oM();case 2:return t=e.sent,r=t.privateKey,n=t.publicKey,e.abrupt("return",new gM(r,n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xM(e){return _M.apply(this,arguments)}function _M(){return _M=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cM(t);case 2:return r=e.sent,n=r.privateKey,a=r.publicKey,e.abrupt("return",new gM(n,a));case 6:case"end":return e.stop()}}),e)}))),_M.apply(this,arguments)}function EM(e,t){var r;if((e=Uint8Array.from(null!==(r=e)&&void 0!==r?r:[])).length!==t)throw Ee(new Error("Key must be a Uint8Array of length ".concat(t,", got ").concat(e.length)),"ERR_INVALID_KEY_TYPE");return e}function SM(){return Tu.randomPrivateKey()}function AM(e,t){return IM.apply(this,arguments)}function IM(){return(IM=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(r);case 2:return n=e.sent,a=n.digest,e.prev=4,e.next=7,Su(a,t);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),Ee(e.t0,"ERR_INVALID_INPUT");case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function CM(e,t,r){return ZM.apply(this,arguments)}function ZM(){return(ZM=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn.sha256.digest(n);case 3:return a=e.sent,i=a.digest,e.abrupt("return",Cu(r,i,t));case 8:throw e.prev=8,e.t0=e.catch(0),Ee(e.t0,"ERR_INVALID_INPUT");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function RM(e){try{Vo.fromHex(e)}catch(Dy){throw Ee(Dy,"ERR_INVALID_PUBLIC_KEY")}}var TM=function(){function e(t){(0,pe.Z)(this,e),RM(t),this._key=t}return(0,he.Z)(e,[{key:"verify",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CM(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return e=this._key,Vo.fromHex(e).toRawBytes(!0);var e}},{key:"bytes",get:function(){return xL.encode({Type:wL.Secp256k1,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),DM=function(){function e(t,r){(0,pe.Z)(this,e),this._key=t,this._publicKey=null!==r&&void 0!==r?r:function(e){try{return bu(e,!0)}catch(Dy){throw Ee(Dy,"ERR_INVALID_PRIVATE_KEY")}}(t),function(e){try{bu(e,!0)}catch(Dy){throw Ee(Dy,"ERR_INVALID_PRIVATE_KEY")}}(this._key),RM(this._publicKey)}return(0,he.Z)(e,[{key:"sign",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AM(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){return new TM(this._publicKey)}},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return _L.encode({Type:wL.Secp256k1,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return(0,Kn.equals)(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.hash();case 2:return t=e.sent,e.abrupt("return",(0,gr.toString)(t,"base58btc"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("libp2p-key"!==(r=n.length>1&&void 0!==n[1]?n[1]:"libp2p-key")){e.next=7;break}return e.next=4,GL(this.bytes,t);case 4:return e.abrupt("return",e.sent);case 7:throw Ee(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function PM(e){return new DM(e)}function NM(e){return new TM(e)}function OM(){return BM.apply(this,arguments)}function BM(){return(BM=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SM();case 2:return t=e.sent,e.abrupt("return",new DM(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var LM,MM={rsa:u,ed25519:c,secp256k1:l};function UM(e){var t=Object.keys(MM).join(" / ");return Ee(new Error("invalid or unsupported key type ".concat(e,". Must be ").concat(t)),"ERR_UNSUPPORTED_KEY_TYPE")}function jM(e){if("rsa"===(e=e.toLowerCase())||"ed25519"===e||"secp256k1"===e)return MM[e];throw UM(e)}function FM(e,t){return zM.apply(this,arguments)}function zM(){return zM=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jM(t).generateKeyPair(null!==r&&void 0!==r?r:2048);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),zM.apply(this,arguments)}function VM(e,t){var r;return jM(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}function KM(e,t){var r;return jM(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}!function(e){var t;e.codec=function(){return null==t&&(t=IL((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.id)throw new Error('Protocol error: required field "id" was not found in object');t.uint32(10),t.bytes(e.id),null!=e.pubKey&&(t.uint32(18),t.bytes(e.pubKey)),null!=e.privKey&&(t.uint32(26),t.bytes(e.privKey)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={id:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.id=e.bytes();break;case 2:r.pubKey=e.bytes();break;case 3:r.privKey=e.bytes();break;default:e.skipType(7&a)}}if(null==r.id)throw new Error('Protocol error: value for required field "id" was not found in protobuf');return r}))),t},e.encode=function(t){return SL(t,e.codec())},e.decode=function(t){return mL(t,e.codec())}}(LM||(LM={}));var qM=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FM("Ed25519");case 2:return t=e.sent,e.next=5,WM(t);case 5:if("Ed25519"!==(r=e.sent).type){e.next=8;break}return e.abrupt("return",r);case 8:throw new Error('Generated unexpected PeerId type "'.concat(r.type,'"'));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),HM=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FM("RSA",null!==(r=null===t||void 0===t?void 0:t.bits)&&void 0!==r?r:2048);case 2:return n=e.sent,e.next=5,WM(n);case 5:if("RSA"!==(a=e.sent).type){e.next=8;break}return e.abrupt("return",a);case 8:throw new Error('Generated unexpected PeerId type "'.concat(a.type,'"'));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function WM(e){return GM.apply(this,arguments)}function GM(){return(GM=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ta(VM(t.public),KM(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var YM=function(e,t){St(n,e);var r=Rt(n);function n(){return(0,pe.Z)(this,n),r.apply(this,arguments)}return(0,he.Z)(n,[{key:tP,get:function(){return!0}},{key:t,get:function(){return"@libp2p/dummy-dht"}},{key:"wan",get:function(){throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED)}},{key:"lan",get:function(){throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED)}},{key:"get",value:function(){throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED)}},{key:"findProviders",value:function(){throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED)}},{key:"findPeer",value:function(){throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED)}},{key:"getClosestPeers",value:function(){throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED)}},{key:"provide",value:function(){throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED)}},{key:"put",value:function(){throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED)}},{key:"getMode",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshRoutingTable",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Ee(new Error(rP.DHT_DISABLED),nP.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(KS,Symbol.toStringTag),QM=function(e){St(r,e);var t=Rt(r);function r(){return(0,pe.Z)(this,r),t.apply(this,arguments)}return(0,he.Z)(r,[{key:"isStarted",value:function(){return!1}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"globalSignaturePolicy",get:function(){throw Ee(new Error(rP.PUBSUB_DISABLED),nP.ERR_PUBSUB_DISABLED)}},{key:"multicodecs",get:function(){throw Ee(new Error(rP.PUBSUB_DISABLED),nP.ERR_PUBSUB_DISABLED)}},{key:"getPeers",value:function(){throw Ee(new Error(rP.PUBSUB_DISABLED),nP.ERR_PUBSUB_DISABLED)}},{key:"getTopics",value:function(){throw Ee(new Error(rP.PUBSUB_DISABLED),nP.ERR_PUBSUB_DISABLED)}},{key:"subscribe",value:function(){throw Ee(new Error(rP.PUBSUB_DISABLED),nP.ERR_PUBSUB_DISABLED)}},{key:"unsubscribe",value:function(){throw Ee(new Error(rP.PUBSUB_DISABLED),nP.ERR_PUBSUB_DISABLED)}},{key:"getSubscribers",value:function(){throw Ee(new Error(rP.PUBSUB_DISABLED),nP.ERR_PUBSUB_DISABLED)}},{key:"publish",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Ee(new Error(rP.PUBSUB_DISABLED),nP.ERR_PUBSUB_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(KS);function JM(e,t){var r,n=(r={},(0,hp.Z)(r,Symbol.iterator,(function(){return n})),(0,hp.Z)(r,"next",(function(){var r=e.next(),n=r.value;return!0===r.done||null==n?{done:!0,value:void 0}:{done:!1,value:t(n)}})),r);return n}var XM=function(e){function t(e){if((0,pe.Z)(this,t),this.map=new Map,null!=e){var r,n=(0,v.Z)(e.entries());try{for(n.s();!(r=n.n()).done;){var a=(0,y.Z)(r.value,2),i=a[0],s=a[1];this.map.set(i.toString(),s)}}catch(Dy){n.e(Dy)}finally{n.f()}}}return(0,he.Z)(t,[{key:e,value:function(){return this.entries()}},{key:"clear",value:function(){this.map.clear()}},{key:"delete",value:function(e){this.map.delete(e.toString())}},{key:"entries",value:function(){return JM(this.map.entries(),(function(e){return[$n(e[0]),e[1]]}))}},{key:"forEach",value:function(e){var t=this;this.map.forEach((function(r,n){e(r,$n(n),t)}))}},{key:"get",value:function(e){return this.map.get(e.toString())}},{key:"has",value:function(e){return this.map.has(e.toString())}},{key:"set",value:function(e,t){this.map.set(e.toString(),t)}},{key:"keys",value:function(){return JM(this.map.keys(),(function(e){return $n(e)}))}},{key:"values",value:function(){return this.map.values()}},{key:"size",get:function(){return this.map.size}}]),t}(Symbol.iterator),$M=function(e){function t(e){if((0,pe.Z)(this,t),this.set=new Set,null!=e){var r,n=(0,v.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.set.add(a.toString())}}catch(Dy){n.e(Dy)}finally{n.f()}}}return(0,he.Z)(t,[{key:"size",get:function(){return this.set.size}},{key:e,value:function(){return this.values()}},{key:"add",value:function(e){this.set.add(e.toString())}},{key:"clear",value:function(){this.set.clear()}},{key:"delete",value:function(e){this.set.delete(e.toString())}},{key:"entries",value:function(){return JM(this.set.entries(),(function(e){var t=$n(e[0]);return[t,t]}))}},{key:"forEach",value:function(e){var t=this;this.set.forEach((function(r){var n=$n(r);e(n,n,t)}))}},{key:"has",value:function(e){return this.set.has(e.toString())}},{key:"values",value:function(){return JM(this.set.values(),(function(e){return $n(e)}))}}]),t}(Symbol.iterator),eU=(Symbol.iterator,_e("libp2p")),tU=function(e){St(r,e);var t=Rt(r);function r(e){var n,a,i,s,o,u,c,l;(0,pe.Z)(this,r),(l=t.call(this)).initializables=[],l.started=!1,l.peerId=e.peerId,l.components=new eI({peerId:e.peerId,datastore:null!==(n=e.datastore)&&void 0!==n?n:new Xc,connectionGater:(0,le.Z)({denyDialPeer:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyDialMultiaddr:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundConnection:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundConnection:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundEncryptedConnection:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundEncryptedConnection:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundUpgradedConnection:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundUpgradedConnection:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),filterMultiaddrForPeer:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e.connectionGater)}),l.components.setPeerStore(new XB((0,le.Z)({addressFilter:l.components.getConnectionGater().filterMultiaddrForPeer},e.peerStore))),l.services=[l.components],e.metrics.enabled&&(l.metrics=l.components.setMetrics(new cO(e.metrics))),l.peerStore=l.components.getPeerStore(),l.peerStore.addEventListener("peer",(function(e){var t=e.detail;l.dispatchEvent(new HS("peer:discovery",{detail:t}))})),null!=e.connectionProtector&&l.components.setConnectionProtector(e.connectionProtector),l.components.setUpgrader(new $O(l.components,{connectionEncryption:(null!==(a=e.connectionEncryption)&&void 0!==a?a:[]).map((function(e){return l.configureComponent(e)})),muxers:(null!==(i=e.streamMuxers)&&void 0!==i?i:[]).map((function(e){return l.configureComponent(e)}))})),l.connectionManager=l.components.setConnectionManager(new QP(e.connectionManager)),l.registrar=l.components.setRegistrar(new nB(l.components)),l.components.setTransportManager(new AO(l.components,e.transportManager)),l.components.setAddressManager(new kP(l.components,e.addresses)),l.configureComponent(new SB(l.components)),l.configureComponent(new $P(l.components,{enabled:e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,autoDialInterval:e.connectionManager.autoDialInterval}));var f=tO.generateOptions();l.keychain=l.configureComponent(new tO(l.components,(0,le.Z)((0,le.Z)({},f),e.keychain))),l.services.push(new _B(l.components,e.nat)),e.transports.forEach((function(e){l.components.getTransportManager().add(l.configureComponent(e))})),null!=e.streamMuxers&&e.streamMuxers.length>0&&(l.identifyService=new fB(l.components,(0,le.Z)({},e.identify)),l.configureComponent(l.identifyService)),null!=e.dht?l.dht=l.components.setDHT(e.dht):l.dht=new YM,null!=e.pubsub?l.pubsub=l.components.setPubSub(e.pubsub):l.pubsub=new QM;var p=(null!==(s=e.peerRouters)&&void 0!==s?s:[]).map((function(e){return l.configureComponent(e)}));null!=e.dht&&(p.push(l.configureComponent(new AB(l.dht))),l.dht.addEventListener("peer",(function(e){l.onDiscoveryPeer(e)}))),l.peerRouting=l.components.setPeerRouting(l.configureComponent(new gP(l.components,(0,le.Z)((0,le.Z)({},e.peerRouting),{},{routers:p}))));var h=(null!==(o=e.contentRouters)&&void 0!==o?o:[]).map((function(e){return l.configureComponent(e)}));null!=e.dht&&h.push(l.configureComponent(new $B(l.dht))),l.contentRouting=l.components.setContentRouting(l.configureComponent(new mP(l.components,{routers:h}))),e.relay.enabled&&(l.components.getTransportManager().add(l.configureComponent(new kN)),l.configureComponent(new TN(l.components,(0,le.Z)({addressSorter:e.connectionManager.addressSorter},e.relay)))),l.fetchService=l.configureComponent(new hB(l.components,(0,le.Z)({},e.fetch))),l.pingService=l.configureComponent(new vB(l.components,(0,le.Z)({},e.ping)));var d=l.configureComponent(new tL(l.components,{enabled:!1!==e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,dialTimeout:null!==(u=e.connectionManager.dialTimeout)&&void 0!==u?u:3e4}));l.addEventListener("peer:discovery",(function(e){l.isStarted()&&d.handle(e)}));var y,g=(0,v.Z)(null!==(c=e.peerDiscovery)&&void 0!==c?c:[]);try{for(g.s();!(y=g.n()).done;){var m=y.value;l.configureComponent(m),m.addEventListener("peer",(function(e){l.onDiscoveryPeer(e)}))}}catch(Dy){g.e(Dy)}finally{g.f()}return l}return(0,he.Z)(r,[{key:"configureComponent",value:function(e){return HA(e)&&this.services.push(e),WA(e)&&this.initializables.push(e),e}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:return this.started=!0,eU("libp2p is starting"),e.prev=4,this.initializables.forEach((function(e){e.init(t.components)})),e.next=8,Promise.all(this.services.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStart){e.next=3;break}return e.next=3,t.beforeStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.next=10,Promise.all(this.services.map((function(e){return e.start()})));case 10:return e.next=12,Promise.all(this.services.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStart){e.next=3;break}return e.next=3,t.afterStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return eU("libp2p has started"),e.next=15,this.components.getPeerStore().forEach((function(e){t.dispatchEvent(new HS("peer:discovery",{detail:{id:e.id,multiaddrs:e.addresses.map((function(e){return e.multiaddr})),protocols:e.protocols}}))}));case 15:e.next=23;break;case 17:return e.prev=17,e.t0=e.catch(4),eU.error("An error occurred starting libp2p",e.t0),e.next=22,this.stop();case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.started){e.next=2;break}return e.abrupt("return");case 2:return eU("libp2p is stopping"),this.started=!1,e.next=6,Promise.all(this.services.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStop){e.next=3;break}return e.next=3,t.beforeStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.next=8,Promise.all(this.services.map((function(e){return e.stop()})));case 8:return e.next=10,Promise.all(this.services.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStop){e.next=3;break}return e.next=3,t.afterStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:eU("libp2p has stopped");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadKeychain",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.keychain){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.keychain.findKeyByName("self");case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),e.next=11,this.keychain.importPeer("self",this.peerId);case 11:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"getConnections",value:function(e){return this.components.getConnectionManager().getConnections(e)}},{key:"getPeers",value:function(){var e,t=new $M,r=(0,v.Z)(this.components.getConnectionManager().getConnections());try{for(r.s();!(e=r.n()).done;){var n=e.value;t.add(n.remotePeer)}}catch(Dy){r.e(Dy)}finally{r.f()}return Array.from(t)}},{key:"dial",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=bP(t),a=n.id,i=n.multiaddrs,e.next=4,this.components.getPeerStore().addressBook.add(a,i);case 4:return e.next=6,this.components.getConnectionManager().openConnection(a,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dialProtocol",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:{},null!=r){e.next=3;break}throw Ee(new Error("no protocols were provided to open a stream"),nP.ERR_INVALID_PROTOCOLS_FOR_STREAM);case 3:if(0!==(r=Array.isArray(r)?r:[r]).length){e.next=6;break}throw Ee(new Error("no protocols were provided to open a stream"),nP.ERR_INVALID_PROTOCOLS_FOR_STREAM);case 6:return e.next=8,this.dial(t,n);case 8:return a=e.sent,e.next=11,a.newStream(r,n);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultiaddrs",value:function(){return this.components.getAddressManager().getAddresses()}},{key:"hangUp",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bP(t),n=r.id,e.next=3,this.components.getConnectionManager().closeConnections(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPublicKey",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:{},eU("getPublicKey %p",t),null==t.publicKey){e.next=4;break}return e.abrupt("return",t.publicKey);case 4:return e.next=6,this.peerStore.get(t);case 6:if(null==(n=e.sent).pubKey){e.next=9;break}return e.abrupt("return",n.pubKey);case 9:if(null!=this.dht){e.next=11;break}throw Ee(new Error("Public key was not in the peer store and the DHT is not enabled"),nP.ERR_NO_ROUTERS_AVAILABLE);case 11:a=(0,ba.concat)([(0,fr.fromString)("/pk/"),t.multihash.digest]),i=!1,s=!1,e.prev=14,u=hr(this.dht.get(a,r));case 16:return e.next=18,u.next();case 18:if(!(i=!(c=e.sent).done)){e.next=28;break}if("VALUE"!==(l=c.value).name){e.next=25;break}return f=Yu(l.value),e.next=24,this.peerStore.keyBook.set(t,l.value);case 24:return e.abrupt("return",f.bytes);case 25:i=!1,e.next=16;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(14),s=!0,o=e.t0;case 34:if(e.prev=34,e.prev=35,!i||null==u.return){e.next=39;break}return e.next=39,u.return();case 39:if(e.prev=39,!s){e.next=42;break}throw o;case 42:return e.finish(39);case 43:return e.finish(34);case 44:throw Ee(new Error("Node not responding with its public key: ".concat(t.toString())),nP.ERR_INVALID_RECORD);case 45:case"end":return e.stop()}}),e,this,[[14,30,34,44],[35,,39,43]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>2&&void 0!==o[2]?o[2]:{},a=bP(t),i=a.id,null==(s=a.multiaddrs)){e.next=5;break}return e.next=5,this.components.getPeerStore().addressBook.add(i,s);case 5:return e.next=7,this.fetchService.fetch(i,r,n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"ping",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},n=bP(t),a=n.id,!((i=n.multiaddrs).length>0)){e.next=5;break}return e.next=5,this.components.getPeerStore().addressBook.add(a,i);case 5:return e.next=7,this.pingService.ping(a,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().handle(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unhandle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDiscoveryPeer",value:function(e){var t=e.detail;t.id.toString()!==this.peerId.toString()?(t.multiaddrs.length>0&&this.components.getPeerStore().addressBook.add(t.id,t.multiaddrs).catch((function(e){return eU.error(e)})),t.protocols.length>0&&this.components.getPeerStore().protoBook.set(t.id,t.protocols).catch((function(e){return eU.error(e)})),this.dispatchEvent(new HS("peer:discovery",{detail:t}))):eU.error(new Error(nP.ERR_DISCOVERED_SELF))}}]),r}(KS);function rU(e){return nU.apply(this,arguments)}function nU(){return(nU=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.peerId){e.next=4;break}return e.next=3,qM();case 3:t.peerId=e.sent;case 4:return e.abrupt("return",new tU(vL(t)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aU(){return(aU=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rU(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iU=__webpack_require__(3137),sU=36e5,oU="/dht/provider",uU=864e5,cU=sU,lU=Number(3e5),fU=Number(3e4),pU=Number(3e5),hU=Number(3e4),dU=Number(3e4),vU=(0,fr.fromString)("/pk/");function yU(e){return(0,le.Z)((0,le.Z)({},e),{},{multiaddrs:e.multiaddrs.filter((function(e){var t=e.stringTuples(),r=(0,y.Z)(t,1),n=(0,y.Z)(r[0],2),a=n[0],i=n[1];return(4===a||6===a)&&(null!=i&&!BP(i))}))})}function gU(e){return(0,le.Z)((0,le.Z)({},e),{},{multiaddrs:e.multiaddrs.filter((function(e){var t=e.stringTuples(),r=(0,y.Z)(t,1),n=(0,y.Z)(r[0],2),a=n[0],i=n[1];return(4===a||6===a)&&(null!=i&&BP(i))}))})}function mU(e){return bU.apply(this,arguments)}function bU(){return(bU=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(t);case 2:return r=e.sent,e.abrupt("return",r.digest);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wU(e){return kU.apply(this,arguments)}function kU(){return(kU=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mU(t.toBytes());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xU(e){return new kr("".concat("/dht/record","/").concat((0,gr.toString)(e,"base32")),!1)}function _U(e){return(0,ba.concat)([vU,e.toBytes()])}function EU(e){return"/pk/"===(0,gr.toString)(e.slice(0,4))}function SU(e){return ea(e.slice(4))}function AU(e,t){var r=new Date;return new fl(e,t,r).serialize()}var IU="routing-table-size",CU=function(){function e(t){var r=this;(0,pe.Z)(this,e),this.components=new eI;var n=t.kBucketSize,a=t.pingTimeout,i=t.lan,s=t.pingConcurrency,o=t.protocol;this.log=_e("libp2p:kad-dht:".concat(i?"lan":"wan",":routing-table")),this.kBucketSize=null!==n&&void 0!==n?n:20,this.pingTimeout=null!==a&&void 0!==a?a:1e4,this.pingConcurrency=null!==s&&void 0!==s?s:10,this.lan=i,this.running=!1,this.protocol=o;var u=function(){var e,t;null===(e=r.components.getMetrics())||void 0===e||e.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(r.lan?"lan":"wan"),metric:"ping-queue-size",value:r.pingQueue.size}),null===(t=r.components.getMetrics())||void 0===t||t.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(r.lan?"lan":"wan"),metric:"ping-running",value:r.pingQueue.pending})};this.pingQueue=new Tn({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",u),this.pingQueue.addListener("next",u),this._onPing=this._onPing.bind(this)}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!0,e.t0=iU,e.next=4,wU(this.components.getPeerId());case 4:e.t1=e.sent,e.t2=this.kBucketSize,e.t3={localNodeId:e.t1,numberOfNodesPerKBucket:e.t2,numberOfNodesToPing:1},(t=new e.t0(e.t3)).on("ping",this._onPing),this.kb=t;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,this.pingQueue.clear(),this.kb=void 0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_onPing",value:function(e,t){var r=this;this.pingQueue.add((0,fe.Z)((0,ce.Z)().mark((function n(){var a;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.running){n.next=2;break}return n.abrupt("return");case 2:return a=0,n.prev=3,n.next=6,Promise.all(e.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new _r.TimeoutController(r.pingTimeout),i={signal:n.signal},r.log("pinging old contact %p",t.peer),e.next=6,r.components.getConnectionManager().openConnection(t.peer,i);case 6:return s=e.sent,e.next=9,s.newStream(r.protocol,i);case 9:o=e.sent,o.stream.close(),a++,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r.running&&null!=r.kb&&(r.log.error("could not ping peer %p",t.peer,e.t0),r.log("evicting old contact after ping failed %p",t),r.kb.remove(t.id));case 18:return e.prev=18,null!=n&&n.clear(),null===(u=r.components.getMetrics())||void 0===u||u.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(r.lan?"lan":"wan"),metric:IU,value:r.size}),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[0,15,18,22]])})));return function(t){return e.apply(this,arguments)}}()));case 6:r.running&&a<e.length&&null!=r.kb&&(r.log("adding new contact %p",t.peer),r.kb.add(t)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),r.log.error("could not process k-bucket ping event",n.t0);case 12:case"end":return n.stop()}}),n,null,[[3,9]])})))).catch((function(e){r.log.error("could not process k-bucket ping event",e)}))}},{key:"size",get:function(){return null==this.kb?0:this.kb.count()}},{key:"find",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wU(t);case 2:if(r=e.sent,null==(n=this.closestPeer(r))||!t.equals(n)){e.next=6;break}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closestPeer",value:function(e){var t=this.closestPeers(e,1);if(t.length>0)return t[0]}},{key:"closestPeers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.kBucketSize;if(null==this.kb)return[];var r=this.kb.closest(e,t);return r.map((function(e){return e.peer}))}},{key:"add",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.kb){e.next=2;break}throw new Error("RoutingTable is not started");case 2:return e.next=4,wU(t);case 4:n=e.sent,this.kb.add({id:n,peer:t}),this.log("added %p with kad id %b",t,n),null===(r=this.components.getMetrics())||void 0===r||r.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(this.lan?"lan":"wan"),metric:IU,value:this.size});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.kb){e.next=2;break}throw new Error("RoutingTable is not started");case 2:return e.next=4,wU(t);case 4:n=e.sent,this.kb.remove(n),null===(r=this.components.getMetrics())||void 0===r||r.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(this.lan?"lan":"wan"),metric:IU,value:this.size});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ZU=__webpack_require__(3089);function RU(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var r=(0,ZU.E)(e.length),n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}var TU,DU,PU=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782],NU=function(){function e(t){(0,pe.Z)(this,e);var r=t.peerRouting,n=t.routingTable,a=t.refreshInterval,i=t.refreshQueryTimeout,s=t.lan;this.log=_e("libp2p:kad-dht:".concat(s?"lan":"wan",":routing-table:refresh")),this.peerRouting=r,this.routingTable=n,this.refreshInterval=null!==a&&void 0!==a?a:pU,this.refreshQueryTimeout=null!==i&&void 0!==i?i:hU,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}return(0,he.Z)(e,[{key:"init",value:function(e){}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.log("refreshing routing table every ".concat(this.refreshInterval,"ms")),this.refreshTable(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshTable",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.log("refreshing routing table");var r=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(r);this.log("max common prefix length ".concat(r)),this.log("tracked CPLs [ ".concat(n.map((function(e){return e.toISOString()})).join(", ")," ]")),Promise.all(n.map(function(){var a=(0,fe.Z)((0,ce.Z)().mark((function a(i,s){var o,u;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e._refreshCommonPrefixLength(s,i,t);case 3:if(0!==e._numPeersForCpl(r)){a.next=18;break}o=Math.min(2*(s+1),n.length-1),u=s+1;case 6:if(!(u<o+1)){a.next=18;break}return a.prev=7,a.next=10,e._refreshCommonPrefixLength(u,i,t);case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(7),e.log.error(a.t0);case 15:u++,a.next=6;break;case 18:a.next=23;break;case 20:a.prev=20,a.t1=a.catch(0),e.log.error(a.t1);case 23:case"end":return a.stop()}}),a,null,[[0,20],[7,12]])})));return function(e,t){return a.apply(this,arguments)}}())).catch((function(t){e.log.error(t)})).then((function(){e.refreshTimeoutId=setTimeout(e.refreshTable,e.refreshInterval),null!=e.refreshTimeoutId.unref&&e.refreshTimeoutId.unref()})).catch((function(t){e.log.error(t)}))}},{key:"_refreshCommonPrefixLength",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||!(r.getTime()>Date.now()-this.refreshInterval)){e.next=3;break}return this.log("not running refresh for cpl %s as time since last refresh not above interval",t),e.abrupt("return");case 3:return e.next=5,this._generateRandomPeerId(t);case 5:return a=e.sent,this.log("starting refreshing cpl %s with key %p (routing table size was %s)",t,a,this.routingTable.size),i=new _r.TimeoutController(this.refreshQueryTimeout),e.prev=8,e.next=11,mx(this.peerRouting.getClosestPeers(a.toBytes(),{signal:i.signal}));case 11:s=e.sent,this.log("found ".concat(s," peers that were close to imaginary peer %p"),a),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",t,a,this.routingTable.size);case 14:return e.prev=14,i.clear(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[8,,14,17]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_getTrackedCommonPrefixLengthsForRefresh",value:function(e){e>15&&(e=15);for(var t=[],r=0;r<=e;r++){var n;t[r]=null!==(n=this.commonPrefixLengthRefreshedAt[r])&&void 0!==n?n:new Date}return t}},{key:"_generateRandomPeerId",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.routingTable.kb){e.next=2;break}throw new Error("Routing table not started");case 2:return r=Ui(2),n=(r[1]<<8)+r[0],e.next=6,this._makePeerId(this.routingTable.kb.localNodeId,n,t);case 6:return a=e.sent,e.abrupt("return",ea(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_makePeerId",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>15)){e.next=2;break}throw new Error("Cannot generate peer ID for common prefix length greater than ".concat(15));case 2:return a=new DataView(t.buffer,t.byteOffset,t.byteLength),i=a.getUint16(0,!1),o=PU[(i^32768>>n)&(s=65535<<16-(n+1))|r&~s],u=new ArrayBuffer(34),(c=new DataView(u,0,u.byteLength)).setUint8(0,qn.sha256.code),c.setUint8(1,32),c.setUint32(2,o,!1),e.abrupt("return",new Uint8Array(c.buffer,c.byteOffset,c.byteLength));case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_maxCommonPrefix",value:function(){var e,t=0,r=(0,v.Z)(this._prefixLengths());try{for(r.s();!(e=r.n()).done;){var n=e.value;n>t&&(t=n)}}catch(Dy){r.e(Dy)}finally{r.f()}return t}},{key:"_numPeersForCpl",value:function(e){var t,r=0,n=(0,v.Z)(this._prefixLengths());try{for(n.s();!(t=n.n()).done;){t.value===e&&r++}}catch(Dy){n.e(Dy)}finally{n.f()}return r}},{key:"_prefixLengths",value:(0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.routingTable.kb){e.next=2;break}return e.abrupt("return");case 2:t=(0,v.Z)(this.routingTable.kb.toIterable()),e.prev=3,t.s();case 5:if((r=t.n()).done){e.next=33;break}n=r.value.id,a=RU(this.routingTable.kb.localNodeId,n),i=0,s=(0,v.Z)(a),e.prev=10,s.s();case 12:if((o=s.n()).done){e.next=21;break}if(0!==o.value){e.next=18;break}i++,e.next=19;break;case 18:return e.abrupt("break",21);case 19:e.next=12;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),s.e(e.t0);case 26:return e.prev=26,s.f(),e.finish(26);case 29:return e.next=31,i;case 31:e.next=5;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(3),t.e(e.t1);case 38:return e.prev=38,t.f(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[3,35,38,41],[10,23,26,29]])}))}]),e}();!function(e){e.codec=function(){return yi({1:{name:"key",codec:Ja,optional:!0},2:{name:"value",codec:Ja,optional:!0},3:{name:"author",codec:Ja,optional:!0},4:{name:"signature",codec:Ja,optional:!0},5:{name:"timeReceived",codec:Si,optional:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(TU||(TU={})),function(e){var t,r;!function(e){e.PUT_VALUE="PUT_VALUE",e.GET_VALUE="GET_VALUE",e.ADD_PROVIDER="ADD_PROVIDER",e.GET_PROVIDERS="GET_PROVIDERS",e.FIND_NODE="FIND_NODE",e.PING="PING"}(e.MessageType||(e.MessageType={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(t||(t={})),function(e){e.codec=function(){return $a(t)}}(e.MessageType||(e.MessageType={})),function(e){e.NOT_CONNECTED="NOT_CONNECTED",e.CONNECTED="CONNECTED",e.CAN_CONNECT="CAN_CONNECT",e.CANNOT_CONNECT="CANNOT_CONNECT"}(e.ConnectionType||(e.ConnectionType={})),function(e){e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.CONNECTED=1]="CONNECTED",e[e.CAN_CONNECT=2]="CAN_CONNECT",e[e.CANNOT_CONNECT=3]="CANNOT_CONNECT"}(r||(r={})),function(e){e.codec=function(){return $a(r)}}(e.ConnectionType||(e.ConnectionType={})),function(t){t.codec=function(){return yi({1:{name:"id",codec:Ja,optional:!0},2:{name:"addrs",codec:Ja,repeats:!0},3:{name:"connection",codec:e.ConnectionType.codec(),optional:!0}})},t.encode=function(e){return Ga(e,t.codec())},t.decode=function(e){return Wa(e,t.codec())}}(e.Peer||(e.Peer={})),e.codec=function(){return yi({1:{name:"type",codec:e.MessageType.codec(),optional:!0},10:{name:"clusterLevelRaw",codec:ai,optional:!0},2:{name:"key",codec:Ja,optional:!0},3:{name:"record",codec:Ja,optional:!0},8:{name:"closerPeers",codec:e.Peer.codec(),repeats:!0},9:{name:"providerPeers",codec:e.Peer.codec(),repeats:!0}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(DU||(DU={}));var OU=DU.MessageType,BU=DU.ConnectionType,LU=Object.keys(OU),MU=function(){function e(t,r,n){if((0,pe.Z)(this,e),!(r instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=t,this.key=r,this.clusterLevelRaw=n,this.closerPeers=[],this.providerPeers=[],this.record=void 0}return(0,he.Z)(e,[{key:"clusterLevel",get:function(){var e=this.clusterLevelRaw-1;return e<0?0:e},set:function(e){this.clusterLevelRaw=e}},{key:"serialize",value:function(){return DU.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(UU),providerPeers:this.providerPeers.map(UU),record:null==this.record?void 0:this.record.serialize()})}}],[{key:"deserialize",value:function(t){var r,n,a,i,s=DU.decode(t),o=new e(null!==(r=s.type)&&void 0!==r?r:DU.MessageType.PUT_VALUE,null!==(n=s.key)&&void 0!==n?n:Uint8Array.from([]),null!==(a=s.clusterLevelRaw)&&void 0!==a?a:0);return o.closerPeers=s.closerPeers.map(jU),o.providerPeers=s.providerPeers.map(jU),null!=(null===(i=s.record)||void 0===i?void 0:i.length)&&(o.record=fl.deserialize(s.record)),o}}]),e}();function UU(e){var t;return{id:e.id.toBytes(),addrs:(null!==(t=e.multiaddrs)&&void 0!==t?t:[]).map((function(e){return e.bytes})),connection:BU.CONNECTED}}function jU(e){var t;if(null==e.id)throw new Error("Invalid peer in message");return{id:ea(e.id),multiaddrs:(null!==(t=e.addrs)&&void 0!==t?t:[]).map((function(e){return new Lf(e)})),protocols:[]}}function FU(e){return(0,le.Z)((0,le.Z)({},e),{},{name:"SENDING_QUERY",type:0,messageName:e.type,messageType:LU.indexOf(e.type.toString())})}function zU(e){return(0,le.Z)((0,le.Z)({},e),{},{name:"PEER_RESPONSE",type:1,messageName:e.messageType,closer:null!=e.closer?e.closer:[],providers:null!=e.providers?e.providers:[]})}function VU(e){return(0,le.Z)((0,le.Z)({},e),{},{name:"FINAL_PEER",type:2})}function KU(e){return(0,le.Z)((0,le.Z)({},e),{},{name:"QUERY_ERROR",type:3})}function qU(e){return(0,le.Z)((0,le.Z)({},e),{},{name:"PROVIDER",type:4})}function HU(e){return(0,le.Z)((0,le.Z)({},e),{},{name:"VALUE",type:5})}function WU(e){return(0,le.Z)((0,le.Z)({},e),{},{name:"DIALING_PEER",type:7})}var GU=function(e){St(r,e);var t=Rt(r);function r(e){var n;(0,pe.Z)(this,r),(n=t.call(this)).components=new eI;var a=e.protocol,i=e.lan;return n.log=_e("libp2p:kad-dht:".concat(i?"lan":"wan",":network")),n.running=!1,n.protocol=a,n}return(0,he.Z)(r,[{key:"init",value:function(e){this.components=e}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:this.running=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.running}},{key:"sendRequest",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye((0,ce.Z)().mark((function a(){var i,s,o,u;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.running){a.next=2;break}return a.abrupt("return");case 2:return r.log("sending %s to %p",t.type,e),a.next=5,WU({peer:e});case 5:return a.next=7,FU({to:e,type:t.type});case 7:return a.prev=7,a.next=10,pr(r.components.getConnectionManager().openConnection(e,n));case 10:return s=a.sent,a.next=13,pr(s.newStream(r.protocol,n));case 13:return o=a.sent,i=o.stream,a.next=17,pr(r._writeReadMessage(i,t.serialize(),n));case 17:return u=a.sent,a.next=20,zU({from:e,messageType:u.type,closer:u.closerPeers,providers:u.providerPeers,record:u.record});case 20:a.next=26;break;case 22:return a.prev=22,a.t0=a.catch(7),a.next=26,KU({from:e,error:a.t0});case 26:return a.prev=26,null!=i&&i.close(),a.finish(26);case 29:case"end":return a.stop()}}),a,null,[[7,22,26,29]])})))()}},{key:"sendMessage",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye((0,ce.Z)().mark((function a(){var i,s,o;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.running){a.next=2;break}return a.abrupt("return");case 2:return r.log("sending %s to %p",t.type,e),a.next=5,WU({peer:e});case 5:return a.next=7,FU({to:e,type:t.type});case 7:return a.prev=7,a.next=10,pr(r.components.getConnectionManager().openConnection(e,n));case 10:return s=a.sent,a.next=13,pr(s.newStream(r.protocol,n));case 13:return o=a.sent,i=o.stream,a.next=17,pr(r._writeMessage(i,t.serialize(),n));case 17:return a.next=19,zU({from:e,messageType:t.type});case 19:a.next=25;break;case 21:return a.prev=21,a.t0=a.catch(7),a.next=25,KU({from:e,error:a.t0});case 25:return a.prev=25,null!=i&&i.close(),a.finish(25);case 28:case"end":return a.stop()}}),a,null,[[7,21,25,28]])})))()}},{key:"_writeMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=n.signal&&(t=cA(t,n.signal)),e.next=3,kp([r],GS(),t,zc);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_writeReadMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=n.signal&&(t=cA(t,n.signal)),e.next=3,kp([r],GS(),t,tA(),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bb(t);case 2:if(null==(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:throw Ee(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return a=e.sent,(i=MU.deserialize(a)).closerPeers.forEach((function(e){s.dispatchEvent(new HS("peer",{detail:e}))})),i.providerPeers.forEach((function(e){s.dispatchEvent(new HS("peer",{detail:e}))})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}(KS);function YU(e,t){var r=t.key,n=(0,gr.toString)(r).split("/");if(!(n.length<3)){var a=e[n[1].toString()];if(null==a){throw Ee(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE")}return a(r,t.value)}}var QU=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw Ee(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");case 2:if(!(t.byteLength<5)){e.next=4;break}throw Ee(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");case 4:if("/pk/"===(0,gr.toString)(t.subarray(0,4))){e.next=7;break}throw Ee(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");case 7:return n=t.slice(4),e.next=10,qn.sha256.digest(r);case 10:if(a=e.sent,(0,Kn.equals)(n,a.bytes)){e.next=13;break}throw Ee(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH");case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),JU={pk:QU};function XU(e,t,r){if(0===r.length){throw Ee(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED")}var n=(0,gr.toString)(t).split("/");if(n.length<3){throw Ee(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}var a=e[n[1].toString()];if(null==a){var i="Unrecognized key prefix: ".concat(n[1]);throw Ee(new Error(i),"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===r.length?0:a(t,r)}var $U={pk:function(e,t){return 0}},ej=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.validators,n=t.selectors,a=t.peerRouting,i=t.queryManager,s=t.routingTable,o=t.network,u=t.lan;this.log=_e("libp2p:kad-dht:".concat(u?"lan":"wan",":content-fetching")),this.validators=r,this.selectors=n,this.peerRouting=a,this.queryManager=i,this.routingTable=s,this.network=o}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"putLocal",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xU(t),e.next=3,this.components.getDatastore().put(n,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getLocal",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("getLocal %b",t),r=xU(t),this.log("fetching record for key %k",r),e.next=5,this.components.getDatastore().get(r);case 5:return n=e.sent,this.log("found %k in local datastore",r),a=fl.deserialize(n),e.next=10,YU(this.validators,a);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendCorrectionRecord",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ye((0,ce.Z)().mark((function i(){var s,o,u,c,l,f,p,h,d,y,g,m,b,w,k;return(0,ce.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.log("sendCorrection for %b",e),i.next=3,pr(AU(e,r));case 3:s=i.sent,o=(0,v.Z)(t),i.prev=5,o.s();case 7:if((u=o.n()).done){i.next=63;break}if(c=u.value,l=c.value,f=c.from,!(0,Kn.equals)(l,r)){i.next=12;break}return n.log("record was ok"),i.abrupt("continue",61);case 12:if(!n.components.getPeerId().equals(f)){i.next=24;break}return i.prev=13,p=xU(e),n.log("Storing corrected record for key ".concat(p.toString())),i.next=18,pr(n.components.getDatastore().put(p,s));case 18:i.next=23;break;case 20:i.prev=20,i.t0=i.catch(13),n.log.error("Failed error correcting self",i.t0);case 23:return i.abrupt("continue",61);case 24:h=!1,(d=new MU(OU.PUT_VALUE,e,0)).record=fl.deserialize(s),y=!1,g=!1,i.prev=29,b=hr(n.network.sendRequest(f,d,a));case 31:return i.next=33,pr(b.next());case 33:if(!(y=!(w=i.sent).done)){i.next=41;break}return"PEER_RESPONSE"===(k=w.value).name&&null!=k.record&&(0,Kn.equals)(k.record.value,fl.deserialize(s).value)&&(h=!0),i.next=38,k;case 38:y=!1,i.next=31;break;case 41:i.next=47;break;case 43:i.prev=43,i.t1=i.catch(29),g=!0,m=i.t1;case 47:if(i.prev=47,i.prev=48,!y||null==b.return){i.next=52;break}return i.next=52,pr(b.return());case 52:if(i.prev=52,!g){i.next=55;break}throw m;case 55:return i.finish(52);case 56:return i.finish(47);case 57:if(h){i.next=60;break}return i.next=60,KU({from:f,error:Ee(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")});case 60:n.log.error("Failed error correcting entry");case 61:i.next=7;break;case 63:i.next=68;break;case 65:i.prev=65,i.t2=i.catch(5),o.e(i.t2);case 68:return i.prev=68,o.f(),i.finish(68);case 71:case"end":return i.stop()}}),i,null,[[5,65,68,71],[13,20],[29,43,47,57],[48,,52,56]])})))()}},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye((0,ce.Z)().mark((function a(){var i,s;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.log("put key %b value %b",e,t),a.next=3,pr(AU(e,t));case 3:return i=a.sent,s=xU(e),r.log("storing record for key ".concat(s.toString())),a.next=8,pr(r.components.getDatastore().put(s,i));case 8:return a.delegateYield(ia(hr(kp(r.peerRouting.getClosestPeers(e,{signal:n.signal}),(function(t){return $c(t,(function(t){return(0,fe.Z)((0,ce.Z)().mark((function a(){var s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("FINAL_PEER"===t.name){a.next=2;break}return a.abrupt("return",[t]);case 2:s=[],(o=new MU(OU.PUT_VALUE,e,0)).record=fl.deserialize(i),r.log("send put to %p",t.peer.id),u=!1,c=!1,a.prev=8,f=hr(r.network.sendRequest(t.peer.id,o,n));case 10:return a.next=12,f.next();case 12:if(!(u=!(p=a.sent).done)){a.next=21;break}if(h=p.value,s.push(h),"PEER_RESPONSE"===h.name){a.next=17;break}return a.abrupt("continue",18);case 17:null!=h.record&&(0,Kn.equals)(h.record.value,fl.deserialize(i).value)||s.push(KU({from:t.peer.id,error:Ee(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")}));case 18:u=!1,a.next=10;break;case 21:a.next=27;break;case 23:a.prev=23,a.t0=a.catch(8),c=!0,l=a.t0;case 27:if(a.prev=27,a.prev=28,!u||null==f.return){a.next=32;break}return a.next=32,f.return();case 32:if(a.prev=32,!c){a.next=35;break}throw l;case 35:return a.finish(32);case 36:return a.finish(27);case 37:return a.abrupt("return",s);case 38:case"end":return a.stop()}}),a,null,[[8,23,27,37],[28,,32,36]])})))}))}),(function(e){return fp(e,{ordered:!1,concurrency:3})}),function(){var e=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t);case 4:return e.next=6,pr(i.next());case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}return o=s.value,e.delegateYield(ia(hr(o),pr),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),n=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,pr(i.return());case 23:if(e.prev=23,!n){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}())),pr),"t0",9);case 9:case"end":return a.stop()}}),a)})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.log("get %b",e),a=[],i=!1,s=!1,n.prev=4,u=hr(t.getMany(e,r));case 6:return n.next=8,pr(u.next());case 8:if(!(i=!(c=n.sent).done)){n.next=16;break}return"VALUE"===(l=c.value).name&&a.push(l),n.next=13,l;case 13:i=!1,n.next=6;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(4),s=!0,o=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,pr(u.return());case 27:if(n.prev=27,!s){n.next=30;break}throw o;case 30:return n.finish(27);case 31:return n.finish(22);case 32:if(0!==a.length){n.next=34;break}return n.abrupt("return");case 34:f=a.map((function(e){return e.value})),p=0,n.prev=36,p=XU(t.selectors,e,f),n.next=44;break;case 40:if(n.prev=40,n.t1=n.catch(36),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"===n.t1.code){n.next=44;break}throw n.t1;case 44:if(h=f[p],t.log("GetValue %b %b",e,h),null!=h){n.next=48;break}throw Ee(new Error("best value was not found"),"ERR_NOT_FOUND");case 48:return n.delegateYield(ia(hr(t.sendCorrectionRecord(e,a,h,r)),pr),"t2",49);case 49:return n.next=51,a[p];case 51:case"end":return n.stop()}}),n,null,[[4,18,22,32],[23,,27,31],[36,40]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("getMany values for %b",e),n.prev=1,n.next=4,pr(t.getLocal(e));case 4:return a=n.sent,n.next=7,HU({value:a.value,from:t.components.getPeerId()});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),t.log("error getting local value for %b",e,n.t0);case 12:return n.next=14,pr(mU(e));case 14:return i=n.sent,s=t.routingTable.closestPeers(i),t.log("found %d peers in routing table",s.length),o=t,u=function(){var t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,u,c,l,f;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.peer,a=r.signal,i=!1,s=!1,t.prev=3,c=hr(o.peerRouting.getValueOrPeers(n,e,{signal:a}));case 5:return t.next=7,pr(c.next());case 7:if(!(i=!(l=t.sent).done)){t.next=17;break}return f=l.value,t.next=11,f;case 11:if("PEER_RESPONSE"!==f.name||null==f.record){t.next=14;break}return t.next=14,HU({from:n,value:f.record.value});case 14:i=!1,t.next=5;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(3),s=!0,u=t.t0;case 23:if(t.prev=23,t.prev=24,!i||null==c.return){t.next=28;break}return t.next=28,pr(c.return());case 28:if(t.prev=28,!s){t.next=31;break}throw u;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[3,19,23,33],[24,,28,32]])})));return function(e){return t.apply(this,arguments)}}(),n.delegateYield(ia(hr(t.queryManager.run(e,s,u,r)),pr),"t1",20);case 20:case"end":return n.stop()}}),n,null,[[1,9]])})))()}}]),e}(),tj=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.network,n=t.peerRouting,a=t.queryManager,i=t.routingTable,s=t.providers,o=t.lan;this.log=_e("libp2p:kad-dht:".concat(o?"lan":"wan",":content-routing")),this.network=r,this.peerRouting=n,this.queryManager=a,this.routingTable=i,this.providers=s}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"provide",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye((0,ce.Z)().mark((function a(){var i,s,o;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.log("provide %s",e),a.next=3,pr(r.providers.addProvider(e,r.components.getPeerId()));case 3:return(i=new MU(OU.ADD_PROVIDER,e.bytes,0)).providerPeers=[{id:r.components.getPeerId(),multiaddrs:t,protocols:[]}],s=0,o=function(t){return(0,fe.Z)((0,ce.Z)().mark((function a(){var o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("FINAL_PEER"===t.name){a.next=2;break}return a.abrupt("return",[t]);case 2:o=[],r.log("putProvider %s to %p",e,t.peer.id),a.prev=4,r.log("sending provider record for %s to %p",e,t.peer.id),u=!1,c=!1,a.prev=8,f=hr(r.network.sendMessage(t.peer.id,i,n));case 10:return a.next=12,f.next();case 12:if(!(u=!(p=a.sent).done)){a.next=19;break}"PEER_RESPONSE"===(h=p.value).name&&(r.log("sent provider record for %s to %p",e,t.peer.id),s++),o.push(h);case 16:u=!1,a.next=10;break;case 19:a.next=25;break;case 21:a.prev=21,a.t0=a.catch(8),c=!0,l=a.t0;case 25:if(a.prev=25,a.prev=26,!u||null==f.return){a.next=30;break}return a.next=30,f.return();case 30:if(a.prev=30,!c){a.next=33;break}throw l;case 33:return a.finish(30);case 34:return a.finish(25);case 35:a.next=41;break;case 37:a.prev=37,a.t1=a.catch(4),r.log.error("error sending provide record to peer %p",t.peer.id,a.t1),o.push(KU({from:t.peer.id,error:a.t1}));case 41:return a.abrupt("return",o);case 42:case"end":return a.stop()}}),a,null,[[4,37],[8,21,25,35],[26,,30,34]])})))},a.delegateYield(ia(hr(kp(r.peerRouting.getClosestPeers(e.multihash.bytes,n),(function(e){return $c(e,(function(e){return o(e)}))}),(function(e){return fp(e,{ordered:!1,concurrency:3})}),function(){var e=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t);case 4:return e.next=6,pr(i.next());case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}return o=s.value,e.delegateYield(ia(hr(o),pr),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),n=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,pr(i.return());case 23:if(e.prev=23,!n){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}())),pr),"t0",8);case 8:r.log("sent provider records to %d peers",s);case 9:case"end":return a.stop()}}),a)})))()}},{key:"findProviders",value:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f,p,h,d,y,g,m,b,w,k,x,_,E,S,A;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.routingTable.kBucketSize,i=e.multihash.bytes,n.next=4,pr(mU(i));case 4:return s=n.sent,o=r,r.log("findProviders %c",e),n.next=9,pr(r.providers.getProviders(e));case 9:if(!((u=n.sent).length>0)){n.next=48;break}c=[],l=(0,v.Z)(u.slice(0,a)),n.prev=13,l.s();case 15:if((f=l.n()).done){n.next=36;break}return h=f.value,n.t0=c,n.t1=h,n.next=21,pr(r.components.getPeerStore().addressBook.get(h));case 21:if(n.t3=p=n.sent,n.t2=null!==n.t3,!n.t2){n.next=25;break}n.t2=void 0!==p;case 25:if(!n.t2){n.next=29;break}n.t4=p,n.next=30;break;case 29:n.t4=[];case 30:n.t5=n.t4.map((function(e){return e.multiaddr})),n.t6=[],n.t7={id:n.t1,multiaddrs:n.t5,protocols:n.t6},n.t0.push.call(n.t0,n.t7);case 34:n.next=15;break;case 36:n.next=41;break;case 38:n.prev=38,n.t8=n.catch(13),l.e(n.t8);case 41:return n.prev=41,l.f(),n.finish(41);case 44:return n.next=46,zU({from:r.components.getPeerId(),messageType:OU.GET_PROVIDERS,providers:c});case 46:return n.next=48,qU({from:r.components.getPeerId(),providers:c});case 48:if(!(u.length>=a)){n.next=50;break}return n.abrupt("return");case 50:d=function(){var e=ye((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.peer,n=t.signal,a=new MU(OU.GET_PROVIDERS,i,0),e.delegateYield(ia(hr(o.network.sendRequest(r,a,{signal:n})),pr),"t0",3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=new Set(u.map((function(e){return e.toString()}))),g=!1,m=!1,n.prev=54,w=hr(r.queryManager.run(i,r.routingTable.closestPeers(s),d,t));case 56:return n.next=58,pr(w.next());case 58:if(!(g=!(k=n.sent).done)){n.next=92;break}return x=k.value,n.next=62,x;case 62:if("PEER_RESPONSE"!==x.name){n.next=89;break}r.log("Found %d provider entries for %c and %d closer peers",x.providers.length,e,x.closer.length),_=[],E=(0,v.Z)(x.providers),n.prev=66,E.s();case 68:if((S=E.n()).done){n.next=76;break}if(A=S.value,!y.has(A.id.toString())){n.next=72;break}return n.abrupt("continue",74);case 72:y.add(A.id.toString()),_.push(A);case 74:n.next=68;break;case 76:n.next=81;break;case 78:n.prev=78,n.t9=n.catch(66),E.e(n.t9);case 81:return n.prev=81,E.f(),n.finish(81);case 84:if(!(_.length>0)){n.next=87;break}return n.next=87,qU({from:x.from,providers:_});case 87:if(y.size!==a){n.next=89;break}return n.abrupt("return");case 89:g=!1,n.next=56;break;case 92:n.next=98;break;case 94:n.prev=94,n.t10=n.catch(54),m=!0,b=n.t10;case 98:if(n.prev=98,n.prev=99,!g||null==w.return){n.next=103;break}return n.next=103,pr(w.return());case 103:if(n.prev=103,!m){n.next=106;break}throw b;case 106:return n.finish(103);case 107:return n.finish(98);case 108:case"end":return n.stop()}}),n,null,[[13,38,41,44],[54,94,98,108],[66,78,81,84],[99,,103,107]])})))()}}]),e}(),rj=function(){function e(t,r){(0,pe.Z)(this,e),this.originDhtKey=t,this.capacity=r,this.peerDistances=[]}return(0,he.Z)(e,[{key:"length",get:function(){return this.peerDistances.length}},{key:"peers",get:function(){return this.peerDistances.map((function(e){return e.peerId}))}},{key:"add",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.peerDistances.find((function(e){return e.peerId.equals(t)}))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wU(t);case 4:r=e.sent,n={peerId:t,distance:RU(this.originDhtKey,r)},this.peerDistances.push(n),this.peerDistances.sort((function(e,t){return Lx(e.distance,t.distance)})),this.peerDistances=this.peerDistances.slice(0,this.capacity);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"anyCloser",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(0!==this.length){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,Promise.all(t.map(wU));case 6:r=e.sent,n=this.peerDistances[this.peerDistances.length-1].distance,a=(0,v.Z)(r),e.prev=9,a.s();case 11:if((i=a.n()).done){e.next=18;break}if(s=i.value,!(Lx(RU(this.originDhtKey,s),n)<0)){e.next=16;break}return e.abrupt("return",!0);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,this,[[9,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),nj=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.routingTable,n=t.network,a=t.validators,i=t.queryManager,s=t.lan;this.routingTable=r,this.network=n,this.validators=a,this.queryManager=i,this.log=_e("libp2p:kad-dht:".concat(s?"lan":"wan",":peer-routing"))}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"findPeerLocal",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.routingTable.find(t);case 2:if(null==(n=e.sent)){e.next=15;break}return this.log("findPeerLocal found %p in routing table",t),e.prev=5,e.next=8,this.components.getPeerStore().get(n);case 8:r=e.sent,e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(5),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:if(null!=r){e.next=26;break}return e.prev=16,e.next=19,this.components.getPeerStore().get(t);case 19:r=e.sent,e.next=26;break;case 22:if(e.prev=22,e.t1=e.catch(16),"ERR_NOT_FOUND"===e.t1.code){e.next=26;break}throw e.t1;case 26:if(null==r){e.next=29;break}return this.log("findPeerLocal found %p in peer store",t),e.abrupt("return",{id:r.id,multiaddrs:r.addresses.map((function(e){return e.multiaddr})),protocols:[]});case 29:case"end":return e.stop()}}),e,this,[[5,11],[16,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getValueSingle",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye((0,ce.Z)().mark((function a(){var i;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=new MU(OU.GET_VALUE,t,0),a.delegateYield(ia(hr(r.network.sendRequest(e,i,n)),pr),"t0",2);case 2:case"end":return a.stop()}}),a)})))()}},{key:"getPublicKeyFromNode",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=_U(e),i=!1,s=!1,n.prev=3,u=hr(t._getValueSingle(e,a,r));case 5:return n.next=7,pr(u.next());case 7:if(!(i=!(c=n.sent).done)){n.next=24;break}return l=c.value,n.next=11,l;case 11:if("PEER_RESPONSE"!==l.name||null==l.record){n.next=21;break}return n.next=14,pr(ta(Qu({bytes:l.record.value})));case 14:if((f=n.sent).equals(e)){n.next=17;break}throw Ee(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");case 17:if(null!=f.publicKey){n.next=19;break}throw Ee(new Error("public key missing"),"ERR_PUBLIC_KEY_MISSING");case 19:return n.next=21,HU({from:e,value:f.publicKey});case 21:i=!1,n.next=5;break;case 24:n.next=30;break;case 26:n.prev=26,n.t0=n.catch(3),s=!0,o=n.t0;case 30:if(n.prev=30,n.prev=31,!i||null==u.return){n.next=35;break}return n.next=35,pr(u.return());case 35:if(n.prev=35,!s){n.next=38;break}throw o;case 38:return n.finish(35);case 39:return n.finish(30);case 40:throw Ee(new Error("Node not responding with its public key: ".concat(e.toString())),"ERR_INVALID_RECORD");case 41:case"end":return n.stop()}}),n,null,[[3,26,30,40],[31,,35,39]])})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f,p,h,d,v,y;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("findPeer %p",e),n.next=3,pr(t.findPeerLocal(e));case 3:if(null==(a=n.sent)){n.next=9;break}return t.log("found local"),n.next=8,VU({from:t.components.getPeerId(),peer:a});case 8:return n.abrupt("return");case 9:return n.next=11,pr(wU(e));case 11:if(i=n.sent,s=t.routingTable.closestPeers(i),null==s.find((function(t){return t.equals(e)}))){n.next=29;break}return n.prev=15,n.next=18,pr(t.components.getPeerStore().get(e));case 18:return o=n.sent,t.log("found in peerStore"),n.next=22,VU({from:t.components.getPeerId(),peer:{id:o.id,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),protocols:[]}});case 22:return n.abrupt("return");case 25:if(n.prev=25,n.t0=n.catch(15),"ERR_NOT_FOUND"===n.t0.code){n.next=29;break}throw n.t0;case 29:u=t,c=function(){var t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,c,l,f,p,h;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.peer,a=r.signal,i=new MU(OU.FIND_NODE,e.toBytes(),0),s=!1,o=!1,t.prev=4,l=hr(u.network.sendRequest(n,i,{signal:a}));case 6:return t.next=8,pr(l.next());case 8:if(!(s=!(f=t.sent).done)){t.next=20;break}return p=f.value,t.next=12,p;case 12:if("PEER_RESPONSE"!==p.name){t.next=17;break}if(null==(h=p.closer.find((function(t){return t.id.equals(e)})))){t.next=17;break}return t.next=17,VU({from:p.from,peer:h});case 17:s=!1,t.next=6;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(4),o=!0,c=t.t0;case 26:if(t.prev=26,t.prev=27,!s||null==l.return){t.next=31;break}return t.next=31,pr(l.return());case 31:if(t.prev=31,!o){t.next=34;break}throw c;case 34:return t.finish(31);case 35:return t.finish(26);case 36:case"end":return t.stop()}}),t,null,[[4,22,26,36],[27,,31,35]])})));return function(e){return t.apply(this,arguments)}}(),l=!1,f=!1,p=!1,n.prev=34,d=hr(t.queryManager.run(e.toBytes(),s,c,r));case 36:return n.next=38,pr(d.next());case 38:if(!(f=!(v=n.sent).done)){n.next=46;break}return"FINAL_PEER"===(y=v.value).name&&(l=!0),n.next=43,y;case 43:f=!1,n.next=36;break;case 46:n.next=52;break;case 48:n.prev=48,n.t1=n.catch(34),p=!0,h=n.t1;case 52:if(n.prev=52,n.prev=53,!f||null==d.return){n.next=57;break}return n.next=57,pr(d.return());case 57:if(n.prev=57,!p){n.next=60;break}throw h;case 60:return n.finish(57);case 61:return n.finish(52);case 62:if(l){n.next=65;break}return n.next=65,KU({from:t.components.getPeerId(),error:Ee(new Error("Not found"),"ERR_NOT_FOUND")});case 65:case"end":return n.stop()}}),n,null,[[15,25],[34,48,52,62],[53,,57,61]])})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f,p,h,d,y,g,m,b;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("getClosestPeers to %b",e),n.next=3,pr(mU(e));case 3:return a=n.sent,i=t.routingTable.closestPeers(a),s=t,o=new rj(a,t.routingTable.kBucketSize),n.next=9,pr(Promise.all(i.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.add(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 9:u=function(){var t=ye((0,ce.Z)().mark((function t(r){var n,a,i;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.peer,a=r.signal,s.log("closerPeersSingle %s from %p",(0,gr.toString)(e,"base32"),n),i=new MU(OU.FIND_NODE,e,0),t.delegateYield(ia(hr(s.network.sendRequest(n,i,{signal:a})),pr),"t0",4);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=!1,l=!1,n.prev=12,p=hr(t.queryManager.run(e,i,u,r));case 14:return n.next=16,pr(p.next());case 16:if(!(c=!(h=n.sent).done)){n.next=26;break}return d=h.value,n.next=20,d;case 20:if("PEER_RESPONSE"!==d.name){n.next=23;break}return n.next=23,pr(Promise.all(d.closer.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.add(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 23:c=!1,n.next=14;break;case 26:n.next=32;break;case 28:n.prev=28,n.t0=n.catch(12),l=!0,f=n.t0;case 32:if(n.prev=32,n.prev=33,!c||null==p.return){n.next=37;break}return n.next=37,pr(p.return());case 37:if(n.prev=37,!l){n.next=40;break}throw f;case 40:return n.finish(37);case 41:return n.finish(32);case 42:t.log("found %d peers close to %b",o.length,e),y=(0,v.Z)(o.peers),n.prev=44,y.s();case 46:if((g=y.n()).done){n.next=70;break}return b=g.value,n.t1=VU,n.t2=t.components.getPeerId(),n.t3=b,n.next=53,pr(t.components.getPeerStore().addressBook.get(b));case 53:if(n.t5=m=n.sent,n.t4=null!==n.t5,!n.t4){n.next=57;break}n.t4=void 0!==m;case 57:if(!n.t4){n.next=61;break}n.t6=m,n.next=62;break;case 61:n.t6=[];case 62:return n.t7=n.t6.map((function(e){return e.multiaddr})),n.t8=[],n.t9={id:n.t3,multiaddrs:n.t7,protocols:n.t8},n.t10={from:n.t2,peer:n.t9},n.next=68,(0,n.t1)(n.t10);case 68:n.next=46;break;case 70:n.next=75;break;case 72:n.prev=72,n.t11=n.catch(44),y.e(n.t11);case 75:return n.prev=75,y.f(),n.finish(75);case 78:case"end":return n.stop()}}),n,null,[[12,28,32,42],[33,,37,41],[44,72,75,78]])})))()}},{key:"getValueOrPeers",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye((0,ce.Z)().mark((function a(){var i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=!1,s=!1,a.prev=2,u=hr(r._getValueSingle(e,t,n));case 4:return a.next=6,pr(u.next());case 6:if(!(i=!(c=a.sent).done)){a.next=27;break}if("PEER_RESPONSE"!==(l=c.value).name){a.next=22;break}if(null==l.record){a.next=22;break}return a.prev=10,a.next=13,pr(r._verifyRecordOnline(l.record));case 13:a.next=22;break;case 15:return a.prev=15,a.t0=a.catch(10),f="invalid record received, discarded",r.log(f),a.next=21,KU({from:l.from,error:Ee(new Error(f),"ERR_INVALID_RECORD")});case 21:return a.abrupt("continue",24);case 22:return a.next=24,l;case 24:i=!1,a.next=4;break;case 27:a.next=33;break;case 29:a.prev=29,a.t1=a.catch(2),s=!0,o=a.t1;case 33:if(a.prev=33,a.prev=34,!i||null==u.return){a.next=38;break}return a.next=38,pr(u.return());case 38:if(a.prev=38,!s){a.next=41;break}throw o;case 41:return a.finish(38);case 42:return a.finish(33);case 43:case"end":return a.stop()}}),a,null,[[2,29,33,43],[10,15],[34,,38,42]])})))()}},{key:"_verifyRecordOnline",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.timeReceived){e.next=2;break}throw Ee(new Error("invalid record received"),"ERR_INVALID_RECORD");case 2:return e.next=4,YU(this.validators,new fl(t.key,t.value,t.timeReceived));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCloserPeersOffline",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mU(t);case 2:n=e.sent,a=this.routingTable.closestPeers(n),i=[],s=(0,v.Z)(a),e.prev=6,s.s();case 8:if((o=s.n()).done){e.next=28;break}if(!(u=o.value).equals(r)){e.next=12;break}return e.abrupt("continue",26);case 12:return e.prev=12,e.next=15,this.components.getPeerStore().addressBook.get(u);case 15:return c=e.sent,e.next=18,this.components.getPeerStore().protoBook.get(u);case 18:l=e.sent,i.push({id:u,multiaddrs:c.map((function(e){return e.multiaddr})),protocols:l}),e.next=26;break;case 22:if(e.prev=22,e.t0=e.catch(12),"ERR_NOT_FOUND"===e.t0.code){e.next=26;break}throw e.t0;case 26:e.next=8;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(6),s.e(e.t1);case 33:return e.prev=33,s.f(),e.finish(33);case 36:return i.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",i.length,t,r):this.log("getCloserPeersOffline could not find peer closer to %b than %p",t,r),e.abrupt("return",i);case 38:case"end":return e.stop()}}),e,this,[[6,30,33,36],[12,22]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),aj=_e("libp2p:kad-dht:providers"),ij=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,e),this.components=new eI;var r=t.cacheSize,n=t.cleanupInterval,a=t.provideValidity;this.cleanupInterval=null!==n&&void 0!==n?n:cU,this.provideValidity=null!==a&&void 0!==a?a:uU,this.cache=Vr(null!==r&&void 0!==r?r:256),this.syncQueue=new Tn({concurrency:1}),this.started=!1}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:this.started=!0,this.cleaner=setInterval((function(){t._cleanup().catch((function(e){aj.error(e)}))}),this.cleanupInterval);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_cleanup",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add((0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a,i,s,o,u,c,l,f,p,h,d,g,m,b,w,k,x,_,E,S,A,I,C,Z,R,T,D,P,N;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Date.now(),n=0,a=0,i=new Map,s=t.components.getDatastore().batch(),o=t.components.getDatastore().query({prefix:oU}),u=!1,c=!1,e.prev=8,f=hr(o);case 10:return e.next=12,f.next();case 12:if(!(u=!(p=e.sent).done)){e.next=18;break}h=p.value;try{d=cj(h.key),g=d.cid,m=d.peerId,b=pj(h.value).getTime(),w=Date.now(),x=(k=w-b)>t.provideValidity,aj("comparing: %d - %d = %d > %d %s",w,b,k,t.provideValidity,x?"(expired)":""),x&&(a++,s.delete(h.key),(E=null!==(_=i.get(g))&&void 0!==_?_:new Set).add(m),i.set(g,E)),n++}catch(Dy){aj.error(Dy.message)}case 15:u=!1,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),c=!0,l=e.t0;case 24:if(e.prev=24,e.prev=25,!u||null==f.return){e.next=29;break}return e.next=29,f.return();case 29:if(e.prev=29,!c){e.next=32;break}throw l;case 32:return e.finish(29);case 33:return e.finish(24);case 34:if(!(i.size>0)){e.next=40;break}return aj("deleting %d / %d entries",a,n),e.next=38,s.commit();case 38:e.next=41;break;case 40:aj("nothing to delete");case 41:S=(0,v.Z)(i);try{for(S.s();!(A=S.n()).done;)if(I=(0,y.Z)(A.value,2),C=I[0],Z=I[1],R=sj(C),null!=(T=t.cache.get(R))){D=(0,v.Z)(Z);try{for(D.s();!(P=D.n()).done;)N=P.value,T.delete(N)}catch(Dy){D.e(Dy)}finally{D.f()}0===T.size?t.cache.remove(R):t.cache.set(R,T)}}catch(Dy){S.e(Dy)}finally{S.f()}aj("Cleanup successful (%dms)",Date.now()-r);case 44:case"end":return e.stop()}}),e,null,[[8,20,24,34],[25,,29,33]])}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getProvidersMap",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=sj(t),null!=(n=this.cache.get(r))){e.next=7;break}return e.next=5,lj(this.components.getDatastore(),t);case 5:n=e.sent,this.cache.set(r,n);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addProvider",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add((0,fe.Z)((0,ce.Z)().mark((function e(){var a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aj("%p provides %s",r,t),e.next=3,n._getProvidersMap(t);case 3:return a=e.sent,aj("loaded %s provs",a.size),i=new Date,a.set(r.toString(),i),s=sj(t),n.cache.set(s,a),e.next=11,oj(n.components.getDatastore(),t,r,i);case 11:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getProviders",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add((0,fe.Z)((0,ce.Z)().mark((function e(){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aj("get providers for %s",t),e.next=3,r._getProvidersMap(t);case 3:return n=e.sent,e.abrupt("return",Vt(n.keys()).map((function(e){return $n(e)})));case 5:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function sj(e){var t="string"===typeof e?e:(0,gr.toString)(e.multihash.bytes,"base32");return"".concat(oU,"/").concat(t)}function oj(e,t,r,n){return uj.apply(this,arguments)}function uj(){return(uj=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[sj(r),"/",n.toString()].join(""),s=new kr(i),o=Uint8Array.from(pf.encode(a.getTime())),e.next=5,t.put(s,o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cj(e){var t=e.toString().split("/");if(5!==t.length)throw new Error("incorrectly formatted provider entry key in datastore: ".concat(e.toString()));return{cid:t[3],peerId:t[4]}}function lj(e,t){return fj.apply(this,arguments)}function fj(){return(fj=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Map,a=t.query({prefix:sj(r)}),i=!1,s=!1,e.prev=4,u=hr(a);case 6:return e.next=8,u.next();case 8:if(!(i=!(c=e.sent).done)){e.next=15;break}l=c.value,f=cj(l.key),p=f.peerId,n.set(p,pj(l.value));case 12:i=!1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),s=!0,o=e.t0;case 21:if(e.prev=21,e.prev=22,!i||null==u.return){e.next=26;break}return e.next=26,u.return();case 26:if(e.prev=26,!s){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,null,[[4,17,21,31],[22,,26,30]])})))).apply(this,arguments)}function pj(e){return new Date(pf.decode(e))}var hj=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");function dj(e){return vj.apply(this,arguments)}function vj(){return vj=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l,f,p,h,d,y,g;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=function(e,t){if(null!=e){y.add(e.toString());var n=BigInt("0x"+(0,gr.toString)(RU(t,d),"base16"));h.add((0,fe.Z)((0,ce.Z)().mark((function t(){var o,l,m,b,w,k,x,_,E,S,A,I,C,Z,R;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=[i],null!=f&&(o=new _r.TimeoutController(f),l.push(o.signal)),m=(0,Er.anySignal)(l),t.prev=3,w=!1,k=!1,t.prev=6,_=hr(s({key:r,peer:e,signal:m,pathIndex:u,numPaths:c}));case 8:return t.next=10,_.next();case 10:if(!(w=!(E=t.sent).done)){t.next=49;break}if(S=E.value,!m.aborted){t.next=14;break}return t.abrupt("return");case 14:if("PEER_RESPONSE"!==S.name){t.next=45;break}A=(0,v.Z)(S.closer),t.prev=16,A.s();case 18:if((I=A.n()).done){t.next=37;break}if(C=I.value,!y.has(C.id.toString())){t.next=23;break}return p("already seen %p in query",C.id),t.abrupt("continue",35);case 23:if(!a.equals(C.id)){t.next=26;break}return p("not querying ourselves"),t.abrupt("continue",35);case 26:return t.next=28,wU(C.id);case 28:if(Z=t.sent,!(BigInt("0x"+(0,gr.toString)(RU(Z,d),"base16"))>n)){t.next=33;break}return p("skipping %p as they are not closer to %b than %p",C.id,r,e),t.abrupt("continue",35);case 33:p("querying closer peer %p",C.id),g(C.id,Z);case 35:t.next=18;break;case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(16),A.e(t.t0);case 42:return t.prev=42,A.f(),t.finish(42);case 45:h.emit("completed",S);case 46:w=!1,t.next=8;break;case 49:t.next=55;break;case 51:t.prev=51,t.t1=t.catch(6),k=!0,x=t.t1;case 55:if(t.prev=55,t.prev=56,!w||null==_.return){t.next=60;break}return t.next=60,_.return();case 60:if(t.prev=60,!k){t.next=63;break}throw x;case 63:return t.finish(60);case 64:return t.finish(55);case 65:null===(b=o)||void 0===b||b.clear(),t.next=71;break;case 68:t.prev=68,t.t2=t.catch(3),i.aborted?h.emit("error",t.t2):h.emit("completed",KU({from:e,error:t.t2}));case 71:return t.prev=71,null===(R=o)||void 0===R||R.clear(),t.finish(71);case 74:case"end":return t.stop()}}),t,null,[[3,68,71,74],[6,51,55,65],[16,39,42,45],[56,,60,64]])}))),{priority:hj-n}).catch((function(e){p.error(e)}))}},r=t.key,n=t.startingPeer,a=t.ourPeerId,i=t.signal,s=t.query,o=t.alpha,u=t.pathIndex,c=t.numPaths,l=t.cleanUp,f=t.queryFuncTimeout,p=t.log,h=new Tn({concurrency:o}),e.next=5,pr(mU(r));case 5:return d=e.sent,y=new Set,e.t0=g,e.t1=n,e.next=11,pr(wU(n));case 11:return e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.delegateYield(ia(hr(yj(h,i,l,p)),pr),"t3",14);case 14:case"end":return e.stop()}}),e)}))),vj.apply(this,arguments)}function yj(e,t,r,n){return gj.apply(this,arguments)}function gj(){return gj=ye((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wI(),s=!0,o=[],u=function(){s&&(a("clean up queue, results %d, queue size %d, pending tasks %d",o.length,t.size,t.pending),s=!1,t.clear(),o.splice(0,o.length))},t.on("completed",(function(e){o.push(e),i.resolve()})),t.on("error",(function(e){a("queue error",e),u(),i.reject(e)})),t.on("idle",(function(){a("queue idle"),s=!1,i.resolve()})),r.addEventListener("abort",(function(){a("abort queue");var e=s;u(),e&&i.reject(Ee(new Error("Query aborted"),"ERR_QUERY_ABORTED"))})),n.addEventListener("cleanup",(function(){u(),i.resolve()}));case 9:if(!s){e.next=22;break}return e.next=12,pr(i.promise);case 12:i=wI();case 13:if(!(o.length>0)){e.next=20;break}if(null==(c=o.shift())){e.next=18;break}return e.next=18,c;case 18:e.next=13;break;case 20:e.next=9;break;case 22:return e.delegateYield(ia(hr(o),pr),"t0",23);case 23:case"end":return e.stop()}}),e)}))),gj.apply(this,arguments)}var mj="running-queries",bj=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.lan,n=void 0!==r&&r,a=t.disjointPaths,i=void 0===a?20:a,s=t.alpha,o=void 0===s?3:s;this.disjointPaths=null!==i&&void 0!==i?i:20,this.controllers=new Set,this.running=!1,this.alpha=null!==o&&void 0!==o?o:3,this.lan=n,this.queries=0}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,t=(0,v.Z)(this.controllers);try{for(t.s();!(r=t.n()).done;)r.value.abort()}catch(Dy){t.e(Dy)}finally{t.f()}this.controllers.clear();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ye((0,ce.Z)().mark((function i(){var s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x;return(0,ce.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.running){i.next=2;break}throw new Error("QueryManager not started");case 2:if(null==a.signal){s=new _r.TimeoutController(dU),a.signal=s.signal;try{null!=vP.setMaxListeners&&(0,vP.setMaxListeners)(1/0,s.signal)}catch(_){}}o=new AbortController,n.controllers.add(o),u=[o.signal],null!=a.signal&&u.push(a.signal),c=(0,Er.anySignal)(u);try{null!=vP.setMaxListeners&&(0,vP.setMaxListeners)(1/0,c)}catch(E){}if(l=_e("libp2p:kad-dht:".concat(n.lan?"lan":"wan",":query:")+(0,gr.toString)(e,"base58btc")),f=t.slice(0,Math.min(n.disjointPaths,t.length)),p=Date.now(),h=new KS,i.prev=13,l("query:start"),n.queries++,null===(d=n.components.getMetrics())||void 0===d||d.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(n.lan?"lan":"wan"),metric:mj,value:n.queries}),0!==t.length){i.next=20;break}return l.error("Running query with no peers"),i.abrupt("return");case 20:v=f.map((function(t,i){return dj({key:e,startingPeer:t,ourPeerId:n.components.getPeerId(),signal:c,query:r,pathIndex:i,numPaths:f.length,alpha:n.alpha,cleanUp:h,queryFuncTimeout:a.queryFuncTimeout,log:l})})),y=!1,g=!1,i.prev=23,b=hr(el.apply(void 0,Vt(v)));case 25:return i.next=27,pr(b.next());case 27:if(!(y=!(w=i.sent).done)){i.next=35;break}return k=w.value,i.next=31,k;case 31:"QUERY_ERROR"===k.name&&l("error",k.error);case 32:y=!1,i.next=25;break;case 35:i.next=41;break;case 37:i.prev=37,i.t0=i.catch(23),g=!0,m=i.t0;case 41:if(i.prev=41,i.prev=42,!y||null==b.return){i.next=46;break}return i.next=46,pr(b.return());case 46:if(i.prev=46,!g){i.next=49;break}throw m;case 49:return i.finish(46);case 50:return i.finish(41);case 51:i.next=59;break;case 53:if(i.prev=53,i.t1=i.catch(13),n.running||"ERR_QUERY_ABORTED"!==i.t1.code){i.next=58;break}i.next=59;break;case 58:throw i.t1;case 59:return i.prev=59,n.controllers.delete(o),null!=s&&s.clear(),n.queries--,null===(x=n.components.getMetrics())||void 0===x||x.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(n.lan?"lan":"wan"),metric:mj,value:n.queries}),h.dispatchEvent(new HS("cleanup")),l("query:done in %dms",Date.now()-p),i.finish(59);case 67:case"end":return i.stop()}}),i,null,[[13,53,59,67],[23,37,41,51],[42,,46,50]])})))()}}]),e}(),wj=_e("libp2p:kad-dht:rpc:handlers:add-provider"),kj=function(){function e(t){(0,pe.Z)(this,e);var r=t.providers;this.providers=r}return(0,he.Z)(e,[{key:"init",value:function(){}},{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wj("start"),null!=r.key&&0!==r.key.length){e.next=3;break}throw Ee(new Error("Missing key"),"ERR_MISSING_KEY");case 3:e.prev=3,n=Ue.CID.decode(r.key),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(3),Ee(new Error("Invalid CID"),"ERR_INVALID_CID");case 10:return null!=r.providerPeers&&0!==r.providerPeers.length||wj.error("no providers found in message"),e.next=13,Promise.all(r.providerPeers.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id.equals(t)){e.next=3;break}return wj("invalid provider peer %p from %p",r.id,t),e.abrupt("return");case 3:if(!(r.multiaddrs.length<1)){e.next=6;break}return wj("no valid addresses for provider %p. Ignore",t),e.abrupt("return");case 6:return wj("received provider %p for %s (addrs %s)",t,n,r.multiaddrs.map((function(e){return e.toString()}))),e.next=9,a.providers.addProvider(n,r.id);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),xj=_e("libp2p:kad-dht:rpc:handlers:find-node"),_j=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.peerRouting,n=t.lan;this.peerRouting=r,this.lan=Boolean(n)}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xj("incoming request from %p for peers closer to %b",t,r.key),n=[],!(0,Kn.equals)(this.components.getPeerId().toBytes(),r.key)){e.next=6;break}n=[{id:this.components.getPeerId(),multiaddrs:this.components.getAddressManager().getAddresses().map((function(e){return e.decapsulateCode(ff("p2p").code)})),protocols:[]}],e.next=9;break;case 6:return e.next=8,this.peerRouting.getCloserPeersOffline(r.key,t);case 8:n=e.sent;case 9:return n=n.map(this.lan?gU:yU).filter((function(e){return e.multiaddrs.length})),a=new MU(r.type,new Uint8Array(0),r.clusterLevel),n.length>0?a.closerPeers=n:xj("could not find any peers closer to %b than %p",r.key,t),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Ej=_e("libp2p:kad-dht:rpc:handlers:get-providers"),Sj=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.peerRouting,n=t.providers,a=t.lan;this.peerRouting=r,this.providers=n,this.lan=Boolean(a)}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=Ue.CID.decode(r.key),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),Ee(new Error("Invalid CID"),"ERR_INVALID_CID");case 7:return Ej("%p asking for providers for %s",t,n),e.next=10,Promise.all([this.providers.getProviders(n),this.peerRouting.getCloserPeersOffline(r.key,t)]);case 10:return a=e.sent,i=(0,y.Z)(a,2),s=i[0],o=i[1],e.next=16,this._getPeers(s);case 16:return u=e.sent,e.next=19,this._getPeers(o.map((function(e){return e.id})));case 19:return c=e.sent,l=new MU(r.type,r.key,r.clusterLevel),u.length>0&&(l.providerPeers=u),c.length>0&&(l.closerPeers=c),Ej("got %s providers %s closerPeers",u.length,c.length),e.abrupt("return",l);case 25:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getAddresses",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getPeerStore().addressBook.get(t);case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return e.multiaddr})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPeers",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=this.lan?gU:yU,a=(0,v.Z)(t),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=18;break}return s=i.value,e.t0=n,e.t1=s,e.next=11,this._getAddresses(s);case 11:e.t2=e.sent,e.t3=[],e.t4={id:e.t1,multiaddrs:e.t2,protocols:e.t3},(o=(0,e.t0)(e.t4)).multiaddrs.length>0&&r.push(o);case 16:e.next=5;break;case 18:e.next=23;break;case 20:e.prev=20,e.t5=e.catch(3),a.e(e.t5);case 23:return e.prev=23,a.f(),e.finish(23);case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,this,[[3,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Aj=_e("libp2p:kad-dht:rpc:handlers:get-value"),Ij=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.peerRouting;this.peerRouting=r}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.key,Aj("%p asked for key %b",t,n),null!=n&&0!==n.length){e.next=4;break}throw Ee(new Error("Invalid key"),"ERR_INVALID_KEY");case 4:if(a=new MU(OU.GET_VALUE,n,r.clusterLevel),!EU(n)){e.next=25;break}return Aj("is public key"),i=SU(n),e.prev=8,e.next=11,this.components.getPeerStore().keyBook.get(i);case 11:if(null!=(o=e.sent)){e.next=14;break}throw Ee(new Error("No public key found in key book"),"ERR_NOT_FOUND");case 14:s=o,e.next=21;break;case 17:if(e.prev=17,e.t0=e.catch(8),"ERR_NOT_FOUND"===e.t0.code){e.next=21;break}throw e.t0;case 21:if(null==s){e.next=25;break}return Aj("returning found public key"),a.record=new fl(n,s,new Date),e.abrupt("return",a);case 25:return e.next=27,Promise.all([this._checkLocalDatastore(n),this.peerRouting.getCloserPeersOffline(r.key,t)]);case 27:return u=e.sent,c=(0,y.Z)(u,2),l=c[0],f=c[1],null!=l&&(Aj("had record for %b in local datastore",n),a.record=l),f.length>0&&(Aj("had %s closer peers in routing table",f.length),a.closerPeers=f),e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[8,17]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_checkLocalDatastore",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Aj("checkLocalDatastore looking for %b",t),r=xU(t),e.prev=2,e.next=5,this.components.getDatastore().get(r);case 5:n=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),"ERR_NOT_FOUND"!==e.t0.code){e.next=12;break}return e.abrupt("return",void 0);case 12:throw e.t0;case 13:if(null!=(a=fl.deserialize(n))){e.next=16;break}throw Ee(new Error("Invalid record"),"ERR_INVALID_RECORD");case 16:if(!(null==a.timeReceived||Date.now()-a.timeReceived.getTime()>1296e5)){e.next=20;break}return e.next=19,this.components.getDatastore().delete(r);case 19:return e.abrupt("return",void 0);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Cj=_e("libp2p:kad-dht:rpc:handlers:ping"),Zj=function(){function e(){(0,pe.Z)(this,e)}return(0,he.Z)(e,[{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cj("ping from %p",t),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"init",value:function(){}}]),e}(),Rj=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.validators;this.log=_e("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=r}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"handle",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.key,this.log("%p asked us to store value for key %b",t,n),null!=(a=r.record)){e.next=7;break}throw i="Empty record from: ".concat(t.toString()),this.log.error(i),Ee(new Error(i),"ERR_EMPTY_RECORD");case 7:return e.prev=7,e.next=10,YU(this.validators,a);case 10:return a.timeReceived=new Date,s=xU(a.key),e.next=14,this.components.getDatastore().put(s,a.serialize());case 14:this.log("put record for %b into datastore under key %k",n,s),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),this.log("did not put record for key %b into datastore %o",n,e.t0);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Tj=function(){function e(t){var r;(0,pe.Z)(this,e);var n=t.providers,a=t.peerRouting,i=t.validators,s=t.lan;this.log=_e("libp2p:kad-dht:rpc"),this.routingTable=t.routingTable,this.handlers=(r={},(0,hp.Z)(r,OU.GET_VALUE,new Ij({peerRouting:a})),(0,hp.Z)(r,OU.PUT_VALUE,new Rj({validators:i})),(0,hp.Z)(r,OU.FIND_NODE,new _j({peerRouting:a,lan:s})),(0,hp.Z)(r,OU.ADD_PROVIDER,new kj({providers:n})),(0,hp.Z)(r,OU.GET_PROVIDERS,new Sj({peerRouting:a,providers:n,lan:s})),(0,hp.Z)(r,OU.PING,new Zj),r)}return(0,he.Z)(e,[{key:"init",value:function(e){for(var t=0,r=Object.values(this.handlers);t<r.length;t++){r[t].init(e)}}},{key:"handleMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.routingTable.add(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.log.error("Failed to update the kbucket store",e.t0);case 8:if(null!=(n=this.handlers[r.type])){e.next=12;break}return this.log.error("no handler found for message type: ".concat(r.type)),e.abrupt("return");case 12:return e.next=14,n.handle(t,r);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"onIncomingStream",value:function(e){var t=this;Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function r(){var n,a,i,s;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.stream,a=e.connection,i=a.remotePeer,r.prev=2,r.next=5,t.routingTable.add(i);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),t.log.error(r.t0);case 10:return s=t,r.next=13,kp(n,tA(),function(){var e=ye((0,ce.Z)().mark((function e(t){var r,n,a,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,o=hr(t);case 4:return e.next=6,pr(o.next());case 6:if(!(r=!(u=e.sent).done)){e.next=19;break}return c=u.value,l=MU.deserialize(c),s.log("incoming %s from %p",l.type,i),e.next=12,pr(s.handleMessage(i,l));case 12:if(null==(f=e.sent)){e.next=16;break}return e.next=16,f.serialize();case 16:r=!1,e.next=4;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),n=!0,a=e.t0;case 25:if(e.prev=25,e.prev=26,!r||null==o.return){e.next=30;break}return e.next=30,pr(o.return());case 30:if(e.prev=30,!n){e.next=33;break}throw a;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[2,21,25,35],[26,,30,34]])})));return function(t){return e.apply(this,arguments)}}(),GS(),n);case 13:case"end":return r.stop()}}),r,null,[[2,7]])})))).catch((function(e){t.log.error(e)}))}}]),e}(),Dj=function(e){St(r,e);var t=Rt(r);function r(e){var n;(0,pe.Z)(this,r),(n=t.call(this)).components=new eI;var a=e.protocol,i=e.lan;return n.log=_e("libp2p:kad-dht:topology-listener:".concat(i?"lan":"wan")),n.running=!1,n.protocol=a,n}return(0,he.Z)(r,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:return this.running=!0,t=FS({onConnect:function(e){r.log("observed peer %p with protocol %s",e,r.protocol),r.dispatchEvent(new HS("peer",{detail:e}))}}),e.next=6,this.components.getRegistrar().register(this.protocol,t);case 6:this.registrarId=e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.running=!1,null!=this.registrarId&&(this.components.getRegistrar().unregister(this.registrarId),this.registrarId=void 0)}}]),r}(KS),Pj=function(){function e(t){(0,pe.Z)(this,e),this.components=new eI;var r=t.peerRouting,n=t.lan,a=t.count,i=t.interval,s=t.queryTimeout;this.log=_e("libp2p:kad-dht:".concat(n?"lan":"wan",":query-self")),this.running=!1,this.peerRouting=r,this.count=null!==a&&void 0!==a?a:20,this.interval=null!==i&&void 0!==i?i:lU,this.queryTimeout=null!==s&&void 0!==s?s:fU}return(0,he.Z)(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:this.running=!0,this._querySelf();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_querySelf",value:function(){var e=this;Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,a;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new _r.TimeoutController(e.queryTimeout),t.prev=1,e.controller=new AbortController,n=(0,Er.anySignal)([e.controller.signal,r.signal]);try{null!=vP.setMaxListeners&&(0,vP.setMaxListeners)(1/0,n)}catch(i){}return t.next=7,kp(e.peerRouting.getClosestPeers(e.components.getPeerId().toBytes(),{signal:n}),(function(t){return Kc(t,e.count)}),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mx(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:a=t.sent,e.log("query ran successfully - found %d peers",a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.log("query error",t.t0);case 14:return t.prev=14,e.timeoutId=setTimeout(e._querySelf.bind(e),e.interval),r.clear(),t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[1,11,14,18]])})))).catch((function(t){e.log("query error",t)}))}}]),e}(),Nj=function(e,t){St(n,e);var r=Rt(n);function n(e){var t;(0,pe.Z)(this,n),(t=r.call(this)).components=new eI;var a=e.kBucketSize,i=e.clientMode,s=e.validators,o=e.selectors,u=e.querySelfInterval,c=e.lan,l=e.protocolPrefix,f=e.pingTimeout,p=e.pingConcurrency;return t.running=!1,t.lan=Boolean(c),t.log=_e("libp2p:kad-dht:".concat(!0===c?"lan":"wan")),t.protocol="".concat(null!==l&&void 0!==l?l:"/ipfs").concat(!0===c?"/lan":"").concat("/kad/1.0.0"),t.kBucketSize=null!==a&&void 0!==a?a:20,t.clientMode=null===i||void 0===i||i,t.routingTable=new CU({kBucketSize:a,lan:t.lan,pingTimeout:f,pingConcurrency:p,protocol:t.protocol}),t.providers=new ij,t.validators=(0,le.Z)((0,le.Z)({},JU),s),t.selectors=(0,le.Z)((0,le.Z)({},$U),o),t.network=new GU({protocol:t.protocol,lan:t.lan}),t.queryManager=new bj({disjointPaths:Math.ceil(t.kBucketSize/2),lan:c}),t.peerRouting=new nj({routingTable:t.routingTable,network:t.network,validators:t.validators,queryManager:t.queryManager,lan:t.lan}),t.contentFetching=new ej({validators:t.validators,selectors:t.selectors,peerRouting:t.peerRouting,queryManager:t.queryManager,routingTable:t.routingTable,network:t.network,lan:t.lan}),t.contentRouting=new tj({network:t.network,peerRouting:t.peerRouting,queryManager:t.queryManager,routingTable:t.routingTable,providers:t.providers,lan:t.lan}),t.routingTableRefresh=new NU({peerRouting:t.peerRouting,routingTable:t.routingTable,lan:t.lan}),t.rpc=new Tj({routingTable:t.routingTable,providers:t.providers,peerRouting:t.peerRouting,validators:t.validators,lan:t.lan}),t.topologyListener=new Dj({protocol:t.protocol,lan:t.lan}),t.querySelf=new Pj({peerRouting:t.peerRouting,interval:u,lan:t.lan}),t.network.addEventListener("peer",(function(e){var r=e.detail;t.onPeerConnect(r).catch((function(e){t.log.error("could not add %p to routing table",r.id,e)})),t.dispatchEvent(new HS("peer",{detail:r}))})),t.topologyListener.addEventListener("peer",(function(e){var r=e.detail;Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function e(){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.components.getPeerStore().addressBook.get(r);case 2:return n=e.sent,a={id:r,multiaddrs:n.map((function(e){return e.multiaddr})),protocols:[]},e.next=6,t.onPeerConnect(a);case 6:case"end":return e.stop()}}),e)})))).catch((function(e){t.log.error("could not add %p to routing table",r,e)}))})),t}return(0,he.Z)(n,[{key:tP,get:function(){return!0}},{key:t,get:function(){return"@libp2p/kad-dht"}},{key:"init",value:function(e){this.components=e,this.routingTable.init(e),this.providers.init(e),this.network.init(e),this.queryManager.init(e),this.peerRouting.init(e),this.contentFetching.init(e),this.contentRouting.init(e),this.routingTableRefresh.init(e),this.rpc.init(e),this.topologyListener.init(e),this.querySelf.init(e)}},{key:"onPeerConnect",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log("peer %p connected with protocols %s",t.id,t.protocols),0!==(t=this.lan?gU(t):yU(t)).multiaddrs.length){e.next=5;break}return this.log("ignoring %p as they do not have any %s addresses in %s",t.id,this.lan?"private":"public",t.multiaddrs.map((function(e){return e.toString()}))),e.abrupt("return");case 5:return e.prev=5,e.next=8,this.routingTable.add(t.id);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.log.error("could not add %p to routing table",t.id,e.t0);case 13:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.running}},{key:"getMode",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.clientMode?"client":"server");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(this.protocol);case 2:if("client"!==t){e.next=7;break}this.log("enabling client mode"),this.clientMode=!0,e.next=11;break;case 7:return this.log("enabling server mode"),this.clientMode=!1,e.next=11,this.components.getRegistrar().handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!0,e.next=3,this.setMode(this.clientMode?"client":"server");case 3:return e.next=5,Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]);case 5:return e.next=7,this.routingTableRefresh.start();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!1,e.next=3,Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye((0,ce.Z)().mark((function a(){return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(ia(hr(r.contentFetching.put(e,t,n)),pr),"t0",1);case 1:case"end":return a.stop()}}),a)})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(t.contentFetching.get(e,r)),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"provide",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(t.contentRouting.provide(e,t.components.getAddressManager().getAddresses(),r)),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(t.contentRouting.findProviders(e,r)),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(t.peerRouting.findPeer(e,r)),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(t.peerRouting.getClosestPeers(e,r)),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"refreshRoutingTable",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.routingTableRefresh.refreshTable(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(KS,Symbol.toStringTag),Oj=_e("libp2p:kad-dht"),Bj=function(e,t){St(n,e);var r=Rt(n);function n(e,t){var a;return(0,pe.Z)(this,n),(a=r.call(this)).components=new eI,a.wan=e,a.lan=t,a.wan.addEventListener("peer",(function(e){a.dispatchEvent(new HS("peer",{detail:e.detail}))})),a.lan.addEventListener("peer",(function(e){a.dispatchEvent(new HS("peer",{detail:e.detail}))})),a}return(0,he.Z)(n,[{key:tP,get:function(){return!0}},{key:t,get:function(){return"@libp2p/dual-kad-dht"}},{key:"init",value:function(e){this.components=e,this.wan.init(e),this.lan.init(e)}},{key:"isStarted",value:function(){return this.wan.isStarted()&&this.lan.isStarted()}},{key:"getMode",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wan.getMode();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wan.setMode(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.start(),this.wan.start()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.stop(),this.wan.stop()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye((0,ce.Z)().mark((function a(){var i,s,o,u,c,l;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=!1,s=!1,a.prev=2,u=hr(el(r.lan.put(e,t,n),r.wan.put(e,t,n)));case 4:return a.next=6,pr(u.next());case 6:if(!(i=!(c=a.sent).done)){a.next=13;break}return l=c.value,a.next=10,l;case 10:i=!1,a.next=4;break;case 13:a.next=19;break;case 15:a.prev=15,a.t0=a.catch(2),s=!0,o=a.t0;case 19:if(a.prev=19,a.prev=20,!i||null==u.return){a.next=24;break}return a.next=24,pr(u.return());case 24:if(a.prev=24,!s){a.next=27;break}throw o;case 27:return a.finish(24);case 28:return a.finish(19);case 29:case"end":return a.stop()}}),a,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,s=!1,o=!1,n.prev=4,c=hr(el(t.lan.get(e,r),t.wan.get(e,r)));case 6:return n.next=8,pr(c.next());case 8:if(!(s=!(l=n.sent).done)){n.next=18;break}return f=l.value,n.next=12,f;case 12:"DIALING_PEER"===f.name&&(a=!0),"VALUE"===f.name&&(a=!0,null!=f.value&&(i=!0)),"SENDING_QUERY"===f.name&&(a=!0);case 15:s=!1,n.next=6;break;case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(4),o=!0,u=n.t0;case 24:if(n.prev=24,n.prev=25,!s||null==c.return){n.next=29;break}return n.next=29,pr(c.return());case 29:if(n.prev=29,!o){n.next=32;break}throw u;case 32:return n.finish(29);case 33:return n.finish(24);case 34:if(a){n.next=36;break}throw Ee(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");case 36:if(i){n.next=39;break}return n.next=39,KU({from:t.components.getPeerId(),error:Ee(new Error("Not found"),"ERR_NOT_FOUND")});case 39:case"end":return n.stop()}}),n,null,[[4,20,24,34],[25,,29,33]])})))()}},{key:"provide",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f,p,h;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=0,i=0,s=[],o=[t.lan],n.next=6,pr(t.wan.getMode());case 6:if(n.t0=n.sent,"server"!==n.t0){n.next=9;break}o.push(t.wan);case 9:u=!1,c=!1,n.prev=11,f=hr(el.apply(void 0,Vt(o.map((function(t){return t.provide(e,r)})))));case 13:return n.next=15,pr(f.next());case 15:if(!(u=!(p=n.sent).done)){n.next=25;break}return h=p.value,n.next=19,h;case 19:"SENDING_QUERY"===h.name&&a++,"QUERY_ERROR"===h.name&&s.push(h.error),"PEER_RESPONSE"===h.name&&"ADD_PROVIDER"===h.messageName&&(Oj("sent provider record for %s to %p",e,h.from),i++);case 22:u=!1,n.next=13;break;case 25:n.next=31;break;case 27:n.prev=27,n.t1=n.catch(11),c=!0,l=n.t1;case 31:if(n.prev=31,n.prev=32,!u||null==f.return){n.next=36;break}return n.next=36,pr(f.return());case 36:if(n.prev=36,!c){n.next=39;break}throw l;case 39:return n.finish(36);case 40:return n.finish(31);case 41:if(0!==i){n.next=45;break}if(!(s.length>0)){n.next=44;break}throw Ee(new Error("Failed to provide to ".concat(s.length," of ").concat(a," peers")),"ERR_PROVIDES_FAILED",{errors:s});case 44:throw Ee(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED");case 45:case"end":return n.stop()}}),n,null,[[11,27,31,41],[32,,36,40]])})))()}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(el(t.lan.findProviders(e,r),t.wan.findProviders(e,r))),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,s=!1,n.prev=3,u=hr(el(t.lan.findPeer(e,r),t.wan.findPeer(e,r)));case 5:return n.next=7,pr(u.next());case 7:if(!(i=!(c=n.sent).done)){n.next=15;break}return l=c.value,n.next=11,l;case 11:"SENDING_QUERY"!==l.name&&"FINAL_PEER"!==l.name||(a=!0);case 12:i=!1,n.next=5;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(3),s=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!i||null==u.return){n.next=26;break}return n.next=26,pr(u.return());case 26:if(n.prev=26,!s){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:if(a){n.next=33;break}throw Ee(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED");case 33:case"end":return n.stop()}}),n,null,[[3,17,21,31],[22,,26,30]])})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(el(t.lan.getClosestPeers(e,r),t.wan.getClosestPeers(e,r))),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"refreshRoutingTable",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(KS,Symbol.toStringTag),Lj=function(e){St(r,e);var t=Rt(r);function r(e){return(0,pe.Z)(this,r),t.call(this,new Nj((0,le.Z)((0,le.Z)({protocolPrefix:"/ipfs"},e),{},{lan:!1})),new Nj((0,le.Z)((0,le.Z)({protocolPrefix:"/ipfs"},e),{},{clientMode:!1,lan:!0})))}return(0,he.Z)(r)}(Bj),Mj=_e("libp2p:bootstrap"),Uj=function(e,t){St(n,e);var r=Rt(n);function n(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]};if((0,pe.Z)(this,n),null==a.list||0===a.list.length)throw new Error("Bootstrap requires a list of peer addresses");(t=r.call(this)).interval=null!==(e=a.interval)&&void 0!==e?e:1e4,t.list=[];var i,s=(0,v.Z)(a.list);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(np.matches(o)){var u=new Lf(o),c=u.getPeerId();if(null!=c){var l={id:$n(c),multiaddrs:[u],protocols:[]};t.list.push(l)}else Mj.error("Invalid bootstrap multiaddr without peer id")}else Mj.error("Invalid multiaddr")}}catch(Dy){s.e(Dy)}finally{s.f()}return t}return(0,he.Z)(n,[{key:tP,get:function(){return!0}},{key:t,get:function(){return"@libp2p/bootstrap"}},{key:"isStarted",value:function(){return Boolean(this.timer)}},{key:"start",value:function(){var e=this;null==this.timer&&(this.timer=setInterval((function(){return e._discoverBootstrapPeers()}),this.interval),Mj("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}},{key:"_discoverBootstrapPeers",value:function(){var e=this;null!=this.timer&&this.list.forEach((function(t){e.dispatchEvent(new HS("peer",{detail:t}))}))}},{key:"stop",value:function(){null!=this.timer&&clearInterval(this.timer),this.timer=void 0}}]),n}(KS,Symbol.toStringTag);Uj.tag="bootstrap";var jj=WebSocket,Fj=__webpack_require__(3634);function zj(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.name)&&"number"===typeof(null===e||void 0===e?void 0:e.byteLength)}var Vj=function(e){if(e.readyState>=2)throw new Error("socket closed");if(1!==e.readyState)return new Promise((function(t,r){function n(){e.removeEventListener("open",a),e.removeEventListener("error",i)}function a(){n(),t()}function i(t){var a;n(),r(null!==(a=t.error)&&void 0!==a?a:new Error("connect ECONNREFUSED ".concat(e.url)))}e.addEventListener("open",a),e.addEventListener("error",i)}))},Kj=function(e,t){var r;(t=null!==(r=t)&&void 0!==r?r:{}).closeOnEnd=!1!==t.closeOnEnd;var n=function(){var r=(0,fe.Z)((0,ce.Z)().mark((function r(n){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,o=hr(n);case 4:return r.next=6,o.next();case 6:if(!(a=!(u=r.sent).done)){r.next=22;break}return c=u.value,r.prev=8,r.next=11,Vj(e);case 11:r.next=18;break;case 13:if(r.prev=13,r.t0=r.catch(8),"socket closed"!==r.t0.message){r.next=17;break}return r.abrupt("break",22);case 17:throw r.t0;case 18:e.send(c);case 19:a=!1,r.next=4;break;case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(2),i=!0,s=r.t1;case 28:if(r.prev=28,r.prev=29,!a||null==o.return){r.next=33;break}return r.next=33,o.return();case 33:if(r.prev=33,!i){r.next=36;break}throw s;case 36:return r.finish(33);case 37:return r.finish(28);case 38:if(!(null!=t.closeOnEnd&&e.readyState<=1)){r.next=42;break}return r.next=41,new Promise((function(t,r){e.addEventListener("close",(function(e){if(e.wasClean||1006===e.code)t();else{var n=Object.assign(new Error("ws error"),{event:e});r(n)}})),setTimeout((function(){return e.close()}))}));case 41:return r.abrupt("return",r.sent);case 42:case"end":return r.stop()}}),r,null,[[2,24,28,38],[8,13],[29,,33,37]])})));return function(e){return r.apply(this,arguments)}}();return n},qj=function(e,t){var r;t=null!==(r=t)&&void 0!==r?r:{};var n=function(e){e.binaryType="arraybuffer";var t,r=function(){var r=(0,fe.Z)((0,ce.Z)().mark((function r(){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(r,n){if(a)return r();if(null!=t)return n(t);var i=function(t){e.removeEventListener("open",s),e.removeEventListener("error",o),t()},s=function(){return i(r)},o=function(t){i((function(){var r;return n(null!==(r=t.error)&&void 0!==r?r:new Error("connect ECONNREFUSED ".concat(e.url)))}))};e.addEventListener("open",s),e.addEventListener("error",o)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),n=ye((0,ce.Z)().mark((function t(){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Fj.zN((function(t){var r=t.push,n=t.stop,a=t.fail,i=function(e){var t=null;"string"===typeof e.data&&(t=(0,fr.fromString)(e.data)),zj(e.data)&&(t=new Uint8Array(e.data)),e.data instanceof Uint8Array&&(t=e.data),null!=t&&r(t)},s=function(e){var t;return a(null!==(t=e.error)&&void 0!==t?t:new Error("Socket error"))};return e.addEventListener("message",i),e.addEventListener("error",s),e.addEventListener("close",n),function(){e.removeEventListener("message",i),e.removeEventListener("error",s),e.removeEventListener("close",n)}}),{highWaterMark:1/0}),t.next=3,pr(r());case 3:a=!1,i=!1,t.prev=5,o=hr(n);case 7:return t.next=9,pr(o.next());case 9:if(!(a=!(u=t.sent).done)){t.next=16;break}return c=u.value,t.next=13,zj(c)?new Uint8Array(c):c;case 13:a=!1,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),i=!0,s=t.t0;case 22:if(t.prev=22,t.prev=23,!a||null==o.return){t.next=27;break}return t.next=27,pr(o.return());case 27:if(t.prev=27,!i){t.next=30;break}throw s;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[5,18,22,32],[23,,27,31]])})))(),a=1===e.readyState;return e.addEventListener("open",(function(){a=!0,t=null})),e.addEventListener("close",(function(){a=!1,t=null})),e.addEventListener("error",(function(r){var n;a||(t=null!==(n=r.error)&&void 0!==n?n:new Error("connect ECONNREFUSED ".concat(e.url)))})),Object.assign(n,{connected:r})}(e),a=t.remoteAddress,i=t.remotePort;if(null!=e.url)try{var s=new URL(e.url);a=s.hostname,i=parseInt(s.port,10)}catch(u){}if(null==a||null==i)throw new Error("Remote connection did not have address and/or port");var o={sink:Kj(e,t),source:n,connected:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connected();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),close:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.readyState!==e.CONNECTING&&e.readyState!==e.OPEN){t.next=3;break}return t.next=3,new Promise((function(t){e.addEventListener("close",(function(){t()})),e.close()}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),destroy:function(){null!=e.terminate?e.terminate():e.close()},remoteAddress:a,remotePort:i,socket:e};return o},Hj=__webpack_require__(6791),Wj={http:"ws",https:"wss"};function Gj(e,t){var r;t=null!==(r=t)&&void 0!==r?r:{};var n=function(e,t){return(0,Hj.relative)(e,t,Wj,"ws")}(e,("undefined"===typeof window?"":window.location).toString()),a=new jj(n,t.websocket);return qj(a,t)}var Yj=_e("libp2p:websockets:socket");function Qj(e,t,r){var n,a={sink:function(t){return(0,fe.Z)((0,ce.Z)().mark((function n(){var a;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null!=(null===(a=r)||void 0===a?void 0:a.signal)&&(t=oA(t,r.signal)),n.prev=1,n.next=4,e.sink(t);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),"aborted"!==n.t0.type&&Yj.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},source:null!=(r=null!==(n=r)&&void 0!==n?n:{}).signal?oA(e.source,r.signal):e.source,remoteAddr:t,timeline:{open:Date.now()},close:function(){return(0,fe.Z)((0,ce.Z)().mark((function t(){var r,n,i,s;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.prev=1,t.next=4,Qr(e.close(),2e3);case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),n=a.remoteAddr.toOptions(),i=n.host,s=n.port,Yj("timeout closing stream to %s:%s after %dms, destroying it manually",i,s,Date.now()-r),e.destroy();case 11:return t.prev=11,a.timeline.close=Date.now(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,6,11,14]])})))()}};return null!=e.socket.once&&e.socket.once("close",(function(){null==a.timeline.close&&(a.timeline.close=Date.now())})),a}function Jj(e){return e.filter((function(e){if(e.protoCodes().includes(290))return!1;var t=e.decapsulateCode(421);return Wf.matches(t)||Gf.matches(t)}))}var Xj,$j=_e("libp2p:websockets"),eF=function(e){function t(e){(0,pe.Z)(this,t),this.init=e}return(0,he.Z)(t,[{key:e,get:function(){return"@libp2p/websockets"}},{key:eP,get:function(){return!0}},{key:"dial",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $j("dialing %s",t),r=null!==(n=r)&&void 0!==n?n:{},e.next=4,this._connect(t,r);case 4:return a=e.sent,i=Qj(a,t),$j("new outbound connection %s",i.remoteAddr),e.next=9,r.upgrader.upgradeOutbound(i);case 9:return s=e.sent,$j("outbound connection %s upgraded",i.remoteAddr),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_connect",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(null===r||void 0===r||null===(n=r.signal)||void 0===n?void 0:n.aborted)){e.next=2;break}throw new DP;case 2:if(a=t.toOptions(),$j("dialing %s:%s",a.host,a.port),i=wI(),s=function(e){$j.error("connection error:",e),i.reject(e)},null!=(o=Gj(Nb(t),this.init)).socket.on?o.socket.on("error",s):o.socket.onerror=s,null!=r.signal){e.next=13;break}return e.next=11,Promise.race([o.connected(),i.promise]);case 11:case 20:return $j("connected %s",t),e.abrupt("return",o);case 13:return c=new Promise((function(e,t){var n,a;if(u=function(){t(new DP),setTimeout((function(){o.close().catch((function(e){$j.error("error closing raw socket",e)}))}))},!0===(null===r||void 0===r||null===(n=r.signal)||void 0===n?void 0:n.aborted))return u();null===r||void 0===r||null===(a=r.signal)||void 0===a||a.addEventListener("abort",u)})),e.prev=14,e.next=17,Promise.race([c,i.promise,o.connected()]);case 17:return e.prev=17,null!=u&&(null===r||void 0===r||null===(l=r.signal)||void 0===l||l.removeEventListener("abort",u)),e.finish(17);case 22:case"end":return e.stop()}}),e,this,[[14,,17,20]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){return function(){throw new Error("WebSocket Servers can not be created in the browser!")}((0,le.Z)((0,le.Z)({},this.init),e))}},{key:"filter",value:function(e){var t,r;return e=Array.isArray(e)?e:[e],null!=(null===(t=this.init)||void 0===t?void 0:t.filter)?null===(r=this.init)||void 0===r?void 0:r.filter(e):mB.isBrowser||mB.isWebWorker?function(e){return e.filter((function(e){if(e.protoCodes().includes(290))return!1;var t=e.decapsulateCode(421);return Gf.matches(t)&&Ff.matches(t.decapsulateCode(6).decapsulateCode(478))}))}(e):Jj(e)}}]),t}(Symbol.toStringTag),tF=function(){function e(t){if((0,pe.Z)(this,e),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}return(0,he.Z)(e,[{key:"push",value:function(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}},{key:"shift",value:function(){var e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}},{key:"isEmpty",value:function(){return void 0===this.buffer[this.btm]}}]),e}(),rF=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,e),this.hwm=null!==(t=r.splitLimit)&&void 0!==t?t:16,this.head=new tF(this.hwm),this.tail=this.head,this.size=0}return(0,he.Z)(e,[{key:"calculateSize",value:function(e){return null!=(null===e||void 0===e?void 0:e.byteLength)?e.byteLength:1}},{key:"push",value:function(e){if(null!=(null===e||void 0===e?void 0:e.value)&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){var t=this.head;this.head=t.next=new tF(2*this.head.buffer.length),this.head.push(e)}}},{key:"shift",value:function(){var e,t=this.tail.shift();if(void 0===t&&null!=this.tail.next){var r=this.tail.next;this.tail.next=null,this.tail=r,t=this.tail.shift()}return null!=(null===(e=t)||void 0===e?void 0:e.value)&&(this.size-=this.calculateSize(t.value)),t}},{key:"isEmpty",value:function(){return this.head.isEmpty()}}]),e}();function nF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){var t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}};return aF(t,e)}function aF(e,t){var r,n,a,i,s,o,u,c,l=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,f=new rF,p=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f.isEmpty()){t.next=2;break}return t.abrupt("return",e(f));case 2:if(!c){t.next=4;break}return t.abrupt("return",{done:!0});case 4:return t.next=6,new Promise((function(t,r){u=function(n){u=null,f.push(n);try{t(e(f))}catch(Dy){r(Dy)}return o}}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(e){return null!=u?u(e):(f.push(e),o)},d=function(e){var r;if(c)return o;if(!0!==(null===(r=t)||void 0===r?void 0:r.objectMode)&&null==(null===e||void 0===e?void 0:e.byteLength))throw new Error("objectMode was not true but tried to push non-Uint8Array value");return h({done:!1,value:e})},v=function(e){return c?o:(c=!0,null!=e?function(e){return f=new rF,null!=u?u({error:e}):(f.push({error:e}),o)}(e):h({done:!0}))};if(n={},(0,hp.Z)(n,Symbol.asyncIterator,(function(){return this})),(0,hp.Z)(n,"next",p),(0,hp.Z)(n,"return",(function(){return f=new rF,v(),{done:!0}})),(0,hp.Z)(n,"throw",(function(e){return v(e),{done:!0}})),(0,hp.Z)(n,"push",d),(0,hp.Z)(n,"end",v),"readableLength",(a={}).readableLength=a.readableLength||{},a.readableLength.get=function(){return f.size},pp(n,a),o=n,null==l)return o;var y=o;return i={},(0,hp.Z)(i,Symbol.asyncIterator,(function(){return this})),(0,hp.Z)(i,"next",(function(){return y.next()})),(0,hp.Z)(i,"throw",(function(e){return y.throw(e),null!=l&&(l(e),l=void 0),{done:!0}})),(0,hp.Z)(i,"return",(function(){return y.return(),null!=l&&(l(),l=void 0),{done:!0}})),(0,hp.Z)(i,"push",d),(0,hp.Z)(i,"end",(function(e){return y.end(e),null!=l&&(l(e),l=void 0),o})),"readableLength",(s={}).readableLength=s.readableLength||{},s.readableLength.get=function(){return y.readableLength},pp(i,s),o=i}!function(e){e[e.NEW_STREAM=0]="NEW_STREAM",e[e.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",e[e.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",e[e.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",e[e.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",e[e.RESET_RECEIVER=5]="RESET_RECEIVER",e[e.RESET_INITIATOR=6]="RESET_INITIATOR"}(Xj||(Xj={}));var iF=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),sF=Object.freeze({NEW_STREAM:Xj.NEW_STREAM,MESSAGE:Xj.MESSAGE_INITIATOR,CLOSE:Xj.CLOSE_INITIATOR,RESET:Xj.RESET_INITIATOR}),oF=Object.freeze({MESSAGE:Xj.MESSAGE_RECEIVER,CLOSE:Xj.CLOSE_RECEIVER,RESET:Xj.RESET_RECEIVER}),uF=10240;function cF(e){return null!=globalThis.Buffer?Buffer.allocUnsafe(e):new Uint8Array(e)}var lF=function(){function e(){(0,pe.Z)(this,e),this._pool=cF(uF),this._poolOffset=0}return(0,he.Z)(e,[{key:"write",value:function(e){var t=this._pool,r=this._poolOffset;pf.encode(e.id<<3|e.type,t,r),r+=pf.encode.bytes,e.type!==Xj.NEW_STREAM&&e.type!==Xj.MESSAGE_INITIATOR&&e.type!==Xj.MESSAGE_RECEIVER||null==e.data?pf.encode(0,t,r):pf.encode(e.data.length,t,r),r+=pf.encode.bytes;var n=t.slice(this._poolOffset,r);return uF-r<100?(this._pool=cF(uF),this._poolOffset=0):this._poolOffset=r,e.type!==Xj.NEW_STREAM&&e.type!==Xj.MESSAGE_INITIATOR&&e.type!==Xj.MESSAGE_RECEIVER||null==e.data?[n]:[n,e.data instanceof Uint8Array?e.data:e.data.slice()]}}]),e}(),fF=new lF;function pF(){return pF=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=hr(t);case 4:return e.next=6,pr(i.next());case 6:if(!(r=!(s=e.sent).done)){e.next=31;break}if(o=s.value,!Array.isArray(o)){e.next=27;break}u=(0,v.Z)(o),e.prev=10,u.s();case 12:if((c=u.n()).done){e.next=17;break}return l=c.value,e.delegateYield(ia(hr(fF.write(l)),pr),"t0",15);case 15:e.next=12;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(10),u.e(e.t1);case 22:return e.prev=22,u.f(),e.finish(22);case 25:e.next=28;break;case 27:return e.delegateYield(ia(hr(fF.write(o)),pr),"t2",28);case 28:r=!1,e.next=4;break;case 31:e.next=37;break;case 33:e.prev=33,e.t3=e.catch(2),n=!0,a=e.t3;case 37:if(e.prev=37,e.prev=38,!r||null==i.return){e.next=42;break}return e.next=42,pr(i.return());case 42:if(e.prev=42,!n){e.next=45;break}throw a;case 45:return e.finish(42);case 46:return e.finish(37);case 47:case"end":return e.stop()}}),e,null,[[2,33,37,47],[10,19,22,25],[38,,42,46]])}))),pF.apply(this,arguments)}var hF=function(){function e(){(0,pe.Z)(this,e),this._buffer=new _a,this._headerInfo=null}return(0,he.Z)(e,[{key:"write",value:function(e){if(null==e||0===e.length)return[];this._buffer.append(e);for(var t=[];0!==this._buffer.length;){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(u){break}var r=this._headerInfo,n=r.id,a=r.type,i=r.length,s=r.offset;if(this._buffer.length-s<i)break;var o={id:n,type:a};a!==Xj.NEW_STREAM&&a!==Xj.MESSAGE_INITIATOR&&a!==Xj.MESSAGE_RECEIVER||(o.data=this._buffer.slice(s,s+i)),t.push(o),this._buffer.consume(s+i),this._headerInfo=null}return t}},{key:"_decodeHeader",value:function(e){var t=vF(e),r=t.value,n=t.offset,a=vF(e,n),i=a.value,s=a.offset,o=7&r;if(null==iF[o])throw new Error("Invalid type received: ".concat(o));return{id:r>>3,type:o,offset:n+s,length:i}}}]),e}(),dF=127;function vF(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,a=0,i=r,s=e.length;do{if(i>=s||a>49)throw r=0,new RangeError("Could not decode varint");t=e.get(i++),n+=a<28?(t&dF)<<a:(t&dF)*Math.pow(2,a),a+=7}while(t>=128);return{value:n,offset:r=i-r}}function yF(e){return gF.apply(this,arguments)}function gF(){return gF=ye((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new hF,n=!1,a=!1,e.prev=3,s=hr(t);case 5:return e.next=7,pr(s.next());case 7:if(!(n=!(o=e.sent).done)){e.next=16;break}if(u=o.value,!((c=r.write(u)).length>0)){e.next=13;break}return e.next=13,c;case 13:n=!1,e.next=5;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),a=!0,i=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==s.return){e.next=27;break}return e.next=27,pr(s.return());case 27:if(e.prev=27,!a){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,null,[[3,18,22,32],[23,,27,31]])}))),gF.apply(this,arguments)}var mF=1<<20;function bF(e){var t=null!==e&&void 0!==e?e:mF,r=function(e){if((e.type===Xj.NEW_STREAM||e.type===Xj.MESSAGE_INITIATOR||e.type===Xj.MESSAGE_RECEIVER)&&e.data.byteLength>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return function(e){return function(){var t=ye((0,ce.Z)().mark((function t(){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,s=hr(e);case 4:return t.next=6,pr(s.next());case 6:if(!(n=!(o=t.sent).done)){t.next=19;break}if(u=o.value,!Array.isArray(u)){t.next=13;break}return u.forEach(r),t.delegateYield(ia(hr(u),pr),"t0",11);case 11:t.next=16;break;case 13:return r(u),t.next=16,u;case 16:n=!1,t.next=4;break;case 19:t.next=25;break;case 21:t.prev=21,t.t1=t.catch(2),a=!0,i=t.t1;case 25:if(t.prev=25,t.prev=26,!n||null==s.return){t.next=30;break}return t.next=30,pr(s.return());case 30:if(t.prev=30,!a){t.next=33;break}throw i;case 33:return t.finish(30);case 34:return t.finish(25);case 35:case"end":return t.stop()}}),t,null,[[2,21,25,35],[26,,30,34]])})));return function(){return t.apply(this,arguments)}}()()}}var wF=_e("libp2p:mplex:stream"),kF="ERR_MPLEX_STREAM_RESET";var xF=_e("libp2p:mplex");function _F(e){var t=(0,le.Z)((0,le.Z)({},e),{},{type:"".concat(iF[e.type]," (").concat(e.type,")")});return e.type===Xj.NEW_STREAM&&(t.data=(0,gr.toString)(e.data instanceof Uint8Array?e.data:e.data.slice())),e.type!==Xj.MESSAGE_INITIATOR&&e.type!==Xj.MESSAGE_RECEIVER||(t.data=(0,gr.toString)(e.data instanceof Uint8Array?e.data:e.data.slice(),"base16")),t}var EF,SF,AF=function(){function e(t,r){var n;(0,pe.Z)(this,e),this.protocol="/mplex/6.7.0",r=null!==(n=r)&&void 0!==n?n:{},this._streamId=0,this._streams={initiators:CP({metrics:t.getMetrics(),component:"mplex",metric:"initiatorStreams"}),receivers:CP({metrics:t.getMetrics(),component:"mplex",metric:"receiverStreams"})},this._init=r,this.sink=this._createSink();var a=this._createSource();this._source=a,this.source=a}return(0,he.Z)(e,[{key:"init",value:function(e){}},{key:"streams",get:function(){var e=[];return this._streams.initiators.forEach((function(t){e.push(t)})),this._streams.receivers.forEach((function(t){e.push(t)})),e}},{key:"newStream",value:function(e){var t=this._streamId++;e=null==e?t.toString():e.toString();var r=this._streams.initiators;return this._newStream({id:t,name:e,type:"initiator",registry:r})}},{key:"_newReceiverStream",value:function(e){var t=e.id,r=e.name,n=this._streams.receivers;return this._newStream({id:t,name:r,type:"receiver",registry:n})}},{key:"_newStream",value:function(e){var t,r=this,n=null!==(t=this._init.maxStreamsPerConnection)&&void 0!==t?t:1024;if(this._streams.initiators.size+this._streams.receivers.size===n)throw Ee(new Error("Too many streams open"),"ERR_TOO_MANY_STREAMS");var a=e.id,i=e.name,s=e.type,o=e.registry;if(xF("new %s stream %s %s",s,a,i),o.has(a))throw new Error("".concat(s," stream ").concat(a," already exists!"));var u=function(e){var t,r=e.id,n=e.name,a=e.send,i=e.onEnd,s=e.type,o=void 0===s?"initiator":s,u=e.maxMsgSize,c=void 0===u?mF:u,l=new AbortController,f=new AbortController,p=new AbortController,h="initiator"===o?sF:oF,d="initiator"===o?"i".concat(r):"r".concat(r),v="".concat(null==n?r:n),y=!1,g=!1,m={open:Date.now()},b=function(e){g||(g=!0,wF.trace("%s stream %s sink end - err: %o",o,v,e),null!=e&&null==t&&(t=e),y&&(m.close=Date.now(),null!=i&&i(t)))},w={close:function(){wF.trace("%s stream %s close",o,v),w.closeRead(),w.closeWrite()},closeRead:function(){wF.trace("%s stream %s closeRead",o,v),y||w.source.end()},closeWrite:function(){if(wF.trace("%s stream %s closeWrite",o,v),!g){p.abort();try{a({id:r,type:h.CLOSE})}catch(Dy){wF.trace("%s stream %s error sending close",o,n,Dy)}b()}},abort:function(e){wF.trace("%s stream %s abort",o,v,e),w.source.end(e),l.abort(),b(e)},reset:function(){var e=Ee(new Error("stream reset"),kF);f.abort(),w.source.end(e),b(e)},sink:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var i,s,u,d,y,m,k,x;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}throw Ee(new Error("stream closed for writing"),"ERR_MPLEX_SINK_ENDED");case 2:t=oA(t,(0,Er.anySignal)([l.signal,f.signal,p.signal])),e.prev=3,"initiator"===o&&a({id:r,type:sF.NEW_STREAM,data:(0,fr.fromString)(v)}),i=new _a,s=!1,u=!1,e.prev=8,y=hr(t);case 10:return e.next=12,y.next();case 12:if(!(s=!(m=e.sent).done)){e.next=28;break}k=m.value,i.append(k);case 15:if(0===i.length){e.next=25;break}if(!(i.length<=c)){e.next=20;break}return a({id:r,type:h.MESSAGE,data:i.subarray()}),i.consume(i.length),e.abrupt("break",25);case 20:x=i.length-c,a({id:r,type:h.MESSAGE,data:i.subarray(0,x)}),i.consume(x),e.next=15;break;case 25:s=!1,e.next=10;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(8),u=!0,d=e.t0;case 34:if(e.prev=34,e.prev=35,!s||null==y.return){e.next=39;break}return e.next=39,y.return();case 39:if(e.prev=39,!u){e.next=42;break}throw d;case 42:return e.finish(39);case 43:return e.finish(34);case 44:e.next=57;break;case 46:if(e.prev=46,e.t1=e.catch(3),"aborted"!==e.t1.type||"The operation was aborted"!==e.t1.message){e.next=53;break}if(!p.signal.aborted){e.next=51;break}return e.abrupt("return");case 51:f.signal.aborted&&(e.t1.message="stream reset",e.t1.code=kF),l.signal.aborted&&(e.t1.message="stream aborted",e.t1.code="ERR_MPLEX_STREAM_ABORT");case 53:if(e.t1.code===kF)wF.trace("%s stream %s reset",o,n);else{wF.trace("%s stream %s error",o,n,e.t1);try{a({id:r,type:h.RESET})}catch(Dy){wF.trace("%s stream %s error sending reset",o,n,Dy)}}return w.source.end(e.t1),b(e.t1),e.abrupt("return");case 57:try{a({id:r,type:h.CLOSE})}catch(Dy){wF.trace("%s stream %s error sending close",o,n,Dy)}b();case 59:case"end":return e.stop()}}),e,null,[[3,46],[8,30,34,44],[35,,39,43]])})));return function(t){return e.apply(this,arguments)}}(),source:nF({onEnd:function(e){y||(y=!0,wF.trace("%s stream %s source end - err: %o",o,v,e),null!=e&&null==t&&(t=e),g&&(w.timeline.close=Date.now(),null!=i&&i(t)))}}),timeline:m,id:d};return w}({id:a,name:i,send:function(e){if(!o.has(a))throw Ee(new Error("the stream is not in the muxer registry, it may have already been closed"),"ERR_STREAM_DOESNT_EXIST");xF.enabled&&xF.trace("%s stream %s send",s,a,_F(e)),e.type!==Xj.NEW_STREAM&&e.type!==Xj.MESSAGE_INITIATOR&&e.type!==Xj.MESSAGE_RECEIVER||(e.data=e.data instanceof Uint8Array?e.data:e.data.slice()),r._source.push(e)},type:s,onEnd:function(){xF("%s stream %s %s ended",s,a,i),o.delete(a),null!=r._init.onStreamEnd&&r._init.onStreamEnd(u)},maxMsgSize:this._init.maxMsgSize});return o.set(a,u),u}},{key:"_createSink",value:function(){var e=this,t=function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!=e._init.signal&&(r=oA(r,e._init.signal)),t.prev=1,t.next=4,kp(r,yF,bF(e._init.maxMsgSize),function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,s=hr(r);case 4:return t.next=6,s.next();case 6:if(!(n=!(o=t.sent).done)){t.next=12;break}u=o.value,e._handleIncoming(u);case 9:n=!1,t.next=4;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),a=!0,i=t.t0;case 18:if(t.prev=18,t.prev=19,!n||null==s.return){t.next=23;break}return t.next=23,s.return();case 23:if(t.prev=23,!a){t.next=26;break}throw i;case 26:return t.finish(23);case 27:return t.finish(18);case 28:case"end":return t.stop()}}),t,null,[[2,14,18,28],[19,,23,27]])})));return function(e){return t.apply(this,arguments)}}());case 4:e._source.end(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),xF("error in sink",t.t0),e._source.end(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return t}},{key:"_createSource",value:function(){var e=this,t=function(){return aF((function(e){for(var t,r=[];!e.isEmpty()&&null!=(t=e.shift());){if(null!=t.error)throw t.error;!1===t.done&&r.push(t.value)}return null==t?{done:!0}:{done:!0===t.done,value:r}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({objectMode:!0,onEnd:function(t){var r,n=e._streams,a=n.initiators,i=n.receivers,s=(0,v.Z)(a.values());try{for(s.s();!(r=s.n()).done;){var o=r.value;null!=t?o.abort(t):o.close()}}catch(t){s.e(t)}finally{s.f()}var u,c=(0,v.Z)(i.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=t?l.abort(t):l.close()}}catch(t){c.e(t)}finally{c.f()}}});return Object.assign(function(e){return pF.apply(this,arguments)}(t),{push:t.push,end:t.end,return:t.return})}},{key:"_handleIncoming",value:function(e){var t,r=e.id,n=e.type;if(xF.enabled&&xF.trace("incoming message",_F(e)),e.type!==Xj.NEW_STREAM){var a=(1===(1&n)?this._streams.initiators:this._streams.receivers).get(r);if(null!=a){var i=null!==(t=this._init.maxStreamBufferSize)&&void 0!==t?t:4194304;switch(n){case Xj.MESSAGE_INITIATOR:case Xj.MESSAGE_RECEIVER:if(a.source.readableLength>i){this._source.push({id:e.id,type:n===Xj.MESSAGE_INITIATOR?Xj.RESET_RECEIVER:Xj.RESET_INITIATOR});var s=Ee(new Error("Input buffer full - increase Mplex maxBufferSize to accomodate slow consumers"),"ERR_STREAM_INPUT_BUFFER_FULL");return void a.abort(s)}a.source.push(e.data.slice());break;case Xj.CLOSE_INITIATOR:case Xj.CLOSE_RECEIVER:a.closeRead();break;case Xj.RESET_INITIATOR:case Xj.RESET_RECEIVER:a.reset();break;default:xF("unknown message type %s",n)}}else xF("missing stream %s",r)}else{var o=this._newReceiverStream({id:r,name:(0,gr.toString)(e.data instanceof Uint8Array?e.data:e.data.slice())});null!=this._init.onIncomingStream&&this._init.onIncomingStream(o)}}}]),e}(),IF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pe.Z)(this,e),this.protocol="/mplex/6.7.0",this.init=t}return(0,he.Z)(e,[{key:"createStreamMuxer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new AF(e,(0,le.Z)((0,le.Z)({},t),this.init))}}]),e}();function CF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=iN(e),n=tA.fromReader(r.reader,t),a={read:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.reader.next(t);case 2:if(n=e.sent,null!=(a=n.value)){e.next=6;break}throw new Error("Value is null");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),readLP:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.next();case 2:if(t=e.sent,null!=(r=t.value)){e.next=6;break}throw new Error("Value is null");case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),readPB:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.readLP();case 2:if(null!=(r=e.sent)){e.next=5;break}throw new Error("Value is null");case 5:return n=r instanceof Uint8Array?r:r.slice(),e.abrupt("return",t.decode(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),write:function(e){e instanceof Uint8Array?r.writer.push(e):r.writer.push(e.slice())},writeLP:function(e){a.write(GS.single(e,t))},writePB:function(e,t){a.writeLP(t.encode(e))},pb:function(e){return{read:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.readPB(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),write:function(t){return a.writePB(t,e)}}},unwrap:function(){return r.rest(),r.stream}};return a}function ZF(){var e=wI(),t=!1;return{sink:function(){var r=(0,fe.Z)((0,ce.Z)().mark((function r(n){return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=2;break}throw new Error("already piped");case 2:t=!0,e.resolve(n);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),source:ye((0,ce.Z)().mark((function t(){var r;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pr(e.promise);case 2:return r=t.sent,t.delegateYield(ia(hr(r),pr),"t0",4);case 4:case"end":return t.stop()}}),t)})))()}}function RF(){var e=ZF(),t=ZF();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}var TF=65535,DF=Boolean(null===(EF=globalThis.process)||void 0===EF||null===(SF=EF.env)||void 0===SF?void 0:SF.DUMP_SESSION_KEYS),PF=__webpack_require__(2497),NF=__webpack_require__(2029),OF=__webpack_require__(4888),BF=__webpack_require__(3642),LF={hashSHA256:function(e){return(0,OF.vp)(e)},getHKDF:function(e,t){var r=new PF.t(OF.mE,t,e).expand(96);return[r.slice(0,32),r.slice(32,64),r.slice(64,96)]},generateX25519KeyPair:function(){var e=NF.Au();return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519KeyPairFromSeed:function(e){var t=NF._w(e);return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519SharedKey:function(e,t){return NF.gi(e,t)},chaCha20Poly1305Encrypt:function(e,t,r,n){return new BF.OK(n).seal(t,e,r)},chaCha20Poly1305Decrypt:function(e,t,r,n){return new BF.OK(n).open(t,e,r)}};function MF(e){return function(){var t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,s=hr(r);case 4:return t.next=6,pr(s.next());case 6:if(!(n=!(o=t.sent).done)){t.next=21;break}u=o.value,c=0;case 9:if(!(c<u.length)){t.next=18;break}return(l=c+65519)>u.length&&(l=u.length),f=e.encrypt(u.slice(c,l),e.session),t.next=15,f;case 15:c+=65519,t.next=9;break;case 18:n=!1,t.next=4;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(2),a=!0,i=t.t0;case 27:if(t.prev=27,t.prev=28,!n||null==s.return){t.next=32;break}return t.next=32,pr(s.return());case 32:if(t.prev=32,!a){t.next=35;break}throw i;case 35:return t.finish(32);case 36:return t.finish(27);case 37:case"end":return t.stop()}}),t,null,[[2,23,27,37],[28,,32,36]])})));return function(e){return t.apply(this,arguments)}}()}function UF(e){return function(){var t=ye((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,s=hr(r);case 4:return t.next=6,pr(s.next());case 6:if(!(n=!(o=t.sent).done)){t.next=27;break}u=o.value,c=0;case 9:if(!(c<u.length)){t.next=24;break}return(l=c+TF)>u.length&&(l=u.length),t.next=14,pr(e.decrypt(u.slice(c,l),e.session));case 14:if(f=t.sent,p=f.plaintext,f.valid){t.next=19;break}throw new Error("Failed to validate decrypted chunk");case 19:return t.next=21,p;case 21:c+=TF,t.next=9;break;case 24:n=!1,t.next=4;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(2),a=!0,i=t.t0;case 33:if(t.prev=33,t.prev=34,!n||null==s.return){t.next=38;break}return t.next=38,pr(s.return());case 38:if(t.prev=38,!a){t.next=41;break}throw i;case 41:return t.finish(38);case 42:return t.finish(33);case 43:case"end":return t.stop()}}),t,null,[[2,29,33,43],[34,,38,42]])})));return function(e){return t.apply(this,arguments)}}()}var jF=function(e,t,r){var n,a;return t=null!==(n=t)&&void 0!==n?n:(a=2,globalThis.Buffer?globalThis.Buffer.allocUnsafe(a):new Uint8Array(a)),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint16(null!==r&&void 0!==r?r:0,e,!1),t};jF.bytes=2;var FF,zF=function(e){if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};function VF(e){return(0,ba.concat)([e.ne,e.ciphertext],e.ne.length+e.ciphertext.length)}function KF(e){return(0,ba.concat)([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length)}function qF(e){return(0,ba.concat)([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length)}function HF(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.slice(0,32),ciphertext:e.slice(32,e.length),ns:new Uint8Array(0)}}function WF(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.slice(0,32),ns:e.slice(32,80),ciphertext:e.slice(80,e.length)}}function GF(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:e.slice(0,48),ciphertext:e.slice(48,e.length)}}zF.bytes=2,function(e){!function(e){e.codec=function(){return yi({1:{name:"identityKey",codec:Ja},2:{name:"identitySig",codec:Ja},3:{name:"data",codec:Ja}})},e.encode=function(t){return Ga(t,e.codec())},e.decode=function(t){return Wa(t,e.codec())}}(e.NoiseHandshakePayload||(e.NoiseHandshakePayload={}))}(FF||(FF={}));var YF=FF.NoiseHandshakePayload;function QF(e,t,r){return JF.apply(this,arguments)}function JF(){return(JF=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$F(t,az(r));case 2:if(a=e.sent,i=null!==n&&void 0!==n?n:new Uint8Array(0),null!=t.publicKey){e.next=6;break}throw new Error("PublicKey was missing from local PeerId");case 6:return e.abrupt("return",XF(t.publicKey,a,i));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XF(e,t,r){return YF.encode({identityKey:e,identitySig:t,data:null!==r&&void 0!==r?r:new Uint8Array(0)})}function $F(e,t){return ez.apply(this,arguments)}function ez(){return(ez=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.privateKey){e.next=2;break}throw new Error("PrivateKey was missing from PeerId");case 2:return e.next=4,Ju(t.privateKey);case 4:return n=e.sent,e.next=7,n.sign(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tz(e){return rz.apply(this,arguments)}function rz(){return(rz=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ta(t.identityKey);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nz(e){return YF.decode(e)}function az(e){var t=(0,fr.fromString)("noise-libp2p-static-key:");return(0,ba.concat)([t,e],t.length+e.length)}function iz(e,t){return sz.apply(this,arguments)}function sz(){return(sz=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ta(r);case 2:return n=e.sent,e.abrupt("return",n.equals(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oz(e,t,r){return uz.apply(this,arguments)}function uz(){return(uz=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.identityKey,e.next=3,iz(n,a);case 3:if(e.sent){e.next=5;break}throw new Error("Peer ID doesn't match libp2p public key.");case 5:return i=az(t),e.next=8,ta(a);case 8:if(null!=(s=e.sent).publicKey){e.next=11;break}throw new Error("PublicKey was missing from PeerId");case 11:if(null!=r.identitySig){e.next=13;break}throw new Error("Signature was missing from message");case 13:return o=Yu(s.publicKey),e.next=16,o.verify(i,r.identitySig);case 16:if(e.sent){e.next=19;break}throw new Error("Static key doesn't match to peer that signed payload!");case 19:return e.abrupt("return",s);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cz(e){return e instanceof Uint8Array&&32===e.length}var lz,fz=_e("libp2p:noise");function pz(e){lz("LOCAL_STATIC_PUBLIC_KEY ".concat((0,gr.toString)(e.publicKey,"hex"))),lz("LOCAL_STATIC_PRIVATE_KEY ".concat((0,gr.toString)(e.privateKey,"hex")))}function hz(e){e?(lz("LOCAL_PUBLIC_EPHEMERAL_KEY ".concat((0,gr.toString)(e.publicKey,"hex"))),lz("LOCAL_PRIVATE_EPHEMERAL_KEY ".concat((0,gr.toString)(e.privateKey,"hex")))):lz("Missing local ephemeral keys.")}function dz(e){lz("REMOTE_STATIC_PUBLIC_KEY ".concat((0,gr.toString)(e,"hex")))}function vz(e){lz("REMOTE_EPHEMERAL_PUBLIC_KEY ".concat((0,gr.toString)(e,"hex")))}function yz(e){e.cs1&&e.cs2?(lz("CIPHER_STATE_1 ".concat(e.cs1.n," ").concat((0,gr.toString)(e.cs1.k,"hex"))),lz("CIPHER_STATE_2 ".concat(e.cs2.n," ").concat((0,gr.toString)(e.cs2.k,"hex")))):lz("Missing cipher state.")}lz=DF?fz:Object.assign((function(){}),{enabled:!1,trace:function(){},error:function(){}});var gz=Number.MAX_SAFE_INTEGER,mz="Cipherstate has reached maximum n, a new handshake must be performed",bz=function(){function e(t){(0,pe.Z)(this,e),this.crypto=t}return(0,he.Z)(e,[{key:"encryptWithAd",value:function(e,t,r){var n=this.encrypt(e.k,e.n,t,r);return this.setNonce(e,this.incrementNonce(e.n)),n}},{key:"decryptWithAd",value:function(e,t,r){var n=this.decrypt(e.k,e.n,t,r),a=n.plaintext,i=n.valid;return this.setNonce(e,this.incrementNonce(e.n)),{plaintext:a,valid:i}}},{key:"hasKey",value:function(e){return!this.isEmptyKey(e.k)}},{key:"setNonce",value:function(e,t){e.n=t}},{key:"createEmptyKey",value:function(){return new Uint8Array(32)}},{key:"isEmptyKey",value:function(e){var t=this.createEmptyKey();return(0,Kn.equals)(t,e)}},{key:"incrementNonce",value:function(e){return e+1}},{key:"nonceToBytes",value:function(e){var t=new Uint8Array(12);return new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(4,e,!0),t}},{key:"encrypt",value:function(e,t,r,n){if(t>gz)throw new Error(mz);var a=this.nonceToBytes(t);return this.crypto.chaCha20Poly1305Encrypt(n,a,r,e)}},{key:"encryptAndHash",value:function(e,t){var r;return r=this.hasKey(e.cs)?this.encryptWithAd(e.cs,e.h,t):t,this.mixHash(e,r),r}},{key:"decrypt",value:function(e,t,r,n){if(t>gz)throw new Error(mz);var a=this.nonceToBytes(t),i=this.crypto.chaCha20Poly1305Decrypt(n,a,r,e);return i?{plaintext:i,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}},{key:"decryptAndHash",value:function(e,t){var r,n=!0;if(this.hasKey(e.cs)){var a=this.decryptWithAd(e.cs,e.h,t);r=a.plaintext,n=a.valid}else r=t;return this.mixHash(e,t),{plaintext:r,valid:n}}},{key:"dh",value:function(e,t){try{var r=this.crypto.generateX25519SharedKey(e,t);return 32===r.length?r:r.slice(0,32)}catch(n){return fz(n.message),new Uint8Array(32)}}},{key:"mixHash",value:function(e,t){e.h=this.getHash(e.h,t)}},{key:"getHash",value:function(e,t){return this.crypto.hashSHA256((0,ba.concat)([e,t],e.length+t.length))}},{key:"mixKey",value:function(e,t){var r=this.crypto.getHKDF(e.ck,t),n=(0,y.Z)(r,2),a=n[0],i=n[1];e.cs=this.initializeKey(i),e.ck=a}},{key:"initializeKey",value:function(e){return{k:e,n:0}}},{key:"initializeSymmetric",value:function(e){var t=(0,fr.fromString)(e,"utf-8"),r=this.hashProtocolName(t),n=r,a=this.createEmptyKey();return{cs:this.initializeKey(a),ck:n,h:r}}},{key:"hashProtocolName",value:function(e){if(e.length<=32){var t=new Uint8Array(32);return t.set(e),t}return this.getHash(e,new Uint8Array(0))}},{key:"split",value:function(e){var t=this.crypto.getHKDF(e.ck,new Uint8Array(0)),r=(0,y.Z)(t,2),n=r[0],a=r[1];return{cs1:this.initializeKey(n),cs2:this.initializeKey(a)}}},{key:"writeMessageRegular",value:function(e,t){var r=this.encryptWithAd(e,new Uint8Array(0),t);return{ne:this.createEmptyKey(),ns:new Uint8Array(0),ciphertext:r}}},{key:"readMessageRegular",value:function(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}}]),e}(),wz=function(e){St(r,e);var t=Rt(r);function r(){return(0,pe.Z)(this,r),t.apply(this,arguments)}return(0,he.Z)(r,[{key:"initSession",value:function(e,t,r,n){var a=this.createEmptyKey();return{hs:e?this.initializeInitiator(t,r,n,a):this.initializeResponder(t,r,n,a),i:e,mc:0}}},{key:"sendMessage",value:function(e,t){var r;if(0===e.mc)r=this.writeMessageA(e.hs,t);else if(1===e.mc){var n=this.writeMessageB(e.hs,t),a=n.messageBuffer,i=n.h,s=n.cs1,o=n.cs2;r=a,e.h=i,e.cs1=s,e.cs2=o}else{if(!(e.mc>1))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");r=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");r=this.writeMessageRegular(e.cs2,t)}}return e.mc++,r}},{key:"recvMessage",value:function(e,t){var r=new Uint8Array(0),n=!1;if(0===e.mc){var a=this.readMessageA(e.hs,t);r=a.plaintext,n=a.valid}if(1===e.mc){var i=this.readMessageB(e.hs,t),s=i.plaintext,o=i.valid,u=i.h,c=i.cs1,l=i.cs2;r=s,n=o,e.h=u,e.cs1=c,e.cs2=l}return e.mc++,{plaintext:r,valid:n}}},{key:"writeMessageA",value:function(e,t){e.e=this.crypto.generateX25519KeyPair();var r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));var n=e.s.publicKey,a=this.encryptAndHash(e.ss,n);return this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs)),{ne:r,ns:a,ciphertext:this.encryptAndHash(e.ss,t)}}},{key:"writeMessageB",value:function(e,t){e.e=this.crypto.generateX25519KeyPair();var r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));var n=this.encryptAndHash(e.ss,t),a={ne:r,ns:this.createEmptyKey(),ciphertext:n},i=this.split(e.ss);return{messageBuffer:a,cs1:i.cs1,cs2:i.cs2,h:e.ss.h}}},{key:"readMessageA",value:function(e,t){cz(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));var r=this.decryptAndHash(e.ss,t.ns),n=r.plaintext,a=r.valid;a&&32===n.length&&cz(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));var i=this.decryptAndHash(e.ss,t.ciphertext),s=i.plaintext,o=i.valid;return{plaintext:s,valid:a&&o}}},{key:"readMessageB",value:function(e,t){if(cz(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));var r=this.decryptAndHash(e.ss,t.ciphertext),n=r.plaintext,a=r.valid,i=this.split(e.ss),s=i.cs1,o=i.cs2;return{h:e.ss.h,valid:a,plaintext:n,cs1:s,cs2:o}}},{key:"initializeInitiator",value:function(e,t,r,n){var a=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");return this.mixHash(a,e),this.mixHash(a,r),{ss:a,s:t,rs:r,re:new Uint8Array(32),psk:n}}},{key:"initializeResponder",value:function(e,t,r,n){var a=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");return this.mixHash(a,e),this.mixHash(a,t.publicKey),{ss:a,s:t,rs:r,re:new Uint8Array(32),psk:n}}}]),r}(bz),kz=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this,n)).initialMsg=e,a.name="FailedIKhandshake",a}return(0,he.Z)(r)}(Pt(Error)),xz=function(){function e(t,r,n,a,i,s,o,u,c){(0,pe.Z)(this,e),this.isInitiator=t,this.payload=r,this.prologue=n,this.staticKeypair=i,this.connection=s,u&&(this.remotePeer=u),this.ik=null!==c&&void 0!==c?c:new wz(a),this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,o),this.remoteEarlyData=new Uint8Array}return(0,he.Z)(e,[{key:"stage0",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pz(this.session.hs.s),dz(this.session.hs.rs),!this.isInitiator){e.next=10;break}fz("IK Stage 0 - Initiator sending message..."),t=this.ik.sendMessage(this.session,this.payload),this.connection.writeLP(KF(t)),fz("IK Stage 0 - Initiator sent message."),hz(this.session.hs.e),e.next=41;break;case 10:return fz("IK Stage 0 - Responder receiving message..."),e.next=13,this.connection.readLP();case 13:if(r=e.sent,e.prev=14,n=WF(r.slice()),a=this.ik.recvMessage(this.session,n),i=a.plaintext,a.valid){e.next=19;break}throw new Error("ik handshake stage 0 decryption validation fail");case 19:return fz("IK Stage 0 - Responder got message, going to verify payload."),e.next=22,nz(i);case 22:if(s=e.sent,e.t0=this.remotePeer,e.t0){e.next=28;break}return e.next=27,tz(s);case 27:e.t0=e.sent;case 28:return this.remotePeer=e.t0,e.next=31,oz(this.session.hs.rs,s,this.remotePeer);case 31:this.setRemoteEarlyData(s.data),fz("IK Stage 0 - Responder successfully verified payload!"),vz(this.session.hs.re),e.next=41;break;case 36:throw e.prev=36,e.t1=e.catch(14),o=e.t1,fz("Responder breaking up with IK handshake in stage 0."),new kz(r,"Error occurred while verifying initiator's signed payload: ".concat(o.message));case 41:case"end":return e.stop()}}),e,this,[[14,36]])})));return function(){return e.apply(this,arguments)}}()},{key:"stage1",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=34;break}return fz("IK Stage 1 - Initiator receiving message..."),e.next=4,this.connection.readLP();case 4:if(t=e.sent.slice(),r=HF(t),n=this.ik.recvMessage(this.session,r),a=n.plaintext,i=n.valid,fz("IK Stage 1 - Initiator got message, going to verify payload."),e.prev=8,i){e.next=11;break}throw new Error("ik stage 1 decryption validation fail");case 11:return e.next=13,nz(a);case 13:if(s=e.sent,e.t0=this.remotePeer,e.t0){e.next=19;break}return e.next=18,tz(s);case 18:e.t0=e.sent;case 19:return this.remotePeer=e.t0,e.next=22,oz(r.ns.slice(0,32),s,this.remotePeer);case 22:this.setRemoteEarlyData(s.data),fz("IK Stage 1 - Initiator successfully verified payload!"),vz(this.session.hs.re),e.next=32;break;case 27:throw e.prev=27,e.t1=e.catch(8),o=e.t1,fz("Initiator breaking up with IK handshake in stage 1."),new kz(t,"Error occurred while verifying responder's signed payload: ".concat(o.message));case 32:e.next=39;break;case 34:fz("IK Stage 1 - Responder sending message..."),u=this.ik.sendMessage(this.session,this.payload),this.connection.writeLP(VF(u)),fz("IK Stage 1 - Responder sent message..."),hz(this.session.hs.e);case 39:yz(this.session);case 40:case"end":return e.stop()}}),e,this,[[8,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(e,t){var r=this.getCS(t,!1);return this.ik.decryptWithAd(r,new Uint8Array(0),e)}},{key:"encrypt",value:function(e,t){var r=this.getCS(t);return this.ik.encryptWithAd(r,new Uint8Array(0),e)}},{key:"getLocalEphemeralKeys",value:function(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}},{key:"getCS",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}},{key:"setRemoteEarlyData",value:function(e){e&&(this.remoteEarlyData=e)}}]),e}(),_z=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected Peer";return(0,pe.Z)(this,r),(e=t.call(this,n)).code=r.code,e}return(0,he.Z)(r,null,[{key:"code",get:function(){return"ERR_UNEXPECTED_PEER"}}]),r}(Pt(Error)),Ez=function(e){St(r,e);var t=Rt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto exchange";return(0,pe.Z)(this,r),(e=t.call(this,n)).code=r.code,e}return(0,he.Z)(r,null,[{key:"code",get:function(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}]),r}(Pt(Error)),Sz=(Error,function(e){St(r,e);var t=Rt(r);function r(){return(0,pe.Z)(this,r),t.apply(this,arguments)}return(0,he.Z)(r,[{key:"initializeInitiator",value:function(e,t,r,n){var a=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");return this.mixHash(a,e),{ss:a,s:t,rs:r,psk:n,re:new Uint8Array(32)}}},{key:"initializeResponder",value:function(e,t,r,n){var a=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");return this.mixHash(a,e),{ss:a,s:t,rs:r,psk:n,re:new Uint8Array(32)}}},{key:"writeMessageA",value:function(e,t,r){var n=new Uint8Array(0);e.e=void 0!==r?r:this.crypto.generateX25519KeyPair();var a=e.e.publicKey;return this.mixHash(e.ss,a),{ne:a,ns:n,ciphertext:this.encryptAndHash(e.ss,t)}}},{key:"writeMessageB",value:function(e,t){e.e=this.crypto.generateX25519KeyPair();var r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));var n=e.s.publicKey,a=this.encryptAndHash(e.ss,n);return this.mixKey(e.ss,this.dh(e.s.privateKey,e.re)),{ne:r,ns:a,ciphertext:this.encryptAndHash(e.ss,t)}}},{key:"writeMessageC",value:function(e,t){var r=e.s.publicKey,n=this.encryptAndHash(e.ss,r);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));var a=this.encryptAndHash(e.ss,t),i={ne:this.createEmptyKey(),ns:n,ciphertext:a},s=this.split(e.ss),o=s.cs1,u=s.cs2;return{h:e.ss.h,messageBuffer:i,cs1:o,cs2:u}}},{key:"readMessageA",value:function(e,t){return cz(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}},{key:"readMessageB",value:function(e,t){if(cz(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));var r=this.decryptAndHash(e.ss,t.ns),n=r.plaintext,a=r.valid;a&&32===n.length&&cz(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));var i=this.decryptAndHash(e.ss,t.ciphertext),s=i.plaintext,o=i.valid;return{plaintext:s,valid:a&&o}}},{key:"readMessageC",value:function(e,t){var r=this.decryptAndHash(e.ss,t.ns),n=r.plaintext,a=r.valid;if(a&&32===n.length&&cz(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));var i=this.decryptAndHash(e.ss,t.ciphertext),s=i.plaintext,o=i.valid,u=this.split(e.ss),c=u.cs1,l=u.cs2;return{h:e.ss.h,plaintext:s,valid:a&&o,cs1:c,cs2:l}}},{key:"initSession",value:function(e,t,r){var n=this.createEmptyKey(),a=new Uint8Array(32);return{hs:e?this.initializeInitiator(t,r,a,n):this.initializeResponder(t,r,a,n),i:e,mc:0}}},{key:"sendMessage",value:function(e,t,r){var n;if(0===e.mc)n=this.writeMessageA(e.hs,t,r);else if(1===e.mc)n=this.writeMessageB(e.hs,t);else if(2===e.mc){var a=this.writeMessageC(e.hs,t),i=a.h,s=a.messageBuffer,o=a.cs1,u=a.cs2;n=s,e.h=i,e.cs1=o,e.cs2=u}else{if(!(e.mc>2))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,t)}}return e.mc++,n}},{key:"recvMessage",value:function(e,t){var r=new Uint8Array(0),n=!1;if(0===e.mc){var a=this.readMessageA(e.hs,t);r=a.plaintext,n=a.valid}else if(1===e.mc){var i=this.readMessageB(e.hs,t);r=i.plaintext,n=i.valid}else if(2===e.mc){var s=this.readMessageC(e.hs,t),o=s.h,u=s.plaintext,c=s.valid,l=s.cs1,f=s.cs2;r=u,n=c,e.h=o,e.cs1=l,e.cs2=f}return e.mc++,{plaintext:r,valid:n}}}]),r}(bz)),Az=function(){function e(t,r,n,a,i,s,o,u){(0,pe.Z)(this,e),this.isInitiator=t,this.payload=r,this.prologue=n,this.staticKeypair=i,this.connection=s,o&&(this.remotePeer=o),this.xx=null!==u&&void 0!==u?u:new Sz(a),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}return(0,he.Z)(e,[{key:"propose",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pz(this.session.hs.s),!this.isInitiator){e.next=9;break}fz("Stage 0 - Initiator starting to send first message."),t=this.xx.sendMessage(this.session,new Uint8Array(0)),this.connection.writeLP(VF(t)),fz("Stage 0 - Initiator finished sending first message."),hz(this.session.hs.e),e.next=20;break;case 9:return fz("Stage 0 - Responder waiting to receive first message..."),e.t0=HF,e.next=13,this.connection.readLP();case 13:if(e.t1=e.sent.slice(),r=(0,e.t0)(e.t1),n=this.xx.recvMessage(this.session,r),n.valid){e.next=18;break}throw new Ez("xx handshake stage 0 validation fail");case 18:fz("Stage 0 - Responder received first message."),vz(this.session.hs.re);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exchange",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=37;break}return fz("Stage 1 - Initiator waiting to receive first message from responder..."),e.t0=WF,e.next=5,this.connection.readLP();case 5:if(e.t1=e.sent.slice(),t=(0,e.t0)(e.t1),r=this.xx.recvMessage(this.session,t),n=r.plaintext,r.valid){e.next=10;break}throw new Ez("xx handshake stage 1 validation fail");case 10:return fz("Stage 1 - Initiator received the message."),vz(this.session.hs.re),dz(this.session.hs.rs),fz("Initiator going to check remote's signature..."),e.prev=14,e.next=17,nz(n);case 17:if(a=e.sent,e.t2=this.remotePeer,e.t2){e.next=23;break}return e.next=22,tz(a);case 22:e.t2=e.sent;case 23:return this.remotePeer=e.t2,e.next=26,oz(this.session.hs.rs,a,this.remotePeer);case 26:this.remotePeer=e.sent,this.setRemoteEarlyData(a.data),e.next=34;break;case 30:throw e.prev=30,e.t3=e.catch(14),i=e.t3,new _z("Error occurred while verifying signed payload: ".concat(i.message));case 34:fz("All good with the signature!"),e.next=42;break;case 37:fz("Stage 1 - Responder sending out first message with signed payload and static key."),s=this.xx.sendMessage(this.session,this.payload),this.connection.writeLP(KF(s)),fz("Stage 1 - Responder sent the second handshake message with signed payload."),hz(this.session.hs.e);case 42:case"end":return e.stop()}}),e,this,[[14,30]])})));return function(){return e.apply(this,arguments)}}()},{key:"finish",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=7;break}fz("Stage 2 - Initiator sending third handshake message."),t=this.xx.sendMessage(this.session,this.payload),this.connection.writeLP(qF(t)),fz("Stage 2 - Initiator sent message with signed payload."),e.next=36;break;case 7:return fz("Stage 2 - Responder waiting for third handshake message..."),e.t0=GF,e.next=11,this.connection.readLP();case 11:if(e.t1=e.sent.slice(),r=(0,e.t0)(e.t1),n=this.xx.recvMessage(this.session,r),a=n.plaintext,n.valid){e.next=16;break}throw new Ez("xx handshake stage 2 validation fail");case 16:return fz("Stage 2 - Responder received the message, finished handshake."),e.prev=17,e.next=20,nz(a);case 20:if(i=e.sent,e.t2=this.remotePeer,e.t2){e.next=26;break}return e.next=25,tz(i);case 25:e.t2=e.sent;case 26:return this.remotePeer=e.t2,e.next=29,oz(this.session.hs.rs,i,this.remotePeer);case 29:this.setRemoteEarlyData(i.data),e.next=36;break;case 32:throw e.prev=32,e.t3=e.catch(17),s=e.t3,new _z("Error occurred while verifying signed payload: ".concat(s.message));case 36:yz(this.session);case 37:case"end":return e.stop()}}),e,this,[[17,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"encrypt",value:function(e,t){var r=this.getCS(t);return this.xx.encryptWithAd(r,new Uint8Array(0),e)}},{key:"decrypt",value:function(e,t){var r=this.getCS(t,!1);return this.xx.decryptWithAd(r,new Uint8Array(0),e)}},{key:"getRemoteStaticKey",value:function(){return this.session.hs.rs}},{key:"getCS",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.cs1||!e.cs2)throw new Ez("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}},{key:"setRemoteEarlyData",value:function(e){e&&(this.remoteEarlyData=e)}}]),e}(),Iz=function(e){St(r,e);var t=Rt(r);function r(e,n,a,i,s,o,u,c,l,f){var p;return(0,pe.Z)(this,r),p=t.call(this,e,n,a,i,s,o,c,f),l&&(p.ephemeralKeys=l),p.initialMsg=u,p}return(0,he.Z)(r,[{key:"propose",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=6;break}this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),fz("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),hz(this.session.hs.e),e.next=13;break;case 6:if(fz("XX Fallback Stage 0 - Responder decoding initial msg from IK."),t=HF(this.initialMsg),r=this.xx.recvMessage(this.session,{ne:t.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)}),r.valid){e.next=11;break}throw new Error("xx fallback stage 0 decryption validation fail");case 11:fz("XX Fallback Stage 0 - Responder used received message from IK."),vz(this.session.hs.re);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exchange",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=31;break}if(t=WF(this.initialMsg),n=this.xx.recvMessage(this.session,t),a=n.plaintext,n.valid){e.next=5;break}throw new Error("xx fallback stage 1 decryption validation fail");case 5:return fz("XX Fallback Stage 1 - Initiator used received message from IK."),vz(this.session.hs.re),dz(this.session.hs.rs),fz("Initiator going to check remote's signature..."),e.prev=9,e.next=12,nz(a);case 12:if(i=e.sent,e.t0=this.remotePeer,e.t0){e.next=18;break}return e.next=17,tz(i);case 17:e.t0=e.sent;case 18:return this.remotePeer=e.t0,e.next=21,oz(this.session.hs.rs,i,this.remotePeer);case 21:this.setRemoteEarlyData(i.data),e.next=28;break;case 24:throw e.prev=24,e.t1=e.catch(9),s=e.t1,new Error("Error occurred while verifying signed payload from responder: ".concat(s.message));case 28:fz("All good with the signature!"),e.next=35;break;case 31:return fz("XX Fallback Stage 1 - Responder start"),e.next=34,_t(kt(r.prototype),"exchange",this).call(this);case 34:fz("XX Fallback Stage 1 - Responder end");case 35:case"end":return e.stop()}}),e,this,[[9,24]])})));return function(){return e.apply(this,arguments)}}()}]),r}(Az),Cz=new(function(){function e(){(0,pe.Z)(this,e),this.storage=new XM}return(0,he.Z)(e,[{key:"store",value:function(e,t){this.storage.set(e,t)}},{key:"load",value:function(e){var t;return e&&null!==(t=this.storage.get(e))&&void 0!==t?t:null}},{key:"resetStorage",value:function(){this.storage.clear()}}]),e}()),Zz=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LF;(0,pe.Z)(this,e),this.protocol="/noise",this.prologue=new Uint8Array(0),this.earlyData=null!==r&&void 0!==r?r:new Uint8Array(0),this.useNoisePipes=!1,this.crypto=n,this.staticKeys=t?this.crypto.generateX25519KeyPairFromSeed(t):this.crypto.generateX25519KeyPair()}return(0,he.Z)(e,[{key:"secureOutbound",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=CF(r,{lengthEncoder:jF,lengthDecoder:zF,maxDataLength:TF}),e.next=3,this.performHandshake({connection:a,isInitiator:!0,localPeer:t,remotePeer:n});case 3:return i=e.sent,e.next=6,this.createSecureConnection(a,i);case 6:return s=e.sent,e.abrupt("return",{conn:s,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"secureInbound",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=CF(r,{lengthEncoder:jF,lengthDecoder:zF,maxDataLength:TF}),e.next=3,this.performHandshake({connection:a,isInitiator:!1,localPeer:t,remotePeer:n});case 3:return i=e.sent,e.next=6,this.createSecureConnection(a,i);case 6:return s=e.sent,e.abrupt("return",{conn:s,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"performHandshake",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QF(t.localPeer,this.staticKeys.publicKey,this.earlyData);case 2:if(r=e.sent,n=this.useNoisePipes,t.isInitiator&&null===Cz.load(t.remotePeer)&&(n=!1),!n){e.next=23;break}return i=t.remotePeer,s=t.connection,o=t.isInitiator,u=new xz(o,r,this.prologue,this.crypto,this.staticKeys,s,null!==(a=Cz.load(t.remotePeer))&&void 0!==a?a:new Uint8Array(32),i),e.prev=8,e.next=11,this.performIKHandshake(u);case 11:case 20:case 25:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(8),c=e.t0,t.isInitiator&&(l=u.getLocalEphemeralKeys()),e.next=20,this.performXXFallbackHandshake(t,r,c.initialMsg,l);case 21:e.next=26;break;case 23:return e.next=25,this.performXXHandshake(t,r);case 26:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"performXXFallbackHandshake",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.isInitiator,s=t.remotePeer,o=t.connection,u=new Iz(i,r,this.prologue,this.crypto,this.staticKeys,o,n,s,a),e.prev=2,e.next=5,u.propose();case 5:return e.next=7,u.exchange();case 7:return e.next=9,u.finish();case 9:e.next=17;break;case 11:throw e.prev=11,e.t0=e.catch(2),(c=e.t0).message="Error occurred during XX Fallback handshake: ".concat(c.message),fz(c),c;case 17:return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"performXXHandshake",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isInitiator,a=t.remotePeer,i=t.connection,s=new Az(n,r,this.prologue,this.crypto,this.staticKeys,i,a),e.prev=2,e.next=5,s.propose();case 5:return e.next=7,s.exchange();case 7:return e.next=9,s.finish();case 9:this.useNoisePipes&&s.remotePeer&&Cz.store(s.remotePeer,s.getRemoteStaticKey()),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(2),!(e.t0 instanceof Error)){e.next=17;break}throw e.t0.message="Error occurred during XX handshake: ".concat(e.t0.message),e.t0;case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"performIKHandshake",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stage0();case 2:return e.next=4,t.stage1();case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSecureConnection",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=RF(),a=(0,y.Z)(n,2),i=a[0],s=a[1],o=t.unwrap(),e.next=4,kp(i,MF(r),GS({lengthEncoder:jF}),o,tA({lengthDecoder:zF}),UF(r),i);case 4:return e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Rz=new Zz,Tz=ge.bind({ignoreUndefined:!0,concatArrays:!0});function Dz(n){var a=n.options,i=void 0===a?{}:a,s=n.peerId,o=n.multiaddrs,u=void 0===o?[]:o,c=n.repo,l=n.keychainConfig,f=void 0===l?{}:l,p=n.config,h=void 0===p?{}:p,d=c.datastore,v=function(n){var a=n.options,i=n.config,s=n.datastore,o=n.keychainConfig,u=n.peerId,c=n.multiaddrs,l=function(){var e=Yc(i,"Pubsub.Router")||"gossipsub",t={gossipsub:new bI({allowPublishToZeroPeers:!0,fallbackToFloodsub:!0,emitSelf:!0})};if(!t[e])throw Ee(new Error("Router unavailable. Configure libp2p.modules.pubsub to use the ".concat(e," router.")),"ERR_NOT_SUPPORTED");return t[e]},f={datastore:s,peerId:u},p={addresses:{listen:c.map((function(e){return e.toString()})),announce:Yc(a,"addresses.announce",Yc(i,"Addresses.Announce",[])),noAnnounce:Yc(a,"addresses.noAnnounce",Yc(i,"Addresses.NoAnnounce",[]))},connectionManager:Yc(a,"connectionManager",{maxConnections:Yc(a,"config.Swarm.ConnMgr.HighWater",Yc(i,"Swarm.ConnMgr.HighWater")),minConnections:Yc(a,"config.Swarm.ConnMgr.LowWater",Yc(i,"Swarm.ConnMgr.LowWater"))}),keychain:o,identify:{host:{agentVersion:"js-ipfs/".concat(gm)}},contentRouters:[],peerRouters:[],peerDiscovery:[],transports:[],streamMuxers:[new IF({maxStreamsPerConnection:1/0})],connectionEncryption:[Rz],relay:{enabled:Yc(a,"relay.enabled",Yc(i,"relay.enabled",!0)),hop:{enabled:Yc(a,"relay.hop.enabled",Yc(i,"relay.hop.enabled",!1)),active:Yc(a,"relay.hop.active",Yc(i,"relay.hop.active",!1))}},nat:{enabled:!Yc(i,"Swarm.DisableNatPortMap",!1)}};Yc(a,"config.Pubsub.Enabled",Yc(i,"Pubsub.Enabled",!0))&&(p.pubsub=l());"none"!==Yc(i,"Routing.Type","dhtclient")&&(p.dht=new Lj({clientMode:"dhtserver"!==Yc(i,"Routing.Type","dht"),kBucketSize:Yc(a,"dht.kBucketSize",20),validators:{ipns:Dc},selectors:{ipns:Qc}}));var h,d=Yc(a,"config.Bootstrap",Yc(i,"Bootstrap",[]));d.length>0&&(null===(h=p.peerDiscovery)||void 0===h||h.push(new Uj({list:d})));var v=Yc(a,"libp2p",void 0);"function"===typeof v&&(v=void 0);var y,g=Tz(f,function(){var e=new uP;return{transports:[e],peerDiscovery:[e.discovery],connectionManager:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4,autoDial:!0},nat:{enabled:!1},metrics:{enabled:!0}}}(),p,v),m=Yc(a,"config.Addresses.Delegates",Yc(i,"Addresses.Delegates",[]));if(m.length>0){var b,w,k=m[Math.floor(Math.random()*m.length)],x=new Lf(k).toOptions(),_=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={name:rr.identity.name,code:rr.identity.code,encode:function(e){return e},decode:function(e){return e}},i=Object.values(nr.gh);(n.ipld&&n.ipld.bases?n.ipld.bases:[]).forEach((function(e){return i.push(e)}));var s=new CI({bases:i,loadBase:n.ipld&&n.ipld.loadBase}),o=Object.values(nr.QB);[e,t,r,tr,a].concat(n.ipld&&n.ipld.codecs||[]).forEach((function(e){return o.push(e)}));var u=new RI({codecs:o,loadCodec:n.ipld&&n.ipld.loadCodec}),c=Object.values(nr.kq);(n.ipld&&n.ipld.hashers?n.ipld.hashers:[]).forEach((function(e){return c.push(e)}));var l=new DI({hashers:c,loadHasher:n.ipld&&n.ipld.loadHasher});return{add:tT(n),addAll:JR(n),bitswap:rC(n),block:mC(n),bootstrap:EC(n),cat:rT(n),commands:nT(n),config:NC(n),dag:zC(u,n),dht:QC(n),diag:eZ(n),dns:aT(n),files:yZ(n),get:sT(n),getEndpointConfig:iT(n),id:oT(n),isOnline:uT(n),key:EZ(n),log:CZ(n),ls:cT(n),mount:fT(n),name:OZ(n),object:WZ(u,n),pin:kR(n),ping:pT(n),pubsub:BR(n),refs:MR(n),repo:zR(n),resolve:hT(n),start:dT(n),stats:KR(n),stop:vT(n),swarm:QR(n),version:yT(n),bases:s,codecs:u,hashers:l}}({host:x.host,protocol:443===parseInt(x.port)?"https":"http",port:x.port});null===(b=g.contentRouters)||void 0===b||b.push(new AI(_)),null===(w=g.peerRouters)||void 0===w||w.push(new _I(_))}Yc(a,"config.Discovery.MDNS.Enabled",Yc(i,"Discovery.MDNS.Enabled",!0))||(g.peerDiscovery=null===(y=g.peerDiscovery)||void 0===y?void 0:y.filter((function(e){return null!=e&&"@libp2p/mdns"!==e[Symbol.toStringTag]})));null==g.transports&&(g.transports=[]);null==g.transports.find((function(e){return"@libp2p/websockets"===e[Symbol.toStringTag]}))&&g.transports.push(new eF);return g}({options:i,config:h,datastore:d,keychainConfig:f,peerId:s,multiaddrs:u});return"function"===typeof i.libp2p?i.libp2p({libp2pOptions:v,options:i,config:h,datastore:d,peerId:s}):function(e){return aU.apply(this,arguments)}(v)}var Pz=ge.bind({ignoreUndefined:!0}),Nz=_e("ipfs:components:peer:storage"),Oz=function(){function e(t,r,n,a,i){(0,pe.Z)(this,e),this.print=a,this.peerId=t,this.keychain=r,this.repo=n,this.print=a,this.isNew=i}return(0,he.Z)(e,null,[{key:"start",value:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r,n,a){var i,s,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.repoAutoMigrate,s=a.repo,o=a.onMigrationProgress,u="string"===typeof s||null==s?ZS(r,n,{path:s,autoMigrate:i,onMigrationProgress:o}):s,t.next=4,Bz(r,u,a);case 4:return c=t.sent,l=c.peerId,f=c.keychain,p=c.isNew,t.abrupt("return",new e(l,f,u,r,p));case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()}]),e}(),Bz=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.closed){e.next=11;break}return e.t0=le.Z,e.t1=le.Z,e.t2={},e.next=6,Fz(r,n);case 6:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={isNew:!1},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 11:return e.prev=11,e.next=14,r.open();case 14:return e.t7=le.Z,e.t8=le.Z,e.t9={},e.next=19,Fz(r,n);case 19:return e.t10=e.sent,e.t11=(0,e.t8)(e.t9,e.t10),e.t12={},e.t13={isNew:!1},e.abrupt("return",(0,e.t7)(e.t11,e.t12,e.t13));case 26:if(e.prev=26,e.t14=e.catch(11),e.t14.code===xE){e.next=30;break}throw e.t14;case 30:if(!n.init||!1!==n.init.allowNew){e.next=32;break}throw new lr("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");case 32:return e.t15=le.Z,e.t16=le.Z,e.t17={},e.next=37,Lz(t,r,n);case 37:return e.t18=e.sent,e.t19=(0,e.t16)(e.t17,e.t18),e.t20={},e.t21={isNew:!0},e.abrupt("return",(0,e.t15)(e.t19,e.t20,e.t21));case 42:case"end":return e.stop()}}),e,null,[[11,26]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Lz=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.init||{},e.next=3,r.exists();case 3:if(i=e.sent,Nz("repo exists?",i),!0!==i){e.next=7;break}throw new Error("repo already exists");case 7:if(!a.privateKey){e.next=13;break}return e.next=10,Mz(a.privateKey);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,Uz(t,a);case 15:e.t0=e.sent;case 16:return s=e.t0,o=jz(s),Nz("peer identity: %s",o.PeerID),u=(0,le.Z)((0,le.Z)({},Pz(Vz({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}},a.profiles),n.config)),{},{Identity:o}),e.next=22,r.init(u);case 22:return e.next=24,r.open();case 24:return Nz("repo opened"),c={pass:n.pass},e.prev=26,e.next=29,r.config.get("Keychain.DEK");case 29:c.dek=e.sent,e.next=36;break;case 32:if(e.prev=32,e.t1=e.catch(26),"ERR_NOT_FOUND"===e.t1.code){e.next=36;break}throw e.t1;case 36:return e.next=38,Dz({options:void 0,multiaddrs:void 0,peerId:s,repo:r,config:u,keychainConfig:c});case 38:if(!(l=e.sent).keychain){e.next=44;break}return e.next=42,l.loadKeychain();case 42:return e.next=44,r.config.set("Keychain",{DEK:l.keychain.init.dek});case 44:return e.abrupt("return",{peerId:s,keychain:l.keychain});case 45:case"end":return e.stop()}}),e,null,[[26,32]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Mz=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nz("using user-supplied private-key"),!ha(t)){e.next=3;break}return e.abrupt("return",t);case 3:return r=(0,fr.fromString)(t,"base64pad"),e.next=6,Ju(r);case 6:return n=e.sent,e.next=9,ta(n.public.bytes,n.bytes);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Uz=function(e,t){var r=t.algorithm,n=void 0===r?"Ed25519":r,a=t.bits,i=void 0===a?2048:a;if(e("generating %s keypair...",n),"Ed25519"===n)return qM();if("RSA"===n)return HM({bits:i});throw Ee(new Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},jz=function(e){if(null==e.privateKey)throw Ee(new Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:e.toString(),PrivKey:(0,gr.toString)(e.privateKey,"base64pad")}},Fz=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.config,a=r.init&&r.init.profiles||[],i=r.pass,e.next=5,t.config.getAll();case 5:if(s=e.sent,o=zz(Vz(s,a),n),s===o){e.next=10;break}return e.next=10,t.config.replace(o);case 10:if(o.Identity&&o.Identity.PrivKey){e.next=12;break}throw new ar("No private key was found in the config, please intialize the repo");case 12:return u=(0,fr.fromString)(o.Identity.PrivKey,"base64pad"),e.next=15,Ju(u);case 15:return c=e.sent,e.next=18,ta(c.public.bytes,c.bytes);case 18:return l=e.sent,e.next=21,Dz({options:void 0,multiaddrs:void 0,peerId:l,repo:t,config:o,keychainConfig:(0,le.Z)({pass:i},o.Keychain)});case 21:if(!(f=e.sent).keychain){e.next=25;break}return e.next=25,f.loadKeychain();case 25:return e.abrupt("return",{peerId:l,keychain:f.keychain});case 26:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),zz=function(e,t){return t?Pz(e,t):e},Vz=function(e,t){return(t||[]).reduce((function(e,t){var r=Im[t];if(!r)throw new Error("Could not find profile with name '".concat(t,"'"));return Nz("applying profile %s",t),r.transform(e)}),e)},Kz=__webpack_require__(9806);var qz=function(e){var t,r=new Uint8Array(e.reduce((function(e,t){return e+pf.encodingLength(t)}),0)),n=0,a=(0,v.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;r=pf.encode(i,r,n),n+=pf.encodingLength(i)}}catch(Dy){a.e(Dy)}finally{a.f()}return r},Hz=function(e){function t(e,r,n){(0,pe.Z)(this,t),this._refCounter=1,this.cid=e,this.priority=r||1,this.wantType=n}return(0,he.Z)(t,[{key:"inc",value:function(){this._refCounter+=1}},{key:"dec",value:function(){this._refCounter=Math.max(0,this._refCounter-1)}},{key:"hasRefs",value:function(){return this._refCounter>0}},{key:e,get:function(){var e=this.cid.toString(we.base58btc);return"WantlistEntry <key: ".concat(e,", priority: ").concat(this.priority,", refs: ").concat(this._refCounter,">")}},{key:"equals",value:function(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}}]),t}(Symbol.toStringTag),Wz=Se.Reader,Gz=Se.Writer,Yz=Se.util,Qz=Se.roots["ipfs-bitswap"]||(Se.roots["ipfs-bitswap"]={}),Jz=Qz.Message=function(){function e(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.wantlist=null,e.prototype.blocks=Yz.emptyArray,e.prototype.payload=Yz.emptyArray,e.prototype.blockPresences=Yz.emptyArray,e.prototype.pendingBytes=0,e.encode=function(e,t){if(t||(t=Gz.create()),null!=e.wantlist&&Object.hasOwnProperty.call(e,"wantlist")&&Qz.Message.Wantlist.encode(e.wantlist,t.uint32(10).fork()).ldelim(),null!=e.blocks&&e.blocks.length)for(var r=0;r<e.blocks.length;++r)t.uint32(18).bytes(e.blocks[r]);if(null!=e.payload&&e.payload.length)for(r=0;r<e.payload.length;++r)Qz.Message.Block.encode(e.payload[r],t.uint32(26).fork()).ldelim();if(null!=e.blockPresences&&e.blockPresences.length)for(r=0;r<e.blockPresences.length;++r)Qz.Message.BlockPresence.encode(e.blockPresences[r],t.uint32(34).fork()).ldelim();return null!=e.pendingBytes&&Object.hasOwnProperty.call(e,"pendingBytes")&&t.uint32(40).int32(e.pendingBytes),t},e.decode=function(e,t){e instanceof Wz||(e=Wz.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Qz.Message;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.wantlist=Qz.Message.Wantlist.decode(e,e.uint32());break;case 2:n.blocks&&n.blocks.length||(n.blocks=[]),n.blocks.push(e.bytes());break;case 3:n.payload&&n.payload.length||(n.payload=[]),n.payload.push(Qz.Message.Block.decode(e,e.uint32()));break;case 4:n.blockPresences&&n.blockPresences.length||(n.blockPresences=[]),n.blockPresences.push(Qz.Message.BlockPresence.decode(e,e.uint32()));break;case 5:n.pendingBytes=e.int32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Qz.Message)return e;var t=new Qz.Message;if(null!=e.wantlist){if("object"!==typeof e.wantlist)throw TypeError(".Message.wantlist: object expected");t.wantlist=Qz.Message.Wantlist.fromObject(e.wantlist)}if(e.blocks){if(!Array.isArray(e.blocks))throw TypeError(".Message.blocks: array expected");t.blocks=[];for(var r=0;r<e.blocks.length;++r)"string"===typeof e.blocks[r]?Yz.base64.decode(e.blocks[r],t.blocks[r]=Yz.newBuffer(Yz.base64.length(e.blocks[r])),0):e.blocks[r].length&&(t.blocks[r]=e.blocks[r])}if(e.payload){if(!Array.isArray(e.payload))throw TypeError(".Message.payload: array expected");t.payload=[];for(r=0;r<e.payload.length;++r){if("object"!==typeof e.payload[r])throw TypeError(".Message.payload: object expected");t.payload[r]=Qz.Message.Block.fromObject(e.payload[r])}}if(e.blockPresences){if(!Array.isArray(e.blockPresences))throw TypeError(".Message.blockPresences: array expected");t.blockPresences=[];for(r=0;r<e.blockPresences.length;++r){if("object"!==typeof e.blockPresences[r])throw TypeError(".Message.blockPresences: object expected");t.blockPresences[r]=Qz.Message.BlockPresence.fromObject(e.blockPresences[r])}}return null!=e.pendingBytes&&(t.pendingBytes=0|e.pendingBytes),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocks=[],r.payload=[],r.blockPresences=[]),t.defaults&&(r.wantlist=null,r.pendingBytes=0),null!=e.wantlist&&e.hasOwnProperty("wantlist")&&(r.wantlist=Qz.Message.Wantlist.toObject(e.wantlist,t)),e.blocks&&e.blocks.length){r.blocks=[];for(var n=0;n<e.blocks.length;++n)r.blocks[n]=t.bytes===String?Yz.base64.encode(e.blocks[n],0,e.blocks[n].length):t.bytes===Array?Array.prototype.slice.call(e.blocks[n]):e.blocks[n]}if(e.payload&&e.payload.length){r.payload=[];for(n=0;n<e.payload.length;++n)r.payload[n]=Qz.Message.Block.toObject(e.payload[n],t)}if(e.blockPresences&&e.blockPresences.length){r.blockPresences=[];for(n=0;n<e.blockPresences.length;++n)r.blockPresences[n]=Qz.Message.BlockPresence.toObject(e.blockPresences[n],t)}return null!=e.pendingBytes&&e.hasOwnProperty("pendingBytes")&&(r.pendingBytes=e.pendingBytes),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e.Wantlist=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.entries=Yz.emptyArray,e.prototype.full=!1,e.encode=function(e,t){if(t||(t=Gz.create()),null!=e.entries&&e.entries.length)for(var r=0;r<e.entries.length;++r)Qz.Message.Wantlist.Entry.encode(e.entries[r],t.uint32(10).fork()).ldelim();return null!=e.full&&Object.hasOwnProperty.call(e,"full")&&t.uint32(16).bool(e.full),t},e.decode=function(e,t){e instanceof Wz||(e=Wz.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Qz.Message.Wantlist;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.entries&&n.entries.length||(n.entries=[]),n.entries.push(Qz.Message.Wantlist.Entry.decode(e,e.uint32()));break;case 2:n.full=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Qz.Message.Wantlist)return e;var t=new Qz.Message.Wantlist;if(e.entries){if(!Array.isArray(e.entries))throw TypeError(".Message.Wantlist.entries: array expected");t.entries=[];for(var r=0;r<e.entries.length;++r){if("object"!==typeof e.entries[r])throw TypeError(".Message.Wantlist.entries: object expected");t.entries[r]=Qz.Message.Wantlist.Entry.fromObject(e.entries[r])}}return null!=e.full&&(t.full=Boolean(e.full)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.entries=[]),t.defaults&&(r.full=!1),e.entries&&e.entries.length){r.entries=[];for(var n=0;n<e.entries.length;++n)r.entries[n]=Qz.Message.Wantlist.Entry.toObject(e.entries[n],t)}return null!=e.full&&e.hasOwnProperty("full")&&(r.full=e.full),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e.WantType=function(){var e={},t=Object.create(e);return t[e[0]="Block"]=0,t[e[1]="Have"]=1,t}(),e.Entry=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.block=Yz.newBuffer([]),e.prototype.priority=0,e.prototype.cancel=!1,e.prototype.wantType=0,e.prototype.sendDontHave=!1,e.encode=function(e,t){return t||(t=Gz.create()),null!=e.block&&Object.hasOwnProperty.call(e,"block")&&t.uint32(10).bytes(e.block),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(16).int32(e.priority),null!=e.cancel&&Object.hasOwnProperty.call(e,"cancel")&&t.uint32(24).bool(e.cancel),null!=e.wantType&&Object.hasOwnProperty.call(e,"wantType")&&t.uint32(32).int32(e.wantType),null!=e.sendDontHave&&Object.hasOwnProperty.call(e,"sendDontHave")&&t.uint32(40).bool(e.sendDontHave),t},e.decode=function(e,t){e instanceof Wz||(e=Wz.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Qz.Message.Wantlist.Entry;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.block=e.bytes();break;case 2:n.priority=e.int32();break;case 3:n.cancel=e.bool();break;case 4:n.wantType=e.int32();break;case 5:n.sendDontHave=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Qz.Message.Wantlist.Entry)return e;var t=new Qz.Message.Wantlist.Entry;switch(null!=e.block&&("string"===typeof e.block?Yz.base64.decode(e.block,t.block=Yz.newBuffer(Yz.base64.length(e.block)),0):e.block.length&&(t.block=e.block)),null!=e.priority&&(t.priority=0|e.priority),null!=e.cancel&&(t.cancel=Boolean(e.cancel)),e.wantType){case"Block":case 0:t.wantType=0;break;case"Have":case 1:t.wantType=1}return null!=e.sendDontHave&&(t.sendDontHave=Boolean(e.sendDontHave)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.block="":(r.block=[],t.bytes!==Array&&(r.block=Yz.newBuffer(r.block))),r.priority=0,r.cancel=!1,r.wantType=t.enums===String?"Block":0,r.sendDontHave=!1),null!=e.block&&e.hasOwnProperty("block")&&(r.block=t.bytes===String?Yz.base64.encode(e.block,0,e.block.length):t.bytes===Array?Array.prototype.slice.call(e.block):e.block),null!=e.priority&&e.hasOwnProperty("priority")&&(r.priority=e.priority),null!=e.cancel&&e.hasOwnProperty("cancel")&&(r.cancel=e.cancel),null!=e.wantType&&e.hasOwnProperty("wantType")&&(r.wantType=t.enums===String?Qz.Message.Wantlist.WantType[e.wantType]:e.wantType),null!=e.sendDontHave&&e.hasOwnProperty("sendDontHave")&&(r.sendDontHave=e.sendDontHave),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),e}(),e.Block=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.prefix=Yz.newBuffer([]),e.prototype.data=Yz.newBuffer([]),e.encode=function(e,t){return t||(t=Gz.create()),null!=e.prefix&&Object.hasOwnProperty.call(e,"prefix")&&t.uint32(10).bytes(e.prefix),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof Wz||(e=Wz.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Qz.Message.Block;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.prefix=e.bytes();break;case 2:n.data=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Qz.Message.Block)return e;var t=new Qz.Message.Block;return null!=e.prefix&&("string"===typeof e.prefix?Yz.base64.decode(e.prefix,t.prefix=Yz.newBuffer(Yz.base64.length(e.prefix)),0):e.prefix.length&&(t.prefix=e.prefix)),null!=e.data&&("string"===typeof e.data?Yz.base64.decode(e.data,t.data=Yz.newBuffer(Yz.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.prefix="":(r.prefix=[],t.bytes!==Array&&(r.prefix=Yz.newBuffer(r.prefix))),t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=Yz.newBuffer(r.data)))),null!=e.prefix&&e.hasOwnProperty("prefix")&&(r.prefix=t.bytes===String?Yz.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?Yz.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),e.BlockPresenceType=function(){var e={},t=Object.create(e);return t[e[0]="Have"]=0,t[e[1]="DontHave"]=1,t}(),e.BlockPresence=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.cid=Yz.newBuffer([]),e.prototype.type=0,e.encode=function(e,t){return t||(t=Gz.create()),null!=e.cid&&Object.hasOwnProperty.call(e,"cid")&&t.uint32(10).bytes(e.cid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),t},e.decode=function(e,t){e instanceof Wz||(e=Wz.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Qz.Message.BlockPresence;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.cid=e.bytes();break;case 2:n.type=e.int32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Qz.Message.BlockPresence)return e;var t=new Qz.Message.BlockPresence;switch(null!=e.cid&&("string"===typeof e.cid?Yz.base64.decode(e.cid,t.cid=Yz.newBuffer(Yz.base64.length(e.cid)),0):e.cid.length&&(t.cid=e.cid)),e.type){case"Have":case 0:t.type=0;break;case"DontHave":case 1:t.type=1}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.cid="":(r.cid=[],t.bytes!==Array&&(r.cid=Yz.newBuffer(r.cid))),r.type=t.enums===String?"Have":0),null!=e.cid&&e.hasOwnProperty("cid")&&(r.cid=t.bytes===String?Yz.base64.encode(e.cid,0,e.cid.length):t.bytes===Array?Array.prototype.slice.call(e.cid):e.cid),null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?Qz.Message.BlockPresenceType[e.type]:e.type),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Se.util.toJSONOptions)},e}(),e}(),Xz=Jz.Wantlist.WantType.Block,$z=Jz.Wantlist.WantType.Have,eV=function(){function e(t,r){(0,pe.Z)(this,e),this.set=r?CP({system:"ipfs",component:"bitswap",metric:"wantlist",metrics:r.metrics}):new Map,this._stats=t}return(0,he.Z)(e,[{key:"length",get:function(){return this.set.size}},{key:"add",value:function(e,t,r){var n=e.toString(we.base58btc),a=this.set.get(n);a?(a.inc(),a.priority=t,a.wantType===$z&&r===Xz&&(a.wantType=r)):(this.set.set(n,new Hz(e,t,r)),this._stats&&this._stats.push(null,"wantListSize",1))}},{key:"remove",value:function(e){var t=e.toString(we.base58btc),r=this.set.get(t);r&&(r.dec(),r.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}},{key:"removeForce",value:function(e){this.set.has(e)&&this.set.delete(e)}},{key:"forEach",value:function(e){return this.set.forEach(e)}},{key:"entries",value:function(){return this.set.entries()}},{key:"sortedEntries",value:function(){return new Map((e=function(e){return e[1].key},t=Array.from(this.set.entries()),Array.prototype.slice.call(t,0).sort((function(t,r){var n=e(t),a=e(r);return n<a?-1:n>a?1:0}))));var e,t}},{key:"contains",value:function(e){var t=e.toString(we.base58btc);return this.set.has(t)}},{key:"get",value:function(e){var t=e.toString(we.base58btc);return this.set.get(t)}}]),e}();eV.Entry=Hz;var tV=eV.Entry,rV=function(e){function t(e,r,n,a,i){(0,pe.Z)(this,t),this.entry=new tV(e,r,n),this.cancel=Boolean(a),this.sendDontHave=Boolean(i)}return(0,he.Z)(t,[{key:"cid",get:function(){return this.entry.cid},set:function(e){this.entry.cid=e}},{key:"priority",get:function(){return this.entry.priority},set:function(e){this.entry.priority=e}},{key:"wantType",get:function(){return this.entry.wantType},set:function(e){this.entry.wantType=e}},{key:e,get:function(){var e=this.cid.toString(we.base58btc);return"BitswapMessageEntry ".concat(e," <cancel: ").concat(this.cancel,", priority: ").concat(this.priority,">")}},{key:"equals",value:function(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}]),t}(Symbol.toStringTag),nV=function(e,t){var r=["bitswap"];return t&&r.push(t),e&&r.push("".concat(e.toString().slice(0,8))),Object.assign(be(r.join(":")),{error:be(r.concat(["error"]).join(":"))})},aV=function(e,t){if(e.size!==t.size)return!1;var r,n=(0,v.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=(0,y.Z)(r.value,2),i=a[0],s=a[1],o=t.get(i);if(void 0===o)return!1;if(s instanceof Uint8Array&&o instanceof Uint8Array&&!(0,Kn.equals)(s,o))return!1;if(s instanceof rV&&o instanceof rV&&!s.equals(o))return!1}}catch(Dy){n.e(Dy)}finally{n.f()}return!0},iV=function(e){function t(e){(0,pe.Z)(this,t),this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}return(0,he.Z)(t,[{key:"empty",get:function(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}},{key:"addEntry",value:function(e,r,n,a,i){null==n&&(n=t.WantType.Block);var s=e.toString(we.base58btc),o=this.wantlist.get(s);o?(o.wantType===n&&(o.priority=r),a&&(o.cancel=Boolean(a)),i&&(o.sendDontHave=Boolean(i)),n===t.WantType.Block&&o.wantType===t.WantType.Have&&(o.wantType=n)):this.wantlist.set(s,new rV(e,r,n,a,i))}},{key:"addBlock",value:function(e,t){var r=e.toString(we.base58btc);this.blocks.set(r,t)}},{key:"addHave",value:function(e){var r=e.toString(we.base58btc);this.blockPresences.has(r)||this.blockPresences.set(r,t.BlockPresenceType.Have)}},{key:"addDontHave",value:function(e){var r=e.toString(we.base58btc);this.blockPresences.has(r)||this.blockPresences.set(r,t.BlockPresenceType.DontHave)}},{key:"cancel",value:function(e){var r=e.toString(we.base58btc);this.wantlist.delete(r),this.addEntry(e,0,t.WantType.Block,!0,!1)}},{key:"setPendingBytes",value:function(e){this.pendingBytes=e}},{key:"serializeToBitswap100",value:function(){var e={wantlist:{entries:Array.from(this.wantlist.values()).map((function(e){return{block:e.cid.bytes,priority:Number(e.priority),cancel:Boolean(e.cancel)}})),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return Jz.encode(e).finish()}},{key:"serializeToBitswap110",value:function(){var e,t={wantlist:{entries:Array.from(this.wantlist.values()).map((function(e){return{block:e.cid.bytes,priority:Number(e.priority),wantType:e.wantType,cancel:Boolean(e.cancel),sendDontHave:Boolean(e.sendDontHave)}})),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes},r=(0,v.Z)(this.blocks.entries());try{for(r.s();!(e=r.n()).done;){var n=(0,y.Z)(e.value,2),a=n[0],i=n[1],s=Ue.CID.parse(a),o=s.version,u=s.code,c=s.multihash.code,l=s.multihash.digest.length,f=qz([o,u,c,l]);t.payload.push(new Jz.Block({prefix:f,data:i}))}}catch(Dy){r.e(Dy)}finally{r.f()}var p,h=(0,v.Z)(this.blockPresences);try{for(h.s();!(p=h.n()).done;){var d=(0,y.Z)(p.value,2),g=d[0],m=d[1];t.blockPresences.push(new Jz.BlockPresence({cid:Ue.CID.parse(g).bytes,type:m}))}}catch(Dy){h.e(Dy)}finally{h.f()}return this.pendingBytes>0&&(t.pendingBytes=this.pendingBytes),Jz.encode(t).finish()}},{key:"equals",value:function(e){return!!(this.full===e.full&&this.pendingBytes===e.pendingBytes&&aV(this.wantlist,e.wantlist)&&aV(this.blocks,e.blocks)&&aV(this.blockPresences,e.blockPresences))}},{key:e,get:function(){var e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return"BitswapMessage <full: ".concat(this.full,", list: ").concat(e,", blocks: ").concat(t,">")}}]),t}(Symbol.toStringTag);iV.deserialize=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Jz.decode(t),a=n.wantlist&&n.wantlist.full||!1,i=new iV(a),n.wantlist&&n.wantlist.entries&&n.wantlist.entries.forEach((function(e){if(e.block){var t=Ue.CID.decode(e.block);i.addEntry(t,e.priority||0,e.wantType,Boolean(e.cancel),Boolean(e.sendDontHave))}})),n.blockPresences&&n.blockPresences.forEach((function(e){if(e.cid){var t=Ue.CID.decode(e.cid);e.type===iV.BlockPresenceType.Have?i.addHave(t):i.addDontHave(t)}})),!(n.blocks.length>0)){e.next=9;break}return e.next=8,Promise.all(n.blocks.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.sha256.digest(t);case 2:r=e.sent,n=Ue.CID.createV0(r),i.addBlock(n,t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case 14:return e.abrupt("return",i);case 9:if(!(n.payload.length>0)){e.next=14;break}return e.next=12,Promise.all(n.payload.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.prefix&&t.data){e.next=2;break}return e.abrupt("return");case 2:if(n=Kz(t.prefix),a=n[0],s=n[1],(o=n[2])!==qn.sha256.code){e.next=10;break}e.t0=qn.sha256,e.next=16;break;case 10:if(e.t1=r,!e.t1){e.next=15;break}return e.next=14,r.getHasher(o);case 14:e.t1=e.sent;case 15:e.t0=e.t1;case 16:if(u=e.t0){e.next=19;break}throw Ee(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");case 19:return e.next=21,u.digest(t.data);case 21:c=e.sent,l=Ue.CID.create(a,s,c),i.addBlock(l,t.data);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return i.setPendingBytes(n.pendingBytes),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),iV.blockPresenceSize=function(e){return e.bytes.length+1},iV.Entry=rV,iV.WantType={Block:Jz.Wantlist.WantType.Block,Have:Jz.Wantlist.WantType.Have},iV.BlockPresenceType={Have:Jz.BlockPresenceType.Have,DontHave:Jz.BlockPresenceType.DontHave};var sV=Math.pow(2,31)-1,oV=function(e,t,r){var n=null,a=null,i=function(){n&&(clearTimeout(n),a=null,n=null)},s=function(){if(!t)return e.apply(this,arguments);var s=this,o=arguments,u=r&&!n;return i(),a=function(){e.apply(s,o)},n=setTimeout((function(){if(n=null,!u){var e=a;return a=null,e()}}),t),u?a():void 0};return s.cancel=i,s.flush=function(){var e=a;i(),e&&e()},s};var uV=function(){function e(t,r,n){(0,pe.Z)(this,e),this.peerId=r,this.network=n,this.refcnt=1,this._entries=[],this._log=nV(t,"msgqueue"),this.sendEntries=oV(this._sendEntries.bind(this),1)}return(0,he.Z)(e,[{key:"addMessage",value:function(e){e.empty||this.send(e)}},{key:"addEntries",value:function(e){this._entries=this._entries.concat(e),this.sendEntries()}},{key:"_sendEntries",value:function(){if(this._entries.length){var e=new iV(!1);this._entries.forEach((function(t){t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}}},{key:"send",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.network.connectTo(this.peerId);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),this._log.error("cant connect to peer %s: %s",this.peerId.toString(),e.t0.message),e.abrupt("return");case 9:this._log("sending message to peer %s",this.peerId.toString()),this.network.sendMessage(this.peerId,t).catch((function(e){r._log.error("send error: %s",e.message)}));case 11:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),cV=function(){function e(t,r,n,a){(0,pe.Z)(this,e),this.peers=CP({system:"ipfs",component:"bitswap",metric:"want-manager-peers",metrics:a.metrics}),this.wantlist=new eV(n,a),this.network=r,this._stats=n,this._peerId=t,this._log=nV(t,"want")}return(0,he.Z)(e,[{key:"_addEntries",value:function(e,t,r){var n=this,a=e.map((function(e,r){return new iV.Entry(e,sV-r,iV.WantType.Block,t)}));a.forEach((function(e){e.cancel?r?n.wantlist.removeForce(e.cid.toString(we.base58btc)):n.wantlist.remove(e.cid):(n._log("adding to wl"),n.wantlist.add(e.cid,e.priority))}));var i,s=(0,v.Z)(this.peers.values());try{for(s.s();!(i=s.n()).done;){i.value.addEntries(a)}}catch(Dy){s.e(Dy)}finally{s.f()}}},{key:"_startPeerHandler",value:function(e){var t=this.peers.get(e.toString());if(!t){t=new uV(this._peerId,e,this.network);var r,n=new iV(!0),a=(0,v.Z)(this.wantlist.entries());try{for(a.s();!(r=a.n()).done;){var i=r.value;n.addEntry(i[1].cid,i[1].priority)}}catch(Dy){a.e(Dy)}finally{a.f()}return t.addMessage(n),this.peers.set(e.toString(),t),t}t.refcnt++}},{key:"_stopPeerHandler",value:function(e){var t=this.peers.get(e.toString());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toString()))}},{key:"wantBlocks",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._addEntries(e,!1),r&&r.signal&&r.signal.addEventListener("abort",(function(){t.cancelWants(e)}))}},{key:"unwantBlocks",value:function(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}},{key:"cancelWants",value:function(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}},{key:"connectedPeers",value:function(){return Array.from(this.peers.keys())}},{key:"connected",value:function(e){this._startPeerHandler(e)}},{key:"disconnected",value:function(e){this._stopPeerHandler(e)}},{key:"start",value:function(){}},{key:"stop",value:function(){var e=this;this.peers.forEach((function(t){return e.disconnected(t.peerId)}))}}]),e}(),lV="/ipfs/bitswap/1.0.0",fV="/ipfs/bitswap/1.1.0",pV="/ipfs/bitswap/1.2.0",hV=function(){function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,pe.Z)(this,e),this._log=nV(t.peerId,"network"),this._libp2p=t,this._bitswap=r,this._protocols=[lV],a.b100Only||(this._protocols.unshift(fV),this._protocols.unshift(pV)),this._stats=n,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=a.hashLoader}return(0,he.Z)(e,[{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._running=!0,e.next=3,this._libp2p.handle(this._protocols,this._onConnection);case 3:return t=FS({onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect}),e.next=6,this._libp2p.registrar.register(this._protocols,t);case 6:this._registrarId=e.sent,this._libp2p.getConnections().forEach((function(e){r._onPeerConnect(e.remotePeer)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._running=!1,e.next=3,this._libp2p.unhandle(this._protocols);case 3:null!=this._registrarId&&this._libp2p.registrar.unregister(this._registrarId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_onConnection",value:function(e){var t=this,r=e.protocol,n=e.stream,a=e.connection;this._running&&Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._log("incoming new bitswap %s connection from %p",r,a.remotePeer),e.next=3,kp(n,tA(),function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,i,s,o,u,c,l;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,i=!1,e.prev=2,o=hr(r);case 4:return e.next=6,o.next();case 6:if(!(n=!(u=e.sent).done)){e.next=23;break}return c=u.value,e.prev=8,e.next=11,iV.deserialize(c.slice(),t._hashLoader);case 11:return l=e.sent,e.next=14,t._bitswap._receiveMessage(a.remotePeer,l);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(8),t._bitswap._receiveError(e.t0),e.abrupt("break",23);case 20:n=!1,e.next=4;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(2),i=!0,s=e.t1;case 29:if(e.prev=29,e.prev=30,!n||null==o.return){e.next=34;break}return e.next=34,o.return();case 34:if(e.prev=34,!i){e.next=37;break}throw s;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[2,25,29,39],[8,16],[30,,34,38]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).catch((function(e){t._log(e)}))}},{key:"_onPeerConnect",value:function(e){this._bitswap._onPeerConnected(e)}},{key:"_onPeerDisconnect",value:function(e){this._bitswap._onPeerDisconnected(e)}},{key:"findProviders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._libp2p.contentRouting.findProviders(e,t)}},{key:"findAndConnect",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0,i=!1,s=!1,e.prev=4,u=hr(this.findProviders(t,r));case 6:return e.next=8,u.next();case 8:if(!(i=!(c=e.sent).done)){e.next=18;break}if(l=c.value,this._log("connecting to provider ".concat(l.id)),n.push(this.connectTo(l.id,r).catch((function(e){f._log.error(e)}))),3!==++a){e.next=15;break}return e.abrupt("break",18);case 15:i=!1,e.next=6;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),s=!0,o=e.t0;case 24:if(e.prev=24,e.prev=25,!i||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!s){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(24);case 34:return e.next=36,Promise.all(n);case 36:case"end":return e.stop()}}),e,this,[[4,20,24,34],[25,,29,33]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"provide",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._libp2p.contentRouting.provide(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}throw new Error("network isn't running");case 2:return n=t.toString(),this._log("sendMessage to %s",n,r),e.next=6,this._libp2p.dial(t);case 6:return a=e.sent,e.next=9,a.newStream([pV,fV,lV]);case 9:i=e.sent,s=i.stream,o=i.protocol,e.t0=o,e.next=e.t0===lV?15:e.t0===fV||e.t0===pV?17:19;break;case 15:return u=r.serializeToBitswap100(),e.abrupt("break",20);case 17:return u=r.serializeToBitswap110(),e.abrupt("break",20);case 19:throw new Error("Unknown protocol: "+o);case 20:dV(s,u,this._log),this._updateSentStats(t,r.blocks);case 22:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"connectTo",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}throw new Error("network isn't running");case 2:return e.abrupt("return",this._libp2p.dial(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateSentStats",value:function(e,t){var r=e.toString();if(this._stats){var n,a=(0,v.Z)(t.values());try{for(a.s();!(n=a.n()).done;){var i=n.value;this._stats.push(r,"dataSent",i.length)}}catch(Dy){a.e(Dy)}finally{a.f()}this._stats.push(r,"blocksSent",t.size)}}}]),e}();function dV(e,t,r){return vV.apply(this,arguments)}function vV(){return vV=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kp([r],GS(),t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),n(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),vV.apply(this,arguments)}var yV=function(){function e(t){(0,pe.Z)(this,e),this.partner=t,this.wantlist=new eV,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}return(0,he.Z)(e,[{key:"sentBytes",value:function(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}},{key:"receivedBytes",value:function(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}},{key:"wants",value:function(e,t,r){this.wantlist.add(e,t,r)}},{key:"cancelWant",value:function(e){this.wantlist.remove(e)}},{key:"wantlistContains",value:function(e){return this.wantlist.get(e)}},{key:"debtRatio",value:function(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}]),e}(),gV=function(e,t){St(n,e);var r=Rt(n);function n(e,t){var a;(0,pe.Z)(this,n),(a=r.call(this))._cmp=t||a._defaultSort,a._keys=[];var i,s=(0,v.Z)(e||[]);try{for(s.s();!(i=s.n()).done;){var o=(0,y.Z)(i.value,2),u=o[0],c=o[1];a.set(u,c)}}catch(Dy){s.e(Dy)}finally{s.f()}return a}return(0,he.Z)(n,[{key:"update",value:function(e){if(!(e<0||e>=this._keys.length)){var t=this._keys[e];this._keys.splice(e,1);var r=this._find(t);this._keys.splice(r,0,t)}}},{key:"set",value:function(e,t){if(this.has(e)){var r=this.indexOf(e);this._keys.splice(r,1)}_t(kt(n.prototype),"set",this).call(this,e,t);var a=this._find(e);return this._keys.splice(a,0,e),this}},{key:"clear",value:function(){_t(kt(n.prototype),"clear",this).call(this),this._keys=[]}},{key:"delete",value:function(e){if(!this.has(e))return!1;var t=this.indexOf(e);return this._keys.splice(t,1),_t(kt(n.prototype),"delete",this).call(this,e)}},{key:"indexOf",value:function(e){if(!this.has(e))return-1;var t=this._find(e);if(this._keys[t]===e)return t;for(var r=1;r<this._keys.length;r++){if(this._keys[t+r]===e)return t+r;if(this._keys[t-r]===e)return t-r}return-1}},{key:"_find",value:function(e){for(var t=0,r=this._keys.length;t<r;){var n=t+r>>>1,a=this._kCmp(this._keys[n],e);if(a<0)t=n+1;else{if(!(a>0))return n;r=n}}return t}},{key:"keys",value:(0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,v.Z)(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:(0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,v.Z)(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,this.get(n);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"entries",value:(0,ce.Z)().mark((function e(){var t,r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,v.Z)(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,[n,this.get(n)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:t,value:(0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.entries(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"forEach",value:function(e,t){if(e){var r,n=(0,v.Z)(this._keys);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.apply(t,[[a,this.get(a)]])}}catch(Dy){n.e(Dy)}finally{n.f()}}}},{key:"_defaultSort",value:function(e,t){return e[0]<t[0]?-1:t[0]<e[0]?1:0}},{key:"_kCmp",value:function(e,t){return this._cmp([e,this.get(e)],[t,this.get(t)])}}]),n}(Pt(Map),Symbol.iterator),mV={hasNewInfo:function(){return!1},merge:function(){}},bV=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mV;(0,pe.Z)(this,e),this._taskMerger=t,this._byPeer=new gV([],wV.compare)}return(0,he.Z)(e,[{key:"pushTasks",value:function(e,t){var r=this._byPeer.get(e.toString());r||(r=new wV(e,this._taskMerger)),r.pushTasks(t),this._byPeer.set(e.toString(),r)}},{key:"popTasks",value:function(e){var t=this._head();if(void 0===t)return{tasks:[],pendingSize:0};var r=t.popTasks(e),n=r.tasks,a=r.pendingSize;if(0===n.length)return{tasks:n,pendingSize:a};var i=t.peerId;return t.isIdle()?this._byPeer.delete(i.toString()):this._byPeer.update(0),{peerId:i,tasks:n,pendingSize:a}}},{key:"_head",value:function(){if(0!==this._byPeer.size){var e,t=(0,v.Z)(this._byPeer);try{for(t.s();!(e=t.n()).done;){return(0,y.Z)(e.value,2)[1]}}catch(Dy){t.e(Dy)}finally{t.f()}}}},{key:"remove",value:function(e,t){var r=this._byPeer.get(t.toString());r&&r.remove(e)}},{key:"tasksDone",value:function(e,t){var r=this._byPeer.get(e.toString());if(r){var n,a=this._byPeer.indexOf(e.toString()),i=(0,v.Z)(t);try{for(i.s();!(n=i.n()).done;){var s=n.value;r.taskDone(s)}}catch(Dy){i.e(Dy)}finally{i.f()}this._byPeer.update(a)}}}]),e}(),wV=function(){function e(t,r){(0,pe.Z)(this,e),this.peerId=t,this._taskMerger=r,this._activeTotalSize=0,this._pending=new kV,this._active=new Set}return(0,he.Z)(e,[{key:"pushTasks",value:function(e){var t,r=(0,v.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this._pushTask(n)}}catch(Dy){r.e(Dy)}finally{r.f()}}},{key:"_pushTask",value:function(e){if(this._taskHasMoreInfoThanActiveTasks(e)){var t=this._pending.get(e.topic);if(t)return e.priority>t.priority&&this._pending.updatePriority(e.topic,e.priority),void this._taskMerger.merge(e,t);this._pending.add(e)}}},{key:"_taskHasMoreInfoThanActiveTasks",value:function(e){var t,r=[],n=(0,v.Z)(this._active);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.topic===e.topic&&r.push(a)}}catch(Dy){n.e(Dy)}finally{n.f()}return 0===r.length||this._taskMerger.hasNewInfo(e,r)}},{key:"popTasks",value:function(e){for(var t=0,r=[],n=this._pending.tasks(),a=0;a<n.length&&t<e;a++){var i=n[a];r.push(i),t+=i.size,this._pending.delete(i.topic),this._activeTotalSize+=i.size,this._active.add(i)}return{tasks:r,pendingSize:this._pending.totalSize}}},{key:"taskDone",value:function(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}},{key:"remove",value:function(e){this._pending.delete(e)}},{key:"isIdle",value:function(){return 0===this._pending.length&&0===this._active.size}}],[{key:"compare",value:function(e,t){return 0===e[1]._pending.length?1:0===t[1]._pending.length?-1:e[1]._activeTotalSize===t[1]._activeTotalSize?t[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-t[1]._activeTotalSize}}]),e}(),kV=function(){function e(){(0,pe.Z)(this,e),this._tasks=new gV([],this._compare)}return(0,he.Z)(e,[{key:"length",get:function(){return this._tasks.size}},{key:"totalSize",get:function(){return Vt(this._tasks.values()).reduce((function(e,t){return e+t.task.size}),0)}},{key:"get",value:function(e){return(this._tasks.get(e)||{}).task}},{key:"add",value:function(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}},{key:"delete",value:function(e){this._tasks.delete(e)}},{key:"tasks",value:function(){return Vt(this._tasks.values()).map((function(e){return e.task}))}},{key:"updatePriority",value:function(e,t){var r=this._tasks.get(e);if(r){var n=this._tasks.indexOf(e);r.task.priority=t,this._tasks.update(n)}}},{key:"_compare",value:function(e,t){return e[1].task.priority===t[1].task.priority?e[1].created-t[1].created:t[1].task.priority-e[1].task.priority}}]),e}(),xV={hasNewInfo:function(e,t){var r,n=!1,a=!1,i=(0,v.Z)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value;s.data.haveBlock&&(n=!0),s.data.isWantBlock&&(a=!0)}}catch(Dy){i.e(Dy)}finally{i.f()}return!(a||!e.data.isWantBlock)||!(n||!e.data.haveBlock)},merge:function(e,t){var r=e.data,n=t.data;!n.haveBlock&&r.haveBlock&&(n.haveBlock=r.haveBlock,n.blockSize=r.blockSize),!n.isWantBlock&&r.isWantBlock&&(n.isWantBlock=!0,n.haveBlock&&!r.haveBlock||(n.haveBlock=r.haveBlock,t.size=e.size)),n.isWantBlock&&n.haveBlock&&(t.size=n.blockSize)}},_V=iV.WantType,EV=function(){function e(t,r,n,a,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};(0,pe.Z)(this,e),this._log=nV(t,"engine"),this.blockstore=r,this.network=n,this._stats=a,this._opts=this._processOpts(s),this.ledgerMap=CP({system:"ipfs",component:"bitswap",metric:"ledger-map",metrics:i.metrics}),this._running=!1,this._requestQueue=new bV(xV)}return(0,he.Z)(e,[{key:"_processOpts",value:function(e){return(0,le.Z)({maxSizeReplaceHasWithBlock:1024,targetMessageSize:16384},e)}},{key:"_scheduleProcessTasks",value:function(){var e=this;setTimeout((function(){e._processTasks()}))}},{key:"_processTasks",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,a,i,s,o,u,c,l,f,p,h,d,g,m,b,w,k,x,_,E,S,A;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}return e.abrupt("return");case 2:if(t=this._requestQueue.popTasks(this._opts.targetMessageSize),r=t.peerId,n=t.tasks,a=t.pendingSize,0!==n.length){e.next=5;break}return e.abrupt("return");case 5:(i=new iV(!1)).setPendingBytes(a),s=[],o=new Map,u=(0,v.Z)(n);try{for(u.s();!(c=u.n()).done;)l=c.value,f=Ue.CID.parse(l.topic),l.data.haveBlock?l.data.isWantBlock?(s.push(f),o.set(l.topic,l.data)):i.addHave(f):i.addDontHave(f)}catch(Dy){u.e(Dy)}finally{u.f()}return e.next=13,this._getBlocks(s);case 13:p=e.sent,h=(0,v.Z)(o);try{for(h.s();!(d=h.n()).done;)g=(0,y.Z)(d.value,2),m=g[0],b=g[1],w=Ue.CID.parse(m),(k=p.get(m))?i.addBlock(w,k):b.sendDontHave&&i.addDontHave(w)}catch(Dy){h.e(Dy)}finally{h.f()}if(!i.empty){e.next=20;break}return r&&this._requestQueue.tasksDone(r,n),this._scheduleProcessTasks(),e.abrupt("return");case 20:if(e.prev=20,e.t0=r,!e.t0){e.next=25;break}return e.next=25,this.network.sendMessage(r,i);case 25:x=(0,v.Z)(p.entries());try{for(x.s();!(_=x.n()).done;)E=(0,y.Z)(_.value,2),S=E[0],A=E[1],r&&this.messageSent(r,Ue.CID.parse(S),A)}catch(Dy){x.e(Dy)}finally{x.f()}e.next=32;break;case 29:e.prev=29,e.t1=e.catch(20),this._log.error(e.t1);case 32:r&&this._requestQueue.tasksDone(r,n),this._scheduleProcessTasks();case 34:case"end":return e.stop()}}),e,this,[[20,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"wantlistForPeer",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);return r?r.wantlist.sortedEntries():new Map}},{key:"ledgerForPeer",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);return r?{peer:r.partner,value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}},{key:"peers",value:function(){return Array.from(this.ledgerMap.values()).map((function(e){return e.partner}))}},{key:"receivedBlocks",value:function(e){if(e.length){var t,r=(0,v.Z)(this.ledgerMap.values());try{for(r.s();!(t=r.n()).done;){var n,a=t.value,i=(0,v.Z)(e);try{for(i.s();!(n=i.n()).done;){var s=n.value,o=a.wantlistContains(s.cid);if(o){var u=s.data.length,c=this._sendAsBlock(o.wantType,u),l=u;c||(l=iV.blockPresenceSize(o.cid)),this._requestQueue.pushTasks(a.partner,[{topic:o.cid.toString(we.base58btc),priority:o.priority,size:l,data:{blockSize:u,isWantBlock:c,haveBlock:!0,sendDontHave:!1}}])}}}catch(Dy){i.e(Dy)}finally{i.f()}}}catch(Dy){r.e(Dy)}finally{r.f()}this._scheduleProcessTasks()}}},{key:"messageReceived",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._findOrCreate(t),!r.empty){e.next=3;break}return e.abrupt("return");case 3:if(r.full&&(n.wantlist=new eV),this._updateBlockAccounting(r.blocks,n),0!==r.wantlist.size){e.next=8;break}return this._scheduleProcessTasks(),e.abrupt("return");case 8:return a=[],i=[],r.wantlist.forEach((function(e){e.cancel?(n.cancelWant(e.cid),a.push(e.cid)):(n.wants(e.cid,e.priority,e.wantType),i.push(e))})),this._cancelWants(t,a),e.next=14,this._addWants(t,i);case 14:this._scheduleProcessTasks();case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_cancelWants",value:function(e,t){var r,n=(0,v.Z)(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;this._requestQueue.remove(a.toString(we.base58btc),e)}}catch(Dy){n.e(Dy)}finally{n.f()}}},{key:"_addWants",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlockSizes(r.map((function(e){return e.cid})));case 2:n=e.sent,a=[],i=(0,v.Z)(r);try{for(i.s();!(s=i.n()).done;)o=s.value,u=o.cid.toString(we.base58btc),null==(c=n.get(u))?o.sendDontHave&&a.push({topic:u,priority:o.priority,size:iV.blockPresenceSize(o.cid),data:{isWantBlock:o.wantType===_V.Block,blockSize:0,haveBlock:!1,sendDontHave:o.sendDontHave}}):(l=this._sendAsBlock(o.wantType,c),f=c,l||(f=iV.blockPresenceSize(o.cid)),a.push({topic:u,priority:o.priority,size:f,data:{isWantBlock:l,blockSize:c,haveBlock:!0,sendDontHave:o.sendDontHave}})),this._requestQueue.pushTasks(t,a)}catch(Dy){i.e(Dy)}finally{i.f()}case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_sendAsBlock",value:function(e,t){return e===_V.Block||t<=this._opts.maxSizeReplaceHasWithBlock}},{key:"_getBlockSizes",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocks(t);case 2:return r=e.sent,e.abrupt("return",new Map(Vt(r).map((function(e){var t=(0,y.Z)(e,2);return[t[0],t[1].length]}))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getBlocks",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Map,e.next=3,Promise.all(t.map(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.blockstore.get(t);case 3:a=e.sent,r.set(t.toString(we.base58btc),a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"ERR_NOT_FOUND"!==e.t0.code&&n._log.error("failed to query blockstore for %s: %s",t,e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateBlockAccounting",value:function(e,t){var r,n=(0,v.Z)(e.values());try{for(n.s();!(r=n.n()).done;){var a=r.value;this._log("got block (%s bytes)",a.length),t.receivedBytes(a.length)}}catch(Dy){n.e(Dy)}finally{n.f()}}},{key:"messageSent",value:function(e,t,r){var n=this._findOrCreate(e);n.sentBytes(r.length),n.wantlist.remove(t)}},{key:"numBytesSentTo",value:function(e){return this._findOrCreate(e).accounting.bytesSent}},{key:"numBytesReceivedFrom",value:function(e){return this._findOrCreate(e).accounting.bytesRecv}},{key:"peerDisconnected",value:function(e){this.ledgerMap.delete(e.toString())}},{key:"_findOrCreate",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);if(r)return r;var n=new yV(e);return this.ledgerMap.set(t,n),this._stats&&this._stats.push(t,"peerCount",1),n}},{key:"start",value:function(){this._running=!0}},{key:"stop",value:function(){this._running=!1}}]),e}(),SV=function(e){return"unwant:".concat((0,gr.toString)(e.multihash.bytes,"base64"))},AV=function(e){return"block:".concat((0,gr.toString)(e.multihash.bytes,"base64"))},IV=function(e){St(r,e);var t=Rt(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this)).setMaxListeners(1e3),n._log=nV(e,"notif"),n}return(0,he.Z)(r,[{key:"hasBlock",value:function(e,t){var r=AV(e);this._log(r),this.emit(r,t)}},{key:"wantBlock",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Not a valid cid");var n=AV(e),a=SV(e);return this._log("wantBlock:".concat(e)),new Promise((function(i,s){var o=function(){t.removeListener(n,u),s(new Error("Block for ".concat(e," unwanted")))},u=function(e){t.removeListener(a,o),i(e)};t.once(a,o),t.once(n,u),r&&r.signal&&r.signal.addEventListener("abort",(function(){t.removeListener(n,u),t.removeListener(a,o),s(new Error("Want for ".concat(e," aborted")))}))}))}},{key:"unwantBlock",value:function(e){var t=SV(e);this._log(t),this.emit(t)}}]),r}(vP.EventEmitter),CV=__webpack_require__(6755),ZV=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this))._options=n,a._queue=[],a._stats={},a._frequencyLastTime=Date.now(),a._frequencyAccumulators={},a._movingAverages={},a._update=a._update.bind(Ct(a)),e.forEach((function(e){a._stats[e]=BigInt(0),a._movingAverages[e]={},a._options.movingAverageIntervals.forEach((function(t){(a._movingAverages[e][t]=CV(t)).push(a._frequencyLastTime,0)}))})),a._enabled=a._options.enabled,a}return(0,he.Z)(r,[{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._disabled=!0}},{key:"stop",value:function(){this._timeout&&clearTimeout(this._timeout)}},{key:"snapshot",get:function(){return Object.assign({},this._stats)}},{key:"movingAverages",get:function(){return Object.assign({},this._movingAverages)}},{key:"push",value:function(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}},{key:"_resetComputeTimeout",value:function(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}},{key:"_nextTimeout",value:function(){var e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}},{key:"_update",value:function(){if(this._timeout=null,this._queue.length){for(var e;this._queue.length;){var t=e=this._queue.shift();t&&this._applyOp(t)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}},{key:"_updateFrequency",value:function(e){var t=this,r=e-this._frequencyLastTime;r&&Object.keys(this._stats).forEach((function(n){t._updateFrequencyFor(n,r,e)})),this._frequencyLastTime=e}},{key:"_updateFrequencyFor",value:function(e,t,r){var n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;var a=n/t*1e3,i=this._movingAverages[e];i||(i=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((function(e){var t=i[e];t||(t=i[e]=CV(e)),t.push(r,a)}))}},{key:"_applyOp",value:function(e){var t=e[0],r=e[1];if("number"!==typeof r)throw new Error("invalid increment number: ".concat(r));Object.prototype.hasOwnProperty.call(this._stats,t)||(this._stats[t]=BigInt(0)),this._stats[t]=BigInt(this._stats[t])+BigInt(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}]),r}(vP.EventEmitter),RV={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[6e4,3e5,9e5]},TV=function(e){St(r,e);var t=Rt(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RV;(0,pe.Z)(this,r),n=t.call(this);var s=Object.assign({},RV,i);if("number"!==typeof s.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!==typeof s.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");return n._initialCounters=a,n._options=s,n._enabled=n._options.enabled,n._global=new ZV(a,s),n._global.on("update",(function(e){return n.emit("update",e)})),n._peers=CP({system:"ipfs",component:"bitswap",metric:"stats-peers",metrics:e.metrics}),n}return(0,he.Z)(r,[{key:"enable",value:function(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}},{key:"disable",value:function(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}},{key:"stop",value:function(){this._enabled=!1,this._global.stop();var e,t=(0,v.Z)(this._peers);try{for(t.s();!(e=t.n()).done;){e.value[1].stop()}}catch(Dy){t.e(Dy)}finally{t.f()}}},{key:"snapshot",get:function(){return this._global.snapshot}},{key:"movingAverages",get:function(){return this._global.movingAverages}},{key:"forPeer",value:function(e){var t="string"!==typeof e&&e.toString?e.toString():"".concat(e);return this._peers.get(t)}},{key:"push",value:function(e,t,r){if(this._enabled&&(this._global.push(t,r),e)){var n=this._peers.get(e);n||(n=new ZV(this._initialCounters,this._options),this._peers.set(e,n)),n.push(t,r)}}},{key:"disconnected",value:function(e){var t=e.toString(),r=this._peers.get(t);r&&(r.stop(),this._peers.delete(t))}}]),r}(vP.EventEmitter),DV={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},PV=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"],NV=function(e){St(r,e);var t=Rt(r);function r(e,n){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,pe.Z)(this,r),(a=t.call(this))._libp2p=e,a._log=nV(a.peerId),a._options=Object.assign({},DV,i),a._stats=new TV(e,PV,{enabled:a._options.statsEnabled,computeThrottleTimeout:a._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:a._options.statsComputeThrottleMaxQueueSize}),a.network=new hV(e,Ct(a),a._stats,{hashLoader:i.hashLoader}),a.blockstore=n,a.engine=new EV(a.peerId,n,a.network,a._stats,e),a.wm=new cV(a.peerId,a.network,a._stats,e),a.notifications=new IV(a.peerId),a.started=!1,a}return(0,he.Z)(r,[{key:"isStarted",value:function(){return this.started}},{key:"peerId",get:function(){return this._libp2p.peerId}},{key:"_receiveMessage",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a,i,s,o,u,c,l=this;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.engine.messageReceived(t,r);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this._log("failed to receive message",r);case 8:if(0!==r.blocks.size){e.next=10;break}return e.abrupt("return");case 10:n=[],a=(0,v.Z)(r.blocks.entries());try{for(a.s();!(i=a.n()).done;)s=(0,y.Z)(i.value,2),o=s[0],u=s[1],c=Ue.CID.parse(o),n.push({wasWanted:this.wm.wantlist.contains(c),cid:c,data:u})}catch(Dy){a.e(Dy)}finally{a.f()}return this.wm.cancelWants(n.filter((function(e){return e.wasWanted})).map((function(e){return e.cid}))),e.next=16,Promise.all(n.map((function(e){var r=e.cid,n=e.wasWanted,a=e.data;return l._handleReceivedBlock(t,r,a,n)})));case 16:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_handleReceivedBlock",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n,a){var i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._log("received block"),e.next=3,this.blockstore.has(r);case 3:if(i=e.sent,this._updateReceiveCounters(t.toString(),r,n,i),a){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.put(r,n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_updateReceiveCounters",value:function(e,t,r,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",r.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",r.length))}},{key:"_receiveError",value:function(e){this._log.error("ReceiveError: %s",e.message)}},{key:"_onPeerConnected",value:function(e){this.wm.connected(e)}},{key:"_onPeerDisconnected",value:function(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}},{key:"enableStats",value:function(){this._stats.enable()}},{key:"disableStats",value:function(){this._stats.disable()}},{key:"wantlistForPeer",value:function(e,t){return this.engine.wantlistForPeer(e)}},{key:"ledgerForPeer",value:function(e){return this.engine.ledgerForPeer(e)}},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n,a,i,s,o,u,c=this,l=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},n=function(e,t){return c.wm.wantBlocks([e],t),c.notifications.wantBlock(e,t)},a=!1,i=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.blockstore.get(t,r);case 3:return i=e.sent,e.abrupt("return",i);case 7:if(e.prev=7,e.t0=e.catch(0),"ERR_NOT_FOUND"===e.t0.code){e.next=11;break}throw e.t0;case 11:return a||(a=!0,c.network.findAndConnect(t,r).catch((function(e){return c._log.error(e)}))),e.abrupt("return",n(t,r));case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),s=new AbortController,o=r.signal?(0,Er.anySignal)([r.signal,s.signal]):s.signal,e.prev=6,e.next=9,Promise.race([this.notifications.wantBlock(t,{signal:o}),i(t,{signal:o})]);case 9:return u=e.sent,e.abrupt("return",u);case 11:return e.prev=11,s.abort(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[6,,11,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(e);case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,s=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==o.return){n.next=24;break}return n.next=24,pr(o.return());case 24:if(n.prev=24,!i){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"unwant",value:function(e){var t=this,r=Array.isArray(e)?e:[e];this.wm.unwantBlocks(r),r.forEach((function(e){return t.notifications.unwantBlock(e)}))}},{key:"cancelWants",value:function(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.blockstore.put(t,r);case 2:this._sendHaveBlockNotifications(t,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,o=hr(r.blockstore.putMany(e,t));case 4:return n.next=6,pr(o.next());case 6:if(!(a=!(u=n.sent).done)){n.next=14;break}return c=u.value,l=c.key,f=c.value,r._sendHaveBlockNotifications(l,f),n.next=11,{key:l,value:f};case 11:a=!1,n.next=4;break;case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(2),i=!0,s=n.t0;case 20:if(n.prev=20,n.prev=21,!a||null==o.return){n.next=25;break}return n.next=25,pr(o.return());case 25:if(n.prev=25,!i){n.next=28;break}throw s;case 28:return n.finish(25);case 29:return n.finish(20);case 30:case"end":return n.stop()}}),n,null,[[2,16,20,30],[21,,25,29]])})))()}},{key:"_sendHaveBlockNotifications",value:function(e,t){var r=this;this.notifications.hasBlock(e,t),this.engine.receivedBlocks([{cid:e,data:t}]),this.network.provide(e).catch((function(e){r._log.error("Failed to provide: %s",e.message)}))}},{key:"getWantlist",value:function(){return this.wm.wantlist.entries()}},{key:"peers",value:function(){return this.engine.peers()}},{key:"stat",value:function(){return this._stats}},{key:"start",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wm.start(),e.next=3,this.network.start();case 3:this.engine.start(),this.started=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._stats.stop(),this.wm.stop(),e.next=4,this.network.stop();case 4:this.engine.stop(),this.started=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unwrap",value:function(){return this.blockstore}}]),r}(xS),OV=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new NV(e,t,r)};function BV(e){return e=e||new Error("Not Found"),Ee(e,"ERR_NOT_FOUND")}function LV(e){return e=e||new Error("Aborted"),Ee(e,"ERR_ABORTED")}(0,le.Z)({},f);var MV=function(e){St(r,e);var t=Rt(r);function r(e,n){var a;return(0,pe.Z)(this,r),(a=t.call(this)).child=e,a.bitswap=n,a}return(0,he.Z)(r,[{key:"open",value:function(){return this.child.open()}},{key:"close",value:function(){return this.child.close()}},{key:"unwrap",value:function(){return this.child}},{key:"put",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){var n,a=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,this.has(t);case 3:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!this.bitswap.isStarted()){e.next=10;break}return e.next=8,this.bitswap.put(t,r,n);case 8:e.next=12;break;case 10:return e.next=12,this.child.put(t,r,n);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=Vc(e,function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.key,e.next=3,t.has(n);case 3:return e.abrupt("return",!e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!t.bitswap.isStarted()){n.next=5;break}return n.delegateYield(ia(hr(t.bitswap.putMany(a,r)),pr),"t0",3);case 3:n.next=6;break;case 5:return n.delegateYield(ia(hr(t.child.putMany(a,r)),pr),"t1",6);case 6:case"end":return n.stop()}}),n)})))()}},{key:"get",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.has(t);case 3:if(e.t0=!e.sent,!e.t0){e.next=6;break}e.t0=this.bitswap.isStarted();case 6:if(!e.t0){e.next=10;break}return e.abrupt("return",this.bitswap.get(t,r));case 10:return e.abrupt("return",this.child.get(t,r));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){var a,i;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=aA(),i=aA(),Promise.resolve().then((0,fe.Z)((0,ce.Z)().mark((function r(){var n,s,o,u,c,l;return(0,ce.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,s=!1,r.prev=2,u=hr(e);case 4:return r.next=6,u.next();case 6:if(!(n=!(c=r.sent).done)){r.next=21;break}return l=c.value,r.next=10,t.has(l);case 10:if(r.t0=!r.sent,!r.t0){r.next=13;break}r.t0=t.bitswap.isStarted();case 13:if(!r.t0){r.next=17;break}a.push(l),r.next=18;break;case 17:i.push(l);case 18:n=!1,r.next=4;break;case 21:r.next=27;break;case 23:r.prev=23,r.t1=r.catch(2),s=!0,o=r.t1;case 27:if(r.prev=27,r.prev=28,!n||null==u.return){r.next=32;break}return r.next=32,u.return();case 32:if(r.prev=32,!s){r.next=35;break}throw o;case 35:return r.finish(32);case 36:return r.finish(27);case 37:a.end(),i.end();case 39:case"end":return r.stop()}}),r,null,[[2,23,27,37],[28,,32,36]])})))),n.delegateYield(ia(hr(el(t.bitswap.getMany(a,r),t.child.getMany(i,r))),pr),"t0",4);case 4:case"end":return n.stop()}}),n)})))()}},{key:"delete",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.child.delete(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteMany",value:function(e,t){var r=this;return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(r.child.deleteMany(e,t)),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"has",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",this.child.has(t,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"query",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(t.child.query(e,r)),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"queryKeys",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function n(){return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(ia(hr(t.child.queryKeys(e,r)),pr),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}}]),r}(xS),UV=function(){function e(t,r,n,a,i){(0,pe.Z)(this,e),this.peerId=t,this.libp2p=r,this.bitswap=n,this.repo=a,this.blockstore=i}return(0,he.Z)(e,null,[{key:"start",value:function(){var t=(0,fe.Z)((0,ce.Z)().mark((function t(r){var n,a,i,s,o,u,c,l,f,p,h,d;return(0,ce.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.peerId,a=r.repo,i=r.print,s=r.hashers,o=r.options,!a.closed){t.next=4;break}return t.next=4,a.open();case 4:return t.next=6,a.config.getAll();case 6:return u=t.sent,t.next=9,Dz({options:o,repo:a,peerId:n,multiaddrs:jV(n,u),config:u,keychainConfig:void 0});case 9:if(!(c=t.sent).keychain){t.next=13;break}return t.next=13,c.loadKeychain();case 13:return t.next=15,c.start();case 15:l=(0,v.Z)(c.getMultiaddrs());try{for(l.s();!(f=l.n()).done;)p=f.value,i("Swarm listening on ".concat(p.toString()))}catch(Dy){l.e(Dy)}finally{l.f()}return h=OV(c,a.blocks,{statsEnabled:!0,hashLoader:s}),t.next=20,h.start();case 20:return d=new MV(a.blocks,h),a.blocks=d,a.pins.blockstore=d,t.abrupt("return",new e(n,c,h,a,d));case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.repo.blocks=t.blockstore.unwrap(),t.repo.pins.blockstore=t.blockstore.unwrap(),e.next=4,t.bitswap.stop();case 4:return e.next=6,t.libp2p.stop();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),jV=function(e,t){var r,n=e.toString(),a=[],i=t.Addresses&&t.Addresses.Swarm||[],s=(0,v.Z)(i);try{for(s.s();!(r=s.n()).done;){var o=r.value,u=new Lf(o);if(u.protoCodes().includes(FV))throw Ee(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");var c=u.getPeerId();c&&c!==n&&(u=u.encapsulate("/p2p/".concat(n))),a.push(u)}}catch(Dy){s.e(Dy)}finally{s.f()}return a},FV=479;var zV=(0,he.Z)((function e(t){var r=t.network;(0,pe.Z)(this,e),this.addrs=function(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},n=[],e.next=4,t.use(r);case 4:return a=e.sent,i=a.libp2p,e.next=8,i.peerStore.forEach((function(e){n.push({id:e.id,addrs:e.addresses.map((function(e){return e.multiaddr}))})}));case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({network:r}),this.connect=function(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.libp2p,e.next=7,i.dial(r,n);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({network:r}),this.disconnect=function(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.libp2p,e.next=7,i.hangUp(r);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({network:r}),this.localAddrs=function(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.use(r);case 3:return n=e.sent,a=n.libp2p,e.abrupt("return",a.getMultiaddrs());case 6:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({network:r}),this.peers=function(e){var t=e.network;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n,a,i,s,o,u,c,l,f,p,h,d,y=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,t.use(r);case 3:if(n=e.sent,a=n.libp2p,!r.verbose){e.next=10;break}i=[],s=(0,v.Z)(a.getConnections());try{for(s.s();!(o=s.n()).done;)u=o.value,c={addr:u.remoteAddr,peer:u.remotePeer},(r.verbose||r.direction)&&(c.direction=u.stat.direction),r.verbose&&(c.muxer=u.stat.multiplexer,c.latency="n/a",c.streams=[]),i.push(c)}catch(Dy){s.e(Dy)}finally{s.f()}return e.abrupt("return",i);case 10:l=new Map,f=(0,v.Z)(a.getConnections());try{for(f.s();!(p=f.n()).done;)h=p.value,d={addr:h.remoteAddr,peer:h.remotePeer},l.set(h.remotePeer.toString(),d)}catch(Dy){f.e(Dy)}finally{f.f()}return e.abrupt("return",Array.from(l.values()));case 14:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({network:r})})),VV={success:!0,time:0,text:""};var KV="/ipns/";function qV(e){var t;if(e.startsWith(KV)&&(e=e.substring(KV.length)),"1"!==e[0]&&"Q"!==e[0]||(e="z".concat(e)),"z"===e[0]&&(t=we.base58btc.decode(e)),"k"===e[0]&&(t=xl.base36.decode(e)),!t)throw new Error("Could not parse string");if(1!==t[0]&&114!==t[1]&&(t=(0,ba.concat)([[1,114],t])),40!==t.length)throw new Error("Incorrect length "+t.length);return(0,ba.concat)([(0,fr.fromString)(KV),t.subarray(2)])}var HV=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t,r,n){var a,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.use(n);case 2:if(null==(a=e.sent).libp2p.dht){e.next=7;break}return e.abrupt("return",a);case 7:return i=function(){var e=ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{from:r,name:"QUERY_ERROR",type:3,error:new lr("dht not enabled")};case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",{libp2p:{dht:{get:i,put:i,findProviders:i,findPeer:i,provide:i,getClosestPeers:i}}});case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();var WV=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new lr("pubsub not enabled");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),GV=ge.bind({ignoreUndefined:!0}),YV=_e("ipfs"),QV=function(){function e(t){var r=t.print,n=t.storage,a=t.codecs,i=t.options;(0,pe.Z)(this,e);var s=n.peerId,o=n.repo,u=n.keychain,c=zr.create(UV),l=jb(i.preload),f=function(){var e=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{recursive:!0},"string"===typeof t){e.next=3;break}throw new Error("Invalid arguments, domain must be a string");case 3:return t=Un(t),e.abrupt("return",Ln(t,r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Rr(e)}(),p=function(e){var t=e.network;return function(){var e=t.try();return null!=e&&Boolean(e.libp2p.isStarted())}}({network:c}),h=new ml(i),d=Object.values(nr.kq);(i.ipld&&i.ipld.hashers?i.ipld.hashers:[]).forEach((function(e){return d.push(e)})),this.hashers=new DI({hashers:d,loadHasher:i.ipld&&i.ipld.loadHasher});var y=Object.values(nr.gh);(i.ipld&&i.ipld.bases?i.ipld.bases:[]).forEach((function(e){return y.push(e)})),this.bases=new CI({bases:y,loadBase:i.ipld&&i.ipld.loadBase});var g=new fa({repo:o,codecs:a}),m=new _p({codecs:a,hashers:this.hashers,preload:l,repo:o}),b=new Zl({dns:f,ipns:h,repo:o,codecs:a,peerId:s,isOnline:p,keychain:u,options:i}),w=function(e){var t=e.repo,r=e.codecs,n=e.bases,a=e.name;function i(){return i=(0,fe.Z)((0,ce.Z)().mark((function e(i){var s,o,u,c,l,f,p,h,d,v,y,g,m,b,w,k,x,_,E,S,A,I,C,Z,R,T=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=T.length>1&&void 0!==T[1]?T[1]:{},vr.path(i)){e.next=3;break}throw new Error("invalid argument "+i);case 3:if(!vr.ipnsPath(i)){e.next=32;break}o=!1,u=!1,e.prev=6,l=hr(a.resolve(i,s));case 8:return e.next=10,l.next();case 10:if(!(o=!(f=e.sent).done)){e.next=16;break}p=f.value,i=p;case 13:o=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),u=!0,c=e.t0;case 22:if(e.prev=22,e.prev=23,!o||null==l.return){e.next=27;break}return e.next=27,l.return();case 27:if(e.prev=27,!u){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(22);case 32:if(h=i.split("/"),d=zn(h),v=d[1],y=d[2],g=d.slice(3),!s.cidBase){e.next=39;break}return e.next=36,n.getBase(s.cidBase);case 36:e.t1=e.sent,e.next=40;break;case 39:e.t1=void 0;case 40:if(m=e.t1,b=na(y),0!==g.length){e.next=45;break}return w=m?m.encoder.encode(b):y,e.abrupt("return","/".concat(v,"/").concat(w));case 45:k=Ue.CID.decode(b),i=g.join("/"),x=Fr(k,i,r,t,s),_=k,E=i,S=!1,A=!1,e.prev=52,C=hr(x);case 54:return e.next=56,C.next();case 56:if(!(S=!(Z=e.sent).done)){e.next=62;break}R=Z.value,Ue.CID.asCID(R.value)&&(_=R.value,E=R.remainderPath);case 59:S=!1,e.next=54;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(52),A=!0,I=e.t2;case 68:if(e.prev=68,e.prev=69,!S||null==C.return){e.next=73;break}return e.next=73,C.return();case 73:if(e.prev=73,!A){e.next=76;break}throw I;case 76:return e.finish(73);case 77:return e.finish(68);case 78:return e.abrupt("return","/ipfs/".concat(_.toString(m&&m.encoder)).concat(E?"/"+E:""));case 79:case"end":return e.stop()}}),e,null,[[6,18,22,32],[23,,27,31],[52,64,68,78],[69,,73,77]])}))),i.apply(this,arguments)}return Rr((function(e){return i.apply(this,arguments)}))}({repo:o,codecs:a,bases:this.bases,name:b}),k=new Tb({repo:o,codecs:a,hashers:this.hashers,preload:l}),x=Object.assign(function(e){var t=e.repo,r=e.codecs,n=e.resolve,a=e.preload;function i(){return i=ye((0,ce.Z)().mark((function e(i){var s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(s=d.length>1&&void 0!==d[1]?d[1]:{}).maxDepth){e.next=3;break}return e.abrupt("return");case 3:if(!s.edges||!s.format||s.format===Tl){e.next=5;break}throw new Error("Cannot set edges to true and also specify format");case 5:s.format=s.edges?Dl:s.format,"number"!==typeof s.maxDepth&&(s.maxDepth=s.recursive?1/0:1),s.timeout&&(o=new _r.TimeoutController(s.timeout),u=[o.signal],s.signal&&u.push(s.signal),s.signal=(0,Er.anySignal)(u)),c=Array.isArray(i)?i:[i],l=c.map((function(e){return Pl(a,e,s)})),f=(0,v.Z)(l),e.prev=11,f.s();case 13:if((p=f.n()).done){e.next=25;break}return h=p.value,e.prev=15,e.delegateYield(ia(hr(Nl(n,t,r,h,s)),pr),"t0",17);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(15),e.next=23,{ref:"",err:e.t1.message};case 23:e.next=13;break;case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(11),f.e(e.t2);case 30:return e.prev=30,f.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[11,27,30,33],[15,19]])}))),i.apply(this,arguments)}return function(e){return i.apply(this,arguments)}}({repo:o,codecs:a,resolve:w,preload:l}),{local:zl({repo:n.repo})}),_=new ym({preload:l,repo:o,options:i.EXPERIMENTAL,hashers:this.hashers}),E=_.add,S=_.addAll,A=_.cat,I=_.get,C=_.ls,Z=rx({repo:o,preload:l,hashers:this.hashers,options:i}),R=function(e){var t=e.preload,r=e.files,n=e.options,a=void 0===n?{}:n;if(a.interval=a.interval||3e4,!a.enabled){Fb("MFS preload disabled");var i=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{start:i,stop:i}}var s,o="",u=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var n,i;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.stat("/");case 3:if(n=e.sent,i=n.cid.toString(),o===i){e.next=10;break}return Fb("preloading updated MFS root ".concat(o," -> ").concat(n.cid)),e.next=9,t(n.cid);case 9:o=i;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Fb.error("failed to preload MFS root",e.t0);case 15:return e.prev=15,s=setTimeout(u,a.interval),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return{start:function(){return(0,fe.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.stat("/");case 2:t=e.sent,o=t.cid.toString(),Fb("monitoring MFS root ".concat(t.cid)),s=setTimeout(u,a.interval);case 6:case"end":return e.stop()}}),e)})))()},stop:function(){clearTimeout(s)}}}({files:Z,preload:l,options:i.preload});this.preload=l,this.name=b,this.ipns=h,this.pin=g,this.resolve=w,this.block=m,this.refs=x,this.start=function(e){var t=e.network,r=e.preload,n=e.peerId,a=e.keychain,i=e.repo,s=e.ipns,o=e.mfsPreload,u=e.print,c=e.hashers,l=e.options,f=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr.start(t,{peerId:n,repo:i,print:u,hashers:c,options:l});case 2:return f=e.sent,p=f.libp2p,e.next=6,Promise.all([s.startOnline({keychain:a,libp2p:p,peerId:n,repo:i}),r.start(),o.start()]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f}({network:c,peerId:s,repo:o,preload:l,ipns:h,mfsPreload:R,print:r,keychain:u,hashers:this.hashers,options:i}),this.stop=function(e){var t=e.network,r=e.preload,n=e.ipns,a=e.repo,i=e.mfsPreload,s=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.stop(),n.stop(),i.stop()]);case 2:return e.next=4,zr.stop(t);case 4:return e.next=6,a.close();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s}({network:c,preload:l,mfsPreload:R,ipns:h,repo:o}),this.dht=function(e){var t=e.network,r=e.repo,n=e.peerId,a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function a(){var i,s,o;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pr(HV(t,n,r));case 2:if(i=a.sent,s=i.libp2p,o=e instanceof Uint8Array?e:qV(e),null!=s.dht){a.next=7;break}throw Ee(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 7:return a.delegateYield(ia(hr(s.dht.get(o,r)),pr),"t0",8);case 8:case"end":return a.stop()}}),a)})))()},i=function(e,r,a){return ye((0,ce.Z)().mark((function i(){var s,o,u;return(0,ce.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,pr(HV(t,n,a));case 2:if(s=i.sent,o=s.libp2p,u=e instanceof Uint8Array?e:qV(e),null!=o.dht){i.next=7;break}throw Ee(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 7:return i.delegateYield(ia(hr(o.dht.put(u,r)),pr),"t0",8);case 8:case"end":return i.stop()}}),i)})))()},s=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function a(){var i,s;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pr(HV(t,n,r));case 2:if(i=a.sent,null!=(s=i.libp2p).dht){a.next=6;break}throw Ee(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 6:return a.delegateYield(ia(hr(s.dht.findProviders(e,{signal:r.signal})),pr),"t0",7);case 7:case"end":return a.stop()}}),a)})))()},o=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function a(){var i,s;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pr(HV(t,n,r));case 2:if(i=a.sent,null!=(s=i.libp2p).dht){a.next=6;break}throw Ee(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 6:return a.delegateYield(ia(hr(s.dht.findPeer(e,{signal:r.signal})),pr),"t0",7);case 7:case"end":return a.stop()}}),a)})))()},u=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return ye((0,ce.Z)().mark((function i(){var s,o;return(0,ce.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,pr(HV(t,n,a));case 2:return s=i.sent,o=s.libp2p,i.next=6,pr(r.blocks.has(e));case 6:if(i.sent){i.next=9;break}throw Ee(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");case 9:if(!a.recursive){i.next=11;break}throw Ee(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");case 11:if(null!=o.dht){i.next=13;break}throw Ee(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 13:return i.delegateYield(ia(hr(o.dht.provide(e)),pr),"t0",14);case 14:case"end":return i.stop()}}),i)})))()},c=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye((0,ce.Z)().mark((function a(){var i,s,o,u;return(0,ce.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pr(HV(t,n,r));case 2:if(i=a.sent,s=i.libp2p,u=Ue.CID.asCID(e),o=null!=u?u.multihash.bytes:$n(e.toString()).toBytes(),null!=s.dht){a.next=8;break}throw Ee(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 8:return a.delegateYield(ia(hr(s.dht.getClosestPeers(o,r)),pr),"t0",9);case 9:case"end":return a.stop()}}),a)})))()},l=i,f=s,p=o,h=u,d=c;return{get:Rr(a),put:Rr(l),findProvs:Rr(f),findPeer:Rr(p),provide:Rr(h),query:Rr(d)}}({network:c,repo:o,peerId:s}),this.pubsub=function(e){var t,r=e.network,n=e.config,a=Yc(n||{},"Pubsub.Enabled",!0),i={};return{subscribe:a?Rr((function(e,t){return s.apply(this,arguments)})):WV,unsubscribe:a?Rr((function(e,t){return o.apply(this,arguments)})):WV,publish:a?Rr((function(e,t){return u.apply(this,arguments)})):WV,ls:a?Rr((function(){return c.apply(this,arguments)})):WV,peers:a?Rr((function(e){return l.apply(this,arguments)})):WV};function s(){return s=(0,fe.Z)((0,ce.Z)().mark((function e(n,a){var s,o,u,c=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,r.use(s);case 3:o=e.sent,(u=o.libp2p).pubsub.subscribe(n),null==t&&(t=function(e){var t=e.detail;i[t.topic]&&i[t.topic].forEach((function(e){"function"!==typeof e?null!=e&&null!=e.handleEvent&&e.handleEvent(t):e(t)}))},u.pubsub.addEventListener("message",t)),null!=a&&(null==i[n]&&(i[n]=[]),i[n].push(a));case 8:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(){return o=(0,fe.Z)((0,ce.Z)().mark((function e(n,a){var s,o,u,c=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,r.use(s);case 3:o=e.sent,u=o.libp2p,null!=a&&null!=i[n]&&(i[n]=i[n].filter((function(e){return e!==a})),0===i[n].length&&delete i[n]),"function"!==typeof a&&delete i[n],null==i[n]&&u.pubsub.unsubscribe(n),0===Object.keys(i).length&&(u.pubsub.removeEventListener("message",t),t=void 0);case 9:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(){return u=(0,fe.Z)((0,ce.Z)().mark((function e(t,n){var a,i,s,o=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},e.next=3,r.use(a);case 3:if(i=e.sent,s=i.libp2p,n){e.next=7;break}throw Ee(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");case 7:return e.next=9,s.pubsub.publish(t,n);case 9:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function c(){return c=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,n,a,i=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,r.use(t);case 3:return n=e.sent,a=n.libp2p,e.abrupt("return",a.pubsub.getTopics());case 6:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(){return l=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,r.use(n);case 3:return a=e.sent,i=a.libp2p,e.abrupt("return",i.pubsub.getSubscribers(t));case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}}({network:c,config:i.config}),this.dns=f,this.isOnline=p,this.id=function(e){var t=e.peerId,r=e.network;function n(){return n=(0,fe.Z)((0,ce.Z)().mark((function e(){var n,a,i,s,o,u,c,l,f,p=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>0&&void 0!==p[0]?p[0]:{},a=r.try()){e.next=8;break}if(!n.peerId){e.next=5;break}throw new or;case 5:if(null!=t.publicKey){e.next=7;break}throw Ee(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");case 7:return e.abrupt("return",{id:t,publicKey:(0,gr.toString)(t.publicKey,"base64pad"),addresses:[],agentVersion:"js-ipfs/".concat(gm),protocolVersion:"9000",protocols:[]});case 8:return i=a.libp2p,s=n.peerId?n.peerId:t,e.next=12,km(s,i,n);case 12:return o=e.sent,u=(0,gr.toString)(o.metadata.get("AgentVersion")||new Uint8Array),c=(0,gr.toString)(o.metadata.get("ProtocolVersion")||new Uint8Array),l=o.id.toString(),f=o.publicKey?(0,gr.toString)(o.publicKey,"base64pad"):"",e.abrupt("return",{id:s,publicKey:f,addresses:(o.addresses||[]).map((function(e){var t=e.toString();return t.endsWith("/p2p/".concat(l))?t:"".concat(t,"/p2p/").concat(l)})).sort().map((function(e){return new Lf(e)})),agentVersion:u,protocolVersion:c,protocols:(o.protocols||[]).sort()});case 18:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return Rr((function(){return n.apply(this,arguments)}))}({network:c,peerId:s}),this.version=function(e){var t=e.repo;function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.next=3,t.version.get();case 3:return r=e.sent,e.abrupt("return",{version:gm,commit:mm,repo:"".concat(r),"ipfs-core":gm,"interface-ipfs-core":bm});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return Rr((function(){return r.apply(this,arguments)}))}({repo:o}),this.bitswap=new Kl({network:c}),this.bootstrap=new lp({repo:o}),this.config=function(e){var t=e.repo;return{getAll:Rr((function(){return r.apply(this,arguments)})),get:Rr((function(e,t){return n.apply(this,arguments)})),set:Rr((function(e,t,r){return a.apply(this,arguments)})),replace:Rr((function(e,t){return i.apply(this,arguments)})),profiles:{apply:Rr((function(e){return s.apply(this,arguments)})),list:Rr(Zm)}};function r(){return r=(0,fe.Z)((0,ce.Z)().mark((function e(){var r,n=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",t.config.getAll(r));case 2:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function n(){return(n=(0,fe.Z)((0,ce.Z)().mark((function e(r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("key argument is required")));case 2:return e.abrupt("return",t.config.get(r,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return a=(0,fe.Z)((0,ce.Z)().mark((function e(r,n,a){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.config.set(r,n,a));case 1:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function i(){return i=(0,fe.Z)((0,ce.Z)().mark((function e(r,n){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.config.replace(r,n));case 1:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function s(){return s=(0,fe.Z)((0,ce.Z)().mark((function e(r){var n,a,i,s,o,u=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:{dryRun:!1},a=n.dryRun,i=Im[r]){e.next=5;break}throw new Error("No profile with name '".concat(r,"' exists"));case 5:return e.prev=5,e.next=8,t.config.getAll(n);case 8:if(s=e.sent,o=JSON.parse(JSON.stringify(s)),o=i.transform(o),a){e.next=14;break}return e.next=14,t.config.replace(o,n);case 14:return delete s.Identity.PrivKey,delete o.Identity.PrivKey,e.abrupt("return",{original:s,updated:o});case 19:throw e.prev=19,e.t0=e.catch(5),Cm(e.t0),new Error("Could not apply profile '".concat(r,"' to config: ").concat(e.t0.message));case 23:case"end":return e.stop()}}),e,null,[[5,19]])}))),s.apply(this,arguments)}}({repo:o}),this.ping=function(e){var t=e.network;function r(){return r=ye((0,ce.Z)().mark((function e(r){var n,a,i,s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,pr(t.use());case 3:return a=e.sent,i=a.libp2p,n.count=n.count||10,e.next=8,pr(i.peerStore.get(r));case 8:if(s=e.sent,o=s&&s.id){e.next=17;break}return e.next=13,(0,le.Z)((0,le.Z)({},VV),{},{text:"Looking up peer ".concat(r)});case 13:return e.next=15,pr(i.peerRouting.findPeer(r));case 15:u=e.sent,o=u&&u.id;case 17:if(o){e.next=19;break}throw new Error("Peer was not found");case 19:return e.next=21,(0,le.Z)((0,le.Z)({},VV),{},{text:"PING ".concat(o.toString())});case 21:c=0,l=0,f=0;case 24:if(!(f<n.count)){e.next=42;break}return e.prev=25,e.next=28,pr(i.ping(o));case 28:return p=e.sent,l+=p,c++,e.next=33,(0,le.Z)((0,le.Z)({},VV),{},{time:p});case 33:e.next=39;break;case 35:return e.prev=35,e.t0=e.catch(25),e.next=39,(0,le.Z)((0,le.Z)({},VV),{},{success:!1,text:e.t0.toString()});case 39:f++,e.next=24;break;case 42:if(!c){e.next=46;break}return h=l/c,e.next=46,(0,le.Z)((0,le.Z)({},VV),{},{text:"Average latency: ".concat(h,"ms")});case 46:case"end":return e.stop()}}),e,null,[[25,35]])}))),r.apply(this,arguments)}return Rr((function(e){return r.apply(this,arguments)}))}({network:c}),this.add=E,this.addAll=S,this.cat=A,this.get=I,this.ls=C,this.dag=k,this.files=Z,this.key=new ix({keychain:u}),this.object=new lx({preload:l,codecs:a,repo:o}),this.repo=new dx({repo:o,hashers:this.hashers}),this.stats=new yx({repo:o,network:c}),this.swarm=new zV({network:c}),Object.defineProperty(this,"libp2p",{get:function(){var e=c.try();return e?e.libp2p:void 0}});var T=function(){return Promise.reject(Ee(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED"))},D=function(){var e=ye((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Ee(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();this.commands=T,this.diag={cmds:T,net:T,sys:T},this.log={level:T,ls:T,tail:D},this.mount=T,this.codecs=a}return(0,he.Z)(e,[{key:"init",value:function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new sr;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),JV=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,n;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pt({Data:new Me({type:"directory"}).marshal(),Links:[]}),e.next=3,t.block.put(r,{mhtype:"sha2-256",format:"dag-pb"});case 3:return n=e.sent,e.next=6,t.pin.add(n);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),XV=function(){return{start:!0,EXPERIMENTAL:{},preload:{enabled:!me.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}}};function $V(){return $V=(0,fe.Z)((0,ce.Z)().mark((function n(){var a,i,s,o,u,c,l,f,p,h,d=arguments;return(0,ce.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=d.length>0&&void 0!==d[0]?d[0]:{},a=GV(XV(),a),i=a.init||{},s={name:rr.identity.name,code:rr.identity.code,encode:function(e){return e},decode:function(e){return e}},o=Object.values(nr.QB),[e,t,r,tr,s].concat(a.ipld&&a.ipld.codecs||[]).forEach((function(e){return o.push(e)})),u=new RI({codecs:o,loadCodec:a.ipld&&a.ipld.loadCodec}),c=a.silent?YV:console.log,YV("creating repo"),n.next=11,Oz.start(c,u,a);case 11:return l=n.sent,YV("getting repo config"),n.next=15,l.repo.config.getAll();case 15:return f=n.sent,p=new QV({storage:l,print:c,codecs:u,options:(0,le.Z)((0,le.Z)({},a),{},{config:f})}),YV("starting preload"),n.next=20,p.preload.start();case 20:if(YV("starting storage"),p.ipns.startOffline(l),!l.isNew||i.emptyRepo){n.next=34;break}return n.next=25,JV(p);case 25:return h=n.sent,YV("adding default assets"),n.next=29,void p.addAll;case 29:if(YV("initializing IPNS keyspace"),null!=l.peerId.publicKey){n.next=32;break}throw Ee(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");case 32:return n.next=34,p.ipns.initializeKeyspace(l.peerId,(0,fr.fromString)("/ipfs/".concat(h)));case 34:if(!1===a.start){n.next=38;break}return YV("starting node"),n.next=38,p.start();case 38:return n.abrupt("return",p);case 39:case"end":return n.stop()}}),n)}))),$V.apply(this,arguments)}__webpack_require__(2596);var eK=function(){return $V.apply(this,arguments)},tK=function(){function e(){(0,pe.Z)(this,e),this.channel=new MessageChannel,this.initialized=!1,this.resolves=new Map}return(0,he.Z)(e,[{key:"call",value:function(e){var t=this;if(!this.initialized)return Promise.reject(new Error("Not initialized."));var r=(0,yr.nanoid)(),n={id:r,cmd:e},a=new Promise((function(e,n){t.channel.port1.addEventListener("message",(function a(i){if("disconnected"===i.data)t.initialized=!1,n(i);else if(i.data.id===r){var s=i.data,o=s.err,u=s.data;u?e(u):n(o||new Error("Empty event.")),t.channel.port1.removeEventListener("message",a)}})),t.channel.port1.start()}));return this.channel.port1.postMessage(n),a}},{key:"daemon",value:function(e,t){return this.call({entity:"daemon",action:e,args:t})}},{key:"wallet",value:function(e,t){return this.call({entity:"wallet",action:e,args:t})}},{key:"init",value:function(){var e=this;return this.initialized?Promise.reject(new Error("Already initialized.")):new Promise((function(t,r){var n=setTimeout((function(){e.initialized||r(new Error("Can't initialized."))}),1e3);e.channel.port1.addEventListener("message",(function(a){"initialized"===a.data?(e.initialized=!0,t()):(clearTimeout(n),r(new Error("Can't initialized.")))}),{once:!0}),e.channel.port1.start(),window.postMessage("init-dero-bridge","*",[e.channel.port2])}))}}]),e}(),rK=__webpack_require__(184),nK=h.createContext([{},function(){}]),aK=function(e){var t=(0,h.useState)({}),r=(0,y.Z)(t,2),n=r[0],a=r[1];return(0,rK.jsx)(nK.Provider,{value:[n,a],children:e.children})};var iK=function(e,t){return e.then((function(e){return[null,e]})).catch((function(e){return t&&Object.assign(e,t),[e,void 0]}))};var sK=function(){var e=h.useState(null),t=(0,y.Z)(e,2),r=(t[0],t[1],h.useRef()),n=h.useContext(nK),a=(0,y.Z)(n,2),i=a[0],s=a[1],o=h.useState((0,rK.jsx)("a",{href:"https://chrome.google.com/webstore/detail/dero-rpc-bridge/nmofcfcaegdplgbjnadipebgfbodplpd",target:"_blank",rel:"noopener noreferrer",children:"Not connected to extension. Download here."})),u=(0,y.Z)(o,2),c=u[0],l=u[1],f=h.useState(0),p=(0,y.Z)(f,2),d=p[0],v=p[1],g={island:"Concerned Friends of the Ozone",name:"Create a second ozone layer (just in case)",tagline:"consider the benefit",description:"We can do it gang!"},m=h.useCallback((0,fe.Z)((0,ce.Z)().mark((function e(){var t,n,a,i,o,u,c,l,f,p;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.current,e.next=3,iK(t.daemon("get-sc",{scid:"0000000000000000000000000000000000000000000000000000000000000001",keysstring:["keystore"]}));case 3:return n=e.sent,a=(0,y.Z)(n,2),a[0],i=a[1],o="80"+i.data.result.valuesstring[0].substring(2,64),e.next=10,iK(t.daemon("get-sc",{scid:o,keysstring:["k:private.islands.scid"]}));case 10:return u=e.sent,c=(0,y.Z)(u,2),c[0],l=c[1],f=l.data.result.valuesstring[0],s((function(e){return(0,le.Z)((0,le.Z)({},e),{},{scid:f})})),e.next=18,eK();case 18:p=e.sent,s((function(e){return(0,le.Z)((0,le.Z)({},e),{},{ipfs:p})}));case 20:case"end":return e.stop()}}),e)})))),b=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hi"),e.next=3,i.ipfs.add(JSON.stringify(g).toString());case 3:t=e.sent,r=t.cid,console.info(r.toString());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();h.useEffect((function(){var e=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,n,a;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.current=new tK,t=r.current,e.next=4,iK(t.init());case 4:n=e.sent,a=(0,y.Z)(n,1),a[0]?l((0,rK.jsx)("a",{href:"https://chrome.google.com/webstore/detail/dero-rpc-bridge/nmofcfcaegdplgbjnadipebgfbodplpd",target:"_blank",rel:"noopener noreferrer",children:"Not connected to extension. Download here."})):(l("rpc-bridge connected"),s((function(e){return(0,le.Z)((0,le.Z)({},e),{},{deroBridgeApiRef:r})})),m(),w());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("load",e),function(){return window.removeEventListener("load",e)}}),[]);var w=h.useCallback((0,fe.Z)((0,ce.Z)().mark((function e(){var t,n,a,i,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.current,e.next=3,iK(t.wallet("get-address",{}));case 3:n=e.sent,a=(0,y.Z)(n,2),i=a[0],o=a[1],console.log("get-address-error",i),console.log(o),null==i&&s((function(e){return(0,le.Z)((0,le.Z)({},e),{},{userAddress:o.data.result.address})}));case 10:case"end":return e.stop()}}),e)})))),k=h.useCallback((0,fe.Z)((0,ce.Z)().mark((function e(){var t,n,a,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.current,e.next=3,iK(t.wallet("get-balance",{scid:i.scid}));case 3:n=e.sent,a=(0,y.Z)(n,2),a[0],s=a[1],console.log("balance:",s.data.result.balance),v(s.data.result.balance);case 9:case"end":return e.stop()}}),e)}))));return h.useEffect((function(){k()}),[i.scid]),(0,rK.jsxs)("div",{className:"App",children:[(0,rK.jsxs)("div",{className:"navbar",children:[(0,rK.jsx)(oe,{to:"smokesignals?status=0",children:"Smoke Signals"}),(0,rK.jsx)(oe,{to:"about",children:"About"}),(0,rK.jsx)(oe,{to:"oao",children:"OAO"})]}),(0,rK.jsxs)("div",{className:"rpc-bridge-data",children:[c,(0,rK.jsxs)("h3",{children:["Coco Balance: ",d/1e5]})]}),(0,rK.jsx)("div",{className:"function",children:(0,rK.jsx)("button",{onClick:function(){return b()},children:"meta"})}),(0,rK.jsx)(Q,{})]})};function oK(){return h.useEffect((function(){console.log("refresh token")}),[]),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h1",{children:"Welcome to Private Islands"}),(0,rK.jsx)("h3",{children:"Our Mission"}),(0,rK.jsx)("p",{children:"We are building the world's most resilient support network. A place where people can come together to support projects without fear that their funds will be seized or their networks wiped. We've seen legacy platforms like Patreon ban users for differences of opinion. When this happens, creator-supporter relationships are deleted. Here on Private Islands, creator-supporter relationships are stored on the Dero blockchain. We've also seen legacy platforms like GoFundMe confiscate funds over differences of opinion. Here funds are either sent directly to their recipient, or in some cases they are held in a smart contract for a period of time. We've also seen how fundraising with Bitcoin is susceptible to blacklisting and confiscation. That's why we've decided to build on the only private chain with smart contracts, Dero."}),(0,rK.jsx)("h3",{children:"Where We're At"}),(0,rK.jsx)("p",{children:"This is version 0.7 of Private Islands. It is in alpha stage, and thus far has been put together by one man. It is a functional proof-of-concept. It is changing rapidly."}),(0,rK.jsx)("p",{children:"One of Dero's interesting features is mutable contracts. Many in crypto see immutability as a great virtue, and Dero does have that option too, but having the option for mutability during development is quite handy. The contract is still evolving at this stage. Apollo, the man mentioned earlier, has the ability to do those nasty things that legacy platforms have done. This will change, but for now you have to trust him. Don't worry, he's a good guy."}),(0,rK.jsx)("p",{children:"In version 0.7 you can start fundraisers. Supporters can make refundable or non-refundable donations. Non-refundable donations go straight to the recipient. Refundable donations only make it to the recipient if the fundraising goal is met on time. We call fundraisers smoke signals. We're doing an island theme."}),(0,rK.jsx)("p",{children:"You also have the ability to create subscription tiers and post exclusive content. Subscriptions can cost whatever you want over whatever interval you want. For example, 1 Dero per year or 100 Dero per day. Content is limited to text at the moment, but that text can include html, so you can post images that way. Just no file uploads yet. This content is stored on a central server accessible by apollo. The goal is to move to a private decentralized storage system. We're looking at SIA."}),(0,rK.jsx)("p",{children:"We're also in the process of implementing an experimental form of governance called an OAO. Similar to a DAO but instead of rule by committee it's rule by CEO with a board to keep him in check. The CEO is the only one who can withdraw treasury funds, but the board sets the allowance. The CEO can make changes to contract code, but board must approve it (this for now only applies to the governance contract itself, but if the DVM makes one simple update it will apply to the main contract too)."}),(0,rK.jsx)("h3",{children:"How Do I Start?"}),(0,rK.jsx)("p",{children:"In order to use this website you need two things."}),(0,rK.jsxs)("ol",{children:[(0,rK.jsx)("li",{children:"A Dero wallet running with the rpc-server turned on."}),(0,rK.jsx)("li",{children:(0,rK.jsx)("a",{href:"https://chrome.google.com/webstore/detail/dero-rpc-bridge/nmofcfcaegdplgbjnadipebgfbodplpd",target:"_blank",rel:"noopener noreferrer",children:"The Dero RPC Bridge Extension (only available for chromium-based browsers like Brave)"})})]}),(0,rK.jsx)("p",{children:"Once you have those, you can subscribe to private island subscription tiers to see their exclusive content. If you'd like to claim your own island, you'll need some coco tokens. It costs 10 coco to claim your island, 1 coco to launch smoke signal fundraisers, and 1 coco to add or modify subscription tiers. Everything else including publishing and editing exclusive content is free. You also earn coco each time you support another island."})]})}function uK(e){var t=new Date(1e3*e.deadline),r=(t.getMonth()+1).toString()+"/"+t.getDate().toString();return(0,rK.jsxs)("div",{className:"ProfileCard",children:[(0,rK.jsx)("h1",{children:e.name}),(0,rK.jsxs)("h3",{children:["Initiated by ",e.profile]}),(0,rK.jsx)("img",{src:e.image}),(0,rK.jsx)("p",{children:e.tagline}),(0,rK.jsxs)("p",{children:["Goal:",e.goal," Dero by ",r," "]}),(0,rK.jsx)("b",{children:"Click to See More"})]})}var cK=__webpack_require__(9517),lK=__webpack_require__.n(cK);function fK(){var e=h.useContext(nK),t=(0,y.Z)(e,2),r=t[0],n=(t[1],h.useState([])),a=(0,y.Z)(n,2),i=a[0],s=a[1],o=function(e){var t=(0,h.useRef)(ue(e)),r=q(),n=(0,h.useMemo)((function(){var e,n=ue(r.search),a=(0,v.Z)(t.current.keys());try{var i=function(){var r=e.value;n.has(r)||t.current.getAll(r).forEach((function(e){n.append(r,e)}))};for(a.s();!(e=a.n()).done;)i()}catch(Dy){a.e(Dy)}finally{a.f()}return n}),[r.search]),a=H();return[n,(0,h.useCallback)((function(e,t){a("?"+ue(e),t)}),[a])]}(),u=(0,y.Z)(o,2),c=u[0],l=u[1];function f(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}var p=h.useCallback((0,fe.Z)((0,ce.Z)().mark((function e(){var t,n,a,o,u,c,l,p,h,d,v,g,m,b,w,k;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.deroBridgeApiRef.current,e.next=3,iK(t.daemon("get-sc",{scid:r.scid,code:!1,variables:!0}));case 3:n=e.sent,a=(0,y.Z)(n,2),o=a[0],u=a[1],c=new RegExp(".*_M"),console.log("search",c),l=u.data.result.stringkeys,p=Object.keys(l).filter((function(e){return c.test(e)})).map((function(e){return[f(l[e]),l[e.substring(0,66)+"Deadline"],l[e.substring(0,66)+"Goal"],l[e.substring(0,66)+"Raised"],l[e.substring(0,66)+"Fundee"],l[e.substring(0,66)+"Claimed"],e.substring(0,65)]})),console.log("hash array",p),h=0;case 13:if(!(h<p.length)){e.next=55;break}d=!1,v=!1,e.prev=16,m=hr(r.ipfs.cat(p[h][0].toString()));case 18:return e.next=20,m.next();case 20:if(!(d=!(b=e.sent).done)){e.next=36;break}if(w=b.value,k=JSON.parse(w.toString()),lK()(k.island).toString()==p[h][6].substring(0,64)){e.next=25;break}return e.abrupt("return");case 25:k.index=p[h][6].substring(64,65),k.deadline=p[h][1],k.goal=p[h][2]/1e5,k.raised=p[h][3],k.fundee=p[h][4],k.claimed=p[h][5],k.deadline>(new Date).getTime()/1e3?k.status=0:k.deadline<(new Date).getTime()/1e3&&k.goal<k.raised?k.status=1:k.deadline<(new Date).getTime()/1e3&&k.goal>k.raised&&(k.status=2),s([].concat(Vt(i),[k]));case 33:d=!1,e.next=18;break;case 36:e.next=42;break;case 38:e.prev=38,e.t0=e.catch(16),v=!0,g=e.t0;case 42:if(e.prev=42,e.prev=43,!d||null==m.return){e.next=47;break}return e.next=47,m.return();case 47:if(e.prev=47,!v){e.next=50;break}throw g;case 50:return e.finish(47);case 51:return e.finish(42);case 52:h++,e.next=13;break;case 55:console.log(o),console.log(u);case 57:case"end":return e.stop()}}),e,null,[[16,38,42,52],[43,,47,51]])}))));h.useEffect((function(){p()}),[r.ipfs]);var d=i.map((function(e){if((!c.get("status")||e.status==c.get("status"))&&(!c.get("island")||e.island==c.get("island")))return(0,rK.jsx)("div",{className:"function",children:(0,rK.jsx)(oe,{to:"/island/".concat(e.island,"/smokesignal/").concat(e.index),children:(0,rK.jsx)(uK,{image:e.image,index:e.index,goal:e.goal,deadline:e.deadline,profile:e.island,name:e.name,tagline:e.tagline})})})}));return(0,rK.jsx)("div",{children:(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h1",{children:"Smoke Signals"}),(0,rK.jsx)("div",{className:"status-selector",children:(0,rK.jsxs)("ul",{children:[(0,rK.jsx)("li",{className:"status-selector-option",onClick:function(){return l({status:0})},children:"Active"}),(0,rK.jsx)("li",{onClick:function(){return l({status:1})},children:"Successes"}),(0,rK.jsx)("li",{onClick:function(){return l({status:2})},children:"Failures"})]})}),d]})})}function pK(){var e=h.useState({}),t=(0,y.Z)(e,2),r=t[0],n=(t[1],function(){var e=(0,h.useContext)(C).matches,t=e[e.length-1];return t?t.params:{}}()),a=n.island,i=n.index,s=h.useContext(nK),o=(0,y.Z)(s,2),u=o[0],c=(o[1],h.useState(-1)),l=(0,y.Z)(c,2),f=l[0],p=l[1],d=h.useCallback((0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,n,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.deroBridgeApiRef.current,e.next=3,iK(t.daemon("get-sc",{scid:u.scid,keysstring:["18d824b7c5d6e73048bfba5ee086a4ad1ba8bd9b003610791bf431449b40cea7"+i+"_M",lK()(a)+i+"_Goal"]}));case 3:r=e.sent,n=(0,y.Z)(r,2),n[0],s=n[1],console.log(s);case 8:case"end":return e.stop()}}),e)})))),v=h.useCallback((0,fe.Z)((0,ce.Z)().mark((function e(){var t,r,a,i,s,o,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.deroBridgeApiRef.current,e.next=3,iK(t.daemon("get-sc",{scid:u.scid,code:!1,variables:!0}));case 3:return r=e.sent,a=(0,y.Z)(r,2),a[0],i=a[1],s=i.data.result.stringkeys,o=lK()(n.island)+n.index+"_Raised",c=s[o],console.log("avail",c),p(c/1e5),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))),g=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,a,i,s;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=lK()(n.island).toString(),a=u.deroBridgeApiRef.current,e.next=5,iK(a.wallet("start-transfer",{scid:u.scid,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"WithdrawFromFundraiser"},{name:"Hash",datatype:"S",value:r},{name:"Index",datatype:"U",value:parseInt(n.index)}]}));case 5:i=e.sent,s=(0,y.Z)(i,2),s[0],s[1];case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var r,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=lK()(n.island)+n.index,a=t.target.refundable.checked?1:0,i=u.deroBridgeApiRef.current,e.next=6,iK(i.wallet("start-transfer",{scid:u.scid,ringsize:2,transfers:[{burn:parseInt(1e5*t.target.amount.value),destination:u.randomAddress}],sc_rpc:[{name:"entrypoint",datatype:"S",value:"SupportGoal"},{name:"HashAndIndex",datatype:"S",value:r},{name:"Refundable",datatype:"U",value:a}]}));case 6:s=e.sent,o=(0,y.Z)(s,2),o[0],o[1];case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=new Date(1e3*r.deadline),w=(b.getMonth()+1).toString()+"/"+b.getDate().toString()+"/"+b.getUTCFullYear().toString();return h.useEffect((function(){console.log("executed only once!"),v(),d()}),[""]),(0,rK.jsx)("div",{className:"function",children:(0,rK.jsxs)("div",{className:"profile",children:[(0,rK.jsx)("img",{src:r.image}),(0,rK.jsx)("h1",{children:r.name}),(0,rK.jsx)("h3",{children:r.tagline}),(0,rK.jsxs)("h3",{children:["Goal: ",r.goal," Dero by ",w]}),(0,rK.jsxs)("h3",{children:["Progress: ",-1!=f?f:(0,rK.jsx)("b",{className:"availabilityCheck",onClick:function(){return v()},children:" check"}),"/",r.goal]}),(0,rK.jsx)("h3",{children:r.description}),0==r.status?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsxs)("form",{onSubmit:m,children:[(0,rK.jsx)("input",{id:"amount",placeholder:"Dero amount to donate",type:"text"}),(0,rK.jsx)("label",{htmlFor:"refundable",children:"Refundable?"}),(0,rK.jsx)("input",{id:"refundable",type:"checkbox"}),(0,rK.jsx)("button",{type:"submit",children:"Support"})]}),(0,rK.jsx)("p",{children:"If the goal has been met, owner can withdraw to fundee"}),(0,rK.jsx)("form",{onSubmit:g,children:(0,rK.jsx)("button",{type:"submit",children:"Withdraw"})})]}):1==r.status?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:"This Smoke Signal has met its fundraiser goal! If you are the owner, you can withdraw the funds to the fundee now."}),(0,rK.jsx)("form",{onSubmit:g,children:(0,rK.jsx)("button",{type:"submit",children:"Withdraw"})})]}):2==r.status?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:"This Smoke Signal failed to meet its goal. If you made a refundable donation, you can withdraw those funds now."}),(0,rK.jsx)("form",{onSubmit:g,children:(0,rK.jsx)("button",{type:"submit",children:"Withdraw"})})]}):""]})})}function hK(){var e=h.useContext(nK),t=(0,y.Z)(e,2),r=t[0],n=t[1],a=h.useState(0),i=(0,y.Z)(a,2),s=i[0],o=i[1],u=h.useState(""),c=(0,y.Z)(u,2),l=c[0],f=c[1],p=h.useState(null),d=(0,y.Z)(p,2),v=d[0],g=d[1],m=h.useState(null),b=(0,y.Z)(m,2),w=b[0],k=b[1],x=h.useState(null),_=(0,y.Z)(x,2),E=_[0],S=_[1],A=h.useState(null),I=(0,y.Z)(A,2),C=I[0],Z=I[1],R=h.useState(null),T=(0,y.Z)(R,2),D=T[0],P=T[1],N=h.useState(null),O=(0,y.Z)(N,2),B=O[0],L=O[1],M=h.useState(null),U=(0,y.Z)(M,2),j=U[0],F=U[1],z=h.useState(null),V=(0,y.Z)(z,2),K=V[0],q=V[1],H=h.useState(null),W=(0,y.Z)(H,2),G=W[0],Y=W[1];function Q(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}var J=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));case 4:return a=e.sent,i=(0,y.Z)(a,2),s=i[0],o=i[1],u=o.data.result.stringkeys.vacantSeats,console.log(s),console.log(o),console.log(u),g(u),e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),X=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u,c,l,f,p,h,d,v,g;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));case 4:a=e.sent,i=(0,y.Z)(a,2),s=i[0],o=i[1],u=t.target.index.value,c="vote_"+u+"_type",l=o.data.result.stringkeys[c],f="vote_"+t.target.index.value+"_status",p=o.data.result.stringkeys[f],h="vote_"+u+"_amountOrSeat",d=o.data.result.stringkeys[h],v="vote_"+u+"_address",g=Q(o.data.result.stringkeys[v]),console.log(s),console.log(o),console.log(p),console.log(l),console.log(d),console.log(g),P(p),k(l),S(d),Z(g);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));case 4:a=e.sent,i=(0,y.Z)(a,2),i[0],s=i[1],o=t.target.asset.value,u="weeklyAllowance_"+o,c=s.data.result.stringkeys[u]/1e5,L(o),F(c);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ee=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("derobridgeee",r),n=r.deroBridgeApiRef.current,e.next=5,iK(n.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));case 5:a=e.sent,i=(0,y.Z)(a,2),i[0],s=i[1],o=t.target.asset.value,u=0,u="DERO"===o?"0000000000000000000000000000000000000000000000000000000000000000":o,c=s.data.result.balances[u]/1e5,q(c),Y(o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"TransferSeat"},{name:"id",datatype:"U",value:parseInt(t.target.id.value)},{name:"address",datatype:"S",value:t.target.address.value}]}));case 4:a=e.sent,i=(0,y.Z)(a,2),s=i[0],o=i[1],console.log(s),console.log(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=0,n=t.target.aos?t.target.aos.value:0,a="",a=t.target.address?t.target.address.value:"",4==t.target.motion.value?n*=1e5:5==t.target.motion.value&&(a=lK()(a).toString(),console.log(a)),i=r.deroBridgeApiRef.current,e.next=9,iK(i.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"OpenVote"},{name:"motion",datatype:"U",value:parseInt(t.target.motion.value)},{name:"address",datatype:"S",value:a},{name:"amountOrSeat",datatype:"U",value:parseInt(n)}]}));case 9:s=e.sent,o=(0,y.Z)(s,2),u=o[0],c=o[1],console.log(u),console.log(c);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ne=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"CastVote"},{name:"voteIndex",datatype:"U",value:parseInt(t.target.voteIndex.value)},{name:"voterID",datatype:"U",value:parseInt(t.target.voterID.value)},{name:"opinion",datatype:"U",value:parseInt(t.target.opinion.value)}]}));case 4:a=e.sent,i=(0,y.Z)(a,2),s=i[0],o=i[1],console.log(s),console.log(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"CloseVote"},{name:"voteIndex",datatype:"U",value:parseInt(t.target.voteIndex.value)}]}));case 4:a=e.sent,i=(0,y.Z)(a,2),s=i[0],o=i[1],console.log(s),console.log(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(){var t,r;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/refresh");case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,console.log("refresh says token is",r.accessToken),n((function(e){return(0,le.Z)((0,le.Z)({},e),{},{token:r.accessToken})})),n((function(e){return(0,le.Z)((0,le.Z)({},e),{},{loggedIn:!0})})),e.abrupt("return",r.accessToken);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h.useEffect((function(){console.log("refresh token"),ie()}),[]),(0,rK.jsx)("div",{children:(0,rK.jsx)("div",{className:"function",children:(0,rK.jsxs)("div",{children:[(0,rK.jsx)("h1",{children:" Board Functions "}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Open Vote "}),(0,rK.jsxs)("form",{onSubmit:re,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID "}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Motion "}),(0,rK.jsxs)("select",{onChange:function(e){o(e.target.value)},id:"motion",name:"motion",children:[(0,rK.jsx)("option",{value:"0",children:"Hire CEO"}),(0,rK.jsx)("option",{value:"1",children:"Fire CEO"}),(0,rK.jsx)("option",{value:"2",children:"Add Board Member"}),(0,rK.jsx)("option",{value:"3",children:"Remove Board Member"}),(0,rK.jsx)("option",{value:"4",children:"Set CEO's Weekly Allowance"}),(0,rK.jsx)("option",{value:"5",children:"Approve OAO Code Update"})]}),0==s||1==s?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:"CEO Address"}),(0,rK.jsx)("input",{id:"address",type:"text"})]}):2==s||3==s?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:"Board Member Address"}),(0,rK.jsx)("input",{id:"address",type:"text"}),(0,rK.jsx)("p",{children:"Board Seat ID"}),(0,rK.jsx)("input",{id:"aos",type:"text"})]}):4==s?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:'Asset SCID (or "DERO")'}),(0,rK.jsx)("input",{id:"address",type:"text"}),(0,rK.jsx)("p",{children:"New Weekly Allowance"}),(0,rK.jsx)("input",{id:"aos",type:"text"})]}):5==s?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:"New Code"}),(0,rK.jsx)("textarea",{placeholder:"Enter New Code Here",rows:"44",cols:"80",id:"address"})]}):"",(0,rK.jsx)("button",{type:"submit",children:"Open Vote"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Cast Vote"}),(0,rK.jsxs)("form",{onSubmit:ne,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Vote Index"}),(0,rK.jsx)("input",{id:"voteIndex",type:"text"}),(0,rK.jsx)("p",{children:"Voter ID "}),(0,rK.jsx)("input",{id:"voterID",type:"text"}),(0,rK.jsxs)("select",{id:"opinion",name:"opinion",children:[(0,rK.jsx)("option",{value:"0",children:" no "}),(0,rK.jsx)("option",{value:"1",children:" yes"})]}),(0,rK.jsx)("button",{type:"submit",children:"Cast Vote"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Close Vote"}),(0,rK.jsxs)("form",{onSubmit:ae,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Vote Index"}),(0,rK.jsx)("input",{id:"voteIndex",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Close Vote"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Transfer Seat"}),(0,rK.jsxs)("form",{onSubmit:te,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Seat ID"}),(0,rK.jsx)("input",{id:"id",type:"text"}),(0,rK.jsx)("p",{children:"Address"}),(0,rK.jsx)("input",{id:"address",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Transfer Seat"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:"Check Contract Balance"}),(0,rK.jsxs)("h4",{children:["Balance is ",K," ",G]}),(0,rK.jsxs)("form",{onSubmit:ee,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Asset"}),(0,rK.jsx)("input",{id:"asset",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Check Balance"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Check Vote"}),(0,rK.jsxs)("p",{children:[" Motion to ",0===w?"hire "+C+" as new CEO":1===w?"fire CEO":2===w?"add "+C+" as board member "+E:3===w?"remove "+C+" from seat "+E:4===w?"set weekly allowance of "+C+" to "+E/1e5:"Update OAO Contract code. Hash of proposed code is: "+C,0===D?": Open":1===D?": Passed":2===D?": Rejected":""]}),(0,rK.jsxs)("form",{onSubmit:X,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Vote Index"}),(0,rK.jsx)("input",{id:"index",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Check Vote"})]}),5===w?(0,rK.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(lK()(e.target.code.value).toString())},children:[(0,rK.jsxs)("p",{children:["Hash:",l," "]}),(0,rK.jsx)("textarea",{placeholder:"Enter New Code Here",rows:"44",cols:"80",id:"code"}),(0,rK.jsx)("button",{type:"submit",children:"Check Hash"})]}):""]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Check Weekly Allowance"}),(0,rK.jsxs)("p",{children:["Allowance for ",B," is ",j]}),(0,rK.jsxs)("form",{onSubmit:$,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Asset"}),(0,rK.jsx)("input",{id:"asset",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Check Allowance"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:"Vacant Seats"}),(0,rK.jsx)("h4",{children:v}),(0,rK.jsxs)("form",{onSubmit:J,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Check Vacancy"})]})]})]})})})}function dK(){var e=h.useContext(nK),t=(0,y.Z)(e,2),r=t[0],n=(t[1],h.useState(0)),a=(0,y.Z)(n,2),i=a[0],s=a[1],o=h.useState(null),u=(0,y.Z)(o,2),c=(u[0],u[1],h.useState(null)),l=(0,y.Z)(c,2),f=l[0],p=l[1],d=h.useState(null),v=(0,y.Z)(d,2),g=v[0],m=v[1],b=h.useState(null),w=(0,y.Z)(b,2),k=w[0],x=w[1],_=h.useState(null),E=(0,y.Z)(_,2),S=E[0],A=E[1],I=h.useState(null),C=(0,y.Z)(I,2),Z=C[0],R=C[1],T=h.useState(null),D=(0,y.Z)(T,2),P=D[0],N=D[1],O=h.useState(null),B=(0,y.Z)(O,2),L=B[0],M=B[1],U=h.useState(null),j=(0,y.Z)(U,2),F=j[0],z=j[1];function V(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}var K=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u,c,l,f,h,d,v,g,b;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));case 4:a=e.sent,i=(0,y.Z)(a,2),s=i[0],o=i[1],u=t.target.index.value,c="vote_"+u+"_type",l=o.data.result.stringkeys[c],f="vote_"+t.target.index.value+"_status",h=o.data.result.stringkeys[f],d="vote_"+u+"_amountOrSeat",v=o.data.result.stringkeys[d],g="vote_"+u+"_address",b=V(o.data.result.stringkeys[g]),console.log(s),console.log(o),console.log(h),console.log(l),console.log(v),console.log(b),A(h),p(l),m(v),x(b);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));case 4:a=e.sent,i=(0,y.Z)(a,2),i[0],s=i[1],o=t.target.asset.value,u="weeklyAllowance_"+o,c=s.data.result.stringkeys[u]/1e5,R(o),N(c);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("derobridgeee",r),n=r.deroBridgeApiRef.current,e.next=5,iK(n.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));case 5:a=e.sent,i=(0,y.Z)(a,2),i[0],s=i[1],o=t.target.asset.value,u=0,u="DERO"===o?"0000000000000000000000000000000000000000000000000000000000000000":o,c=s.data.result.balances[u]/1e5,M(c),z(o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u,c;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=0,n=t.target.aos?t.target.aos.value:0,a="",a=t.target.address?t.target.address.value:"",4==t.target.motion.value?n*=1e5:5==t.target.motion.value&&(a=lK()(a).toString(),console.log(a)),i=r.deroBridgeApiRef.current,e.next=9,iK(i.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"OpenVote"},{name:"motion",datatype:"U",value:parseInt(t.target.motion.value)},{name:"address",datatype:"S",value:a},{name:"amountOrSeat",datatype:"U",value:parseInt(n)}]}));case 9:s=e.sent,o=(0,y.Z)(s,2),u=o[0],c=o[1],console.log(u),console.log(c);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.deroBridgeApiRef.current,e.next=4,iK(n.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"Withdraw"},{name:"asset",datatype:"S",value:t.target.asset.value},{name:"amount",datatype:"U",value:parseInt(t.target.amount.value)}]}));case 4:a=e.sent,i=(0,y.Z)(a,2),s=i[0],o=i[1],console.log(s),console.log(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=h.useCallback(function(){var e=(0,fe.Z)((0,ce.Z)().mark((function e(t){var n,a,i,s,o,u;return(0,ce.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.code.value,a=r.deroBridgeApiRef.current,e.next=5,iK(a.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,fees:1e5,sc_rpc:[{name:"entrypoint",datatype:"S",value:"Update"},{name:"code",datatype:"S",value:n}]}));case 5:i=e.sent,s=(0,y.Z)(i,2),o=s[0],u=s[1],console.log(o),console.log(u);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return(0,rK.jsx)("div",{children:(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsxs)("div",{children:[(0,rK.jsx)("h1",{children:" Board Functions "}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Open Vote "}),(0,rK.jsxs)("form",{onSubmit:W,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID "}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Motion "}),(0,rK.jsxs)("select",{onChange:function(e){s(e.target.value)},id:"motion",name:"motion",children:[(0,rK.jsx)("option",{value:"0",children:"Hire CEO"}),(0,rK.jsx)("option",{value:"1",children:"Fire CEO"}),(0,rK.jsx)("option",{value:"2",children:"Add Board Member"}),(0,rK.jsx)("option",{value:"3",children:"Remove Board Member"}),(0,rK.jsx)("option",{value:"4",children:"Set CEO's Weekly Allowance"}),(0,rK.jsx)("option",{value:"5",children:"Approve OAO Code Update"})]}),0==i||1==i?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:"CEO Address"}),(0,rK.jsx)("input",{id:"address",type:"text"})]}):2==i||3==i?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:"Board Member Address"}),(0,rK.jsx)("input",{id:"address",type:"text"}),(0,rK.jsx)("p",{children:"Board Seat ID"}),(0,rK.jsx)("input",{id:"aos",type:"text"})]}):4==i?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:'Asset SCID (or "DERO")'}),(0,rK.jsx)("input",{id:"address",type:"text"}),(0,rK.jsx)("p",{children:"New Weekly Allowance"}),(0,rK.jsx)("input",{id:"aos",type:"text"})]}):5==i?(0,rK.jsxs)(rK.Fragment,{children:[(0,rK.jsx)("p",{children:"Sha256 of New Code"}),(0,rK.jsx)("textarea",{placeholder:"Enter New Code Here",rows:"44",cols:"80",id:"address"})]}):"",(0,rK.jsx)("button",{type:"submit",children:"Open Vote"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:"Check Contract Balance"}),(0,rK.jsxs)("h4",{children:["Balance is ",L," ",F]}),(0,rK.jsxs)("form",{onSubmit:H,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Asset"}),(0,rK.jsx)("input",{id:"asset",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Check Balance"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Check Vote"}),(0,rK.jsxs)("p",{children:[" Motion to ",0===f?"hire "+k+" as new CEO":1===f?"fire CEO":2===f?"add "+k+" as board member "+g:3===f?"remove "+k+" from seat "+g:"set weekly allowance of "+k+" to "+g/1e5,0===S?": Open":1===S?": Passed":2===S?": Rejected":""]}),(0,rK.jsxs)("form",{onSubmit:K,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Vote Index"}),(0,rK.jsx)("input",{id:"index",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Check Vote"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Check Weekly Allowance"}),(0,rK.jsxs)("p",{children:["Allowance for ",Z," is ",P]}),(0,rK.jsxs)("form",{onSubmit:q,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Asset"}),(0,rK.jsx)("input",{id:"asset",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Check Allowance"})]})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Withdraw Funds "}),(0,rK.jsxs)("form",{onSubmit:G,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"Asset"}),(0,rK.jsx)("input",{id:"asset",type:"text"}),(0,rK.jsx)("p",{children:"Amount"}),(0,rK.jsx)("input",{id:"amount",type:"text"}),(0,rK.jsx)("button",{type:"submit",children:"Withdraw"})]})]}),(0,rK.jsxs)("div",{className:"function",children:[(0,rK.jsx)("h3",{children:" Update OAO Code "}),(0,rK.jsxs)("form",{onSubmit:Y,children:[(0,rK.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,rK.jsx)("input",{id:"scid",type:"text"}),(0,rK.jsx)("p",{children:"New Code"}),(0,rK.jsx)("textarea",{placeholder:"Enter New Code Here",rows:"44",cols:"80",id:"code"}),(0,rK.jsx)("button",{type:"submit",children:"Update"})]})]})]})})}d.render((0,rK.jsx)(aK,{children:(0,rK.jsx)(ie,{children:(0,rK.jsx)($,{className:"main",children:(0,rK.jsxs)(J,{path:"/",element:(0,rK.jsx)(sK,{}),children:[(0,rK.jsx)(J,{path:"/about",element:(0,rK.jsx)(oK,{})}),(0,rK.jsx)(J,{path:"/island/:island/smokesignal/:index",element:(0,rK.jsx)(pK,{})}),(0,rK.jsx)(J,{path:"about",element:(0,rK.jsx)(oK,{})}),(0,rK.jsx)(J,{path:"smokesignals",element:(0,rK.jsx)(fK,{})}),(0,rK.jsx)(J,{path:"/oao",element:(0,rK.jsx)(hK,{})}),(0,rK.jsx)(J,{path:"/ceo",element:(0,rK.jsx)(dK,{})})]})})})}),document.getElementById("root"))}()})();
//# sourceMappingURL=main.88793f33.js.map